<html lang="en">
<head>
<title>The GNU Awk User's Guide</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="The GNU Awk User's Guide">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
Copyright (C) 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009, 2010, 2011, 2012
Free Software Foundation, Inc.



   This is Edition 4 of `GAWK: Effective AWK Programming: A User's Guide for GNU Awk',
for the 4.0.2 (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
``GNU Free Documentation License''.
  a. ``A GNU Manual''

  b. ``You have the freedom to copy and modify this GNU manual.  Buying
     copies from the FSF supports it in developing GNU and promoting
     software freedom.''
        -->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
<h1 class="settitle">The GNU Awk User's Guide</h1>
<div class="node">
<a name="Top"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Foreword">Foreword</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">General Introduction</h2>

<!-- Preface node should come right after the Top -->
<!-- node, in `unnumbered' sections, then the chapter, `What is gawk'. -->
<!-- Licensing nodes are appendices, they're not central to AWK. -->
<p>This file documents <samp><span class="command">awk</span></samp>, a program that you can use to select
particular records in a file and perform operations upon them.

   <p>Copyright &copy; 1989, 1991, 1992, 1993, 1996, 1997, 1998, 1999,
2000, 2001, 2002, 2003, 2004, 2005, 2007, 2009, 2010, 2011, 2012
Free Software Foundation, Inc.
   <pre class="sp">


</pre>

This is Edition 4 of <cite>GAWK: Effective AWK Programming: A User's Guide for GNU Awk</cite>,
for the 4.0.2 (or later) version of the GNU
implementation of AWK.

   <p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being &ldquo;GNU General Public License&rdquo;, the Front-Cover
texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
&ldquo;GNU Free Documentation License&rdquo;.

     <ol type=a start=1>
<li>&ldquo;A GNU Manual&rdquo;

     <li>&ldquo;You have the freedom to
copy and modify this GNU manual.  Buying copies from the FSF
supports it in developing GNU and promoting software freedom.&rdquo;
        </ol>

<ul class="menu">
<li><a accesskey="1" href="#Foreword">Foreword</a>:                        Some nice words about this
                                   Web page. 
<li><a accesskey="2" href="#Preface">Preface</a>:                         What this Web page is about; brief
                                   history and acknowledgments. 
<li><a accesskey="3" href="#Getting-Started">Getting Started</a>:                 A basic introduction to using
                                   <samp><span class="command">awk</span></samp>. How to run an <samp><span class="command">awk</span></samp>
                                   program. Command-line syntax. 
<li><a accesskey="4" href="#Invoking-Gawk">Invoking Gawk</a>:                   How to run <samp><span class="command">gawk</span></samp>. 
<li><a accesskey="5" href="#Regexp">Regexp</a>:                          All about matching things using regular
                                   expressions. 
<li><a accesskey="6" href="#Reading-Files">Reading Files</a>:                   How to read files and manipulate fields. 
<li><a accesskey="7" href="#Printing">Printing</a>:                        How to print using <samp><span class="command">awk</span></samp>. Describes
                                   the <code>print</code> and <code>printf</code>
                                   statements. Also describes redirection of
                                   output. 
<li><a accesskey="8" href="#Expressions">Expressions</a>:                     Expressions are the basic building blocks
                                   of statements. 
<li><a accesskey="9" href="#Patterns-and-Actions">Patterns and Actions</a>:            Overviews of patterns and actions. 
<li><a href="#Arrays">Arrays</a>:                          The description and use of arrays. Also
                                   includes array-oriented control statements. 
<li><a href="#Functions">Functions</a>:                       Built-in and user-defined functions. 
<li><a href="#Internationalization">Internationalization</a>:            Getting <samp><span class="command">gawk</span></samp> to speak your
                                   language. 
<li><a href="#Advanced-Features">Advanced Features</a>:               Stuff for advanced users, specific to
                                   <samp><span class="command">gawk</span></samp>. 
<li><a href="#Library-Functions">Library Functions</a>:               A Library of <samp><span class="command">awk</span></samp> Functions. 
<li><a href="#Sample-Programs">Sample Programs</a>:                 Many <samp><span class="command">awk</span></samp> programs with complete
                                   explanations. 
<li><a href="#Debugger">Debugger</a>:                        The <code>dgawk</code> debugger. 
<li><a href="#Language-History">Language History</a>:                The evolution of the <samp><span class="command">awk</span></samp>
                                   language. 
<li><a href="#Installation">Installation</a>:                    Installing <samp><span class="command">gawk</span></samp> under various
                                   operating systems. 
<li><a href="#Notes">Notes</a>:                           Notes about <samp><span class="command">gawk</span></samp> extensions and
                                   possible future work. 
<li><a href="#Basic-Concepts">Basic Concepts</a>:                  A very quick introduction to programming
                                   concepts. 
<li><a href="#Glossary">Glossary</a>:                        An explanation of some unfamiliar terms. 
<li><a href="#Copying">Copying</a>:                         Your right to copy and distribute
                                   <samp><span class="command">gawk</span></samp>. 
<li><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>:  The license for this Web page. 
<li><a href="#Index">Index</a>:                           Concept and Variable Index.

<li><a href="#History">History</a>:                         The history of <samp><span class="command">gawk</span></samp> and
                                   <samp><span class="command">awk</span></samp>. 
<li><a href="#Names">Names</a>:                           What name to use to find <samp><span class="command">awk</span></samp>. 
<li><a href="#This-Manual">This Manual</a>:                     Using this Web page. Includes
                                   sample input files that you can use. 
<li><a href="#Conventions">Conventions</a>:                     Typographical Conventions. 
<li><a href="#Manual-History">Manual History</a>:                  Brief history of the GNU project and this
                                   Web page. 
<li><a href="#How-To-Contribute">How To Contribute</a>:               Helping to save the world. 
<li><a href="#Acknowledgments">Acknowledgments</a>:                 Acknowledgments. 
<li><a href="#Running-gawk">Running gawk</a>:                    How to run <samp><span class="command">gawk</span></samp> programs;
                                   includes command-line syntax. 
<li><a href="#One_002dshot">One-shot</a>:                        Running a short throwaway <samp><span class="command">awk</span></samp>
                                   program. 
<li><a href="#Read-Terminal">Read Terminal</a>:                   Using no input files (input from terminal
                                   instead). 
<li><a href="#Long">Long</a>:                            Putting permanent <samp><span class="command">awk</span></samp> programs in
                                   files. 
<li><a href="#Executable-Scripts">Executable Scripts</a>:              Making self-contained <samp><span class="command">awk</span></samp>
                                   programs. 
<li><a href="#Comments">Comments</a>:                        Adding documentation to <samp><span class="command">gawk</span></samp>
                                   programs. 
<li><a href="#Quoting">Quoting</a>:                         More discussion of shell quoting issues. 
<li><a href="#DOS-Quoting">DOS Quoting</a>:                     Quoting in Windows Batch Files. 
<li><a href="#Sample-Data-Files">Sample Data Files</a>:               Sample data files for use in the
                                   <samp><span class="command">awk</span></samp> programs illustrated in this
                                   Web page. 
<li><a href="#Very-Simple">Very Simple</a>:                     A very simple example. 
<li><a href="#Two-Rules">Two Rules</a>:                       A less simple one-line example using two
                                   rules. 
<li><a href="#More-Complex">More Complex</a>:                    A more complex example. 
<li><a href="#Statements_002fLines">Statements/Lines</a>:                Subdividing or combining statements into
                                   lines. 
<li><a href="#Other-Features">Other Features</a>:                  Other Features of <samp><span class="command">awk</span></samp>. 
<li><a href="#When">When</a>:                            When to use <samp><span class="command">gawk</span></samp> and when to use
                                   other things. 
<li><a href="#Command-Line">Command Line</a>:                    How to run <samp><span class="command">awk</span></samp>. 
<li><a href="#Options">Options</a>:                         Command-line options and their meanings. 
<li><a href="#Other-Arguments">Other Arguments</a>:                 Input file names and variable assignments. 
<li><a href="#Naming-Standard-Input">Naming Standard Input</a>:           How to specify standard input with other
                                   files. 
<li><a href="#Environment-Variables">Environment Variables</a>:           The environment variables <samp><span class="command">gawk</span></samp>
                                   uses. 
<li><a href="#AWKPATH-Variable">AWKPATH Variable</a>:                Searching directories for <samp><span class="command">awk</span></samp>
                                   programs. 
<li><a href="#Other-Environment-Variables">Other Environment Variables</a>:     The environment variables. 
<li><a href="#Exit-Status">Exit Status</a>:                     <samp><span class="command">gawk</span></samp>'s exit status. 
<li><a href="#Include-Files">Include Files</a>:                   Including other files into your program. 
<li><a href="#Obsolete">Obsolete</a>:                        Obsolete Options and/or features. 
<li><a href="#Undocumented">Undocumented</a>:                    Undocumented Options and Features. 
<li><a href="#Regexp-Usage">Regexp Usage</a>:                    How to Use Regular Expressions. 
<li><a href="#Escape-Sequences">Escape Sequences</a>:                How to write nonprinting characters. 
<li><a href="#Regexp-Operators">Regexp Operators</a>:                Regular Expression Operators. 
<li><a href="#Bracket-Expressions">Bracket Expressions</a>:             What can go between &lsquo;<samp><span class="samp">[...]</span></samp>&rsquo;. 
<li><a href="#GNU-Regexp-Operators">GNU Regexp Operators</a>:            Operators specific to GNU software. 
<li><a href="#Case_002dsensitivity">Case-sensitivity</a>:                How to do case-insensitive matching. 
<li><a href="#Leftmost-Longest">Leftmost Longest</a>:                How much text matches. 
<li><a href="#Computed-Regexps">Computed Regexps</a>:                Using Dynamic Regexps. 
<li><a href="#Records">Records</a>:                         Controlling how data is split into records. 
<li><a href="#Fields">Fields</a>:                          An introduction to fields. 
<li><a href="#Nonconstant-Fields">Nonconstant Fields</a>:              Nonconstant Field Numbers. 
<li><a href="#Changing-Fields">Changing Fields</a>:                 Changing the Contents of a Field. 
<li><a href="#Field-Separators">Field Separators</a>:                The field separator and how to change it. 
<li><a href="#Default-Field-Splitting">Default Field Splitting</a>:         How fields are normally separated. 
<li><a href="#Regexp-Field-Splitting">Regexp Field Splitting</a>:          Using regexps as the field separator. 
<li><a href="#Single-Character-Fields">Single Character Fields</a>:         Making each character a separate field. 
<li><a href="#Command-Line-Field-Separator">Command Line Field Separator</a>:    Setting <code>FS</code> from the command-line. 
<li><a href="#Field-Splitting-Summary">Field Splitting Summary</a>:         Some final points and a summary table. 
<li><a href="#Constant-Size">Constant Size</a>:                   Reading constant width data. 
<li><a href="#Splitting-By-Content">Splitting By Content</a>:            Defining Fields By Content
<li><a href="#Multiple-Line">Multiple Line</a>:                   Reading multi-line records. 
<li><a href="#Getline">Getline</a>:                         Reading files under explicit program
                                   control using the <code>getline</code> function. 
<li><a href="#Plain-Getline">Plain Getline</a>:                   Using <code>getline</code> with no arguments. 
<li><a href="#Getline_002fVariable">Getline/Variable</a>:                Using <code>getline</code> into a variable. 
<li><a href="#Getline_002fFile">Getline/File</a>:                    Using <code>getline</code> from a file. 
<li><a href="#Getline_002fVariable_002fFile">Getline/Variable/File</a>:           Using <code>getline</code> into a variable from a
                                   file. 
<li><a href="#Getline_002fPipe">Getline/Pipe</a>:                    Using <code>getline</code> from a pipe. 
<li><a href="#Getline_002fVariable_002fPipe">Getline/Variable/Pipe</a>:           Using <code>getline</code> into a variable from a
                                   pipe. 
<li><a href="#Getline_002fCoprocess">Getline/Coprocess</a>:               Using <code>getline</code> from a coprocess. 
<li><a href="#Getline_002fVariable_002fCoprocess">Getline/Variable/Coprocess</a>:      Using <code>getline</code> into a variable from a
                                   coprocess. 
<li><a href="#Getline-Notes">Getline Notes</a>:                   Important things to know about
                                   <code>getline</code>. 
<li><a href="#Getline-Summary">Getline Summary</a>:                 Summary of <code>getline</code> Variants. 
<li><a href="#Command-line-directories">Command line directories</a>:        What happens if you put a directory on the
                                   command line. 
<li><a href="#Print">Print</a>:                           The <code>print</code> statement. 
<li><a href="#Print-Examples">Print Examples</a>:                  Simple examples of <code>print</code> statements. 
<li><a href="#Output-Separators">Output Separators</a>:               The output separators and how to change
                                   them. 
<li><a href="#OFMT">OFMT</a>:                            Controlling Numeric Output With
                                   <code>print</code>. 
<li><a href="#Printf">Printf</a>:                          The <code>printf</code> statement. 
<li><a href="#Basic-Printf">Basic Printf</a>:                    Syntax of the <code>printf</code> statement. 
<li><a href="#Control-Letters">Control Letters</a>:                 Format-control letters. 
<li><a href="#Format-Modifiers">Format Modifiers</a>:                Format-specification modifiers. 
<li><a href="#Printf-Examples">Printf Examples</a>:                 Several examples. 
<li><a href="#Redirection">Redirection</a>:                     How to redirect output to multiple files
                                   and pipes. 
<li><a href="#Special-Files">Special Files</a>:                   File name interpretation in <samp><span class="command">gawk</span></samp>. 
                                   <samp><span class="command">gawk</span></samp> allows access to inherited
                                   file descriptors. 
<li><a href="#Special-FD">Special FD</a>:                      Special files for I/O. 
<li><a href="#Special-Network">Special Network</a>:                 Special files for network communications. 
<li><a href="#Special-Caveats">Special Caveats</a>:                 Things to watch out for. 
<li><a href="#Close-Files-And-Pipes">Close Files And Pipes</a>:           Closing Input and Output Files and Pipes. 
<li><a href="#Values">Values</a>:                          Constants, Variables, and Regular
                                   Expressions. 
<li><a href="#Constants">Constants</a>:                       String, numeric and regexp constants. 
<li><a href="#Scalar-Constants">Scalar Constants</a>:                Numeric and string constants. 
<li><a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>:              What are octal and hex numbers. 
<li><a href="#Regexp-Constants">Regexp Constants</a>:                Regular Expression constants. 
<li><a href="#Using-Constant-Regexps">Using Constant Regexps</a>:          When and how to use a regexp constant. 
<li><a href="#Variables">Variables</a>:                       Variables give names to values for later
                                   use. 
<li><a href="#Using-Variables">Using Variables</a>:                 Using variables in your programs. 
<li><a href="#Assignment-Options">Assignment Options</a>:              Setting variables on the command-line and a
                                   summary of command-line syntax. This is an
                                   advanced method of input. 
<li><a href="#Conversion">Conversion</a>:                      The conversion of strings to numbers and
                                   vice versa. 
<li><a href="#All-Operators">All Operators</a>:                   <samp><span class="command">gawk</span></samp>'s operators. 
<li><a href="#Arithmetic-Ops">Arithmetic Ops</a>:                  Arithmetic operations (&lsquo;<samp><span class="samp">+</span></samp>&rsquo;, &lsquo;<samp><span class="samp">-</span></samp>&rsquo;,
                                   etc.) 
<li><a href="#Concatenation">Concatenation</a>:                   Concatenating strings. 
<li><a href="#Assignment-Ops">Assignment Ops</a>:                  Changing the value of a variable or a
                                   field. 
<li><a href="#Increment-Ops">Increment Ops</a>:                   Incrementing the numeric value of a
                                   variable. 
<li><a href="#Truth-Values-and-Conditions">Truth Values and Conditions</a>:     Testing for true and false. 
<li><a href="#Truth-Values">Truth Values</a>:                    What is ``true'' and what is ``false''. 
<li><a href="#Typing-and-Comparison">Typing and Comparison</a>:           How variables acquire types and how this
                                   affects comparison of numbers and strings
                                   with &lsquo;<samp><span class="samp">&lt;</span></samp>&rsquo;, etc. 
<li><a href="#Variable-Typing">Variable Typing</a>:                 String type versus numeric type. 
<li><a href="#Comparison-Operators">Comparison Operators</a>:            The comparison operators. 
<li><a href="#POSIX-String-Comparison">POSIX String Comparison</a>:         String comparison with POSIX rules. 
<li><a href="#Boolean-Ops">Boolean Ops</a>:                     Combining comparison expressions using
                                   boolean operators &lsquo;<samp><span class="samp">||</span></samp>&rsquo; (``or''),
                                   &lsquo;<samp><span class="samp">&amp;&amp;</span></samp>&rsquo; (``and'') and &lsquo;<samp><span class="samp">!</span></samp>&rsquo; (``not''). 
<li><a href="#Conditional-Exp">Conditional Exp</a>:                 Conditional expressions select between two
                                   subexpressions under control of a third
                                   subexpression. 
<li><a href="#Function-Calls">Function Calls</a>:                  A function call is an expression. 
<li><a href="#Precedence">Precedence</a>:                      How various operators nest. 
<li><a href="#Locales">Locales</a>:                         How the locale affects things. 
<li><a href="#Pattern-Overview">Pattern Overview</a>:                What goes into a pattern. 
<li><a href="#Regexp-Patterns">Regexp Patterns</a>:                 Using regexps as patterns. 
<li><a href="#Expression-Patterns">Expression Patterns</a>:             Any expression can be used as a pattern. 
<li><a href="#Ranges">Ranges</a>:                          Pairs of patterns specify record ranges. 
<li><a href="#BEGIN_002fEND">BEGIN/END</a>:                       Specifying initialization and cleanup
                                   rules. 
<li><a href="#Using-BEGIN_002fEND">Using BEGIN/END</a>:                 How and why to use BEGIN/END rules. 
<li><a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a>:               I/O issues in BEGIN/END rules. 
<li><a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a>:               Two special patterns for advanced control. 
<li><a href="#Empty">Empty</a>:                           The empty pattern, which matches every
                                   record. 
<li><a href="#Using-Shell-Variables">Using Shell Variables</a>:           How to use shell variables with
                                   <samp><span class="command">awk</span></samp>. 
<li><a href="#Action-Overview">Action Overview</a>:                 What goes into an action. 
<li><a href="#Statements">Statements</a>:                      Describes the various control statements in
                                   detail. 
<li><a href="#If-Statement">If Statement</a>:                    Conditionally execute some <samp><span class="command">awk</span></samp>
                                   statements. 
<li><a href="#While-Statement">While Statement</a>:                 Loop until some condition is satisfied. 
<li><a href="#Do-Statement">Do Statement</a>:                    Do specified action while looping until
                                   some condition is satisfied. 
<li><a href="#For-Statement">For Statement</a>:                   Another looping statement, that provides
                                   initialization and increment clauses. 
<li><a href="#Switch-Statement">Switch Statement</a>:                Switch/case evaluation for conditional
                                   execution of statements based on a value. 
<li><a href="#Break-Statement">Break Statement</a>:                 Immediately exit the innermost enclosing
                                   loop. 
<li><a href="#Continue-Statement">Continue Statement</a>:              Skip to the end of the innermost enclosing
                                   loop. 
<li><a href="#Next-Statement">Next Statement</a>:                  Stop processing the current input record. 
<li><a href="#Nextfile-Statement">Nextfile Statement</a>:              Stop processing the current file. 
<li><a href="#Exit-Statement">Exit Statement</a>:                  Stop execution of <samp><span class="command">awk</span></samp>. 
<li><a href="#Built_002din-Variables">Built-in Variables</a>:              Summarizes the built-in variables. 
<li><a href="#User_002dmodified">User-modified</a>:                   Built-in variables that you change to
                                   control <samp><span class="command">awk</span></samp>. 
<li><a href="#Auto_002dset">Auto-set</a>:                        Built-in variables where <samp><span class="command">awk</span></samp>
                                   gives you information. 
<li><a href="#ARGC-and-ARGV">ARGC and ARGV</a>:                   Ways to use <code>ARGC</code> and <code>ARGV</code>. 
<li><a href="#Array-Basics">Array Basics</a>:                    The basics of arrays. 
<li><a href="#Array-Intro">Array Intro</a>:                     Introduction to Arrays
<li><a href="#Reference-to-Elements">Reference to Elements</a>:           How to examine one element of an array. 
<li><a href="#Assigning-Elements">Assigning Elements</a>:              How to change an element of an array. 
<li><a href="#Array-Example">Array Example</a>:                   Basic Example of an Array
<li><a href="#Scanning-an-Array">Scanning an Array</a>:               A variation of the <code>for</code> statement. It
                                   loops through the indices of an array's
                                   existing elements. 
<li><a href="#Controlling-Scanning">Controlling Scanning</a>:            Controlling the order in which arrays are
                                   scanned. 
<li><a href="#Delete">Delete</a>:                          The <code>delete</code> statement removes an
                                   element from an array. 
<li><a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a>:        How to use numbers as subscripts in
                                   <samp><span class="command">awk</span></samp>. 
<li><a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a>:        Using Uninitialized variables as
                                   subscripts. 
<li><a href="#Multi_002ddimensional">Multi-dimensional</a>:               Emulating multidimensional arrays in
                                   <samp><span class="command">awk</span></samp>. 
<li><a href="#Multi_002dscanning">Multi-scanning</a>:                  Scanning multidimensional arrays. 
<li><a href="#Arrays-of-Arrays">Arrays of Arrays</a>:                True multidimensional arrays. 
<li><a href="#Built_002din">Built-in</a>:                        Summarizes the built-in functions. 
<li><a href="#Calling-Built_002din">Calling Built-in</a>:                How to call built-in functions. 
<li><a href="#Numeric-Functions">Numeric Functions</a>:               Functions that work with numbers, including
                                   <code>int()</code>, <code>sin()</code> and
                                   <code>rand()</code>. 
<li><a href="#String-Functions">String Functions</a>:                Functions for string manipulation, such as
                                   <code>split()</code>, <code>match()</code> and
                                   <code>sprintf()</code>. 
<li><a href="#Gory-Details">Gory Details</a>:                    More than you want to know about &lsquo;<samp><span class="samp">\</span></samp>&rsquo;
                                   and &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; with <code>sub()</code>,
                                   <code>gsub()</code>, and <code>gensub()</code>. 
<li><a href="#I_002fO-Functions">I/O Functions</a>:                   Functions for files and shell commands. 
<li><a href="#Time-Functions">Time Functions</a>:                  Functions for dealing with timestamps. 
<li><a href="#Bitwise-Functions">Bitwise Functions</a>:               Functions for bitwise operations. 
<li><a href="#Type-Functions">Type Functions</a>:                  Functions for type information. 
<li><a href="#I18N-Functions">I18N Functions</a>:                  Functions for string translation. 
<li><a href="#User_002ddefined">User-defined</a>:                    Describes User-defined functions in detail. 
<li><a href="#Definition-Syntax">Definition Syntax</a>:               How to write definitions and what they
                                   mean. 
<li><a href="#Function-Example">Function Example</a>:                An example function definition and what it
                                   does. 
<li><a href="#Function-Caveats">Function Caveats</a>:                Things to watch out for. 
<li><a href="#Calling-A-Function">Calling A Function</a>:              Don't use spaces. 
<li><a href="#Variable-Scope">Variable Scope</a>:                  Controlling variable scope. 
<li><a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a>:         Passing parameters. 
<li><a href="#Return-Statement">Return Statement</a>:                Specifying the value a function returns. 
<li><a href="#Dynamic-Typing">Dynamic Typing</a>:                  How variable types can change at runtime. 
<li><a href="#Indirect-Calls">Indirect Calls</a>:                  Choosing the function to call at runtime. 
<li><a href="#I18N-and-L10N">I18N and L10N</a>:                   Internationalization and Localization. 
<li><a href="#Explaining-gettext">Explaining gettext</a>:              How GNU <code>gettext</code> works. 
<li><a href="#Programmer-i18n">Programmer i18n</a>:                 Features for the programmer. 
<li><a href="#Translator-i18n">Translator i18n</a>:                 Features for the translator. 
<li><a href="#String-Extraction">String Extraction</a>:               Extracting marked strings. 
<li><a href="#Printf-Ordering">Printf Ordering</a>:                 Rearranging <code>printf</code> arguments. 
<li><a href="#I18N-Portability">I18N Portability</a>:                <samp><span class="command">awk</span></samp>-level portability issues. 
<li><a href="#I18N-Example">I18N Example</a>:                    A simple i18n example. 
<li><a href="#Gawk-I18N">Gawk I18N</a>:                       <samp><span class="command">gawk</span></samp> is also internationalized. 
<li><a href="#Nondecimal-Data">Nondecimal Data</a>:                 Allowing nondecimal input data. 
<li><a href="#Array-Sorting">Array Sorting</a>:                   Facilities for controlling array traversal
                                   and sorting arrays. 
<li><a href="#Controlling-Array-Traversal">Controlling Array Traversal</a>:     How to use PROCINFO["sorted_in"]. 
<li><a href="#Array-Sorting-Functions">Array Sorting Functions</a>:         How to use <code>asort()</code> and
                                   <code>asorti()</code>. 
<li><a href="#Two_002dway-I_002fO">Two-way I/O</a>:                     Two-way communications with another
                                   process. 
<li><a href="#TCP_002fIP-Networking">TCP/IP Networking</a>:               Using <samp><span class="command">gawk</span></samp> for network
                                   programming. 
<li><a href="#Profiling">Profiling</a>:                       Profiling your <samp><span class="command">awk</span></samp> programs. 
<li><a href="#Library-Names">Library Names</a>:                   How to best name private global variables
                                   in library functions. 
<li><a href="#General-Functions">General Functions</a>:               Functions that are of general use. 
<li><a href="#Strtonum-Function">Strtonum Function</a>:               A replacement for the built-in
                                   <code>strtonum()</code> function. 
<li><a href="#Assert-Function">Assert Function</a>:                 A function for assertions in <samp><span class="command">awk</span></samp>
                                   programs. 
<li><a href="#Round-Function">Round Function</a>:                  A function for rounding if <code>sprintf()</code>
                                   does not do it correctly. 
<li><a href="#Cliff-Random-Function">Cliff Random Function</a>:           The Cliff Random Number Generator. 
<li><a href="#Ordinal-Functions">Ordinal Functions</a>:               Functions for using characters as numbers
                                   and vice versa. 
<li><a href="#Join-Function">Join Function</a>:                   A function to join an array into a string. 
<li><a href="#Gettimeofday-Function">Gettimeofday Function</a>:           A function to get formatted times. 
<li><a href="#Data-File-Management">Data File Management</a>:            Functions for managing command-line data
                                   files. 
<li><a href="#Filetrans-Function">Filetrans Function</a>:              A function for handling data file
                                   transitions. 
<li><a href="#Rewind-Function">Rewind Function</a>:                 A function for rereading the current file. 
<li><a href="#File-Checking">File Checking</a>:                   Checking that data files are readable. 
<li><a href="#Empty-Files">Empty Files</a>:                     Checking for zero-length files. 
<li><a href="#Ignoring-Assigns">Ignoring Assigns</a>:                Treating assignments as file names. 
<li><a href="#Getopt-Function">Getopt Function</a>:                 A function for processing command-line
                                   arguments. 
<li><a href="#Passwd-Functions">Passwd Functions</a>:                Functions for getting user information. 
<li><a href="#Group-Functions">Group Functions</a>:                 Functions for getting group information. 
<li><a href="#Walking-Arrays">Walking Arrays</a>:                  A function to walk arrays of arrays. 
<li><a href="#Running-Examples">Running Examples</a>:                How to run these examples. 
<li><a href="#Clones">Clones</a>:                          Clones of common utilities. 
<li><a href="#Cut-Program">Cut Program</a>:                     The <samp><span class="command">cut</span></samp> utility. 
<li><a href="#Egrep-Program">Egrep Program</a>:                   The <samp><span class="command">egrep</span></samp> utility. 
<li><a href="#Id-Program">Id Program</a>:                      The <samp><span class="command">id</span></samp> utility. 
<li><a href="#Split-Program">Split Program</a>:                   The <samp><span class="command">split</span></samp> utility. 
<li><a href="#Tee-Program">Tee Program</a>:                     The <samp><span class="command">tee</span></samp> utility. 
<li><a href="#Uniq-Program">Uniq Program</a>:                    The <samp><span class="command">uniq</span></samp> utility. 
<li><a href="#Wc-Program">Wc Program</a>:                      The <samp><span class="command">wc</span></samp> utility. 
<li><a href="#Miscellaneous-Programs">Miscellaneous Programs</a>:          Some interesting <samp><span class="command">awk</span></samp> programs. 
<li><a href="#Dupword-Program">Dupword Program</a>:                 Finding duplicated words in a document. 
<li><a href="#Alarm-Program">Alarm Program</a>:                   An alarm clock. 
<li><a href="#Translate-Program">Translate Program</a>:               A program similar to the <samp><span class="command">tr</span></samp>
                                   utility. 
<li><a href="#Labels-Program">Labels Program</a>:                  Printing mailing labels. 
<li><a href="#Word-Sorting">Word Sorting</a>:                    A program to produce a word usage count. 
<li><a href="#History-Sorting">History Sorting</a>:                 Eliminating duplicate entries from a
                                   history file. 
<li><a href="#Extract-Program">Extract Program</a>:                 Pulling out programs from Texinfo source
                                   files. 
<li><a href="#Simple-Sed">Simple Sed</a>:                      A Simple Stream Editor. 
<li><a href="#Igawk-Program">Igawk Program</a>:                   A wrapper for <samp><span class="command">awk</span></samp> that includes
                                   files. 
<li><a href="#Anagram-Program">Anagram Program</a>:                 Finding anagrams from a dictionary. 
<li><a href="#Signature-Program">Signature Program</a>:               People do amazing things with too much time
                                   on their hands. 
<li><a href="#Debugging">Debugging</a>:                       Introduction to <samp><span class="command">dgawk</span></samp>. 
<li><a href="#Debugging-Concepts">Debugging Concepts</a>:              Debugging In General. 
<li><a href="#Debugging-Terms">Debugging Terms</a>:                 Additional Debugging Concepts. 
<li><a href="#Awk-Debugging">Awk Debugging</a>:                   Awk Debugging. 
<li><a href="#Sample-dgawk-session">Sample dgawk session</a>:            Sample <samp><span class="command">dgawk</span></samp> session. 
<li><a href="#dgawk-invocation">dgawk invocation</a>:                <samp><span class="command">dgawk</span></samp> Invocation. 
<li><a href="#Finding-The-Bug">Finding The Bug</a>:                 Finding The Bug. 
<li><a href="#List-of-Debugger-Commands">List of Debugger Commands</a>:       Main <samp><span class="command">dgawk</span></samp> Commands. 
<li><a href="#Breakpoint-Control">Breakpoint Control</a>:              Control of breakpoints. 
<li><a href="#Dgawk-Execution-Control">Dgawk Execution Control</a>:         Control of execution. 
<li><a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a>:       Viewing and changing data. 
<li><a href="#Dgawk-Stack">Dgawk Stack</a>:                     Dealing with the stack. 
<li><a href="#Dgawk-Info">Dgawk Info</a>:                      Obtaining information about the program and
                                   the debugger state. 
<li><a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a>:    Miscellaneous Commands. 
<li><a href="#Readline-Support">Readline Support</a>:                Readline Support. 
<li><a href="#Dgawk-Limitations">Dgawk Limitations</a>:               Limitations and future plans. 
<li><a href="#V7_002fSVR3_002e1">V7/SVR3.1</a>:                       The major changes between V7 and System V
                                   Release 3.1. 
<li><a href="#SVR4">SVR4</a>:                            Minor changes between System V Releases 3.1
                                   and 4. 
<li><a href="#POSIX">POSIX</a>:                           New features from the POSIX standard. 
<li><a href="#BTL">BTL</a>:                             New features from Brian Kernighan's version
                                   of <samp><span class="command">awk</span></samp>. 
<li><a href="#POSIX_002fGNU">POSIX/GNU</a>:                       The extensions in <samp><span class="command">gawk</span></samp> not in
                                   POSIX <samp><span class="command">awk</span></samp>. 
<li><a href="#Common-Extensions">Common Extensions</a>:               Common Extensions Summary. 
<li><a href="#Ranges-and-Locales">Ranges and Locales</a>:              How locales used to affect regexp ranges. 
<li><a href="#Contributors">Contributors</a>:                    The major contributors to <samp><span class="command">gawk</span></samp>. 
<li><a href="#Gawk-Distribution">Gawk Distribution</a>:               What is in the <samp><span class="command">gawk</span></samp> distribution. 
<li><a href="#Getting">Getting</a>:                         How to get the distribution. 
<li><a href="#Extracting">Extracting</a>:                      How to extract the distribution. 
<li><a href="#Distribution-contents">Distribution contents</a>:           What is in the distribution. 
<li><a href="#Unix-Installation">Unix Installation</a>:               Installing <samp><span class="command">gawk</span></samp> under various
                                   versions of Unix. 
<li><a href="#Quick-Installation">Quick Installation</a>:              Compiling <samp><span class="command">gawk</span></samp> under Unix. 
<li><a href="#Additional-Configuration-Options">Additional Configuration Options</a>:  Other compile-time options. 
<li><a href="#Configuration-Philosophy">Configuration Philosophy</a>:        How it's all supposed to work. 
<li><a href="#Non_002dUnix-Installation">Non-Unix Installation</a>:           Installation on Other Operating Systems. 
<li><a href="#PC-Installation">PC Installation</a>:                 Installing and Compiling <samp><span class="command">gawk</span></samp> on
                                   MS-DOS and OS/2. 
<li><a href="#PC-Binary-Installation">PC Binary Installation</a>:          Installing a prepared distribution. 
<li><a href="#PC-Compiling">PC Compiling</a>:                    Compiling <samp><span class="command">gawk</span></samp> for MS-DOS,
                                   Windows32, and OS/2. 
<li><a href="#PC-Testing">PC Testing</a>:                      Testing <samp><span class="command">gawk</span></samp> on PC systems. 
<li><a href="#PC-Using">PC Using</a>:                        Running <samp><span class="command">gawk</span></samp> on MS-DOS, Windows32
                                   and OS/2. 
<li><a href="#Cygwin">Cygwin</a>:                          Building and running <samp><span class="command">gawk</span></samp> for
                                   Cygwin. 
<li><a href="#MSYS">MSYS</a>:                            Using <samp><span class="command">gawk</span></samp> In The MSYS
                                   Environment. 
<li><a href="#VMS-Installation">VMS Installation</a>:                Installing <samp><span class="command">gawk</span></samp> on VMS. 
<li><a href="#VMS-Compilation">VMS Compilation</a>:                 How to compile <samp><span class="command">gawk</span></samp> under VMS. 
<li><a href="#VMS-Installation-Details">VMS Installation Details</a>:        How to install <samp><span class="command">gawk</span></samp> under VMS. 
<li><a href="#VMS-Running">VMS Running</a>:                     How to run <samp><span class="command">gawk</span></samp> under VMS. 
<li><a href="#VMS-Old-Gawk">VMS Old Gawk</a>:                    An old version comes with some VMS systems. 
<li><a href="#Bugs">Bugs</a>:                            Reporting Problems and Bugs. 
<li><a href="#Other-Versions">Other Versions</a>:                  Other freely available <samp><span class="command">awk</span></samp>
                                   implementations. 
<li><a href="#Compatibility-Mode">Compatibility Mode</a>:              How to disable certain <samp><span class="command">gawk</span></samp>
                                   extensions. 
<li><a href="#Additions">Additions</a>:                       Making Additions To <samp><span class="command">gawk</span></samp>. 
<li><a href="#Accessing-The-Source">Accessing The Source</a>:            Accessing the Git repository. 
<li><a href="#Adding-Code">Adding Code</a>:                     Adding code to the main body of
                                   <samp><span class="command">gawk</span></samp>. 
<li><a href="#New-Ports">New Ports</a>:                       Porting <samp><span class="command">gawk</span></samp> to a new operating
                                   system. 
<li><a href="#Dynamic-Extensions">Dynamic Extensions</a>:              Adding new built-in functions to
                                   <samp><span class="command">gawk</span></samp>. 
<li><a href="#Internals">Internals</a>:                       A brief look at some <samp><span class="command">gawk</span></samp>
                                   internals. 
<li><a href="#Plugin-License">Plugin License</a>:                  A note about licensing. 
<li><a href="#Sample-Library">Sample Library</a>:                  A example of new functions. 
<li><a href="#Internal-File-Description">Internal File Description</a>:       What the new functions will do. 
<li><a href="#Internal-File-Ops">Internal File Ops</a>:               The code for internal file operations. 
<li><a href="#Using-Internal-File-Ops">Using Internal File Ops</a>:         How to use an external extension. 
<li><a href="#Future-Extensions">Future Extensions</a>:               New features that may be implemented one
                                   day. 
<li><a href="#Basic-High-Level">Basic High Level</a>:                The high level view. 
<li><a href="#Basic-Data-Typing">Basic Data Typing</a>:               A very quick intro to data types. 
<li><a href="#Floating-Point-Issues">Floating Point Issues</a>:           Stuff to know about floating-point numbers. 
<li><a href="#String-Conversion-Precision">String Conversion Precision</a>:     The String Value Can Lie. 
<li><a href="#Unexpected-Results">Unexpected Results</a>:              Floating Point Numbers Are Not Abstract
                                   Numbers. 
<li><a href="#POSIX-Floating-Point-Problems">POSIX Floating Point Problems</a>:   Standards Versus Existing Practice. 
</ul>

<!-- dedication for Info file -->
   <div class="shortcontents">
<h2>Short Contents</h2>
<ul>
<li><a href="#toc_Top">General Introduction</a></li>
<li><a href="#toc_Foreword">Foreword</a></li>
<li><a href="#toc_Preface">Preface</a></li>
<li><a href="#toc_Getting-Started">1 Getting Started with <samp><span class="command">awk</span></samp></a></li>
<li><a href="#toc_Invoking-Gawk">2 Running <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp></a></li>
<li><a href="#toc_Regexp">3 Regular Expressions</a></li>
<li><a href="#toc_Reading-Files">4 Reading Input Files</a></li>
<li><a href="#toc_Printing">5 Printing Output</a></li>
<li><a href="#toc_Expressions">6 Expressions</a></li>
<li><a href="#toc_Patterns-and-Actions">7 Patterns, Actions, and Variables</a></li>
<li><a href="#toc_Arrays">8 Arrays in <samp><span class="command">awk</span></samp></a></li>
<li><a href="#toc_Functions">9 Functions</a></li>
<li><a href="#toc_Internationalization">10 Internationalization with <samp><span class="command">gawk</span></samp></a></li>
<li><a href="#toc_Advanced-Features">11 Advanced Features of <samp><span class="command">gawk</span></samp></a></li>
<li><a href="#toc_Library-Functions">12 A Library of <samp><span class="command">awk</span></samp> Functions</a></li>
<li><a href="#toc_Sample-Programs">13 Practical <samp><span class="command">awk</span></samp> Programs</a></li>
<li><a href="#toc_Debugger">14 <samp><span class="command">dgawk</span></samp>: The <samp><span class="command">awk</span></samp> Debugger</a></li>
<li><a href="#toc_Language-History">Appendix A The Evolution of the <samp><span class="command">awk</span></samp> Language</a></li>
<li><a href="#toc_Installation">Appendix B Installing <samp><span class="command">gawk</span></samp></a></li>
<li><a href="#toc_Notes">Appendix C Implementation Notes</a></li>
<li><a href="#toc_Basic-Concepts">Appendix D Basic Programming Concepts</a></li>
<li><a href="#toc_Glossary">Glossary</a></li>
<li><a href="#toc_Copying">GNU General Public License</a></li>
<li><a href="#toc_GNU-Free-Documentation-License">GNU Free Documentation License</a></li>
<li><a href="#toc_Index">Index</a></li>
</ul>
</div>

   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">General Introduction</a>
<li><a name="toc_Foreword" href="#Foreword">Foreword</a>
<li><a name="toc_Preface" href="#Preface">Preface</a>
<ul>
<li><a href="#History">History of <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp></a>
<li><a href="#Names">A Rose by Any Other Name</a>
<li><a href="#This-Manual">Using This Book</a>
<li><a href="#Conventions">Typographical Conventions</a>
<li><a href="#Manual-History">The GNU Project and This Book</a>
<li><a href="#How-To-Contribute">How to Contribute</a>
<li><a href="#Acknowledgments">Acknowledgments</a>
</li></ul>
<li><a name="toc_Getting-Started" href="#Getting-Started">1 Getting Started with <samp><span class="command">awk</span></samp></a>
<ul>
<li><a href="#Running-gawk">1.1 How to Run <samp><span class="command">awk</span></samp> Programs</a>
<ul>
<li><a href="#One_002dshot">1.1.1 One-Shot Throwaway <samp><span class="command">awk</span></samp> Programs</a>
<li><a href="#Read-Terminal">1.1.2 Running <samp><span class="command">awk</span></samp> Without Input Files</a>
<li><a href="#Long">1.1.3 Running Long Programs</a>
<li><a href="#Executable-Scripts">1.1.4 Executable <samp><span class="command">awk</span></samp> Programs</a>
<li><a href="#Comments">1.1.5 Comments in <samp><span class="command">awk</span></samp> Programs</a>
<li><a href="#Quoting">1.1.6 Shell-Quoting Issues</a>
<ul>
<li><a href="#DOS-Quoting">1.1.6.1 Quoting in MS-Windows Batch Files</a>
</li></ul>
</li></ul>
<li><a href="#Sample-Data-Files">1.2 Data Files for the Examples</a>
<li><a href="#Very-Simple">1.3 Some Simple Examples</a>
<li><a href="#Two-Rules">1.4 An Example with Two Rules</a>
<li><a href="#More-Complex">1.5 A More Complex Example</a>
<li><a href="#Statements_002fLines">1.6 <samp><span class="command">awk</span></samp> Statements Versus Lines</a>
<li><a href="#Other-Features">1.7 Other Features of <samp><span class="command">awk</span></samp></a>
<li><a href="#When">1.8 When to Use <samp><span class="command">awk</span></samp></a>
</li></ul>
<li><a name="toc_Invoking-Gawk" href="#Invoking-Gawk">2 Running <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp></a>
<ul>
<li><a href="#Command-Line">2.1 Invoking <samp><span class="command">awk</span></samp></a>
<li><a href="#Options">2.2 Command-Line Options</a>
<li><a href="#Other-Arguments">2.3 Other Command-Line Arguments</a>
<li><a href="#Naming-Standard-Input">2.4 Naming Standard Input</a>
<li><a href="#Environment-Variables">2.5 The Environment Variables <samp><span class="command">gawk</span></samp> Uses</a>
<ul>
<li><a href="#AWKPATH-Variable">2.5.1 The <samp><span class="env">AWKPATH</span></samp> Environment Variable</a>
<li><a href="#Other-Environment-Variables">2.5.2 Other Environment Variables</a>
</li></ul>
<li><a href="#Exit-Status">2.6 <samp><span class="command">gawk</span></samp>'s Exit Status</a>
<li><a href="#Include-Files">2.7 Including Other Files Into Your Program</a>
<li><a href="#Obsolete">2.8 Obsolete Options and/or Features</a>
<li><a href="#Undocumented">2.9 Undocumented Options and Features</a>
</li></ul>
<li><a name="toc_Regexp" href="#Regexp">3 Regular Expressions</a>
<ul>
<li><a href="#Regexp-Usage">3.1 How to Use Regular Expressions</a>
<li><a href="#Escape-Sequences">3.2 Escape Sequences</a>
<li><a href="#Regexp-Operators">3.3 Regular Expression Operators</a>
<li><a href="#Bracket-Expressions">3.4 Using Bracket Expressions</a>
<li><a href="#GNU-Regexp-Operators">3.5 <samp><span class="command">gawk</span></samp>-Specific Regexp Operators</a>
<li><a href="#Case_002dsensitivity">3.6 Case Sensitivity in Matching</a>
<li><a href="#Leftmost-Longest">3.7 How Much Text Matches?</a>
<li><a href="#Computed-Regexps">3.8 Using Dynamic Regexps</a>
</li></ul>
<li><a name="toc_Reading-Files" href="#Reading-Files">4 Reading Input Files</a>
<ul>
<li><a href="#Records">4.1 How Input Is Split into Records</a>
<li><a href="#Fields">4.2 Examining Fields</a>
<li><a href="#Nonconstant-Fields">4.3 Nonconstant Field Numbers</a>
<li><a href="#Changing-Fields">4.4 Changing the Contents of a Field</a>
<li><a href="#Field-Separators">4.5 Specifying How Fields Are Separated</a>
<ul>
<li><a href="#Default-Field-Splitting">4.5.1 Whitespace Normally Separates Fields</a>
<li><a href="#Regexp-Field-Splitting">4.5.2 Using Regular Expressions to Separate Fields</a>
<li><a href="#Single-Character-Fields">4.5.3 Making Each Character a Separate Field</a>
<li><a href="#Command-Line-Field-Separator">4.5.4 Setting <code>FS</code> from the Command Line</a>
<li><a href="#Field-Splitting-Summary">4.5.5 Field-Splitting Summary</a>
</li></ul>
<li><a href="#Constant-Size">4.6 Reading Fixed-Width Data</a>
<li><a href="#Splitting-By-Content">4.7 Defining Fields By Content</a>
<li><a href="#Multiple-Line">4.8 Multiple-Line Records</a>
<li><a href="#Getline">4.9 Explicit Input with <code>getline</code></a>
<ul>
<li><a href="#Plain-Getline">4.9.1 Using <code>getline</code> with No Arguments</a>
<li><a href="#Getline_002fVariable">4.9.2 Using <code>getline</code> into a Variable</a>
<li><a href="#Getline_002fFile">4.9.3 Using <code>getline</code> from a File</a>
<li><a href="#Getline_002fVariable_002fFile">4.9.4 Using <code>getline</code> into a Variable from a File</a>
<li><a href="#Getline_002fPipe">4.9.5 Using <code>getline</code> from a Pipe</a>
<li><a href="#Getline_002fVariable_002fPipe">4.9.6 Using <code>getline</code> into a Variable from a Pipe</a>
<li><a href="#Getline_002fCoprocess">4.9.7 Using <code>getline</code> from a Coprocess</a>
<li><a href="#Getline_002fVariable_002fCoprocess">4.9.8 Using <code>getline</code> into a Variable from a Coprocess</a>
<li><a href="#Getline-Notes">4.9.9 Points to Remember About <code>getline</code></a>
<li><a href="#Getline-Summary">4.9.10 Summary of <code>getline</code> Variants</a>
</li></ul>
<li><a href="#Command-line-directories">4.10 Directories On The Command Line</a>
</li></ul>
<li><a name="toc_Printing" href="#Printing">5 Printing Output</a>
<ul>
<li><a href="#Print">5.1 The <code>print</code> Statement</a>
<li><a href="#Print-Examples">5.2 <code>print</code> Statement Examples</a>
<li><a href="#Output-Separators">5.3 Output Separators</a>
<li><a href="#OFMT">5.4 Controlling Numeric Output with <code>print</code></a>
<li><a href="#Printf">5.5 Using <code>printf</code> Statements for Fancier Printing</a>
<ul>
<li><a href="#Basic-Printf">5.5.1 Introduction to the <code>printf</code> Statement</a>
<li><a href="#Control-Letters">5.5.2 Format-Control Letters</a>
<li><a href="#Format-Modifiers">5.5.3 Modifiers for <code>printf</code> Formats</a>
<li><a href="#Printf-Examples">5.5.4 Examples Using <code>printf</code></a>
</li></ul>
<li><a href="#Redirection">5.6 Redirecting Output of <code>print</code> and <code>printf</code></a>
<li><a href="#Special-Files">5.7 Special File Names in <samp><span class="command">gawk</span></samp></a>
<ul>
<li><a href="#Special-FD">5.7.1 Special Files for Standard Descriptors</a>
<li><a href="#Special-Network">5.7.2 Special Files for Network Communications</a>
<li><a href="#Special-Caveats">5.7.3 Special File Name Caveats</a>
</li></ul>
<li><a href="#Close-Files-And-Pipes">5.8 Closing Input and Output Redirections</a>
</li></ul>
<li><a name="toc_Expressions" href="#Expressions">6 Expressions</a>
<ul>
<li><a href="#Values">6.1 Constants, Variables and Conversions</a>
<ul>
<li><a href="#Constants">6.1.1 Constant Expressions</a>
<ul>
<li><a href="#Scalar-Constants">6.1.1.1 Numeric and String Constants</a>
<li><a href="#Nondecimal_002dnumbers">6.1.1.2 Octal and Hexadecimal Numbers</a>
<li><a href="#Regexp-Constants">6.1.1.3 Regular Expression Constants</a>
</li></ul>
<li><a href="#Using-Constant-Regexps">6.1.2 Using Regular Expression Constants</a>
<li><a href="#Variables">6.1.3 Variables</a>
<ul>
<li><a href="#Using-Variables">6.1.3.1 Using Variables in a Program</a>
<li><a href="#Assignment-Options">6.1.3.2 Assigning Variables on the Command Line</a>
</li></ul>
<li><a href="#Conversion">6.1.4 Conversion of Strings and Numbers</a>
</li></ul>
<li><a href="#All-Operators">6.2 Operators: Doing Something With Values</a>
<ul>
<li><a href="#Arithmetic-Ops">6.2.1 Arithmetic Operators</a>
<li><a href="#Concatenation">6.2.2 String Concatenation</a>
<li><a href="#Assignment-Ops">6.2.3 Assignment Expressions</a>
<li><a href="#Increment-Ops">6.2.4 Increment and Decrement Operators</a>
</li></ul>
<li><a href="#Truth-Values-and-Conditions">6.3 Truth Values and Conditions</a>
<ul>
<li><a href="#Truth-Values">6.3.1 True and False in <samp><span class="command">awk</span></samp></a>
<li><a href="#Typing-and-Comparison">6.3.2 Variable Typing and Comparison Expressions</a>
<ul>
<li><a href="#Variable-Typing">6.3.2.1 String Type Versus Numeric Type</a>
<li><a href="#Comparison-Operators">6.3.2.2 Comparison Operators</a>
<li><a href="#POSIX-String-Comparison">6.3.2.3 String Comparison With POSIX Rules</a>
</li></ul>
<li><a href="#Boolean-Ops">6.3.3 Boolean Expressions</a>
<li><a href="#Conditional-Exp">6.3.4 Conditional Expressions</a>
</li></ul>
<li><a href="#Function-Calls">6.4 Function Calls</a>
<li><a href="#Precedence">6.5 Operator Precedence (How Operators Nest)</a>
<li><a href="#Locales">6.6 Where You Are Makes A Difference</a>
</li></ul>
<li><a name="toc_Patterns-and-Actions" href="#Patterns-and-Actions">7 Patterns, Actions, and Variables</a>
<ul>
<li><a href="#Pattern-Overview">7.1 Pattern Elements</a>
<ul>
<li><a href="#Regexp-Patterns">7.1.1 Regular Expressions as Patterns</a>
<li><a href="#Expression-Patterns">7.1.2 Expressions as Patterns</a>
<li><a href="#Ranges">7.1.3 Specifying Record Ranges with Patterns</a>
<li><a href="#BEGIN_002fEND">7.1.4 The <code>BEGIN</code> and <code>END</code> Special Patterns</a>
<ul>
<li><a href="#Using-BEGIN_002fEND">7.1.4.1 Startup and Cleanup Actions</a>
<li><a href="#I_002fO-And-BEGIN_002fEND">7.1.4.2 Input/Output from <code>BEGIN</code> and <code>END</code> Rules</a>
</li></ul>
<li><a href="#BEGINFILE_002fENDFILE">7.1.5 The <code>BEGINFILE</code> and <code>ENDFILE</code> Special Patterns</a>
<li><a href="#Empty">7.1.6 The Empty Pattern</a>
</li></ul>
<li><a href="#Using-Shell-Variables">7.2 Using Shell Variables in Programs</a>
<li><a href="#Action-Overview">7.3 Actions</a>
<li><a href="#Statements">7.4 Control Statements in Actions</a>
<ul>
<li><a href="#If-Statement">7.4.1 The <code>if</code>-<code>else</code> Statement</a>
<li><a href="#While-Statement">7.4.2 The <code>while</code> Statement</a>
<li><a href="#Do-Statement">7.4.3 The <code>do</code>-<code>while</code> Statement</a>
<li><a href="#For-Statement">7.4.4 The <code>for</code> Statement</a>
<li><a href="#Switch-Statement">7.4.5 The <code>switch</code> Statement</a>
<li><a href="#Break-Statement">7.4.6 The <code>break</code> Statement</a>
<li><a href="#Continue-Statement">7.4.7 The <code>continue</code> Statement</a>
<li><a href="#Next-Statement">7.4.8 The <code>next</code> Statement</a>
<li><a href="#Nextfile-Statement">7.4.9 The <code>nextfile</code> Statement</a>
<li><a href="#Exit-Statement">7.4.10 The <code>exit</code> Statement</a>
</li></ul>
<li><a href="#Built_002din-Variables">7.5 Built-in Variables</a>
<ul>
<li><a href="#User_002dmodified">7.5.1 Built-in Variables That Control <samp><span class="command">awk</span></samp></a>
<li><a href="#Auto_002dset">7.5.2 Built-in Variables That Convey Information</a>
<li><a href="#ARGC-and-ARGV">7.5.3 Using <code>ARGC</code> and <code>ARGV</code></a>
</li></ul>
</li></ul>
<li><a name="toc_Arrays" href="#Arrays">8 Arrays in <samp><span class="command">awk</span></samp></a>
<ul>
<li><a href="#Array-Basics">8.1 The Basics of Arrays</a>
<ul>
<li><a href="#Array-Intro">8.1.1 Introduction to Arrays</a>
<li><a href="#Reference-to-Elements">8.1.2 Referring to an Array Element</a>
<li><a href="#Assigning-Elements">8.1.3 Assigning Array Elements</a>
<li><a href="#Array-Example">8.1.4 Basic Array Example</a>
<li><a href="#Scanning-an-Array">8.1.5 Scanning All Elements of an Array</a>
<li><a href="#Controlling-Scanning">8.1.6 Using Predefined Array Scanning Orders</a>
</li></ul>
<li><a href="#Delete">8.2 The <code>delete</code> Statement</a>
<li><a href="#Numeric-Array-Subscripts">8.3 Using Numbers to Subscript Arrays</a>
<li><a href="#Uninitialized-Subscripts">8.4 Using Uninitialized Variables as Subscripts</a>
<li><a href="#Multi_002ddimensional">8.5 Multidimensional Arrays</a>
<ul>
<li><a href="#Multi_002dscanning">8.5.1 Scanning Multidimensional Arrays</a>
</li></ul>
<li><a href="#Arrays-of-Arrays">8.6 Arrays of Arrays</a>
</li></ul>
<li><a name="toc_Functions" href="#Functions">9 Functions</a>
<ul>
<li><a href="#Built_002din">9.1 Built-in Functions</a>
<ul>
<li><a href="#Calling-Built_002din">9.1.1 Calling Built-in Functions</a>
<li><a href="#Numeric-Functions">9.1.2 Numeric Functions</a>
<li><a href="#String-Functions">9.1.3 String-Manipulation Functions</a>
<ul>
<li><a href="#Gory-Details">9.1.3.1 More About &lsquo;<samp><span class="samp">\</span></samp>&rsquo; and &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; with <code>sub()</code>, <code>gsub()</code>, and <code>gensub()</code></a>
</li></ul>
<li><a href="#I_002fO-Functions">9.1.4 Input/Output Functions</a>
<li><a href="#Time-Functions">9.1.5 Time Functions</a>
<li><a href="#Bitwise-Functions">9.1.6 Bit-Manipulation Functions</a>
<li><a href="#Type-Functions">9.1.7 Getting Type Information</a>
<li><a href="#I18N-Functions">9.1.8 String-Translation Functions</a>
</li></ul>
<li><a href="#User_002ddefined">9.2 User-Defined Functions</a>
<ul>
<li><a href="#Definition-Syntax">9.2.1 Function Definition Syntax</a>
<li><a href="#Function-Example">9.2.2 Function Definition Examples</a>
<li><a href="#Function-Caveats">9.2.3 Calling User-Defined Functions</a>
<ul>
<li><a href="#Calling-A-Function">9.2.3.1 Writing A Function Call</a>
<li><a href="#Variable-Scope">9.2.3.2 Controlling Variable Scope</a>
<li><a href="#Pass-By-Value_002fReference">9.2.3.3 Passing Function Arguments By Value Or By Reference</a>
</li></ul>
<li><a href="#Return-Statement">9.2.4 The <code>return</code> Statement</a>
<li><a href="#Dynamic-Typing">9.2.5 Functions and Their Effects on Variable Typing</a>
</li></ul>
<li><a href="#Indirect-Calls">9.3 Indirect Function Calls</a>
</li></ul>
<li><a name="toc_Internationalization" href="#Internationalization">10 Internationalization with <samp><span class="command">gawk</span></samp></a>
<ul>
<li><a href="#I18N-and-L10N">10.1 Internationalization and Localization</a>
<li><a href="#Explaining-gettext">10.2 GNU <code>gettext</code></a>
<li><a href="#Programmer-i18n">10.3 Internationalizing <samp><span class="command">awk</span></samp> Programs</a>
<li><a href="#Translator-i18n">10.4 Translating <samp><span class="command">awk</span></samp> Programs</a>
<ul>
<li><a href="#String-Extraction">10.4.1 Extracting Marked Strings</a>
<li><a href="#Printf-Ordering">10.4.2 Rearranging <code>printf</code> Arguments</a>
<li><a href="#I18N-Portability">10.4.3 <samp><span class="command">awk</span></samp> Portability Issues</a>
</li></ul>
<li><a href="#I18N-Example">10.5 A Simple Internationalization Example</a>
<li><a href="#Gawk-I18N">10.6 <samp><span class="command">gawk</span></samp> Can Speak Your Language</a>
</li></ul>
<li><a name="toc_Advanced-Features" href="#Advanced-Features">11 Advanced Features of <samp><span class="command">gawk</span></samp></a>
<ul>
<li><a href="#Nondecimal-Data">11.1 Allowing Nondecimal Input Data</a>
<li><a href="#Array-Sorting">11.2 Controlling Array Traversal and Array Sorting</a>
<ul>
<li><a href="#Controlling-Array-Traversal">11.2.1 Controlling Array Traversal</a>
<li><a href="#Array-Sorting-Functions">11.2.2 Sorting Array Values and Indices with <samp><span class="command">gawk</span></samp></a>
</li></ul>
<li><a href="#Two_002dway-I_002fO">11.3 Two-Way Communications with Another Process</a>
<li><a href="#TCP_002fIP-Networking">11.4 Using <samp><span class="command">gawk</span></samp> for Network Programming</a>
<li><a href="#Profiling">11.5 Profiling Your <samp><span class="command">awk</span></samp> Programs</a>
</li></ul>
<li><a name="toc_Library-Functions" href="#Library-Functions">12 A Library of <samp><span class="command">awk</span></samp> Functions</a>
<ul>
<li><a href="#Library-Names">12.1 Naming Library Function Global Variables</a>
<li><a href="#General-Functions">12.2 General Programming</a>
<ul>
<li><a href="#Strtonum-Function">12.2.1 Converting Strings To Numbers</a>
<li><a href="#Assert-Function">12.2.2 Assertions</a>
<li><a href="#Round-Function">12.2.3 Rounding Numbers</a>
<li><a href="#Cliff-Random-Function">12.2.4 The Cliff Random Number Generator</a>
<li><a href="#Ordinal-Functions">12.2.5 Translating Between Characters and Numbers</a>
<li><a href="#Join-Function">12.2.6 Merging an Array into a String</a>
<li><a href="#Gettimeofday-Function">12.2.7 Managing the Time of Day</a>
</li></ul>
<li><a href="#Data-File-Management">12.3 Data File Management</a>
<ul>
<li><a href="#Filetrans-Function">12.3.1 Noting Data File Boundaries</a>
<li><a href="#Rewind-Function">12.3.2 Rereading the Current File</a>
<li><a href="#File-Checking">12.3.3 Checking for Readable Data Files</a>
<li><a href="#Empty-Files">12.3.4 Checking For Zero-length Files</a>
<li><a href="#Ignoring-Assigns">12.3.5 Treating Assignments as File Names</a>
</li></ul>
<li><a href="#Getopt-Function">12.4 Processing Command-Line Options</a>
<li><a href="#Passwd-Functions">12.5 Reading the User Database</a>
<li><a href="#Group-Functions">12.6 Reading the Group Database</a>
<li><a href="#Walking-Arrays">12.7 Traversing Arrays of Arrays</a>
</li></ul>
<li><a name="toc_Sample-Programs" href="#Sample-Programs">13 Practical <samp><span class="command">awk</span></samp> Programs</a>
<ul>
<li><a href="#Running-Examples">13.1 Running the Example Programs</a>
<li><a href="#Clones">13.2 Reinventing Wheels for Fun and Profit</a>
<ul>
<li><a href="#Cut-Program">13.2.1 Cutting out Fields and Columns</a>
<li><a href="#Egrep-Program">13.2.2 Searching for Regular Expressions in Files</a>
<li><a href="#Id-Program">13.2.3 Printing out User Information</a>
<li><a href="#Split-Program">13.2.4 Splitting a Large File into Pieces</a>
<li><a href="#Tee-Program">13.2.5 Duplicating Output into Multiple Files</a>
<li><a href="#Uniq-Program">13.2.6 Printing Nonduplicated Lines of Text</a>
<li><a href="#Wc-Program">13.2.7 Counting Things</a>
</li></ul>
<li><a href="#Miscellaneous-Programs">13.3 A Grab Bag of <samp><span class="command">awk</span></samp> Programs</a>
<ul>
<li><a href="#Dupword-Program">13.3.1 Finding Duplicated Words in a Document</a>
<li><a href="#Alarm-Program">13.3.2 An Alarm Clock Program</a>
<li><a href="#Translate-Program">13.3.3 Transliterating Characters</a>
<li><a href="#Labels-Program">13.3.4 Printing Mailing Labels</a>
<li><a href="#Word-Sorting">13.3.5 Generating Word-Usage Counts</a>
<li><a href="#History-Sorting">13.3.6 Removing Duplicates from Unsorted Text</a>
<li><a href="#Extract-Program">13.3.7 Extracting Programs from Texinfo Source Files</a>
<li><a href="#Simple-Sed">13.3.8 A Simple Stream Editor</a>
<li><a href="#Igawk-Program">13.3.9 An Easy Way to Use Library Functions</a>
<li><a href="#Anagram-Program">13.3.10 Finding Anagrams From A Dictionary</a>
<li><a href="#Signature-Program">13.3.11 And Now For Something Completely Different</a>
</li></ul>
</li></ul>
<li><a name="toc_Debugger" href="#Debugger">14 <samp><span class="command">dgawk</span></samp>: The <samp><span class="command">awk</span></samp> Debugger</a>
<ul>
<li><a href="#Debugging">14.1 Introduction to <samp><span class="command">dgawk</span></samp></a>
<ul>
<li><a href="#Debugging-Concepts">14.1.1 Debugging In General</a>
<li><a href="#Debugging-Terms">14.1.2 Additional Debugging Concepts</a>
<li><a href="#Awk-Debugging">14.1.3 Awk Debugging</a>
</li></ul>
<li><a href="#Sample-dgawk-session">14.2 Sample <samp><span class="command">dgawk</span></samp> session</a>
<ul>
<li><a href="#dgawk-invocation">14.2.1 <samp><span class="command">dgawk</span></samp> Invocation</a>
<li><a href="#Finding-The-Bug">14.2.2 Finding The Bug</a>
</li></ul>
<li><a href="#List-of-Debugger-Commands">14.3 Main <samp><span class="command">dgawk</span></samp> Commands</a>
<ul>
<li><a href="#Breakpoint-Control">14.3.1 Control Of Breakpoints</a>
<li><a href="#Dgawk-Execution-Control">14.3.2 Control of Execution</a>
<li><a href="#Viewing-And-Changing-Data">14.3.3 Viewing and Changing Data</a>
<li><a href="#Dgawk-Stack">14.3.4 Dealing With The Stack</a>
<li><a href="#Dgawk-Info">14.3.5 Obtaining Information About The Program and The Debugger State</a>
<li><a href="#Miscellaneous-Dgawk-Commands">14.3.6 Miscellaneous Commands</a>
</li></ul>
<li><a href="#Readline-Support">14.4 Readline Support</a>
<li><a href="#Dgawk-Limitations">14.5 Limitations and Future Plans</a>
</li></ul>
<li><a name="toc_Language-History" href="#Language-History">Appendix A The Evolution of the <samp><span class="command">awk</span></samp> Language</a>
<ul>
<li><a href="#V7_002fSVR3_002e1">A.1 Major Changes Between V7 and SVR3.1</a>
<li><a href="#SVR4">A.2 Changes Between SVR3.1 and SVR4</a>
<li><a href="#POSIX">A.3 Changes Between SVR4 and POSIX <samp><span class="command">awk</span></samp></a>
<li><a href="#BTL">A.4 Extensions in Brian Kernighan's <samp><span class="command">awk</span></samp></a>
<li><a href="#POSIX_002fGNU">A.5 Extensions in <samp><span class="command">gawk</span></samp> Not in POSIX <samp><span class="command">awk</span></samp></a>
<li><a href="#Common-Extensions">A.6 Common Extensions Summary</a>
<li><a href="#Ranges-and-Locales">A.7 Regexp Ranges and Locales: A Long Sad Story</a>
<li><a href="#Contributors">A.8 Major Contributors to <samp><span class="command">gawk</span></samp></a>
</li></ul>
<li><a name="toc_Installation" href="#Installation">Appendix B Installing <samp><span class="command">gawk</span></samp></a>
<ul>
<li><a href="#Gawk-Distribution">B.1 The <samp><span class="command">gawk</span></samp> Distribution</a>
<ul>
<li><a href="#Getting">B.1.1 Getting the <samp><span class="command">gawk</span></samp> Distribution</a>
<li><a href="#Extracting">B.1.2 Extracting the Distribution</a>
<li><a href="#Distribution-contents">B.1.3 Contents of the <samp><span class="command">gawk</span></samp> Distribution</a>
</li></ul>
<li><a href="#Unix-Installation">B.2 Compiling and Installing <samp><span class="command">gawk</span></samp> on Unix-like Systems</a>
<ul>
<li><a href="#Quick-Installation">B.2.1 Compiling <samp><span class="command">gawk</span></samp> for Unix-like Systems</a>
<li><a href="#Additional-Configuration-Options">B.2.2 Additional Configuration Options</a>
<li><a href="#Configuration-Philosophy">B.2.3 The Configuration Process</a>
</li></ul>
<li><a href="#Non_002dUnix-Installation">B.3 Installation on Other Operating Systems</a>
<ul>
<li><a href="#PC-Installation">B.3.1 Installation on PC Operating Systems</a>
<ul>
<li><a href="#PC-Binary-Installation">B.3.1.1 Installing a Prepared Distribution for PC Systems</a>
<li><a href="#PC-Compiling">B.3.1.2 Compiling <samp><span class="command">gawk</span></samp> for PC Operating Systems</a>
<li><a href="#PC-Testing">B.3.1.3 Testing <samp><span class="command">gawk</span></samp> on PC Operating Systems</a>
<li><a href="#PC-Using">B.3.1.4 Using <samp><span class="command">gawk</span></samp> on PC Operating Systems</a>
<li><a href="#Cygwin">B.3.1.5 Using <samp><span class="command">gawk</span></samp> In The Cygwin Environment</a>
<li><a href="#MSYS">B.3.1.6 Using <samp><span class="command">gawk</span></samp> In The MSYS Environment</a>
</li></ul>
<li><a href="#VMS-Installation">B.3.2 How to Compile and Install <samp><span class="command">gawk</span></samp> on VMS</a>
<ul>
<li><a href="#VMS-Compilation">B.3.2.1 Compiling <samp><span class="command">gawk</span></samp> on VMS</a>
<li><a href="#VMS-Installation-Details">B.3.2.2 Installing <samp><span class="command">gawk</span></samp> on VMS</a>
<li><a href="#VMS-Running">B.3.2.3 Running <samp><span class="command">gawk</span></samp> on VMS</a>
<li><a href="#VMS-Old-Gawk">B.3.2.4 Some VMS Systems Have An Old Version of <samp><span class="command">gawk</span></samp></a>
</li></ul>
</li></ul>
<li><a href="#Bugs">B.4 Reporting Problems and Bugs</a>
<li><a href="#Other-Versions">B.5 Other Freely Available <samp><span class="command">awk</span></samp> Implementations</a>
</li></ul>
<li><a name="toc_Notes" href="#Notes">Appendix C Implementation Notes</a>
<ul>
<li><a href="#Compatibility-Mode">C.1 Downward Compatibility and Debugging</a>
<li><a href="#Additions">C.2 Making Additions to <samp><span class="command">gawk</span></samp></a>
<ul>
<li><a href="#Accessing-The-Source">C.2.1 Accessing The <samp><span class="command">gawk</span></samp> Git Repository</a>
<li><a href="#Adding-Code">C.2.2 Adding New Features</a>
<li><a href="#New-Ports">C.2.3 Porting <samp><span class="command">gawk</span></samp> to a New Operating System</a>
</li></ul>
<li><a href="#Dynamic-Extensions">C.3 Adding New Built-in Functions to <samp><span class="command">gawk</span></samp></a>
<ul>
<li><a href="#Internals">C.3.1 A Minimal Introduction to <samp><span class="command">gawk</span></samp> Internals</a>
<li><a href="#Plugin-License">C.3.2 Extension Licensing</a>
<li><a href="#Sample-Library">C.3.3 Example: Directory and File Operation Built-ins</a>
<ul>
<li><a href="#Internal-File-Description">C.3.3.1 Using <code>chdir()</code> and <code>stat()</code></a>
<li><a href="#Internal-File-Ops">C.3.3.2 C Code for <code>chdir()</code> and <code>stat()</code></a>
<li><a href="#Using-Internal-File-Ops">C.3.3.3 Integrating the Extensions</a>
</li></ul>
</li></ul>
<li><a href="#Future-Extensions">C.4 Probable Future Extensions</a>
</li></ul>
<li><a name="toc_Basic-Concepts" href="#Basic-Concepts">Appendix D Basic Programming Concepts</a>
<ul>
<li><a href="#Basic-High-Level">D.1 What a Program Does</a>
<li><a href="#Basic-Data-Typing">D.2 Data Values in a Computer</a>
<li><a href="#Floating-Point-Issues">D.3 Floating-Point Number Caveats</a>
<ul>
<li><a href="#String-Conversion-Precision">D.3.1 The String Value Can Lie</a>
<li><a href="#Unexpected-Results">D.3.2 Floating Point Numbers Are Not Abstract Numbers</a>
<li><a href="#POSIX-Floating-Point-Problems">D.3.3 Standards Versus Existing Practice</a>
</li></ul>
</li></ul>
<li><a name="toc_Glossary" href="#Glossary">Glossary</a>
<li><a name="toc_Copying" href="#Copying">GNU General Public License</a>
<li><a name="toc_GNU-Free-Documentation-License" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>
<ul>
<li><a href="#GNU-Free-Documentation-License">ADDENDUM: How to use this License for your documents</a>
</li></ul>
<li><a name="toc_Index" href="#Index">Index</a>
</li></ul>
</div>

<div class="node">
<a name="Foreword"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Preface">Preface</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Foreword</h2>

<p>Arnold Robbins and I are good friends. We were introduced
<!-- 11 years ago -->
in 1990
by circumstances&mdash;and our favorite programming language, AWK. 
The circumstances started a couple of years
earlier. I was working at a new job and noticed an unplugged
Unix computer sitting in the corner.  No one knew how to use it,
and neither did I.  However,
a couple of days later it was running, and
I was <code>root</code> and the one-and-only user. 
That day, I began the transition from statistician to Unix programmer.

   <p>On one of many trips to the library or bookstore in search of
books on Unix, I found the gray AWK book, a.k.a. Aho, Kernighan and
Weinberger, <cite>The AWK Programming Language</cite>, Addison-Wesley,
1988.  AWK's simple programming paradigm&mdash;find a pattern in the
input and then perform an action&mdash;often reduced complex or tedious
data manipulations to few lines of code.  I was excited to try my
hand at programming in AWK.

   <p>Alas,  the <samp><span class="command">awk</span></samp> on my computer was a limited version of the
language described in the AWK book.  I discovered that my computer
had &ldquo;old <samp><span class="command">awk</span></samp>&rdquo; and the AWK book described &ldquo;new <samp><span class="command">awk</span></samp>.&rdquo;
I learned that this was typical; the old version refused to step
aside or relinquish its name.  If a system had a new <samp><span class="command">awk</span></samp>, it was
invariably called <samp><span class="command">nawk</span></samp>, and few systems had it. 
The best way to get a new <samp><span class="command">awk</span></samp> was to <samp><span class="command">ftp</span></samp> the source code for
<samp><span class="command">gawk</span></samp> from <code>prep.ai.mit.edu</code>.  <samp><span class="command">gawk</span></samp> was a version of
new <samp><span class="command">awk</span></samp> written by David Trueman and Arnold, and available under
the GNU General Public License.

   <p>(Incidentally,
it's no longer difficult to find a new <samp><span class="command">awk</span></samp>. <samp><span class="command">gawk</span></samp> ships with
GNU/Linux, and you can download binaries or source code for almost
any system; my wife uses <samp><span class="command">gawk</span></samp> on her VMS box.)

   <p>My Unix system started out unplugged from the wall; it certainly was not
plugged into a network.  So, oblivious to the existence of <samp><span class="command">gawk</span></samp>
and the Unix community in general, and desiring a new <samp><span class="command">awk</span></samp>, I wrote
my own, called <samp><span class="command">mawk</span></samp>. 
Before I was finished I knew about <samp><span class="command">gawk</span></samp>,
but it was too late to stop, so I eventually posted
to a <code>comp.sources</code> newsgroup.

   <p>A few days after my posting, I got a friendly email
from Arnold introducing
himself.   He suggested we share design and algorithms and
attached a draft of the POSIX standard so
that I could update <samp><span class="command">mawk</span></samp> to support language extensions added
after publication of the AWK book.

   <p>Frankly, if our roles had
been reversed, I would not have been so open and we probably would
have never met.  I'm glad we did meet. 
He is an AWK expert's AWK expert and a genuinely nice person. 
Arnold contributes significant amounts of his
expertise and time to the Free Software Foundation.

   <p>This book is the <samp><span class="command">gawk</span></samp> reference manual, but at its core it
is a book about AWK programming that
will appeal to a wide audience. 
It is a definitive reference to the AWK language as defined by the
1987 Bell Laboratories release and codified in the 1992 POSIX Utilities
standard.

   <p>On the other hand, the novice AWK programmer can study
a wealth of practical programs that emphasize
the power of AWK's basic idioms:
data driven control-flow, pattern matching with regular expressions,
and associative arrays. 
Those looking for something new can try out <samp><span class="command">gawk</span></samp>'s
interface to network protocols via special <samp><span class="file">/inet</span></samp> files.

   <p>The programs in this book make clear that an AWK program is
typically much smaller and faster to develop than
a counterpart written in C. 
Consequently, there is often a payoff to prototype an
algorithm or design in AWK to get it running quickly and expose
problems early. Often, the interpreted performance is adequate
and the AWK prototype becomes the product.

   <p>The new <samp><span class="command">pgawk</span></samp> (profiling <samp><span class="command">gawk</span></samp>), produces
program execution counts. 
I recently experimented with an algorithm that for
n lines of input, exhibited
~ C n^2
performance, while
theory predicted
~ C n log n
behavior. A few minutes poring
over the <samp><span class="file">awkprof.out</span></samp> profile pinpointed the problem to
a single line of code.  <samp><span class="command">pgawk</span></samp> is a welcome addition to
my programmer's toolbox.

   <p>Arnold has distilled over a decade of experience writing and
using AWK programs, and developing <samp><span class="command">gawk</span></samp>, into this book.  If you use
AWK or want to learn how, then read this book.

<pre class="display">     Michael Brennan
     Author of <samp><span class="command">mawk</span></samp>
     March, 2001
</pre>
   <div class="node">
<a name="Preface"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getting-Started">Getting Started</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Foreword">Foreword</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Preface</h2>

<!-- I saw a comment somewhere that the preface should describe the book itself, -->
<!-- and the introduction should describe what the book covers. -->
<!-- 12/2000: Chuck wants the preface & intro combined. -->
<p>Several kinds of tasks occur repeatedly
when working with text files. 
You might want to extract certain lines and discard the rest. 
Or you may need to make changes wherever certain patterns appear,
but leave the rest of the file alone. 
Writing single-use programs for these tasks in languages such as C, C++,
or Java is time-consuming and inconvenient. 
Such jobs are often easier with <samp><span class="command">awk</span></samp>. 
The <samp><span class="command">awk</span></samp> utility interprets a special-purpose programming language
that makes it easy to handle simple data-reformatting jobs.

   <p>The GNU implementation of <samp><span class="command">awk</span></samp> is called <samp><span class="command">gawk</span></samp>; if you
invoke it with the proper options or environment variables
(see <a href="#Options">Options</a>), it is fully
compatible with
the POSIX<a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>
specification of the <samp><span class="command">awk</span></samp> language
and with the Unix version of <samp><span class="command">awk</span></samp> maintained
by Brian Kernighan. 
This means that all
properly written <samp><span class="command">awk</span></samp> programs should work with <samp><span class="command">gawk</span></samp>. 
Thus, we usually don't distinguish between <samp><span class="command">gawk</span></samp> and other
<samp><span class="command">awk</span></samp> implementations.

   <p><a name="index-g_t_0040command_007bawk_007d_002c-POSIX-and_002c-See-Also-POSIX-_0040command_007bawk_007d-1"></a><a name="index-g_t_0040command_007bawk_007d_002c-POSIX-and-2"></a><a name="index-POSIX_002c-_0040command_007bawk_007d-and-3"></a><a name="index-g_t_0040command_007bgawk_007d_002c-_0040command_007bawk_007d-and-4"></a><a name="index-g_t_0040command_007bawk_007d_002c-_0040command_007bgawk_007d-and-5"></a><a name="index-g_t_0040command_007bawk_007d_002c-uses-for-6"></a>Using <samp><span class="command">awk</span></samp> allows you to:

     <ul>
<li>Manage small, personal databases

     <li>Generate reports

     <li>Validate data

     <li>Produce indexes and perform other document preparation tasks

     <li>Experiment with algorithms that you can adapt later to other computer
languages
</ul>

   <p><a name="index-g_t_0040command_007bawk_007d_002c-See-Also-_0040command_007bgawk_007d-7"></a><a name="index-g_t_0040command_007bgawk_007d_002c-See-Also-_0040command_007bawk_007d-8"></a><a name="index-g_t_0040command_007bgawk_007d_002c-uses-for-9"></a>In addition,
<samp><span class="command">gawk</span></samp>
provides facilities that make it easy to:

     <ul>
<li>Extract bits and pieces of data for processing

     <li>Sort data

     <li>Perform simple network communications
</ul>

   <p>This Web page teaches you about the <samp><span class="command">awk</span></samp> language and
how you can use it effectively.  You should already be familiar with basic
system commands, such as <samp><span class="command">cat</span></samp> and <samp><span class="command">ls</span></samp>,<a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a> as well as basic shell
facilities, such as input/output (I/O) redirection and pipes.

   <p><a name="index-GNU-_0040command_007bawk_007d_002c-See-_0040command_007bgawk_007d-10"></a>Implementations of the <samp><span class="command">awk</span></samp> language are available for many
different computing environments.  This Web page, while describing
the <samp><span class="command">awk</span></samp> language in general, also describes the particular
implementation of <samp><span class="command">awk</span></samp> called <samp><span class="command">gawk</span></samp> (which stands for
&ldquo;GNU awk&rdquo;).  <samp><span class="command">gawk</span></samp> runs on a broad range of Unix systems,
ranging from Intel&reg;-architecture PC-based computers
up through large-scale systems,
such as Crays. <samp><span class="command">gawk</span></samp> has also been ported to Mac OS X,
Microsoft Windows (all versions) and OS/2 PCs,
and VMS. 
(Some other, obsolete systems to which <samp><span class="command">gawk</span></samp> was once ported
are no longer supported and the code for those systems
has been removed.)

<ul class="menu">
<li><a accesskey="1" href="#History">History</a>:                      The history of <samp><span class="command">gawk</span></samp> and
                                <samp><span class="command">awk</span></samp>. 
<li><a accesskey="2" href="#Names">Names</a>:                        What name to use to find <samp><span class="command">awk</span></samp>. 
<li><a accesskey="3" href="#This-Manual">This Manual</a>:                  Using this Web page. Includes sample
                                input files that you can use. 
<li><a accesskey="4" href="#Conventions">Conventions</a>:                  Typographical Conventions. 
<li><a accesskey="5" href="#Manual-History">Manual History</a>:               Brief history of the GNU project and this
                                Web page. 
<li><a accesskey="6" href="#How-To-Contribute">How To Contribute</a>:            Helping to save the world. 
<li><a accesskey="7" href="#Acknowledgments">Acknowledgments</a>:              Acknowledgments. 
</ul>

<div class="node">
<a name="History"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Names">Names</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Preface">Preface</a>

</div>

<h3 class="unnumberedsec">History of <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp></h3>

<p><a name="index-recipe-for-a-programming-language-11"></a><a name="index-programming-language_002c-recipe-for-12"></a><div align="center">Recipe For A Programming Language</div>

<p><table summary=""><tr align="left"><td valign="top"></td><td valign="top">1 part  <code>egrep</code> </td><td valign="top">1 part  <code>snobol</code>
<br></td></tr><tr align="left"><td valign="top"></td><td valign="top">2 parts <code>ed</code> </td><td valign="top">3 parts C
<br></td></tr></table>

   <blockquote>
Blend all parts well using <code>lex</code> and <code>yacc</code>. 
Document minimally and release.

   <p>After eight years, add another part <code>egrep</code> and two
more parts C.  Document very well and release. 
</blockquote>

   <p><a name="index-Aho_002c-Alfred-13"></a><a name="index-Weinberger_002c-Peter-14"></a><a name="index-Kernighan_002c-Brian-15"></a><a name="index-g_t_0040command_007bawk_007d_002c-history-of-16"></a>The name <samp><span class="command">awk</span></samp> comes from the initials of its designers: Alfred V. 
Aho, Peter J. Weinberger and Brian W. Kernighan.  The original version of
<samp><span class="command">awk</span></samp> was written in 1977 at AT&amp;T Bell Laboratories. 
In 1985, a new version made the programming
language more powerful, introducing user-defined functions, multiple input
streams, and computed regular expressions. 
This new version became widely available with Unix System V
Release 3.1 (1987). 
The version in System V Release 4 (1989) added some new features and cleaned
up the behavior in some of the &ldquo;dark corners&rdquo; of the language. 
The specification for <samp><span class="command">awk</span></samp> in the POSIX Command Language
and Utilities standard further clarified the language. 
Both the <samp><span class="command">gawk</span></samp> designers and the original Bell Laboratories <samp><span class="command">awk</span></samp>
designers provided feedback for the POSIX specification.

   <p><a name="index-Rubin_002c-Paul-17"></a><a name="index-Fenlason_002c-Jay-18"></a><a name="index-Trueman_002c-David-19"></a>Paul Rubin wrote the GNU implementation, <samp><span class="command">gawk</span></samp>, in 1986. 
Jay Fenlason completed it, with advice from Richard Stallman.  John Woods
contributed parts of the code as well.  In 1988 and 1989, David Trueman, with
help from me, thoroughly reworked <samp><span class="command">gawk</span></samp> for compatibility
with the newer <samp><span class="command">awk</span></samp>. 
Circa 1994, I became the primary maintainer. 
Current development focuses on bug fixes,
performance improvements, standards compliance, and occasionally, new features.

   <p>In May of 1997, J&uuml;rgen Kahrs felt the need for network access
from <samp><span class="command">awk</span></samp>, and with a little help from me, set about adding
features to do this for <samp><span class="command">gawk</span></samp>.  At that time, he also
wrote the bulk of
<cite>TCP/IP Internetworking with </cite><samp><span class="command">gawk</span></samp>
(a separate document, available as part of the <samp><span class="command">gawk</span></samp> distribution). 
His code finally became part of the main <samp><span class="command">gawk</span></samp> distribution
with <samp><span class="command">gawk</span></samp> version 3.1.

   <p>John Haque rewrote the <samp><span class="command">gawk</span></samp> internals, in the process providing
an <samp><span class="command">awk</span></samp>-level debugger. This version became available as
<samp><span class="command">gawk</span></samp> version 4.0, in 2011.

   <p>See <a href="#Contributors">Contributors</a>,
for a complete list of those who made important contributions to <samp><span class="command">gawk</span></samp>.

<div class="node">
<a name="Names"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#This-Manual">This Manual</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#History">History</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Preface">Preface</a>

</div>

<h3 class="section">A Rose by Any Other Name</h3>

<p><a name="index-g_t_0040command_007bawk_007d_002c-new-vs_002e_0040_003a-old-20"></a>The <samp><span class="command">awk</span></samp> language has evolved over the years. Full details are
provided in <a href="#Language-History">Language History</a>. 
The language described in this Web page
is often referred to as &ldquo;new <samp><span class="command">awk</span></samp>&rdquo; (<samp><span class="command">nawk</span></samp>).

   <p><a name="index-g_t_0040command_007bawk_007d_002c-versions-of-21"></a>Because of this, there are systems with multiple
versions of <samp><span class="command">awk</span></samp>. 
Some systems have an <samp><span class="command">awk</span></samp> utility that implements the
original version of the <samp><span class="command">awk</span></samp> language and a <samp><span class="command">nawk</span></samp> utility
for the new version. 
Others have an <samp><span class="command">oawk</span></samp> version for the &ldquo;old <samp><span class="command">awk</span></samp>&rdquo;
language and plain <samp><span class="command">awk</span></samp> for the new one.  Still others only
have one version, which is usually the new one.<a rel="footnote" href="#fn-3" name="fnd-3"><sup>3</sup></a>

   <p><a name="index-g_t_0040command_007bnawk_007d-utility-22"></a><a name="index-g_t_0040command_007boawk_007d-utility-23"></a>All in all, this makes it difficult for you to know which version of
<samp><span class="command">awk</span></samp> you should run when writing your programs.  The best advice
we can give here is to check your local documentation. Look for <samp><span class="command">awk</span></samp>,
<samp><span class="command">oawk</span></samp>, and <samp><span class="command">nawk</span></samp>, as well as for <samp><span class="command">gawk</span></samp>. 
It is likely that you already
have some version of new <samp><span class="command">awk</span></samp> on your system, which is what
you should use when running your programs.  (Of course, if you're reading
this Web page, chances are good that you have <samp><span class="command">gawk</span></samp>!)

   <p>Throughout this Web page, whenever we refer to a language feature
that should be available in any complete implementation of POSIX <samp><span class="command">awk</span></samp>,
we simply use the term <samp><span class="command">awk</span></samp>.  When referring to a feature that is
specific to the GNU implementation, we use the term <samp><span class="command">gawk</span></samp>.

<div class="node">
<a name="This-Manual"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conventions">Conventions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Names">Names</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Preface">Preface</a>

</div>

<h3 class="section">Using This Book</h3>

<p><a name="index-g_t_0040command_007bawk_007d_002c-terms-describing-24"></a>
The term <samp><span class="command">awk</span></samp> refers to a particular program as well as to the language you
use to tell this program what to do.  When we need to be careful, we call
the language &ldquo;the <samp><span class="command">awk</span></samp> language,&rdquo;
and the program &ldquo;the <samp><span class="command">awk</span></samp> utility.&rdquo;
This Web page explains
both how to write programs in the <samp><span class="command">awk</span></samp> language and how to
run the <samp><span class="command">awk</span></samp> utility. 
The term <samp><span class="command">awk</span></samp><dfn> program</dfn> refers to a program written by you in
the <samp><span class="command">awk</span></samp> programming language.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040command_007bawk_007d-and-25"></a><a name="index-g_t_0040command_007bawk_007d_002c-_0040command_007bgawk_007d-and-26"></a><a name="index-POSIX-_0040command_007bawk_007d-27"></a>Primarily, this Web page explains the features of <samp><span class="command">awk</span></samp>
as defined in the POSIX standard.  It does so in the context of the
<samp><span class="command">gawk</span></samp> implementation.  While doing so, it also
attempts to describe important differences between <samp><span class="command">gawk</span></samp>
and other <samp><span class="command">awk</span></samp> implementations.<a rel="footnote" href="#fn-4" name="fnd-4"><sup>4</sup></a>
Finally, any <samp><span class="command">gawk</span></samp> features that are not in
the POSIX standard for <samp><span class="command">awk</span></samp> are noted.

   <p>This Web page has the difficult task of being both a tutorial and a reference. 
If you are a novice, feel free to skip over details that seem too complex. 
You should also ignore the many cross-references; they are for the
expert user and for the online Info and HTML versions of the document.

   <p>There are
subsections labeled
as <strong>Advanced Notes</strong>
scattered throughout the Web page. 
They add a more complete explanation of points that are relevant, but not likely
to be of interest on first reading. 
All appear in the index, under the heading &ldquo;advanced features.&rdquo;

   <p>Most of the time, the examples use complete <samp><span class="command">awk</span></samp> programs. 
Some of the more advanced sections show only the part of the <samp><span class="command">awk</span></samp>
program that illustrates the concept currently being described.

   <p>While this Web page is aimed principally at people who have not been
exposed
to <samp><span class="command">awk</span></samp>, there is a lot of information here that even the <samp><span class="command">awk</span></samp>
expert should find useful.  In particular, the description of POSIX
<samp><span class="command">awk</span></samp> and the example programs in
<a href="#Library-Functions">Library Functions</a>, and in
<a href="#Sample-Programs">Sample Programs</a>,
should be of interest.

   <p><a href="#Getting-Started">Getting Started</a>,
provides the essentials you need to know to begin using <samp><span class="command">awk</span></samp>.

   <p><a href="#Invoking-Gawk">Invoking Gawk</a>,
describes how to run <samp><span class="command">gawk</span></samp>, the meaning of its
command-line options, and how it finds <samp><span class="command">awk</span></samp>
program source files.

   <p><a href="#Regexp">Regexp</a>,
introduces regular expressions in general, and in particular the flavors
supported by POSIX <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>.

   <p><a href="#Reading-Files">Reading Files</a>,
describes how <samp><span class="command">awk</span></samp> reads your data. 
It introduces the concepts of records and fields, as well
as the <code>getline</code> command. 
I/O redirection is first described here. 
Network I/O is also briefly introduced here.

   <p><a href="#Printing">Printing</a>,
describes how <samp><span class="command">awk</span></samp> programs can produce output with
<code>print</code> and <code>printf</code>.

   <p><a href="#Expressions">Expressions</a>,
describes expressions, which are the basic building blocks
for getting most things done in a program.

   <p><a href="#Patterns-and-Actions">Patterns and Actions</a>,
describes how to write patterns for matching records, actions for
doing something when a record is matched, and the built-in variables
<samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp> use.

   <p><a href="#Arrays">Arrays</a>,
covers <samp><span class="command">awk</span></samp>'s one-and-only data structure: associative arrays. 
Deleting array elements and whole arrays is also described, as well as
sorting arrays in <samp><span class="command">gawk</span></samp>.  It also describes how <samp><span class="command">gawk</span></samp>
provides arrays of arrays.

   <p><a href="#Functions">Functions</a>,
describes the built-in functions <samp><span class="command">awk</span></samp> and
<samp><span class="command">gawk</span></samp> provide, as well as how to define
your own functions.

   <p><a href="#Internationalization">Internationalization</a>,
describes special features in <samp><span class="command">gawk</span></samp> for translating program
messages into different languages at runtime.

   <p><a href="#Advanced-Features">Advanced Features</a>,
describes a number of <samp><span class="command">gawk</span></samp>-specific advanced features. 
Of particular note
are the abilities to have two-way communications with another process,
perform TCP/IP networking, and
profile your <samp><span class="command">awk</span></samp> programs.

   <p><a href="#Library-Functions">Library Functions</a>, and
<a href="#Sample-Programs">Sample Programs</a>,
provide many sample <samp><span class="command">awk</span></samp> programs. 
Reading them allows you to see <samp><span class="command">awk</span></samp>
solving real problems.

   <p><a href="#Debugger">Debugger</a>, describes the <samp><span class="command">awk</span></samp> debugger,
<samp><span class="command">dgawk</span></samp>.

   <p><a href="#Language-History">Language History</a>,
describes how the <samp><span class="command">awk</span></samp> language has evolved since
its first release to present.  It also describes how <samp><span class="command">gawk</span></samp>
has acquired features over time.

   <p><a href="#Installation">Installation</a>,
describes how to get <samp><span class="command">gawk</span></samp>, how to compile it
on POSIX-compatible systems,
and how to compile and use it on different
non-POSIX systems.  It also describes how to report bugs
in <samp><span class="command">gawk</span></samp> and where to get other freely
available <samp><span class="command">awk</span></samp> implementations.

   <p><a href="#Notes">Notes</a>,
describes how to disable <samp><span class="command">gawk</span></samp>'s extensions, as
well as how to contribute new code to <samp><span class="command">gawk</span></samp>,
how to write extension libraries, and some possible
future directions for <samp><span class="command">gawk</span></samp> development.

   <p><a href="#Basic-Concepts">Basic Concepts</a>,
provides some very cursory background material for those who
are completely unfamiliar with computer programming. 
Also centralized there is a discussion of some of the issues
surrounding floating-point numbers.

   <p>The
<a href="#Glossary">Glossary</a>,
defines most, if not all, the significant terms used
throughout the book. 
If you find terms that you aren't familiar with, try looking them up here.

   <p><a href="#Copying">Copying</a>, and
<a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>,
present the licenses that cover the <samp><span class="command">gawk</span></samp> source code
and this Web page, respectively.

<div class="node">
<a name="Conventions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Manual-History">Manual History</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#This-Manual">This Manual</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Preface">Preface</a>

</div>

<h3 class="section">Typographical Conventions</h3>

<p><a name="index-Texinfo-28"></a>This Web page is written in <a href="http://texinfo.org">Texinfo</a>,
the GNU documentation formatting language. 
A single Texinfo source file is used to produce both the printed and online
versions of the documentation. 
Because of this, the typographical conventions
are slightly different than in other books you may have read.

   <p>Examples you would type at the command-line are preceded by the common
shell primary and secondary prompts, &lsquo;<samp><span class="samp">$</span></samp>&rsquo; and &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo;. 
Input that you type is shown <kbd>like this</kbd>. 
Output from the command is preceded by the glyph &ldquo;-|&rdquo;. 
This typically represents the command's standard output. 
Error messages, and other output on the command's standard error, are preceded
by the glyph &ldquo;error--&gt;&rdquo;.  For example:

<pre class="example">     $ <kbd>echo hi on stdout</kbd>
     -| hi on stdout
     $ <kbd>echo hello on stderr 1&gt;&amp;2</kbd>
     error--&gt; hello on stderr
</pre>
   <p>In the text, command names appear in <code>this font</code>, while code segments
appear in the same font and quoted, &lsquo;<samp><span class="samp">like this</span></samp>&rsquo;. 
Options look like this: <samp><span class="option">-f</span></samp>. 
Some things are
emphasized <em>like this</em>, and if a point needs to be made
strongly, it is done <strong>like this</strong>.  The first occurrence of
a new term is usually its <dfn>definition</dfn> and appears in the same
font as the previous occurrence of &ldquo;definition&rdquo; in this sentence. 
Finally, file names are indicated like this: <samp><span class="file">/path/to/ourfile</span></samp>.

   <p>Characters that you type at the keyboard look <kbd>like this</kbd>.  In particular,
there are special characters called &ldquo;control characters.&rdquo;  These are
characters that you type by holding down both the <kbd>CONTROL</kbd> key and
another key, at the same time.  For example, a <kbd>Ctrl-d</kbd> is typed
by first pressing and holding the <kbd>CONTROL</kbd> key, next
pressing the <kbd>d</kbd> key and finally releasing both keys.

<!-- fakenode - for prepinfo -->
<h5 class="subsubheading">Dark Corners</h5>

<p><a name="index-Kernighan_002c-Brian-29"></a><blockquote>
<i>Dark corners are basically fractal &mdash; no matter how much
you illuminate, there's always a smaller but darker one.</i><br>
Brian Kernighan
</blockquote>

   <p><a name="index-d_002ec_002e_002c-See-dark-corner-30"></a><a name="index-dark-corner-31"></a>Until the POSIX standard (and <cite>GAWK: Effective AWK Programming</cite>),
many features of <samp><span class="command">awk</span></samp> were either poorly documented or not
documented at all.  Descriptions of such features
(often called &ldquo;dark corners&rdquo;) are noted in this Web page with
&ldquo;(d.c.)&rdquo;. 
They also appear in the index under the heading &ldquo;dark corner.&rdquo;

   <p>As noted by the opening quote, though, any
coverage of dark corners
is, by definition, incomplete.

   <p>Extensions to the standard <samp><span class="command">awk</span></samp> language that are supported by
more than one <samp><span class="command">awk</span></samp> implementation are marked
&ldquo;(c.e.),&rdquo; and listed in the index under &ldquo;common extensions&rdquo;
and &ldquo;extensions, common.&rdquo;

<div class="node">
<a name="Manual-History"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#How-To-Contribute">How To Contribute</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Conventions">Conventions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Preface">Preface</a>

</div>

<h3 class="unnumberedsec">The GNU Project and This Book</h3>

<p><a name="index-FSF-_0028Free-Software-Foundation_0029-32"></a><a name="index-Free-Software-Foundation-_0028FSF_0029-33"></a><a name="index-Stallman_002c-Richard-34"></a>The Free Software Foundation (FSF) is a nonprofit organization dedicated
to the production and distribution of freely distributable software. 
It was founded by Richard M. Stallman, the author of the original
Emacs editor.  GNU Emacs is the most widely used version of Emacs today.

   <p><a name="index-GNU-Project-35"></a><a name="index-GPL-_0028General-Public-License_0029-36"></a><a name="index-General-Public-License_002c-See-GPL-37"></a><a name="index-documentation_002c-online-38"></a>The GNU<a rel="footnote" href="#fn-5" name="fnd-5"><sup>5</sup></a>
Project is an ongoing effort on the part of the Free Software
Foundation to create a complete, freely distributable, POSIX-compliant
computing environment. 
The FSF uses the &ldquo;GNU General Public License&rdquo; (GPL) to ensure that
their software's
source code is always available to the end user. A
copy of the GPL is included
in this Web page
for your reference
(see <a href="#Copying">Copying</a>). 
The GPL applies to the C language source code for <samp><span class="command">gawk</span></samp>. 
To find out more about the FSF and the GNU Project online,
see <a href="http://www.gnu.org">the GNU Project's home page</a>. 
This Web page may also be read from
<a href="http://www.gnu.org/software/gawk/manual/">their web site</a>.

   <p>A shell, an editor (Emacs), highly portable optimizing C, C++, and
Objective-C compilers, a symbolic debugger and dozens of large and
small utilities (such as <samp><span class="command">gawk</span></samp>), have all been completed and are
freely available.  The GNU operating
system kernel (the HURD), has been released but remains in an early
stage of development.

   <p><a name="index-Linux-39"></a><a name="index-GNU_002fLinux-40"></a><a name="index-operating-systems_002c-BSD_002dbased-41"></a><a name="index-Alpha-_0028DEC_0029-42"></a>Until the GNU operating system is more fully developed, you should
consider using GNU/Linux, a freely distributable, Unix-like operating
system for Intel&reg;,
Power Architecture,
Sun SPARC, IBM S/390, and other
systems.<a rel="footnote" href="#fn-6" name="fnd-6"><sup>6</sup></a>
Many GNU/Linux distributions are
available for download from the Internet.

   <p>(There are numerous other freely available, Unix-like operating systems
based on the
Berkeley Software Distribution, and some of them use recent versions
of <samp><span class="command">gawk</span></samp> for their versions of <samp><span class="command">awk</span></samp>. 
<a href="http://www.netbsd.org">NetBSD</a>,
<a href="http://www.freebsd.org">FreeBSD</a>,
and
<a href="http://www.openbsd.org">OpenBSD</a>
are three of the most popular ones, but there
are others.)

   <p>The Web page you are reading is actually free&mdash;at least, the
information in it is free to anyone.  The machine-readable
source code for the Web page comes with <samp><span class="command">gawk</span></samp>; anyone
may take this Web page to a copying machine and make as many
copies as they like.  (Take a moment to check the Free Documentation
License in <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>.)

   <p><a name="index-Close_002c-Diane-43"></a>The Web page itself has gone through a number of previous editions. 
Paul Rubin wrote the very first draft of <cite>The GAWK Manual</cite>;
it was around 40 pages in size. 
Diane Close and Richard Stallman improved it, yielding a
version that was
around 90 pages long and barely described the original, &ldquo;old&rdquo;
version of <samp><span class="command">awk</span></samp>.

   <p>I started working with that version in the fall of 1988. 
As work on it progressed,
the FSF published several preliminary versions (numbered 0.<var>x</var>). 
In 1996, Edition 1.0 was released with <samp><span class="command">gawk</span></samp> 3.0.0. 
The FSF published the first two editions under
the title <cite>The GNU Awk User's Guide</cite>.

   <p>This edition maintains the basic structure of the previous editions. 
For Edition 4.0, the content has been thoroughly reviewed
and updated. All references to versions prior to 4.0 have been
removed. 
Of significant note for this edition is <a href="#Debugger">Debugger</a>.

   <p><cite>GAWK: Effective AWK Programming</cite> will undoubtedly continue to evolve. 
An electronic version
comes with the <samp><span class="command">gawk</span></samp> distribution from the FSF. 
If you find an error in this Web page, please report it! 
See <a href="#Bugs">Bugs</a>, for information on submitting
problem reports electronically.

<div class="node">
<a name="How-To-Contribute"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Acknowledgments">Acknowledgments</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Manual-History">Manual History</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Preface">Preface</a>

</div>

<h3 class="unnumberedsec">How to Contribute</h3>

<p>As the maintainer of GNU <samp><span class="command">awk</span></samp>, I once thought that I would be
able to manage a collection of publicly available <samp><span class="command">awk</span></samp> programs
and I even solicited contributions.  Making things available on the Internet
helps keep the <samp><span class="command">gawk</span></samp> distribution down to manageable size.

   <p>The initial collection of material, such as it is, is still available
at <a href="ftp://ftp.freefriends.org/arnold/Awkstuff">ftp://ftp.freefriends.org/arnold/Awkstuff</a>.  In the hopes of
doing something more broad, I acquired the <code>awk.info</code> domain.

   <p>However, I found that I could not dedicate enough time to managing
contributed code: the archive did not grow and the domain went unused
for several years.

   <p>Fortunately, late in 2008, a volunteer took on the task of setting up
an <samp><span class="command">awk</span></samp>-related web site&mdash;<a href="http://awk.info">http://awk.info</a>&mdash;and did a very
nice job.

   <p>If you have written an interesting <samp><span class="command">awk</span></samp> program, or have written
a <samp><span class="command">gawk</span></samp> extension that you would like to share with the rest
of the world, please see <a href="http://awk.info/?contribute">http://awk.info/?contribute</a> for how to
contribute it to the web site.

<div class="node">
<a name="Acknowledgments"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#How-To-Contribute">How To Contribute</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Preface">Preface</a>

</div>

<h3 class="unnumberedsec">Acknowledgments</h3>

<p>The initial draft of <cite>The GAWK Manual</cite> had the following acknowledgments:

   <blockquote>
Many people need to be thanked for their assistance in producing this
manual.  Jay Fenlason contributed many ideas and sample programs.  Richard
Mlynarik and Robert Chassell gave helpful comments on drafts of this
manual.  The paper <cite>A Supplemental Document for </cite><samp><span class="command">awk</span></samp> by John W. 
Pierce of the Chemistry Department at UC San Diego, pinpointed several
issues relevant both to <samp><span class="command">awk</span></samp> implementation and to this manual, that
would otherwise have escaped us. 
</blockquote>

   <p><a name="index-Stallman_002c-Richard-44"></a>I would like to acknowledge Richard M. Stallman, for his vision of a
better world and for his courage in founding the FSF and starting the
GNU Project.

   <p>Earlier editions of this Web page had the following acknowledgements:

   <blockquote>
The following people (in alphabetical order)
provided helpful comments on various
versions of this book,
Rick Adams,
Dr. Nelson H.F. Beebe,
Karl Berry,
Dr. Michael Brennan,
Rich Burridge,
Claire Cloutier,
Diane Close,
Scott Deifik,
Christopher (&ldquo;Topher&rdquo;) Eliot,
Jeffrey Friedl,
Dr. Darrel Hankerson,
Michal Jaegermann,
Dr. Richard J. LeBlanc,
Michael Lijewski,
Pat Rankin,
Miriam Robbins,
Mary Sheehan,
and
Chuck Toporek.

   <p><a name="index-Berry_002c-Karl-45"></a><a name="index-Chassell_002c-Robert-J_002e_0040_003a-46"></a><!-- @cindex Texinfo -->
Robert J. Chassell provided much valuable advice on
the use of Texinfo. 
He also deserves special thanks for
convincing me <em>not</em> to title this Web page
<cite>How To Gawk Politely</cite>. 
Karl Berry helped significantly with the TeX part of Texinfo.

   <p><a name="index-Hartholz_002c-Marshall-47"></a><a name="index-Hartholz_002c-Elaine-48"></a><a name="index-Schreiber_002c-Bert-49"></a><a name="index-Schreiber_002c-Rita-50"></a>I would like to thank Marshall and Elaine Hartholz of Seattle and
Dr. Bert and Rita Schreiber of Detroit for large amounts of quiet vacation
time in their homes, which allowed me to make significant progress on
this Web page and on <samp><span class="command">gawk</span></samp> itself.

   <p><a name="index-Hughes_002c-Phil-51"></a>Phil Hughes of SSC
contributed in a very important way by loaning me his laptop GNU/Linux
system, not once, but twice, which allowed me to do a lot of work while
away from home.

   <p><a name="index-Trueman_002c-David-52"></a>David Trueman deserves special credit; he has done a yeoman job
of evolving <samp><span class="command">gawk</span></samp> so that it performs well and without bugs. 
Although he is no longer involved with <samp><span class="command">gawk</span></samp>,
working with him on this project was a significant pleasure.

   <p><a name="index-Drepper_002c-Ulrich-53"></a><a name="index-GNITS-mailing-list-54"></a><a name="index-mailing-list_002c-GNITS-55"></a>The intrepid members of the GNITS mailing list, and most notably Ulrich
Drepper, provided invaluable help and feedback for the design of the
internationalization features.

   <p>Chuck Toporek, Mary Sheehan, and Claire Coutier of O'Reilly &amp; Associates contributed
significant editorial help for this Web page for the
3.1 release of <samp><span class="command">gawk</span></samp>. 
</blockquote>

   <p><a name="index-Beebe_002c-Nelson-56"></a><a name="index-Buening_002c-Andreas-57"></a><a name="index-Colombo_002c-Antonio-58"></a><a name="index-Davies_002c-Stephen-59"></a><a name="index-Deifik_002c-Scott-60"></a><a name="index-DuBois_002c-John-61"></a><a name="index-Hankerson_002c-Darrel-62"></a><a name="index-Haque_002c-John-63"></a><a name="index-Jaegermann_002c-Michal-64"></a><a name="index-Kahrs_002c-J_0040_0022urgen-65"></a><a name="index-Kasal_002c-Stepan-66"></a><a name="index-Pitts_002c-Dave-67"></a><a name="index-Rankin_002c-Pat-68"></a><a name="index-Schorr_002c-Andrew-69"></a><a name="index-Vinschen_002c-Corinna-70"></a><a name="index-Wallin_002c-Anders-71"></a><a name="index-Zaretskii_002c-Eli-72"></a>Dr. Nelson Beebe,
Andreas Buening,
Antonio Colombo,
Stephen Davies,
Scott Deifik,
John H. DuBois III,
Darrel Hankerson,
Michal Jaegermann,
J&uuml;rgen Kahrs,
Dave Pitts,
Stepan Kasal,
Pat Rankin,
Andrew Schorr,
Corinna Vinschen,
Anders Wallin,
and Eli Zaretskii
(in alphabetical order)
make up the current
<samp><span class="command">gawk</span></samp> &ldquo;crack portability team.&rdquo;  Without their hard work and
help, <samp><span class="command">gawk</span></samp> would not be nearly the fine program it is today.  It
has been and continues to be a pleasure working with this team of fine
people.

   <p>John Haque contributed the modifications to convert <samp><span class="command">gawk</span></samp>
into a byte-code interpreter, including the debugger. Stephen Davies
contributed to the effort to bring the byte-code changes into the mainstream
code base. 
Efraim Yawitz contributed the initial text of <a href="#Debugger">Debugger</a>.

   <p><a name="index-Kernighan_002c-Brian-73"></a>I would like to thank Brian Kernighan for invaluable assistance during the
testing and debugging of <samp><span class="command">gawk</span></samp>, and for ongoing
help and advice in clarifying numerous points about the language. 
 We could not have done nearly as good a job on either <samp><span class="command">gawk</span></samp>
or its documentation without his help.

   <p><a name="index-Robbins_002c-Miriam-74"></a><a name="index-Robbins_002c-Jean-75"></a><a name="index-Robbins_002c-Harry-76"></a><a name="index-G_002dd-77"></a>I must thank my wonderful wife, Miriam, for her patience through
the many versions of this project, for her proofreading,
and for sharing me with the computer. 
I would like to thank my parents for their love, and for the grace with
which they raised and educated me. 
Finally, I also must acknowledge my gratitude to G-d, for the many opportunities
He has sent my way, as well as for the gifts He has given me with which to
take advantage of those opportunities.
   <pre class="sp">


</pre>
Arnold Robbins <br>
Nof Ayalon <br>
ISRAEL <br>
March, 2011

<div class="node">
<a name="Getting-Started"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Invoking-Gawk">Invoking Gawk</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Preface">Preface</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 Getting Started with <samp><span class="command">awk</span></samp></h2>

<!-- @cindex script, definition of -->
<!-- @cindex rule, definition of -->
<!-- @cindex program, definition of -->
<!-- @cindex basic function of @command{awk} -->
<p><a name="index-g_t_0040command_007bawk_007d_002c-function-of-78"></a>
The basic function of <samp><span class="command">awk</span></samp> is to search files for lines (or other
units of text) that contain certain patterns.  When a line matches one
of the patterns, <samp><span class="command">awk</span></samp> performs specified actions on that line. 
<samp><span class="command">awk</span></samp> keeps processing input lines in this way until it reaches
the end of the input files.

   <p><a name="index-g_t_0040command_007bawk_007d_002c-uses-for-79"></a><a name="index-programming-languages_0040comma_007b_007d-data_002ddriven-vs_002e_0040_003a-procedural-80"></a><a name="index-g_t_0040command_007bawk_007d-programs-81"></a>Programs in <samp><span class="command">awk</span></samp> are different from programs in most other languages,
because <samp><span class="command">awk</span></samp> programs are <dfn>data-driven</dfn>; that is, you describe
the data you want to work with and then what to do when you find it. 
Most other languages are <dfn>procedural</dfn>; you have to describe, in great
detail, every step the program is to take.  When working with procedural
languages, it is usually much
harder to clearly describe the data your program will process. 
For this reason, <samp><span class="command">awk</span></samp> programs are often refreshingly easy to
read and write.

   <p><a name="index-program_002c-definition-of-82"></a><a name="index-rule_002c-definition-of-83"></a>When you run <samp><span class="command">awk</span></samp>, you specify an <samp><span class="command">awk</span></samp> <dfn>program</dfn> that
tells <samp><span class="command">awk</span></samp> what to do.  The program consists of a series of
<dfn>rules</dfn>.  (It may also contain <dfn>function definitions</dfn>,
an advanced feature that we will ignore for now. 
See <a href="#User_002ddefined">User-defined</a>.)  Each rule specifies one
pattern to search for and one action to perform
upon finding the pattern.

   <p>Syntactically, a rule consists of a pattern followed by an action.  The
action is enclosed in curly braces to separate it from the pattern. 
Newlines usually separate rules.  Therefore, an <samp><span class="command">awk</span></samp>
program looks like this:

<pre class="example">     <var>pattern</var> { <var>action</var> }
     <var>pattern</var> { <var>action</var> }
     ...
</pre>
   <ul class="menu">
<li><a accesskey="1" href="#Running-gawk">Running gawk</a>:                 How to run <samp><span class="command">gawk</span></samp> programs; includes
                                command-line syntax. 
<li><a accesskey="2" href="#Sample-Data-Files">Sample Data Files</a>:            Sample data files for use in the <samp><span class="command">awk</span></samp>
                                programs illustrated in this Web page. 
<li><a accesskey="3" href="#Very-Simple">Very Simple</a>:                  A very simple example. 
<li><a accesskey="4" href="#Two-Rules">Two Rules</a>:                    A less simple one-line example using two
                                rules. 
<li><a accesskey="5" href="#More-Complex">More Complex</a>:                 A more complex example. 
<li><a accesskey="6" href="#Statements_002fLines">Statements/Lines</a>:             Subdividing or combining statements into
                                lines. 
<li><a accesskey="7" href="#Other-Features">Other Features</a>:               Other Features of <samp><span class="command">awk</span></samp>. 
<li><a accesskey="8" href="#When">When</a>:                         When to use <samp><span class="command">gawk</span></samp> and when to use
                                other things. 
</ul>

<div class="node">
<a name="Running-gawk"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Sample-Data-Files">Sample Data Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getting-Started">Getting Started</a>

</div>

<h3 class="section">1.1 How to Run <samp><span class="command">awk</span></samp> Programs</h3>

<p><a name="index-g_t_0040command_007bawk_007d-programs_002c-running-84"></a>There are several ways to run an <samp><span class="command">awk</span></samp> program.  If the program is
short, it is easiest to include it in the command that runs <samp><span class="command">awk</span></samp>,
like this:

<pre class="example">     awk '<var>program</var>' <var>input-file1</var> <var>input-file2</var> ...
</pre>
   <p><a name="index-command-line_002c-formats-85"></a>When the program is long, it is usually more convenient to put it in a file
and run it with a command like this:

<pre class="example">     awk -f <var>program-file</var> <var>input-file1</var> <var>input-file2</var> ...
</pre>
   <p>This section discusses both mechanisms, along with several
variations of each.

<ul class="menu">
<li><a accesskey="1" href="#One_002dshot">One-shot</a>:                     Running a short throwaway <samp><span class="command">awk</span></samp>
                                program. 
<li><a accesskey="2" href="#Read-Terminal">Read Terminal</a>:                Using no input files (input from terminal
                                instead). 
<li><a accesskey="3" href="#Long">Long</a>:                         Putting permanent <samp><span class="command">awk</span></samp> programs in
                                files. 
<li><a accesskey="4" href="#Executable-Scripts">Executable Scripts</a>:           Making self-contained <samp><span class="command">awk</span></samp> programs. 
<li><a accesskey="5" href="#Comments">Comments</a>:                     Adding documentation to <samp><span class="command">gawk</span></samp>
                                programs. 
<li><a accesskey="6" href="#Quoting">Quoting</a>:                      More discussion of shell quoting issues. 
</ul>

<div class="node">
<a name="One-shot"></a>
<a name="One_002dshot"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Read-Terminal">Read Terminal</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running-gawk">Running gawk</a>

</div>

<h4 class="subsection">1.1.1 One-Shot Throwaway <samp><span class="command">awk</span></samp> Programs</h4>

<p>Once you are familiar with <samp><span class="command">awk</span></samp>, you will often type in simple
programs the moment you want to use them.  Then you can write the
program as the first argument of the <samp><span class="command">awk</span></samp> command, like this:

<pre class="example">     awk '<var>program</var>' <var>input-file1</var> <var>input-file2</var> ...
</pre>
   <p class="noindent">where <var>program</var> consists of a series of <var>patterns</var> and
<var>actions</var>, as described earlier.

   <p><a name="index-single-quote-_0028_0040code_007b_0027_007d_0029-86"></a><a name="index-g_t_0040code_007b_0027_007d-_0028single-quote_0029-87"></a>This command format instructs the <dfn>shell</dfn>, or command interpreter,
to start <samp><span class="command">awk</span></samp> and use the <var>program</var> to process records in the
input file(s).  There are single quotes around <var>program</var> so
the shell won't interpret any <samp><span class="command">awk</span></samp> characters as special shell
characters.  The quotes also cause the shell to treat all of <var>program</var> as
a single argument for <samp><span class="command">awk</span></samp>, and allow <var>program</var> to be more
than one line long.

   <p><a name="index-shells_002c-scripts-88"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-running_002c-from-shell-scripts-89"></a>This format is also useful for running short or medium-sized <samp><span class="command">awk</span></samp>
programs from shell scripts, because it avoids the need for a separate
file for the <samp><span class="command">awk</span></samp> program.  A self-contained shell script is more
reliable because there are no other files to misplace.

   <p><a href="#Very-Simple">Very Simple</a>,
later in this chapter,
presents several short,
self-contained programs.

<div class="node">
<a name="Read-Terminal"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Long">Long</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#One_002dshot">One-shot</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running-gawk">Running gawk</a>

</div>

<h4 class="subsection">1.1.2 Running <samp><span class="command">awk</span></samp> Without Input Files</h4>

<p><a name="index-standard-input-90"></a><a name="index-input_002c-standard-91"></a><a name="index-input-files_002c-running-_0040command_007bawk_007d-without-92"></a>You can also run <samp><span class="command">awk</span></samp> without any input files.  If you type the
following command line:

<pre class="example">     awk '<var>program</var>'
</pre>
   <p class="noindent"><samp><span class="command">awk</span></samp> applies the <var>program</var> to the <dfn>standard input</dfn>,
which usually means whatever you type on the terminal.  This continues
until you indicate end-of-file by typing <kbd>Ctrl-d</kbd>. 
(On other operating systems, the end-of-file character may be different. 
For example, on OS/2, it is <kbd>Ctrl-z</kbd>.)

   <p><a name="index-files_002c-input_002c-See-input-files-93"></a><a name="index-input-files_002c-running-_0040command_007bawk_007d-without-94"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-running_002c-without-input-files-95"></a>As an example, the following program prints a friendly piece of advice
(from Douglas Adams's <cite>The Hitchhiker's Guide to the Galaxy</cite>),
to keep you from worrying about the complexities of computer
programming<a rel="footnote" href="#fn-7" name="fnd-7"><sup>7</sup></a>
(<code>BEGIN</code> is a feature we haven't discussed yet):

<pre class="example">     $ <kbd>awk "BEGIN { print \"Don't Panic!\" }"</kbd>
     -| Don't Panic!
</pre>
   <p><a name="index-quoting-96"></a><a name="index-double-quote-_0028_0040code_007b_0022_007d_0029-97"></a><a name="index-g_t_0040code_007b_0022_007d-_0028double-quote_0029-98"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029-99"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029-100"></a>This program does not read any input.  The &lsquo;<samp><span class="samp">\</span></samp>&rsquo; before each of the
inner double quotes is necessary because of the shell's quoting
rules&mdash;in particular because it mixes both single quotes and
double quotes.<a rel="footnote" href="#fn-8" name="fnd-8"><sup>8</sup></a>

   <p>This next simple <samp><span class="command">awk</span></samp> program
emulates the <samp><span class="command">cat</span></samp> utility; it copies whatever you type on the
keyboard to its standard output (why this works is explained shortly).

<pre class="example">     $ <kbd>awk '{ print }'</kbd>
     <kbd>Now is the time for all good men</kbd>
     -| Now is the time for all good men
     <kbd>to come to the aid of their country.</kbd>
     -| to come to the aid of their country.
     <kbd>Four score and seven years ago, ...</kbd>
     -| Four score and seven years ago, ...
     <kbd>What, me worry?</kbd>
     -| What, me worry?
     <kbd>Ctrl-d</kbd>
</pre>
   <div class="node">
<a name="Long"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Executable-Scripts">Executable Scripts</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Read-Terminal">Read Terminal</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running-gawk">Running gawk</a>

</div>

<h4 class="subsection">1.1.3 Running Long Programs</h4>

<p><a name="index-g_t_0040command_007bawk_007d-programs_002c-running-101"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-lengthy-102"></a><a name="index-files_002c-_0040command_007bawk_007d-programs-in-103"></a>Sometimes your <samp><span class="command">awk</span></samp> programs can be very long.  In this case, it is
more convenient to put the program into a separate file.  In order to tell
<samp><span class="command">awk</span></samp> to use that file for its program, you type:

<pre class="example">     awk -f <var>source-file</var> <var>input-file1</var> <var>input-file2</var> ...
</pre>
   <p><a name="index-g_t_0040code_007b_002df_007d-option-104"></a><a name="index-command-line_002c-options-105"></a><a name="index-options_002c-command_002dline-106"></a>The <samp><span class="option">-f</span></samp> instructs the <samp><span class="command">awk</span></samp> utility to get the <samp><span class="command">awk</span></samp> program
from the file <var>source-file</var>.  Any file name can be used for
<var>source-file</var>.  For example, you could put the program:

<pre class="example">     BEGIN { print "Don't Panic!" }
</pre>
   <p class="noindent">into the file <samp><span class="file">advice</span></samp>.  Then this command:

<pre class="example">     awk -f advice
</pre>
   <p class="noindent">does the same thing as this one:

<pre class="example">     awk "BEGIN { print \"Don't Panic!\" }"
</pre>
   <p><a name="index-quoting-107"></a>This was explained earlier
(see <a href="#Read-Terminal">Read Terminal</a>). 
Note that you don't usually need single quotes around the file name that you
specify with <samp><span class="option">-f</span></samp>, because most file names don't contain any of the shell's
special characters.  Notice that in <samp><span class="file">advice</span></samp>, the <samp><span class="command">awk</span></samp>
program did not have single quotes around it.  The quotes are only needed
for programs that are provided on the <samp><span class="command">awk</span></samp> command line.

<!-- STARTOFRANGE sq1x -->
   <p><a name="index-single-quote-_0028_0040code_007b_0027_007d_0029-108"></a><!-- STARTOFRANGE qs2x -->
<a name="index-g_t_0040code_007b_0027_007d-_0028single-quote_0029-109"></a>If you want to clearly identify your <samp><span class="command">awk</span></samp> program files as such,
you can add the extension <samp><span class="file">.awk</span></samp> to the file name.  This doesn't
affect the execution of the <samp><span class="command">awk</span></samp> program but it does make
&ldquo;housekeeping&rdquo; easier.

<div class="node">
<a name="Executable-Scripts"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Comments">Comments</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Long">Long</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running-gawk">Running gawk</a>

</div>

<h4 class="subsection">1.1.4 Executable <samp><span class="command">awk</span></samp> Programs</h4>

<p><a name="index-g_t_0040command_007bawk_007d-programs-110"></a><a name="index-g_t_0040code_007b_0023_007d-_0028number-sign_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029-111"></a><a name="index-number-sign-_0028_0040code_007b_0023_007d_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029-112"></a><a name="index-Unix_002c-_0040command_007bawk_007d-scripts-and-113"></a><a name="index-g_t_0040code_007b_0023_007d-_0028number-sign_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029_002c-portability-issues-with-114"></a><a name="index-number-sign-_0028_0040code_007b_0023_007d_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029_002c-portability-issues-with-115"></a>
Once you have learned <samp><span class="command">awk</span></samp>, you may want to write self-contained
<samp><span class="command">awk</span></samp> scripts, using the &lsquo;<samp><span class="samp">#!</span></samp>&rsquo; script mechanism.  You can do
this on many systems.<a rel="footnote" href="#fn-9" name="fnd-9"><sup>9</sup></a>
For example, you could update the file <samp><span class="file">advice</span></samp> to look like this:

<pre class="example">     #! /bin/awk -f
     
     BEGIN { print "Don't Panic!" }
</pre>
   <p class="noindent">After making this file executable (with the <samp><span class="command">chmod</span></samp> utility),
simply type &lsquo;<samp><span class="samp">advice</span></samp>&rsquo;
at the shell and the system arranges to run <samp><span class="command">awk</span></samp><a rel="footnote" href="#fn-10" name="fnd-10"><sup>10</sup></a> as if you had
typed &lsquo;<samp><span class="samp">awk -f advice</span></samp>&rsquo;:

<pre class="example">     $ <kbd>chmod +x advice</kbd>
     $ <kbd>advice</kbd>
     -| Don't Panic!
</pre>
   <p class="noindent">(We assume you have the current directory in your shell's search
path variable [typically <code>$PATH</code>].  If not, you may need
to type &lsquo;<samp><span class="samp">./advice</span></samp>&rsquo; at the shell.)

   <p>Self-contained <samp><span class="command">awk</span></samp> scripts are useful when you want to write a
program that users can invoke without their having to know that the program is
written in <samp><span class="command">awk</span></samp>.

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Portability Issues with &lsquo;<samp><span class="samp">#!</span></samp>&rsquo;</h4>

<p><a name="index-portability_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029-116"></a>
Some systems limit the length of the interpreter name to 32 characters. 
Often, this can be dealt with by using a symbolic link.

   <p>You should not put more than one argument on the &lsquo;<samp><span class="samp">#!</span></samp>&rsquo;
line after the path to <samp><span class="command">awk</span></samp>. It does not work. The operating system
treats the rest of the line as a single argument and passes it to <samp><span class="command">awk</span></samp>. 
Doing this leads to confusing behavior&mdash;most likely a usage diagnostic
of some sort from <samp><span class="command">awk</span></samp>.

   <p><a name="index-g_t_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables_002c-portability-and-117"></a><a name="index-portability_002c-_0040code_007bARGV_007d-variable-118"></a>Finally,
the value of <code>ARGV[0]</code>
(see <a href="#Built_002din-Variables">Built-in Variables</a>)
varies depending upon your operating system. 
Some systems put &lsquo;<samp><span class="samp">awk</span></samp>&rsquo; there, some put the full pathname
of <samp><span class="command">awk</span></samp> (such as <samp><span class="file">/bin/awk</span></samp>), and some put the name
of your script (&lsquo;<samp><span class="samp">advice</span></samp>&rsquo;).  (d.c.) 
Don't rely on the value of <code>ARGV[0]</code>
to provide your script name.

<div class="node">
<a name="Comments"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Quoting">Quoting</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Executable-Scripts">Executable Scripts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running-gawk">Running gawk</a>

</div>

<h4 class="subsection">1.1.5 Comments in <samp><span class="command">awk</span></samp> Programs</h4>

<p><a name="index-g_t_0040code_007b_0023_007d-_0028number-sign_0029_002c-commenting-119"></a><a name="index-number-sign-_0028_0040code_007b_0023_007d_0029_002c-commenting-120"></a><a name="index-commenting-121"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-documenting-122"></a>
A <dfn>comment</dfn> is some text that is included in a program for the sake
of human readers; it is not really an executable part of the program.  Comments
can explain what the program does and how it works.  Nearly all
programming languages have provisions for comments, as programs are
typically hard to understand without them.

   <p>In the <samp><span class="command">awk</span></samp> language, a comment starts with the sharp sign
character (&lsquo;<samp><span class="samp">#</span></samp>&rsquo;) and continues to the end of the line. 
The &lsquo;<samp><span class="samp">#</span></samp>&rsquo; does not have to be the first character on the line. The
<samp><span class="command">awk</span></samp> language ignores the rest of a line following a sharp sign. 
For example, we could have put the following into <samp><span class="file">advice</span></samp>:

<pre class="example">     # This program prints a nice friendly message.  It helps
     # keep novice users from being afraid of the computer.
     BEGIN    { print "Don't Panic!" }
</pre>
   <p>You can put comment lines into keyboard-composed throwaway <samp><span class="command">awk</span></samp>
programs, but this usually isn't very useful; the purpose of a
comment is to help you or another person understand the program
when reading it at a later time.

   <p><a name="index-quoting-123"></a><a name="index-single-quote-_0028_0040code_007b_0027_007d_0029_002c-vs_002e_0040_003a-apostrophe-124"></a><a name="index-g_t_0040code_007b_0027_007d-_0028single-quote_0029_002c-vs_002e_0040_003a-apostrophe-125"></a><blockquote>
<b>CAUTION:</b> As mentioned in
<a href="#One_002dshot">One-shot</a>,
you can enclose small to medium programs in single quotes, in order to keep
your shell scripts self-contained.  When doing so, <em>don't</em> put
an apostrophe (i.e., a single quote) into a comment (or anywhere else
in your program). The shell interprets the quote as the closing
quote for the entire program. As a result, usually the shell
prints a message about mismatched quotes, and if <samp><span class="command">awk</span></samp> actually
runs, it will probably print strange messages about syntax errors. 
For example, look at the following:

<pre class="example">     $ <kbd>awk '{ print "hello" } # let's be cute'</kbd>
     &gt;
</pre>
   <p>The shell sees that the first two quotes match, and that
a new quoted object begins at the end of the command line. 
It therefore prompts with the secondary prompt, waiting for more input. 
With Unix <samp><span class="command">awk</span></samp>, closing the quoted string produces this result:

<pre class="example">     $ <kbd>awk '{ print "hello" } # let's be cute'</kbd>
     &gt; <kbd>'</kbd>
     error--&gt; awk: can't open file be
     error--&gt;  source line number 1
</pre>
   <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029-126"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029-127"></a>Putting a backslash before the single quote in &lsquo;<samp><span class="samp">let's</span></samp>&rsquo; wouldn't help,
since backslashes are not special inside single quotes. 
The next subsection describes the shell's quoting rules. 
</blockquote>

<div class="node">
<a name="Quoting"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Comments">Comments</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Running-gawk">Running gawk</a>

</div>

<h4 class="subsection">1.1.6 Shell-Quoting Issues</h4>

<p><a name="index-quoting_002c-rules-for-128"></a>

<ul class="menu">
<li><a accesskey="1" href="#DOS-Quoting">DOS Quoting</a>:                  Quoting in Windows Batch Files. 
</ul>

   <p>For short to medium length <samp><span class="command">awk</span></samp> programs, it is most convenient
to enter the program on the <samp><span class="command">awk</span></samp> command line. 
This is best done by enclosing the entire program in single quotes. 
This is true whether you are entering the program interactively at
the shell prompt, or writing it as part of a larger shell script:

<pre class="example">     awk '<var>program text</var>' <var>input-file1</var> <var>input-file2</var> ...
</pre>
   <p><a name="index-shells_002c-quoting_002c-rules-for-129"></a><a name="index-Bourne-shell_002c-quoting-rules-for-130"></a>Once you are working with the shell, it is helpful to have a basic
knowledge of shell quoting rules.  The following rules apply only to
POSIX-compliant, Bourne-style shells (such as Bash, the GNU Bourne-Again
Shell).  If you use the C shell, you're on your own.

     <ul>
<li>Quoted items can be concatenated with nonquoted items as well as with other
quoted items.  The shell turns everything into one argument for
the command.

     <li>Preceding any single character with a backslash (&lsquo;<samp><span class="samp">\</span></samp>&rsquo;) quotes
that character.  The shell removes the backslash and passes the quoted
character on to the command.

     <li><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029-131"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029-132"></a><a name="index-single-quote-_0028_0040code_007b_0027_007d_0029-133"></a><a name="index-g_t_0040code_007b_0027_007d-_0028single-quote_0029-134"></a>Single quotes protect everything between the opening and closing quotes. 
The shell does no interpretation of the quoted text, passing it on verbatim
to the command. 
It is <em>impossible</em> to embed a single quote inside single-quoted text. 
Refer back to
<a href="#Comments">Comments</a>,
for an example of what happens if you try.

     <li><a name="index-double-quote-_0028_0040code_007b_0022_007d_0029-135"></a><a name="index-g_t_0040code_007b_0022_007d-_0028double-quote_0029-136"></a>Double quotes protect most things between the opening and closing quotes. 
The shell does at least variable and command substitution on the quoted text. 
Different shells may do additional kinds of processing on double-quoted text.

     <p>Since certain characters within double-quoted text are processed by the shell,
they must be <dfn>escaped</dfn> within the text.  Of note are the characters
&lsquo;<samp><span class="samp">$</span></samp>&rsquo;, &lsquo;<samp><span class="samp">`</span></samp>&rsquo;, &lsquo;<samp><span class="samp">\</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">"</span></samp>&rsquo;, all of which must be preceded by
a backslash within double-quoted text if they are to be passed on literally
to the program.  (The leading backslash is stripped first.) 
Thus, the example seen
previously
in <a href="#Read-Terminal">Read Terminal</a>,
is applicable:

     <pre class="example">          $ <kbd>awk "BEGIN { print \"Don't Panic!\" }"</kbd>
          -| Don't Panic!
</pre>
     <p><a name="index-single-quote-_0028_0040code_007b_0027_007d_0029_002c-with-double-quotes-137"></a><a name="index-g_t_0040code_007b_0027_007d-_0028single-quote_0029_002c-with-double-quotes-138"></a>Note that the single quote is not special within double quotes.

     <li>Null strings are removed when they occur as part of a non-null
command-line argument, while explicit non-null objects are kept. 
For example, to specify that the field separator <code>FS</code> should
be set to the null string, use:

     <pre class="example">          awk -F "" '<var>program</var>' <var>files</var> # correct
</pre>
     <p class="noindent"><a name="index-null-strings_002c-quoting-and-139"></a>Don't use this:

     <pre class="example">          awk -F"" '<var>program</var>' <var>files</var>  # wrong!
</pre>
     <p class="noindent">In the second case, <samp><span class="command">awk</span></samp> will attempt to use the text of the program
as the value of <code>FS</code>, and the first file name as the text of the program! 
This results in syntax errors at best, and confusing behavior at worst. 
</ul>

   <p><a name="index-quoting_002c-tricks-for-140"></a>Mixing single and double quotes is difficult.  You have to resort
to shell quoting tricks, like this:

<pre class="example">     $ <kbd>awk 'BEGIN { print "Here is a single quote &lt;'"'"'&gt;" }'</kbd>
     -| Here is a single quote &lt;'&gt;
</pre>
   <p class="noindent">This program consists of three concatenated quoted strings.  The first and the
third are single-quoted, the second is double-quoted.

   <p>This can be &ldquo;simplified&rdquo; to:

<pre class="example">     $ <kbd>awk 'BEGIN { print "Here is a single quote &lt;'\''&gt;" }'</kbd>
     -| Here is a single quote &lt;'&gt;
</pre>
   <p class="noindent">Judge for yourself which of these two is the more readable.

   <p>Another option is to use double quotes, escaping the embedded, <samp><span class="command">awk</span></samp>-level
double quotes:

<pre class="example">     $ <kbd>awk "BEGIN { print \"Here is a single quote &lt;'&gt;\" }"</kbd>
     -| Here is a single quote &lt;'&gt;
</pre>
   <p class="noindent"><!-- ENDOFRANGE sq1x -->
<!-- ENDOFRANGE qs2x -->
This option is also painful, because double quotes, backslashes, and dollar signs
are very common in more advanced <samp><span class="command">awk</span></samp> programs.

   <p>A third option is to use the octal escape sequence equivalents
(see <a href="#Escape-Sequences">Escape Sequences</a>)
for the
single- and double-quote characters, like so:

<pre class="example">     $ <kbd>awk 'BEGIN { print "Here is a single quote &lt;\47&gt;" }'</kbd>
     -| Here is a single quote &lt;'&gt;
     $ <kbd>awk 'BEGIN { print "Here is a double quote &lt;\42&gt;" }'</kbd>
     -| Here is a double quote &lt;"&gt;
</pre>
   <p class="noindent">This works nicely, except that you should comment clearly what the
escapes mean.

   <p>A fourth option is to use command-line variable assignment, like this:

<pre class="example">     $ awk -v sq="'" 'BEGIN { print "Here is a single quote &lt;" sq "&gt;" }'
     -| Here is a single quote &lt;'&gt;
</pre>
   <p>If you really need both single and double quotes in your <samp><span class="command">awk</span></samp>
program, it is probably best to move it into a separate file, where
the shell won't be part of the picture, and you can say what you mean.

<div class="node">
<a name="DOS-Quoting"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#Quoting">Quoting</a>

</div>

<h5 class="subsubsection">1.1.6.1 Quoting in MS-Windows Batch Files</h5>

<p>Although this Web page generally only worries about POSIX systems and the
POSIX shell, the following issue arises often enough for many users that
it is worth addressing.

   <p>The &ldquo;shells&rdquo; on Microsoft Windows systems use the double-quote
character for quoting, and make it difficult or impossible to include an
escaped double-quote character in a command-line script. 
The following example, courtesy of Jeroen Brink, shows
how to print all lines in a file surrounded by double quotes:

<pre class="example">     gawk "{ print \"\042\" $0 \"\042\" }" <var>file</var>
</pre>
   <div class="node">
<a name="Sample-Data-Files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Very-Simple">Very Simple</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Running-gawk">Running gawk</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getting-Started">Getting Started</a>

</div>

<h3 class="section">1.2 Data Files for the Examples</h3>

<!-- For gawk >= 4.0, update these data files. No-one has such slow modems! -->
<p><a name="index-input-files_002c-examples-141"></a><a name="index-g_t_0040code_007bBBS_002dlist_007d-file-142"></a>Many of the examples in this Web page take their input from two sample
data files.  The first, <samp><span class="file">BBS-list</span></samp>, represents a list of
computer bulletin board systems together with information about those systems. 
The second data file, called <samp><span class="file">inventory-shipped</span></samp>, contains
information about monthly shipments.  In both files,
each line is considered to be one <dfn>record</dfn>.

   <p>In the data file <samp><span class="file">BBS-list</span></samp>, each record contains the name of a computer
bulletin board, its phone number, the board's baud rate(s), and a code for
the number of hours it is operational.  An &lsquo;<samp><span class="samp">A</span></samp>&rsquo; in the last column
means the board operates 24 hours a day.  A &lsquo;<samp><span class="samp">B</span></samp>&rsquo; in the last
column means the board only operates on evening and weekend hours. 
A &lsquo;<samp><span class="samp">C</span></samp>&rsquo; means the board operates only on weekends:

<!-- 2e: Update the baud rates to reflect today's faster modems -->
<pre class="example">     <!-- system if test ! -d eg      ; then mkdir eg      ; fi -->
     <!-- system if test ! -d eg/lib  ; then mkdir eg/lib  ; fi -->
     <!-- system if test ! -d eg/data ; then mkdir eg/data ; fi -->
     <!-- system if test ! -d eg/prog ; then mkdir eg/prog ; fi -->
     <!-- system if test ! -d eg/misc ; then mkdir eg/misc ; fi -->
     <!-- file eg/data/BBS-list -->
     aardvark     555-5553     1200/300          B
     alpo-net     555-3412     2400/1200/300     A
     barfly       555-7685     1200/300          A
     bites        555-1675     2400/1200/300     A
     camelot      555-0542     300               C
     core         555-2912     1200/300          C
     fooey        555-1234     2400/1200/300     B
     foot         555-6699     1200/300          B
     macfoo       555-6480     1200/300          A
     sdace        555-3430     2400/1200/300     A
     sabafoo      555-2127     1200/300          C
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040code_007binventory_002dshipped_007d-file-143"></a>The data file <samp><span class="file">inventory-shipped</span></samp> represents
information about shipments during the year. 
Each record contains the month, the number
of green crates shipped, the number of red boxes shipped, the number of
orange bags shipped, and the number of blue packages shipped,
respectively.  There are 16 entries, covering the 12 months of last year
and the first four months of the current year.

<pre class="example">     <!-- file eg/data/inventory-shipped -->
     Jan  13  25  15 115
     Feb  15  32  24 226
     Mar  15  24  34 228
     Apr  31  52  63 420
     May  16  34  29 208
     Jun  31  42  75 492
     Jul  24  34  67 436
     Aug  15  34  47 316
     Sep  13  55  37 277
     Oct  29  54  68 525
     Nov  20  87  82 577
     Dec  17  35  61 401
     
     Jan  21  36  64 620
     Feb  26  58  80 652
     Mar  24  75  70 495
     Apr  21  70  74 514
     <!-- endfile -->
</pre>
   <div class="node">
<a name="Very-Simple"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Two-Rules">Two Rules</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Sample-Data-Files">Sample Data Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getting-Started">Getting Started</a>

</div>

<h3 class="section">1.3 Some Simple Examples</h3>

<p>The following command runs a simple <samp><span class="command">awk</span></samp> program that searches the
input file <samp><span class="file">BBS-list</span></samp> for the character string &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; (a
grouping of characters is usually called a <dfn>string</dfn>;
the term <dfn>string</dfn> is based on similar usage in English, such
as &ldquo;a string of pearls,&rdquo; or &ldquo;a string of cars in a train&rdquo;):

<pre class="example">     awk '/foo/ { print $0 }' BBS-list
</pre>
   <p class="noindent">When lines containing &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; are found, they are printed because
&lsquo;<samp><span class="samp">print&nbsp;$0</span></samp>&rsquo;<!-- /@w --> means print the current line.  (Just &lsquo;<samp><span class="samp">print</span></samp>&rsquo; by
itself means the same thing, so we could have written that
instead.)

   <p>You will notice that slashes (&lsquo;<samp><span class="samp">/</span></samp>&rsquo;) surround the string &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;
in the <samp><span class="command">awk</span></samp> program.  The slashes indicate that &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;
is the pattern to search for.  This type of pattern is called a
<dfn>regular expression</dfn>, which is covered in more detail later
(see <a href="#Regexp">Regexp</a>). 
The pattern is allowed to match parts of words. 
There are
single quotes around the <samp><span class="command">awk</span></samp> program so that the shell won't
interpret any of it as special shell characters.

   <p>Here is what this program prints:

<pre class="example">     $ <kbd>awk '/foo/ { print $0 }' BBS-list</kbd>
     -| fooey        555-1234     2400/1200/300     B
     -| foot         555-6699     1200/300          B
     -| macfoo       555-6480     1200/300          A
     -| sabafoo      555-2127     1200/300          C
</pre>
   <p><a name="index-actions_002c-default-144"></a><a name="index-patterns_002c-default-145"></a>In an <samp><span class="command">awk</span></samp> rule, either the pattern or the action can be omitted,
but not both.  If the pattern is omitted, then the action is performed
for <em>every</em> input line.  If the action is omitted, the default
action is to print all lines that match the pattern.

   <p><a name="index-actions_002c-empty-146"></a>Thus, we could leave out the action (the <code>print</code> statement and the curly
braces) in the previous example and the result would be the same:
<samp><span class="command">awk</span></samp> prints all lines matching the pattern &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;.  By comparison,
omitting the <code>print</code> statement but retaining the curly braces makes an
empty action that does nothing (i.e., no lines are printed).

   <p><a name="index-g_t_0040command_007bawk_007d-programs_002c-one_002dline-examples-147"></a>Many practical <samp><span class="command">awk</span></samp> programs are just a line or two.  Following is a
collection of useful, short programs to get you started.  Some of these
programs contain constructs that haven't been covered yet. (The description
of the program will give you a good idea of what is going on, but please
read the rest of the Web page to become an <samp><span class="command">awk</span></samp> expert!) 
Most of the examples use a data file named <samp><span class="file">data</span></samp>.  This is just a
placeholder; if you use these programs yourself, substitute
your own file names for <samp><span class="file">data</span></samp>. 
For future reference, note that there is often more than
one way to do things in <samp><span class="command">awk</span></samp>.  At some point, you may want
to look back at these examples and see if
you can come up with different ways to do the same things shown here:

     <ul>
<li>Print the length of the longest input line:

     <pre class="example">          awk '{ if (length($0) &gt; max) max = length($0) }
               END { print max }' data
</pre>
     <li>Print every line that is longer than 80 characters:

     <pre class="example">          awk 'length($0) &gt; 80' data
</pre>
     <p>The sole rule has a relational expression as its pattern and it has no
action&mdash;so the default action, printing the record, is used.

     <p><a name="index-g_t_0040command_007bexpand_007d-utility-148"></a><li>Print the length of the longest line in <samp><span class="file">data</span></samp>:

     <pre class="example">          expand data | awk '{ if (x &lt; length()) x = length() }
                        END { print "maximum line length is " x }'
</pre>
     <p>The input is processed by the <samp><span class="command">expand</span></samp> utility to change TABs
into spaces, so the widths compared are actually the right-margin columns.

     <li>Print every line that has at least one field:

     <pre class="example">          awk 'NF &gt; 0' data
</pre>
     <p>This is an easy way to delete blank lines from a file (or rather, to
create a new file similar to the old file but from which the blank lines
have been removed).

     <li>Print seven random numbers from 0 to 100, inclusive:

     <pre class="example">          awk 'BEGIN { for (i = 1; i &lt;= 7; i++)
                           print int(101 * rand()) }'
</pre>
     <li>Print the total number of bytes used by <var>files</var>:

     <pre class="example">          ls -l <var>files</var> | awk '{ x += $5 }
                            END { print "total bytes: " x }'
</pre>
     <li>Print the total number of kilobytes used by <var>files</var>:

     <!-- Don't use \ continuation, not discussed yet -->
     <!-- Remember that awk does floating point division, -->
     <!-- no need for (x+1023) / 1024 -->
     <pre class="example">          ls -l <var>files</var> | awk '{ x += $5 }
             END { print "total K-bytes:", x / 1024 }'
</pre>
     <li>Print a sorted list of the login names of all users:

     <pre class="example">          awk -F: '{ print $1 }' /etc/passwd | sort
</pre>
     <li>Count the lines in a file:

     <pre class="example">          awk 'END { print NR }' data
</pre>
     <li>Print the even-numbered lines in the data file:

     <pre class="example">          awk 'NR % 2 == 0' data
</pre>
     <p>If you use the expression &lsquo;<samp><span class="samp">NR % 2 == 1</span></samp>&rsquo; instead,
the program would print the odd-numbered lines. 
</ul>

<div class="node">
<a name="Two-Rules"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#More-Complex">More Complex</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Very-Simple">Very Simple</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getting-Started">Getting Started</a>

</div>

<h3 class="section">1.4 An Example with Two Rules</h3>

<p><a name="index-g_t_0040command_007bawk_007d-programs-149"></a>
The <samp><span class="command">awk</span></samp> utility reads the input files one line at a
time.  For each line, <samp><span class="command">awk</span></samp> tries the patterns of each of the rules. 
If several patterns match, then several actions are run in the order in
which they appear in the <samp><span class="command">awk</span></samp> program.  If no patterns match, then
no actions are run.

   <p>After processing all the rules that match the line (and perhaps there are none),
<samp><span class="command">awk</span></samp> reads the next line.  (However,
see <a href="#Next-Statement">Next Statement</a>,
and also see <a href="#Nextfile-Statement">Nextfile Statement</a>). 
This continues until the program reaches the end of the file. 
For example, the following <samp><span class="command">awk</span></samp> program contains two rules:

<pre class="example">     /12/  { print $0 }
     /21/  { print $0 }
</pre>
   <p class="noindent">The first rule has the string &lsquo;<samp><span class="samp">12</span></samp>&rsquo; as the
pattern and &lsquo;<samp><span class="samp">print $0</span></samp>&rsquo; as the action.  The second rule has the
string &lsquo;<samp><span class="samp">21</span></samp>&rsquo; as the pattern and also has &lsquo;<samp><span class="samp">print $0</span></samp>&rsquo; as the
action.  Each rule's action is enclosed in its own pair of braces.

   <p>This program prints every line that contains the string
&lsquo;<samp><span class="samp">12</span></samp>&rsquo; <em>or</em> the string &lsquo;<samp><span class="samp">21</span></samp>&rsquo;.  If a line contains both
strings, it is printed twice, once by each rule.

   <p>This is what happens if we run this program on our two sample data files,
<samp><span class="file">BBS-list</span></samp> and <samp><span class="file">inventory-shipped</span></samp>:

<pre class="example">     $ <kbd>awk '/12/ { print $0 }</kbd>
     &gt;      <kbd>/21/ { print $0 }' BBS-list inventory-shipped</kbd>
     -| aardvark     555-5553     1200/300          B
     -| alpo-net     555-3412     2400/1200/300     A
     -| barfly       555-7685     1200/300          A
     -| bites        555-1675     2400/1200/300     A
     -| core         555-2912     1200/300          C
     -| fooey        555-1234     2400/1200/300     B
     -| foot         555-6699     1200/300          B
     -| macfoo       555-6480     1200/300          A
     -| sdace        555-3430     2400/1200/300     A
     -| sabafoo      555-2127     1200/300          C
     -| sabafoo      555-2127     1200/300          C
     -| Jan  21  36  64 620
     -| Apr  21  70  74 514
</pre>
   <p class="noindent">Note how the line beginning with &lsquo;<samp><span class="samp">sabafoo</span></samp>&rsquo;
in <samp><span class="file">BBS-list</span></samp> was printed twice, once for each rule.

<div class="node">
<a name="More-Complex"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Statements_002fLines">Statements/Lines</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Two-Rules">Two Rules</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getting-Started">Getting Started</a>

</div>

<h3 class="section">1.5 A More Complex Example</h3>

<p>Now that we've mastered some simple tasks, let's look at
what typical <samp><span class="command">awk</span></samp>
programs do.  This example shows how <samp><span class="command">awk</span></samp> can be used to
summarize, select, and rearrange the output of another utility.  It uses
features that haven't been covered yet, so don't worry if you don't
understand all the details:

<pre class="example">     LC_ALL=C ls -l | awk '$6 == "Nov" { sum += $5 }
                           END { print sum }'
</pre>
   <p><a name="index-g_t_0040command_007bls_007d-utility-150"></a>This command prints the total number of bytes in all the files in the
current directory that were last modified in November (of any year). 
The &lsquo;<samp><span class="samp">ls&nbsp;-l</span></samp>&rsquo;<!-- /@w --> part of this example is a system command that gives
you a listing of the files in a directory, including each file's size and the date
the file was last modified. Its output looks like this:

<pre class="example">     -rw-r--r--  1 arnold   user   1933 Nov  7 13:05 Makefile
     -rw-r--r--  1 arnold   user  10809 Nov  7 13:03 awk.h
     -rw-r--r--  1 arnold   user    983 Apr 13 12:14 awk.tab.h
     -rw-r--r--  1 arnold   user  31869 Jun 15 12:20 awkgram.y
     -rw-r--r--  1 arnold   user  22414 Nov  7 13:03 awk1.c
     -rw-r--r--  1 arnold   user  37455 Nov  7 13:03 awk2.c
     -rw-r--r--  1 arnold   user  27511 Dec  9 13:07 awk3.c
     -rw-r--r--  1 arnold   user   7989 Nov  7 13:03 awk4.c
</pre>
   <p class="noindent"><a name="index-line-continuations_002c-with-C-shell-151"></a>The first field contains read-write permissions, the second field contains
the number of links to the file, and the third field identifies the owner of
the file. The fourth field identifies the group of the file. 
The fifth field contains the size of the file in bytes.  The
sixth, seventh, and eighth fields contain the month, day, and time,
respectively, that the file was last modified.  Finally, the ninth field
contains the file name.<a rel="footnote" href="#fn-11" name="fnd-11"><sup>11</sup></a>

<!-- @cindex automatic initialization -->
   <p><a name="index-initialization_002c-automatic-152"></a>The &lsquo;<samp><span class="samp">$6 == "Nov"</span></samp>&rsquo; in our <samp><span class="command">awk</span></samp> program is an expression that
tests whether the sixth field of the output from &lsquo;<samp><span class="samp">ls&nbsp;-l</span></samp>&rsquo;<!-- /@w -->
matches the string &lsquo;<samp><span class="samp">Nov</span></samp>&rsquo;.  Each time a line has the string
&lsquo;<samp><span class="samp">Nov</span></samp>&rsquo; for its sixth field, the action &lsquo;<samp><span class="samp">sum += $5</span></samp>&rsquo; is
performed.  This adds the fifth field (the file's size) to the variable
<code>sum</code>.  As a result, when <samp><span class="command">awk</span></samp> has finished reading all the
input lines, <code>sum</code> is the total of the sizes of the files whose
lines matched the pattern.  (This works because <samp><span class="command">awk</span></samp> variables
are automatically initialized to zero.)

   <p>After the last line of output from <samp><span class="command">ls</span></samp> has been processed, the
<code>END</code> rule executes and prints the value of <code>sum</code>. 
In this example, the value of <code>sum</code> is 80600.

   <p>These more advanced <samp><span class="command">awk</span></samp> techniques are covered in later sections
(see <a href="#Action-Overview">Action Overview</a>).  Before you can move on to more
advanced <samp><span class="command">awk</span></samp> programming, you have to know how <samp><span class="command">awk</span></samp> interprets
your input and displays your output.  By manipulating fields and using
<code>print</code> statements, you can produce some very useful and
impressive-looking reports.

<div class="node">
<a name="Statements%2fLines"></a>
<a name="Statements_002fLines"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Other-Features">Other Features</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#More-Complex">More Complex</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getting-Started">Getting Started</a>

</div>

<h3 class="section">1.6 <samp><span class="command">awk</span></samp> Statements Versus Lines</h3>

<p><a name="index-line-breaks-153"></a><a name="index-newlines-154"></a>
Most often, each line in an <samp><span class="command">awk</span></samp> program is a separate statement or
separate rule, like this:

<pre class="example">     awk '/12/  { print $0 }
          /21/  { print $0 }' BBS-list inventory-shipped
</pre>
   <p><a name="index-g_t_0040command_007bgawk_007d_002c-newlines-in-155"></a>However, <samp><span class="command">gawk</span></samp> ignores newlines after any of the following
symbols and keywords:

<pre class="example">     ,    {    ?    :    ||    &amp;&amp;    do    else
</pre>
   <p class="noindent">A newline at any other point is considered the end of the
statement.<a rel="footnote" href="#fn-12" name="fnd-12"><sup>12</sup></a>

   <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-continuing-lines-and-156"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-continuing-lines-and-157"></a>If you would like to split a single statement into two lines at a point
where a newline would terminate it, you can <dfn>continue</dfn> it by ending the
first line with a backslash character (&lsquo;<samp><span class="samp">\</span></samp>&rsquo;).  The backslash must be
the final character on the line in order to be recognized as a continuation
character.  A backslash is allowed anywhere in the statement, even
in the middle of a string or regular expression.  For example:

<pre class="example">     awk '/This regular expression is too long, so continue it\
      on the next line/ { print $1 }'
</pre>
   <p class="noindent"><a name="index-portability_002c-backslash-continuation-and-158"></a>We have generally not used backslash continuation in our sample programs. 
<samp><span class="command">gawk</span></samp> places no limit on the
length of a line, so backslash continuation is never strictly necessary;
it just makes programs more readable.  For this same reason, as well as
for clarity, we have kept most statements short in the sample programs
presented throughout the Web page.  Backslash continuation is
most useful when your <samp><span class="command">awk</span></samp> program is in a separate source file
instead of entered from the command line.  You should also note that
many <samp><span class="command">awk</span></samp> implementations are more particular about where you
may use backslash continuation. For example, they may not allow you to
split a string constant using backslash continuation.  Thus, for maximum
portability of your <samp><span class="command">awk</span></samp> programs, it is best not to split your
lines in the middle of a regular expression or a string. 
<!-- 10/2000: gawk, mawk, and current bell labs awk allow it, -->
<!-- solaris 2.7 nawk does not. Solaris /usr/xpg4/bin/awk does though!  sigh. -->

   <p><a name="index-g_t_0040command_007bcsh_007d-utility-159"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-continuing-lines-and_002c-in-_0040command_007bcsh_007d-160"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-continuing-lines-and_002c-in-_0040command_007bcsh_007d-161"></a><blockquote>
<b>CAUTION:</b> <em>Backslash continuation does not work as described
with the C shell.</em>  It works for <samp><span class="command">awk</span></samp> programs in files and
for one-shot programs, <em>provided</em> you are using a POSIX-compliant
shell, such as the Unix Bourne shell or Bash.  But the C shell behaves
differently!  There, you must use two backslashes in a row, followed by
a newline.  Note also that when using the C shell, <em>every</em> newline
in your <samp><span class="command">awk</span></samp> program must be escaped with a backslash. To illustrate:

<pre class="example">     % <kbd>awk 'BEGIN { \</kbd>
     ? <kbd>  print \\</kbd>
     ? <kbd>      "hello, world" \</kbd>
     ? <kbd>}'</kbd>
     -| hello, world
</pre>
   <p class="noindent">Here, the &lsquo;<samp><span class="samp">%</span></samp>&rsquo; and &lsquo;<samp><span class="samp">?</span></samp>&rsquo; are the C shell's primary and secondary
prompts, analogous to the standard shell's &lsquo;<samp><span class="samp">$</span></samp>&rsquo; and &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo;.

   <p>Compare the previous example to how it is done with a POSIX-compliant shell:

<pre class="example">     $ <kbd>awk 'BEGIN {</kbd>
     &gt;   <kbd>print \</kbd>
     &gt;       <kbd>"hello, world"</kbd>
     &gt; <kbd>}'</kbd>
     -| hello, world
</pre>
   </blockquote>

   <p><samp><span class="command">awk</span></samp> is a line-oriented language.  Each rule's action has to
begin on the same line as the pattern.  To have the pattern and action
on separate lines, you <em>must</em> use backslash continuation; there
is no other option.

   <p><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-continuing-lines-and_002c-comments-and-162"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-continuing-lines-and_002c-comments-and-163"></a><a name="index-commenting_002c-backslash-continuation-and-164"></a>Another thing to keep in mind is that backslash continuation and
comments do not mix. As soon as <samp><span class="command">awk</span></samp> sees the &lsquo;<samp><span class="samp">#</span></samp>&rsquo; that
starts a comment, it ignores <em>everything</em> on the rest of the
line. For example:

<pre class="example">     $ gawk 'BEGIN { print "dont panic" # a friendly \
     &gt;                                    BEGIN rule
     &gt; }'
     error--&gt; gawk: cmd. line:2:                BEGIN rule
     error--&gt; gawk: cmd. line:2:                ^ parse error
</pre>
   <p class="noindent">In this case, it looks like the backslash would continue the comment onto the
next line. However, the backslash-newline combination is never even
noticed because it is &ldquo;hidden&rdquo; inside the comment. Thus, the
<code>BEGIN</code> is noted as a syntax error.

   <p><a name="index-statements_002c-multiple-165"></a><a name="index-g_t_0040code_007b_003b_007d-_0028semicolon_0029-166"></a><a name="index-semicolon-_0028_0040code_007b_003b_007d_0029-167"></a>When <samp><span class="command">awk</span></samp> statements within one rule are short, you might want to put
more than one of them on a line.  This is accomplished by separating the statements
with a semicolon (&lsquo;<samp><span class="samp">;</span></samp>&rsquo;). 
This also applies to the rules themselves. 
Thus, the program shown at the start of this section
could also be written this way:

<pre class="example">     /12/ { print $0 } ; /21/ { print $0 }
</pre>
   <blockquote>
<b>NOTE:</b> The requirement that states that rules on the same line must be
separated with a semicolon was not in the original <samp><span class="command">awk</span></samp>
language; it was added for consistency with the treatment of statements
within an action. 
</blockquote>

<div class="node">
<a name="Other-Features"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#When">When</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Statements_002fLines">Statements/Lines</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getting-Started">Getting Started</a>

</div>

<h3 class="section">1.7 Other Features of <samp><span class="command">awk</span></samp></h3>

<p><a name="index-variables-168"></a>The <samp><span class="command">awk</span></samp> language provides a number of predefined, or
<dfn>built-in</dfn>, variables that your programs can use to get information
from <samp><span class="command">awk</span></samp>.  There are other variables your program can set
as well to control how <samp><span class="command">awk</span></samp> processes your data.

   <p>In addition, <samp><span class="command">awk</span></samp> provides a number of built-in functions for doing
common computational and string-related operations. 
<samp><span class="command">gawk</span></samp> provides built-in functions for working with timestamps,
performing bit manipulation, for runtime string translation (internationalization),
determining the type of a variable,
and array sorting.

   <p>As we develop our presentation of the <samp><span class="command">awk</span></samp> language, we introduce
most of the variables and many of the functions. They are described
systematically in <a href="#Built_002din-Variables">Built-in Variables</a>, and
<a href="#Built_002din">Built-in</a>.

<div class="node">
<a name="When"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Other-Features">Other Features</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getting-Started">Getting Started</a>

</div>

<h3 class="section">1.8 When to Use <samp><span class="command">awk</span></samp></h3>

<p><a name="index-g_t_0040command_007bawk_007d_002c-uses-for-169"></a>Now that you've seen some of what <samp><span class="command">awk</span></samp> can do,
you might wonder how <samp><span class="command">awk</span></samp> could be useful for you.  By using
utility programs, advanced patterns, field separators, arithmetic
statements, and other selection criteria, you can produce much more
complex output.  The <samp><span class="command">awk</span></samp> language is very useful for producing
reports from large amounts of raw data, such as summarizing information
from the output of other utility programs like <samp><span class="command">ls</span></samp>. 
(See <a href="#More-Complex">More Complex</a>.)

   <p>Programs written with <samp><span class="command">awk</span></samp> are usually much smaller than they would
be in other languages.  This makes <samp><span class="command">awk</span></samp> programs easy to compose and
use.  Often, <samp><span class="command">awk</span></samp> programs can be quickly composed at your keyboard,
used once, and thrown away.  Because <samp><span class="command">awk</span></samp> programs are interpreted, you
can avoid the (usually lengthy) compilation part of the typical
edit-compile-test-debug cycle of software development.

   <p>Complex programs have been written in <samp><span class="command">awk</span></samp>, including a complete
retargetable assembler for eight-bit microprocessors (see <a href="#Glossary">Glossary</a>, for
more information), and a microcode assembler for a special-purpose Prolog
computer. 
While the original <samp><span class="command">awk</span></samp>'s capabilities were strained by tasks
of such complexity, modern versions are more capable.  Even Brian Kernighan's
version of <samp><span class="command">awk</span></samp> has fewer predefined limits, and those
that it has are much larger than they used to be.

   <p><a name="index-g_t_0040command_007bawk_007d-programs_002c-complex-170"></a>If you find yourself writing <samp><span class="command">awk</span></samp> scripts of more than, say, a few
hundred lines, you might consider using a different programming
language.  Emacs Lisp is a good choice if you need sophisticated string
or pattern matching capabilities.  The shell is also good at string and
pattern matching; in addition, it allows powerful use of the system
utilities.  More conventional languages, such as C, C++, and Java, offer
better facilities for system programming and for managing the complexity
of large programs.  Programs in these languages may require more lines
of source code than the equivalent <samp><span class="command">awk</span></samp> programs, but they are
easier to maintain and usually run more efficiently.

<div class="node">
<a name="Invoking-Gawk"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Regexp">Regexp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getting-Started">Getting Started</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">2 Running <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp></h2>

<p>This chapter covers how to run awk, both POSIX-standard
and <samp><span class="command">gawk</span></samp>-specific command-line options, and what
<samp><span class="command">awk</span></samp> and
<samp><span class="command">gawk</span></samp> do with non-option arguments. 
It then proceeds to cover how <samp><span class="command">gawk</span></samp> searches for source files,
reading standard input along with other files, <samp><span class="command">gawk</span></samp>'s
environment variables, <samp><span class="command">gawk</span></samp>'s exit status, using include files,
and obsolete and undocumented options and/or features.

   <p>Many of the options and features described here are discussed in
more detail later in the Web page; feel free to skip over
things in this chapter that don't interest you right now.

<ul class="menu">
<li><a accesskey="1" href="#Command-Line">Command Line</a>:                 How to run <samp><span class="command">awk</span></samp>. 
<li><a accesskey="2" href="#Options">Options</a>:                      Command-line options and their meanings. 
<li><a accesskey="3" href="#Other-Arguments">Other Arguments</a>:              Input file names and variable assignments. 
<li><a accesskey="4" href="#Naming-Standard-Input">Naming Standard Input</a>:        How to specify standard input with other
                                files. 
<li><a accesskey="5" href="#Environment-Variables">Environment Variables</a>:        The environment variables <samp><span class="command">gawk</span></samp> uses. 
<li><a accesskey="6" href="#Exit-Status">Exit Status</a>:                  <samp><span class="command">gawk</span></samp>'s exit status. 
<li><a accesskey="7" href="#Include-Files">Include Files</a>:                Including other files into your program. 
<li><a accesskey="8" href="#Obsolete">Obsolete</a>:                     Obsolete Options and/or features. 
<li><a accesskey="9" href="#Undocumented">Undocumented</a>:                 Undocumented Options and Features. 
</ul>

<div class="node">
<a name="Command-Line"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Options">Options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-Gawk">Invoking Gawk</a>

</div>

<h3 class="section">2.1 Invoking <samp><span class="command">awk</span></samp></h3>

<p><a name="index-command-line_002c-invoking-_0040command_007bawk_007d-from-171"></a><a name="index-g_t_0040command_007bawk_007d_002c-invoking-172"></a><a name="index-arguments_002c-command_002dline_002c-invoking-_0040command_007bawk_007d-173"></a><a name="index-options_002c-command_002dline_002c-invoking-_0040command_007bawk_007d-174"></a>
There are two ways to run <samp><span class="command">awk</span></samp>&mdash;with an explicit program or with
one or more program files.  Here are templates for both of them; items
enclosed in [<small class="dots">...</small>] in these templates are optional:

<pre class="example">     awk <span class="roman">[</span><var>options</var><span class="roman">]</span> -f progfile <span class="roman">[</span><code>--</code><span class="roman">]</span> <var>file</var> ...
     awk <span class="roman">[</span><var>options</var><span class="roman">]</span> <span class="roman">[</span><code>--</code><span class="roman">]</span> '<var>program</var>' <var>file</var> ...
</pre>
   <p><a name="index-GNU-long-options-175"></a><a name="index-long-options-176"></a><a name="index-options_002c-long-177"></a>Besides traditional one-letter POSIX-style options, <samp><span class="command">gawk</span></samp> also
supports GNU long options.

   <p><a name="index-dark-corner_002c-invoking-_0040command_007bawk_007d-178"></a><a name="index-lint-checking_002c-empty-programs-179"></a>It is possible to invoke <samp><span class="command">awk</span></samp> with an empty program:

<pre class="example">     awk '' datafile1 datafile2
</pre>
   <p><a name="index-g_t_0040code_007b_002d_002dlint_007d-option-180"></a>Doing so makes little sense, though; <samp><span class="command">awk</span></samp> exits
silently when given an empty program. 
(d.c.) 
If <samp><span class="option">--lint</span></samp> has
been specified on the command line, <samp><span class="command">gawk</span></samp> issues a
warning that the program is empty.

<div class="node">
<a name="Options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Other-Arguments">Other Arguments</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Command-Line">Command Line</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-Gawk">Invoking Gawk</a>

</div>

<h3 class="section">2.2 Command-Line Options</h3>

<!-- STARTOFRANGE ocl -->
<p><a name="index-options_002c-command_002dline-181"></a><!-- STARTOFRANGE clo -->
<a name="index-command-line_002c-options-182"></a><!-- STARTOFRANGE gnulo -->
<a name="index-GNU-long-options-183"></a><!-- STARTOFRANGE longo -->
<a name="index-options_002c-long-184"></a>
Options begin with a dash and consist of a single character. 
GNU-style long options consist of two dashes and a keyword. 
The keyword can be abbreviated, as long as the abbreviation allows the option
to be uniquely identified.  If the option takes an argument, then the
keyword is either immediately followed by an equals sign (&lsquo;<samp><span class="samp">=</span></samp>&rsquo;) and the
argument's value, or the keyword and the argument's value are separated
by whitespace. 
If a particular option with a value is given more than once, it is the
last value that counts.

   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-GNU-long-options-and-185"></a>Each long option for <samp><span class="command">gawk</span></samp> has a corresponding
POSIX-style short option. 
The long and short options are
interchangeable in all contexts. 
The following list describes options mandated by the POSIX standard:

     <dl>
<dt><code>-F </code><var>fs</var><dt><code>--field-separator </code><var>fs</var><dd><a name="index-g_t_0040code_007b_002dF_007d-option-186"></a><a name="index-g_t_0040code_007b_002d_002dfield_002dseparator_007d-option-187"></a><a name="index-g_t_0040code_007bFS_007d-variable_002c-_0040code_007b_002d_002dfield_002dseparator_007d-option-and-188"></a>Set the <code>FS</code> variable to <var>fs</var>
(see <a href="#Field-Separators">Field Separators</a>).

     <br><dt><code>-f </code><var>source-file</var><dt><code>--file </code><var>source-file</var><dd><a name="index-g_t_0040code_007b_002df_007d-option-189"></a><a name="index-g_t_0040code_007b_002d_002dfile_007d-option-190"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-location-of-191"></a>Read <samp><span class="command">awk</span></samp> program source from <var>source-file</var>
instead of in the first non-option argument. 
This option may be given multiple times; the <samp><span class="command">awk</span></samp>
program consists of the concatenation the contents of
each specified <var>source-file</var>.

     <br><dt><code>-v </code><var>var</var><code>=</code><var>val</var><dt><code>--assign </code><var>var</var><code>=</code><var>val</var><dd><a name="index-g_t_0040code_007b_002dv_007d-option-192"></a><a name="index-g_t_0040code_007b_002d_002dassign_007d-option-193"></a><a name="index-variables_002c-setting-194"></a>Set the variable <var>var</var> to the value <var>val</var> <em>before</em>
execution of the program begins.  Such variable values are available
inside the <code>BEGIN</code> rule
(see <a href="#Other-Arguments">Other Arguments</a>).

     <p>The <samp><span class="option">-v</span></samp> option can only set one variable, but it can be used
more than once, setting another variable each time, like this:
&lsquo;<samp><span class="samp">awk -v&nbsp;foo=1<!-- /@w --> -v&nbsp;bar=2<!-- /@w --> ...</span></samp>&rsquo;.

     <p><a name="index-built_002din-variables_002c-_0040code_007b_002dv_007d-option_0040comma_007b_007d-setting-with-195"></a><a name="index-variables_002c-built_002din_002c-_0040code_007b_002dv_007d-option_0040comma_007b_007d-setting-with-196"></a><blockquote>
<b>CAUTION:</b> Using <samp><span class="option">-v</span></samp> to set the values of the built-in
variables may lead to surprising results.  <samp><span class="command">awk</span></samp> will reset the
values of those variables as it needs to, possibly ignoring any
predefined value you may have given. 
</blockquote>

     <br><dt><code>-W </code><var>gawk-opt</var><dd><a name="index-g_t_0040code_007b_002dW_007d-option-197"></a>Provide an implementation-specific option. 
This is the POSIX convention for providing implementation-specific options. 
These options
also have corresponding GNU-style long options. 
Note that the long options may be abbreviated, as long as
the abbreviations remain unique. 
The full list of <samp><span class="command">gawk</span></samp>-specific options is provided next.

     <br><dt><code>--</code><dd><a name="index-command-line_002c-options_002c-end-of-198"></a><a name="index-options_002c-command_002dline_002c-end-of-199"></a>Signal the end of the command-line options.  The following arguments
are not treated as options even if they begin with &lsquo;<samp><span class="samp">-</span></samp>&rsquo;.  This
interpretation of <samp><span class="option">--</span></samp> follows the POSIX argument parsing
conventions.

     <p><a name="index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-filenames-beginning-with-200"></a><a name="index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-filenames-beginning-with-201"></a>This is useful if you have file names that start with &lsquo;<samp><span class="samp">-</span></samp>&rsquo;,
or in shell scripts, if you have file names that will be specified
by the user that could start with &lsquo;<samp><span class="samp">-</span></samp>&rsquo;. 
It is also useful for passing options on to the <samp><span class="command">awk</span></samp>
program; see <a href="#Getopt-Function">Getopt Function</a>. 
</dl>
   <!-- ENDOFRANGE gnulo -->
<!-- ENDOFRANGE longo -->

   <p>The following list describes <samp><span class="command">gawk</span></samp>-specific options:

     <dl>
<dt><code>-b</code><dt><code>--characters-as-bytes</code><dd><a name="index-g_t_0040code_007b_002db_007d-option-202"></a><a name="index-g_t_0040code_007b_002d_002dcharacters_002das_002dbytes_007d-option-203"></a>Cause <samp><span class="command">gawk</span></samp> to treat all input data as single-byte characters. 
In addition, all output written with <code>print</code> or <code>printf</code>
are treated as single-byte characters.

     <p>Normally, <samp><span class="command">gawk</span></samp> follows the POSIX standard and attempts to process
its input data according to the current locale. This can often involve
converting multibyte characters into wide characters (internally), and
can lead to problems or confusion if the input data does not contain valid
multibyte characters. This option is an easy way to tell <samp><span class="command">gawk</span></samp>:
&ldquo;hands off my data!&rdquo;.

     <br><dt><code>-c</code><dt><code>--traditional</code><dd><a name="index-g_t_0040code_007b_002d_002dc_007d-option-204"></a><a name="index-g_t_0040code_007b_002d_002dtraditional_007d-option-205"></a><a name="index-compatibility-mode-_0028_0040command_007bgawk_007d_0029_002c-specifying-206"></a>Specify <dfn>compatibility mode</dfn>, in which the GNU extensions to
the <samp><span class="command">awk</span></samp> language are disabled, so that <samp><span class="command">gawk</span></samp> behaves just
like Brian Kernighan's version <samp><span class="command">awk</span></samp>. 
See <a href="#POSIX_002fGNU">POSIX/GNU</a>,
which summarizes the extensions.  Also see
<a href="#Compatibility-Mode">Compatibility Mode</a>.

     <br><dt><code>-C</code><dt><code>--copyright</code><dd><a name="index-g_t_0040code_007b_002dC_007d-option-207"></a><a name="index-g_t_0040code_007b_002d_002dcopyright_007d-option-208"></a><a name="index-GPL-_0028General-Public-License_0029_002c-printing-209"></a>Print the short version of the General Public License and then exit.

     <br><dt><code>-d</code><span class="roman">[</span><var>file</var><span class="roman">]</span><dt><code>--dump-variables</code><span class="roman">[</span><code>=</code><var>file</var><span class="roman">]</span><dd><a name="index-g_t_0040code_007b_002dd_007d-option-210"></a><a name="index-g_t_0040code_007b_002d_002ddump_002dvariables_007d-option-211"></a><a name="index-g_t_0040code_007bawkvars_002eout_007d-file-212"></a><a name="index-files_002c-_0040code_007bawkvars_002eout_007d-213"></a><a name="index-variables_002c-global_002c-printing-list-of-214"></a>Print a sorted list of global variables, their types, and final values
to <var>file</var>.  If no <var>file</var> is provided, print this
list to the file named <samp><span class="file">awkvars.out</span></samp> in the current directory. 
No space is allowed between the <samp><span class="option">-d</span></samp> and <var>file</var>, if
<var>file</var> is supplied.

     <p><a name="index-troubleshooting_002c-typographical-errors_0040comma_007b_007d-global-variables-215"></a>Having a list of all global variables is a good way to look for
typographical errors in your programs. 
You would also use this option if you have a large program with a lot of
functions, and you want to be sure that your functions don't
inadvertently use global variables that you meant to be local. 
(This is a particularly easy mistake to make with simple variable
names like <code>i</code>, <code>j</code>, etc.)

     <br><dt><code>-e </code><var>program-text</var><dt><code>--source </code><var>program-text</var><dd><a name="index-g_t_0040code_007b_002de_007d-option-216"></a><a name="index-g_t_0040code_007b_002d_002dsource_007d-option-217"></a><a name="index-source-code_002c-mixing-218"></a>Provide program source code in the <var>program-text</var>. 
This option allows you to mix source code in files with source
code that you enter on the command line. 
This is particularly useful
when you have library functions that you want to use from your command-line
programs (see <a href="#AWKPATH-Variable">AWKPATH Variable</a>).

     <br><dt><code>-E </code><var>file</var><dt><code>--exec </code><var>file</var><dd><a name="index-g_t_0040code_007b_002dE_007d-option-219"></a><a name="index-g_t_0040code_007b_002d_002dexec_007d-option-220"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-location-of-221"></a><a name="index-CGI_002c-_0040command_007bawk_007d-scripts-for-222"></a>Similar to <samp><span class="option">-f</span></samp>, read <samp><span class="command">awk</span></samp> program text from <var>file</var>. 
There are two differences from <samp><span class="option">-f</span></samp>:

          <ul>
<li>This option terminates option processing; anything
else on the command line is passed on directly to the <samp><span class="command">awk</span></samp> program.

          <li>Command-line variable assignments of the form
&lsquo;<samp><var>var</var><span class="samp">=</span><var>value</var></samp>&rsquo; are disallowed. 
</ul>

     <p>This option is particularly necessary for World Wide Web CGI applications
that pass arguments through the URL; using this option prevents a malicious
(or other) user from passing in options, assignments, or <samp><span class="command">awk</span></samp> source
code (via <samp><span class="option">--source</span></samp>) to the CGI application.  This option should be used
with &lsquo;<samp><span class="samp">#!</span></samp>&rsquo; scripts (see <a href="#Executable-Scripts">Executable Scripts</a>), like so:

     <pre class="example">          #! /usr/local/bin/gawk -E
          
          <var>awk program here <small class="dots">...</small></var>
</pre>
     <br><dt><code>-g</code><dt><code>--gen-pot</code><dd><a name="index-g_t_0040code_007b_002dg_007d-option-223"></a><a name="index-g_t_0040code_007b_002d_002dgen_002dpot_007d-option-224"></a><a name="index-portable-object-files_002c-generating-225"></a><a name="index-files_002c-portable-object_002c-generating-226"></a>Analyze the source program and
generate a GNU <code>gettext</code> Portable Object Template file on standard
output for all string constants that have been marked for translation. 
See <a href="#Internationalization">Internationalization</a>,
for information about this option.

     <br><dt><code>-h</code><dt><code>--help</code><dd><a name="index-g_t_0040code_007b_002dh_007d-option-227"></a><a name="index-g_t_0040code_007b_002d_002dhelp_007d-option-228"></a><a name="index-GNU-long-options_002c-printing-list-of-229"></a><a name="index-options_002c-printing-list-of-230"></a><a name="index-printing_002c-list-of-options-231"></a>Print a &ldquo;usage&rdquo; message summarizing the short and long style options
that <samp><span class="command">gawk</span></samp> accepts and then exit.

     <br><dt><code>-L </code><span class="roman">[</span><code>value</code><span class="roman">]</span><dt><code>--lint</code><span class="roman">[</span><code>=value</code><span class="roman">]</span><dd><a name="index-g_t_0040code_007b_002dl_007d-option-232"></a><a name="index-g_t_0040code_007b_002d_002dlint_007d-option-233"></a><a name="index-lint-checking_002c-issuing-warnings-234"></a><a name="index-warnings_002c-issuing-235"></a>Warn about constructs that are dubious or nonportable to
other <samp><span class="command">awk</span></samp> implementations. 
Some warnings are issued when <samp><span class="command">gawk</span></samp> first reads your program.  Others
are issued at runtime, as your program executes. 
With an optional argument of &lsquo;<samp><span class="samp">fatal</span></samp>&rsquo;,
lint warnings become fatal errors. 
This may be drastic, but its use will certainly encourage the
development of cleaner <samp><span class="command">awk</span></samp> programs. 
With an optional argument of &lsquo;<samp><span class="samp">invalid</span></samp>&rsquo;, only warnings about things
that are actually invalid are issued. (This is not fully implemented yet.)

     <p>Some warnings are only printed once, even if the dubious constructs they
warn about occur multiple times in your <samp><span class="command">awk</span></samp> program.  Thus,
when eliminating problems pointed out by <samp><span class="option">--lint</span></samp>, you should take
care to search for all occurrences of each inappropriate construct. As
<samp><span class="command">awk</span></samp> programs are usually short, doing so is not burdensome.

     <br><dt><code>-n</code><dt><code>--non-decimal-data</code><dd><a name="index-g_t_0040code_007b_002dn_007d-option-236"></a><a name="index-g_t_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option-237"></a><a name="index-hexadecimal-values_0040comma_007b_007d-enabling-interpretation-of-238"></a><a name="index-octal-values_0040comma_007b_007d-enabling-interpretation-of-239"></a><a name="index-troubleshooting_002c-_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option-240"></a>Enable automatic interpretation of octal and hexadecimal
values in input data
(see <a href="#Nondecimal-Data">Nondecimal Data</a>).

     <blockquote>
<b>CAUTION:</b> This option can severely break old programs. 
Use with care. 
</blockquote>

     <br><dt><code>-N</code><dt><code>--use-lc-numeric</code><dd><a name="index-g_t_0040code_007b_002dN_007d-option-241"></a><a name="index-g_t_0040code_007b_002d_002duse_002dlc_002dnumeric_007d-option-242"></a>Force the use of the locale's decimal point character
when parsing numeric input data (see <a href="#Locales">Locales</a>).

     <br><dt><code>-O</code><dt><code>--optimize</code><dd><a name="index-g_t_0040code_007b_002d_002doptimize_007d-option-243"></a><a name="index-g_t_0040code_007b_002dO_007d-option-244"></a>Enable some optimizations on the internal representation of the program. 
At the moment this includes just simple constant folding. The <samp><span class="command">gawk</span></samp>
maintainer hopes to add more optimizations over time.

     <br><dt><code>-p</code><span class="roman">[</span><var>file</var><span class="roman">]</span><dt><code>--profile</code><span class="roman">[</span><code>=</code><var>file</var><span class="roman">]</span><dd><a name="index-g_t_0040code_007b_002dp_007d-option-245"></a><a name="index-g_t_0040code_007b_002d_002dprofile_007d-option-246"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-profiling_002c-enabling-247"></a>Enable profiling of <samp><span class="command">awk</span></samp> programs
(see <a href="#Profiling">Profiling</a>). 
By default, profiles are created in a file named <samp><span class="file">awkprof.out</span></samp>. 
The optional <var>file</var> argument allows you to specify a different
file name for the profile file. 
No space is allowed between the <samp><span class="option">-p</span></samp> and <var>file</var>, if
<var>file</var> is supplied.

     <p>When run with <samp><span class="command">gawk</span></samp>, the profile is just a &ldquo;pretty printed&rdquo; version
of the program.  When run with <samp><span class="command">pgawk</span></samp>, the profile contains execution
counts for each statement in the program in the left margin, and function
call counts for each function.

     <br><dt><code>-P</code><dt><code>--posix</code><dd><a name="index-g_t_0040code_007b_002dP_007d-option-248"></a><a name="index-g_t_0040code_007b_002d_002dposix_007d-option-249"></a><a name="index-POSIX-mode-250"></a><a name="index-g_t_0040command_007bgawk_007d_002c-extensions_0040comma_007b_007d-disabling-251"></a>Operate in strict POSIX mode.  This disables all <samp><span class="command">gawk</span></samp>
extensions (just like <samp><span class="option">--traditional</span></samp>) and
disables all extensions not allowed by POSIX. 
See <a href="#Common-Extensions">Common Extensions</a>, for a summary of the extensions
in <samp><span class="command">gawk</span></samp> that are disabled by this option. 
Also,
the following additional
restrictions apply:

          
<a name="index-newlines-252"></a>
<a name="index-whitespace_002c-newlines-as-253"></a>
<ul><li>Newlines do not act as whitespace to separate fields when <code>FS</code> is
equal to a single space
(see <a href="#Fields">Fields</a>).

          <li>Newlines are not allowed after &lsquo;<samp><span class="samp">?</span></samp>&rsquo; or &lsquo;<samp><span class="samp">:</span></samp>&rsquo;
(see <a href="#Conditional-Exp">Conditional Exp</a>).

          <p><a name="index-g_t_0040code_007bFS_007d-variable_002c-as-TAB-character-254"></a><li>Specifying &lsquo;<samp><span class="samp">-Ft</span></samp>&rsquo; on the command-line does not set the value
of <code>FS</code> to be a single TAB character
(see <a href="#Field-Separators">Field Separators</a>).

          <p><a name="index-locale-decimal-point-character-255"></a><a name="index-decimal-point-character_002c-locale-specific-256"></a><li>The locale's decimal point character is used for parsing input
data (see <a href="#Locales">Locales</a>). 
</ul>

     <!-- @cindex automatic warnings -->
     <!-- @cindex warnings, automatic -->
     <p><a name="index-g_t_0040code_007b_002d_002dtraditional_007d-option_002c-_0040code_007b_002d_002dposix_007d-option-and-257"></a><a name="index-g_t_0040code_007b_002d_002dposix_007d-option_002c-_0040code_007b_002d_002dtraditional_007d-option-and-258"></a>If you supply both <samp><span class="option">--traditional</span></samp> and <samp><span class="option">--posix</span></samp> on the
command line, <samp><span class="option">--posix</span></samp> takes precedence. <samp><span class="command">gawk</span></samp>
also issues a warning if both options are supplied.

     <br><dt><code>-r</code><dt><code>--re-interval</code><dd><a name="index-g_t_0040code_007b_002dr_007d-option-259"></a><a name="index-g_t_0040code_007b_002d_002dre_002dinterval_007d-option-260"></a><a name="index-regular-expressions_002c-interval-expressions-and-261"></a>Allow interval expressions
(see <a href="#Regexp-Operators">Regexp Operators</a>)
in regexps. 
This is now <samp><span class="command">gawk</span></samp>'s default behavior. 
Nevertheless, this option remains both for backward compatibility,
and for use in combination with the <samp><span class="option">--traditional</span></samp> option.

     <br><dt><code>-R </code><var>file</var><dt><code>--command=</code><var>file</var><dd><a name="index-g_t_0040code_007b_002dR_007d-option-262"></a><a name="index-g_t_0040code_007b_002d_002dcommand_007d-option-263"></a><samp><span class="command">dgawk</span></samp> only. 
Read <samp><span class="command">dgawk</span></samp> debugger options and commands from <var>file</var>. 
See <a href="#Dgawk-Info">Dgawk Info</a>, for more information.

     <br><dt><code>-S</code><dt><code>--sandbox</code><dd><a name="index-g_t_0040code_007b_002dS_007d-option-264"></a><a name="index-g_t_0040code_007b_002d_002dsandbox_007d-option-265"></a><a name="index-sandbox-mode-266"></a>Disable the <code>system()</code> function,
input redirections with <code>getline</code>,
output redirections with <code>print</code> and <code>printf</code>,
and dynamic extensions. 
This is particularly useful when you want to run <samp><span class="command">awk</span></samp> scripts
from questionable sources and need to make sure the scripts
can't access your system (other than the specified input data file).

     <br><dt><code>-t</code><dt><code>--lint-old</code><dd><a name="index-g_t_0040code_007b_002d_002dL_007d-option-267"></a><a name="index-g_t_0040code_007b_002d_002dlint_002dold_007d-option-268"></a>Warn about constructs that are not available in the original version of
<samp><span class="command">awk</span></samp> from Version 7 Unix
(see <a href="#V7_002fSVR3_002e1">V7/SVR3.1</a>).

     <br><dt><code>-V</code><dt><code>--version</code><dd><a name="index-g_t_0040code_007b_002dV_007d-option-269"></a><a name="index-g_t_0040code_007b_002d_002dversion_007d-option-270"></a><a name="index-g_t_0040command_007bgawk_007d_002c-versions-of_002c-information-about_0040comma_007b_007d-printing-271"></a>Print version information for this particular copy of <samp><span class="command">gawk</span></samp>. 
This allows you to determine if your copy of <samp><span class="command">gawk</span></samp> is up to date
with respect to whatever the Free Software Foundation is currently
distributing. 
It is also useful for bug reports
(see <a href="#Bugs">Bugs</a>). 
</dl>

   <p>As long as program text has been supplied,
any other options are flagged as invalid with a warning message but
are otherwise ignored.

   <p><a name="index-g_t_0040code_007b_002dF_007d-option_002c-_0040code_007b_002dFt_007d-sets-_0040code_007bFS_007d-to-TAB-272"></a>In compatibility mode, as a special case, if the value of <var>fs</var> supplied
to the <samp><span class="option">-F</span></samp> option is &lsquo;<samp><span class="samp">t</span></samp>&rsquo;, then <code>FS</code> is set to the TAB
character (<code>"\t"</code>).  This is true only for <samp><span class="option">--traditional</span></samp> and not
for <samp><span class="option">--posix</span></samp>
(see <a href="#Field-Separators">Field Separators</a>).

   <p><a name="index-g_t_0040code_007b_002df_007d-option_002c-on-command-line-273"></a>The <samp><span class="option">-f</span></samp> option may be used more than once on the command line. 
If it is, <samp><span class="command">awk</span></samp> reads its program source from all of the named files, as
if they had been concatenated together into one big file.  This is
useful for creating libraries of <samp><span class="command">awk</span></samp> functions.  These functions
can be written once and then retrieved from a standard place, instead
of having to be included into each individual program. 
(As mentioned in
<a href="#Definition-Syntax">Definition Syntax</a>,
function names must be unique.)

   <p>With standard <samp><span class="command">awk</span></samp>, library functions can still be used, even
if the program is entered at the terminal,
by specifying &lsquo;<samp><span class="samp">-f /dev/tty</span></samp>&rsquo;.  After typing your program,
type <kbd>Ctrl-d</kbd> (the end-of-file character) to terminate it. 
(You may also use &lsquo;<samp><span class="samp">-f -</span></samp>&rsquo; to read program source from the standard
input but then you will not be able to also use the standard input as a
source of data.)

   <p>Because it is clumsy using the standard <samp><span class="command">awk</span></samp> mechanisms to mix source
file and command-line <samp><span class="command">awk</span></samp> programs, <samp><span class="command">gawk</span></samp> provides the
<samp><span class="option">--source</span></samp> option.  This does not require you to pre-empt the standard
input for your source code; it allows you to easily mix command-line
and library source code
(see <a href="#AWKPATH-Variable">AWKPATH Variable</a>). 
The <samp><span class="option">--source</span></samp> option may also be used multiple times on the command line.

   <p><a name="index-g_t_0040code_007b_002d_002dsource_007d-option-274"></a>If no <samp><span class="option">-f</span></samp> or <samp><span class="option">--source</span></samp> option is specified, then <samp><span class="command">gawk</span></samp>
uses the first non-option command-line argument as the text of the
program source code.

   <p><a name="index-g_t_0040env_007bPOSIXLY_005fCORRECT_007d-environment-variable-275"></a><a name="index-lint-checking_002c-_0040env_007bPOSIXLY_005fCORRECT_007d-environment-variable-276"></a><a name="index-POSIX-mode-277"></a>If the environment variable <samp><span class="env">POSIXLY_CORRECT</span></samp> exists,
then <samp><span class="command">gawk</span></samp> behaves in strict POSIX mode, exactly as if
you had supplied the <samp><span class="option">--posix</span></samp> command-line option. 
Many GNU programs look for this environment variable to suppress
extensions that conflict with POSIX, but <samp><span class="command">gawk</span></samp> behaves
differently: it suppresses all extensions, even those that do not
conflict with POSIX, and behaves in
strict POSIX mode. If <samp><span class="option">--lint</span></samp> is supplied on the command line
and <samp><span class="command">gawk</span></samp> turns on POSIX mode because of <samp><span class="env">POSIXLY_CORRECT</span></samp>,
then it issues a warning message indicating that POSIX
mode is in effect. 
You would typically set this variable in your shell's startup file. 
For a Bourne-compatible shell (such as Bash), you would add these
lines to the <samp><span class="file">.profile</span></samp> file in your home directory:

<pre class="example">     POSIXLY_CORRECT=true
     export POSIXLY_CORRECT
</pre>
   <p><a name="index-g_t_0040command_007bcsh_007d-utility_002c-_0040env_007bPOSIXLY_005fCORRECT_007d-environment-variable-278"></a>For a C shell-compatible
shell,<a rel="footnote" href="#fn-13" name="fnd-13"><sup>13</sup></a>
you would add this line to the <samp><span class="file">.login</span></samp> file in your home directory:

<pre class="example">     setenv POSIXLY_CORRECT true
</pre>
   <p><a name="index-portability_002c-_0040env_007bPOSIXLY_005fCORRECT_007d-environment-variable-279"></a>Having <samp><span class="env">POSIXLY_CORRECT</span></samp> set is not recommended for daily use,
but it is good for testing the portability of your programs to other
environments. 
<!-- ENDOFRANGE ocl -->
<!-- ENDOFRANGE clo -->

<div class="node">
<a name="Other-Arguments"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Naming-Standard-Input">Naming Standard Input</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Options">Options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-Gawk">Invoking Gawk</a>

</div>

<h3 class="section">2.3 Other Command-Line Arguments</h3>

<p><a name="index-command-line_002c-arguments-280"></a><a name="index-arguments_002c-command_002dline-281"></a>
Any additional arguments on the command line are normally treated as
input files to be processed in the order specified.   However, an
argument that has the form <var>var</var><code>=</code><var>value</var>, assigns
the value <var>value</var> to the variable <var>var</var>&mdash;it does not specify a
file at all. 
(See
<a href="#Assignment-Options">Assignment Options</a>.)

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bARGIND_007d-variable-in-282"></a><a name="index-g_t_0040code_007bARGIND_007d-variable_002c-command_002dline-arguments-283"></a><a name="index-g_t_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables_002c-command_002dline-arguments-284"></a>All these arguments are made available to your <samp><span class="command">awk</span></samp> program in the
<code>ARGV</code> array (see <a href="#Built_002din-Variables">Built-in Variables</a>).  Command-line options
and the program text (if present) are omitted from <code>ARGV</code>. 
All other arguments, including variable assignments, are
included.   As each element of <code>ARGV</code> is processed, <samp><span class="command">gawk</span></samp>
sets the variable <code>ARGIND</code> to the index in <code>ARGV</code> of the
current element.

   <p><a name="index-input-files_002c-variable-assignments-and-285"></a>The distinction between file name arguments and variable-assignment
arguments is made when <samp><span class="command">awk</span></samp> is about to open the next input file. 
At that point in execution, it checks the file name to see whether
it is really a variable assignment; if so, <samp><span class="command">awk</span></samp> sets the variable
instead of reading a file.

   <p>Therefore, the variables actually receive the given values after all
previously specified files have been read.  In particular, the values of
variables assigned in this fashion are <em>not</em> available inside a
<code>BEGIN</code> rule
(see <a href="#BEGIN_002fEND">BEGIN/END</a>),
because such rules are run before <samp><span class="command">awk</span></samp> begins scanning the argument list.

   <p><a name="index-dark-corner_002c-escape-sequences-286"></a>The variable values given on the command line are processed for escape
sequences (see <a href="#Escape-Sequences">Escape Sequences</a>). 
(d.c.)

   <p>In some earlier implementations of <samp><span class="command">awk</span></samp>, when a variable assignment
occurred before any file names, the assignment would happen <em>before</em>
the <code>BEGIN</code> rule was executed.  <samp><span class="command">awk</span></samp>'s behavior was thus
inconsistent; some command-line assignments were available inside the
<code>BEGIN</code> rule, while others were not.  Unfortunately,
some applications came to depend
upon this &ldquo;feature.&rdquo;  When <samp><span class="command">awk</span></samp> was changed to be more consistent,
the <samp><span class="option">-v</span></samp> option was added to accommodate applications that depended
upon the old behavior.

   <p>The variable assignment feature is most useful for assigning to variables
such as <code>RS</code>, <code>OFS</code>, and <code>ORS</code>, which control input and
output formats before scanning the data files.  It is also useful for
controlling state if multiple passes are needed over a data file.  For
example:

   <p><a name="index-files_002c-multiple-passes-over-287"></a>
<pre class="example">     awk 'pass == 1  { <var>pass 1 stuff</var> }
          pass == 2  { <var>pass 2 stuff</var> }' pass=1 mydata pass=2 mydata
</pre>
   <p>Given the variable assignment feature, the <samp><span class="option">-F</span></samp> option for setting
the value of <code>FS</code> is not
strictly necessary.  It remains for historical compatibility.

<div class="node">
<a name="Naming-Standard-Input"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Environment-Variables">Environment Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Other-Arguments">Other Arguments</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-Gawk">Invoking Gawk</a>

</div>

<h3 class="section">2.4 Naming Standard Input</h3>

<p>Often, you may wish to read standard input together with other files. 
For example, you may wish to read one file, read standard input coming
from a pipe, and then read another file.

   <p>The way to name the standard input, with all versions of <samp><span class="command">awk</span></samp>,
is to use a single, standalone minus sign or dash, &lsquo;<samp><span class="samp">-</span></samp>&rsquo;.  For example:

<pre class="example">     <var>some_command</var> | awk -f myprog.awk file1 - file2
</pre>
   <p class="noindent">Here, <samp><span class="command">awk</span></samp> first reads <samp><span class="file">file1</span></samp>, then it reads
the output of <var>some_command</var>, and finally it reads
<samp><span class="file">file2</span></samp>.

   <p>You may also use <code>"-"</code> to name standard input when reading
files with <code>getline</code> (see <a href="#Getline_002fFile">Getline/File</a>).

   <p>In addition, <samp><span class="command">gawk</span></samp> allows you to specify the special
file name <samp><span class="file">/dev/stdin</span></samp>, both on the command line and
with <code>getline</code>. 
Some other versions of <samp><span class="command">awk</span></samp> also support this, but it
is not standard. 
(Some operating systems provide a <samp><span class="file">/dev/stdin</span></samp> file
in the file system, however, <samp><span class="command">gawk</span></samp> always processes
this file name itself.)

<div class="node">
<a name="Environment-Variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Exit-Status">Exit Status</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Naming-Standard-Input">Naming Standard Input</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-Gawk">Invoking Gawk</a>

</div>

<h3 class="section">2.5 The Environment Variables <samp><span class="command">gawk</span></samp> Uses</h3>

<p>A number of environment variables influence how <samp><span class="command">gawk</span></samp>
behaves.

<ul class="menu">
<li><a accesskey="1" href="#AWKPATH-Variable">AWKPATH Variable</a>:             Searching directories for <samp><span class="command">awk</span></samp>
                                programs. 
<li><a accesskey="2" href="#Other-Environment-Variables">Other Environment Variables</a>:  The environment variables. 
</ul>

<div class="node">
<a name="AWKPATH-Variable"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Other-Environment-Variables">Other Environment Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Environment-Variables">Environment Variables</a>

</div>

<h4 class="subsection">2.5.1 The <samp><span class="env">AWKPATH</span></samp> Environment Variable</h4>

<p><a name="index-g_t_0040env_007bAWKPATH_007d-environment-variable-288"></a><a name="index-directories_002c-searching-289"></a><a name="index-search-paths-290"></a><a name="index-search-paths_002c-for-source-files-291"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bAWKPATH_007d-environment-variable-292"></a>In most <samp><span class="command">awk</span></samp>
implementations, you must supply a precise path name for each program
file, unless the file is in the current directory. 
But in <samp><span class="command">gawk</span></samp>, if the file name supplied to the <samp><span class="option">-f</span></samp> option
does not contain a &lsquo;<samp><span class="samp">/</span></samp>&rsquo;, then <samp><span class="command">gawk</span></samp> searches a list of
directories (called the <dfn>search path</dfn>), one by one, looking for a
file with the specified name.

   <p>The search path is a string consisting of directory names
separated by colons.  <samp><span class="command">gawk</span></samp> gets its search path from the
<samp><span class="env">AWKPATH</span></samp> environment variable.  If that variable does not exist,
<samp><span class="command">gawk</span></samp> uses a default path,
&lsquo;<samp><span class="samp">.:/usr/local/share/awk</span></samp>&rsquo;.<a rel="footnote" href="#fn-14" name="fnd-14"><sup>14</sup></a>

   <p>The search path feature is particularly useful for building libraries
of useful <samp><span class="command">awk</span></samp> functions.  The library files can be placed in a
standard directory in the default path and then specified on
the command line with a short file name.  Otherwise, the full file name
would have to be typed for each file.

   <p>By using both the <samp><span class="option">--source</span></samp> and <samp><span class="option">-f</span></samp> options, your command-line
<samp><span class="command">awk</span></samp> programs can use facilities in <samp><span class="command">awk</span></samp> library files
(see <a href="#Library-Functions">Library Functions</a>). 
Path searching is not done if <samp><span class="command">gawk</span></samp> is in compatibility mode. 
This is true for both <samp><span class="option">--traditional</span></samp> and <samp><span class="option">--posix</span></samp>. 
See <a href="#Options">Options</a>.

   <blockquote>
<b>NOTE:</b> To include
the current directory in the path, either place
<samp><span class="file">.</span></samp> explicitly in the path or write a null entry in the
path.  (A null entry is indicated by starting or ending the path with a
colon or by placing two colons next to each other (&lsquo;<samp><span class="samp">::</span></samp>&rsquo;).) 
This path search mechanism is similar
to the shell's. 
<!-- someday, @cite{The Bourne Again Shell}.... -->

   <p>However, <samp><span class="command">gawk</span></samp> always looks in the current directory <em>before</em>
searching <samp><span class="env">AWKPATH</span></samp>, so there is no real reason to include
the current directory in the search path. 
<!-- Prior to 4.0, gawk searched the current directory after the -->
<!-- path search, but it's not worth documenting it. -->
</blockquote>

   <p>If <samp><span class="env">AWKPATH</span></samp> is not defined in the
environment, <samp><span class="command">gawk</span></samp> places its default search path into
<code>ENVIRON["AWKPATH"]</code>. This makes it easy to determine
the actual search path that <samp><span class="command">gawk</span></samp> will use
from within an <samp><span class="command">awk</span></samp> program.

   <p>While you can change <code>ENVIRON["AWKPATH"]</code> within your <samp><span class="command">awk</span></samp>
program, this has no effect on the running program's behavior.  This makes
sense: the <samp><span class="env">AWKPATH</span></samp> environment variable is used to find the program
source files.  Once your program is running, all the files have been
found, and <samp><span class="command">gawk</span></samp> no longer needs to use <samp><span class="env">AWKPATH</span></samp>.

<div class="node">
<a name="Other-Environment-Variables"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#AWKPATH-Variable">AWKPATH Variable</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Environment-Variables">Environment Variables</a>

</div>

<h4 class="subsection">2.5.2 Other Environment Variables</h4>

<p>A number of other environment variables affect <samp><span class="command">gawk</span></samp>'s
behavior, but they are more specialized. Those in the following
list are meant to be used by regular users.

     <dl>
<dt><samp><span class="env">POSIXLY_CORRECT</span></samp><dd>Causes <samp><span class="command">gawk</span></samp> to switch POSIX compatibility
mode, disabling all traditional and GNU extensions. 
See <a href="#Options">Options</a>.

     <br><dt><samp><span class="env">GAWK_SOCK_RETRIES</span></samp><dd>Controls the number of time <samp><span class="command">gawk</span></samp> will attempt to
retry a two-way TCP/IP (socket) connection before giving up. 
See <a href="#TCP_002fIP-Networking">TCP/IP Networking</a>.

     <br><dt><samp><span class="env">GAWK_MSEC_SLEEP</span></samp><dd>Specifies the interval between connection retries,
in milliseconds. On systems that do not support
the <code>usleep()</code> system call,
the value is rounded up to an integral number of seconds. 
</dl>

   <p>The environment variables in the following list are meant
for use by the <samp><span class="command">gawk</span></samp> developers for testing and tuning. 
They are subject to change. The variables are:

     <dl>
<dt><samp><span class="env">AVG_CHAIN_MAX</span></samp><dd>The average number of items <samp><span class="command">gawk</span></samp> will maintain on a
hash chain for managing arrays.

     <br><dt><samp><span class="env">AWK_HASH</span></samp><dd>If this variable exists with a value of &lsquo;<samp><span class="samp">gst</span></samp>&rsquo;, <samp><span class="command">gawk</span></samp>
will switch to using the hash function from GNU Smalltalk for
managing arrays. 
This function may be marginally faster than the standard function.

     <br><dt><samp><span class="env">AWKREADFUNC</span></samp><dd>If this variable exists, <samp><span class="command">gawk</span></samp> switches to reading source
files one line at a time, instead of reading in blocks. This exists
for debugging problems on filesystems on non-POSIX operating systems
where I/O is performed in records, not in blocks.

     <br><dt><samp><span class="env">GAWK_NO_DFA</span></samp><dd>If this variable exists, <samp><span class="command">gawk</span></samp> does not use the DFA regexp matcher
for &ldquo;does it match&rdquo; kinds of tests. This can cause <samp><span class="command">gawk</span></samp>
to be slower. Its purpose is to help isolate differences between the
two regexp matchers that <samp><span class="command">gawk</span></samp> uses internally. (There aren't
supposed to be differences, but occasionally theory and practice don't
coordinate with each other.)

     <br><dt><samp><span class="env">GAWK_STACKSIZE</span></samp><dd>This specifies the amount by which <samp><span class="command">gawk</span></samp> should grow its
internal evaluation stack, when needed.

     <br><dt><samp><span class="env">TIDYMEM</span></samp><dd>If this variable exists, <samp><span class="command">gawk</span></samp> uses the <code>mtrace()</code> library
calls from GNU LIBC to help track down possible memory leaks. 
</dl>

<div class="node">
<a name="Exit-Status"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Include-Files">Include Files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Environment-Variables">Environment Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-Gawk">Invoking Gawk</a>

</div>

<h3 class="section">2.6 <samp><span class="command">gawk</span></samp>'s Exit Status</h3>

<p><a name="index-exit-status_002c-of-_0040command_007bgawk_007d-293"></a>If the <code>exit</code> statement is used with a value
(see <a href="#Exit-Statement">Exit Statement</a>), then <samp><span class="command">gawk</span></samp> exits with
the numeric value given to it.

   <p>Otherwise, if there were no problems during execution,
<samp><span class="command">gawk</span></samp> exits with the value of the C constant
<code>EXIT_SUCCESS</code>.  This is usually zero.

   <p>If an error occurs, <samp><span class="command">gawk</span></samp> exits with the value of
the C constant <code>EXIT_FAILURE</code>.  This is usually one.

   <p>If <samp><span class="command">gawk</span></samp> exits because of a fatal error, the exit
status is 2.  On non-POSIX systems, this value may be mapped
to <code>EXIT_FAILURE</code>.

<div class="node">
<a name="Include-Files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Obsolete">Obsolete</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Exit-Status">Exit Status</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-Gawk">Invoking Gawk</a>

</div>

<h3 class="section">2.7 Including Other Files Into Your Program</h3>

<!-- Panos Papadopoulos <panos1962@gmail.com> contributed the original -->
<!-- text for this section. -->
<p>This section describes a feature that is specific to <samp><span class="command">gawk</span></samp>.

   <p>The &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; keyword can be used to read external <samp><span class="command">awk</span></samp> source
files.  This gives you the ability to split large <samp><span class="command">awk</span></samp> source files
into smaller, more manageable pieces, and also lets you reuse common <samp><span class="command">awk</span></samp>
code from various <samp><span class="command">awk</span></samp> scripts.  In other words, you can group
together <samp><span class="command">awk</span></samp> functions, used to carry out specific tasks,
into external files. These files can be used just like function libraries,
using the &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; keyword in conjunction with the <code>AWKPATH</code>
environment variable.

   <p>Let's see an example. 
We'll start with two (trivial) <samp><span class="command">awk</span></samp> scripts, namely
<samp><span class="file">test1</span></samp> and <samp><span class="file">test2</span></samp>. Here is the <samp><span class="file">test1</span></samp> script:

<pre class="example">     BEGIN {
         print "This is script test1."
     }
</pre>
   <p class="noindent">and here is <samp><span class="file">test2</span></samp>:

<pre class="example">     @include "test1"
     BEGIN {
         print "This is script test2."
     }
</pre>
   <p>Running <samp><span class="command">gawk</span></samp> with <samp><span class="file">test2</span></samp>
produces the following result:

<pre class="example">     $ <kbd>gawk -f test2</kbd>
     -| This is file test1.
     -| This is file test2.
</pre>
   <p><code>gawk</code> runs the <samp><span class="file">test2</span></samp> script which includes <samp><span class="file">test1</span></samp>
using the &lsquo;<samp><span class="samp">@include</span></samp>&rsquo;
keyword.  So, to include external <samp><span class="command">awk</span></samp> source files you just
use &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; followed by the name of the file to be included,
enclosed in double quotes.

   <blockquote>
<b>NOTE:</b> Keep in mind that this is a language construct and the file name cannot
be a string variable, but rather just a literal string in double quotes. 
</blockquote>

   <p>The files to be included may be nested; e.g., given a third
script, namely <samp><span class="file">test3</span></samp>:

<pre class="example">     @include "test2"
     BEGIN {
         print "This is script test3."
     }
</pre>
   <p class="noindent">Running <samp><span class="command">gawk</span></samp> with the <samp><span class="file">test3</span></samp> script produces the
following results:

<pre class="example">     $ <kbd>gawk -f test3</kbd>
     -| This is file test1.
     -| This is file test2.
     -| This is file test3.
</pre>
   <p>The file name can, of course, be a pathname. For example:

<pre class="example">     @include "../io_funcs"
</pre>
   <p class="noindent">or:

<pre class="example">     @include "/usr/awklib/network"
</pre>
   <p class="noindent">are valid. The <code>AWKPATH</code> environment variable can be of great
value when using &lsquo;<samp><span class="samp">@include</span></samp>&rsquo;. The same rules for the use
of the <code>AWKPATH</code> variable in command-line file searches
(see <a href="#AWKPATH-Variable">AWKPATH Variable</a>) apply to
&lsquo;<samp><span class="samp">@include</span></samp>&rsquo; also.

   <p>This is very helpful in constructing <samp><span class="command">gawk</span></samp> function libraries. 
If you have a large script with useful, general purpose <samp><span class="command">awk</span></samp>
functions, you can break it down into library files and put those files
in a special directory.  You can then include those &ldquo;libraries,&rdquo; using
either the full pathnames of the files, or by setting the <code>AWKPATH</code>
environment variable accordingly and then using &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; with
just the file part of the full pathname. Of course you can have more
than one directory to keep library files; the more complex the working
environment is, the more directories you may need to organize the files
to be included.

   <p>Given the ability to specify multiple <samp><span class="option">-f</span></samp> options, the
&lsquo;<samp><span class="samp">@include</span></samp>&rsquo; mechanism is not strictly necessary. 
However, the &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; keyword
can help you in constructing self-contained <samp><span class="command">gawk</span></samp> programs,
thus reducing the need for writing complex and tedious command lines. 
In particular, &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; is very useful for writing CGI scripts
to be run from web pages.

   <p>As mentioned in <a href="#AWKPATH-Variable">AWKPATH Variable</a>, the current directory is always
searched first for source files, before searching in <samp><span class="env">AWKPATH</span></samp>,
and this also applies to files named with &lsquo;<samp><span class="samp">@include</span></samp>&rsquo;.

<div class="node">
<a name="Obsolete"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Undocumented">Undocumented</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Include-Files">Include Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-Gawk">Invoking Gawk</a>

</div>

<h3 class="section">2.8 Obsolete Options and/or Features</h3>

<p><a name="index-features_002c-advanced_002c-See-advanced-features-294"></a><a name="index-options_002c-deprecated-295"></a><a name="index-features_002c-deprecated-296"></a><a name="index-obsolete-features-297"></a>This section describes features and/or command-line options from
previous releases of <samp><span class="command">gawk</span></samp> that are either not available in the
current version or that are still supported but deprecated (meaning that
they will <em>not</em> be in the next release).

<!-- update this section for each release! -->
   <p><a name="index-g_t_0040code_007bPROCINFO_007d-array-298"></a>The process-related special files <samp><span class="file">/dev/pid</span></samp>, <samp><span class="file">/dev/ppid</span></samp>,
<samp><span class="file">/dev/pgrpid</span></samp>, and <samp><span class="file">/dev/user</span></samp> were deprecated in <samp><span class="command">gawk</span></samp>
3.1, but still worked.  As of version 4.0, they are no longer
interpreted specially by <samp><span class="command">gawk</span></samp>.  (Use <code>PROCINFO</code> instead;
see <a href="#Auto_002dset">Auto-set</a>.)

<div class="node">
<a name="Undocumented"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Obsolete">Obsolete</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Invoking-Gawk">Invoking Gawk</a>

</div>

<h3 class="section">2.9 Undocumented Options and Features</h3>

<p><a name="index-undocumented-features-299"></a><a name="index-features_002c-undocumented-300"></a><a name="index-Skywalker_002c-Luke-301"></a><a name="index-Kenobi_002c-Obi_002dWan-302"></a><a name="index-Jedi-knights-303"></a><a name="index-Knights_002c-jedi-304"></a><blockquote>
<i>Use the Source, Luke!</i><br>
Obi-Wan
</blockquote>

   <p>This section intentionally left
blank.

<div class="node">
<a name="Regexp"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Reading-Files">Reading Files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Invoking-Gawk">Invoking Gawk</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">3 Regular Expressions</h2>

<p><a name="index-regexp_002c-See-regular-expressions-305"></a><!-- STARTOFRANGE regexp -->
<a name="index-regular-expressions-306"></a>
A <dfn>regular expression</dfn>, or <dfn>regexp</dfn>, is a way of describing a
set of strings. 
Because regular expressions are such a fundamental part of <samp><span class="command">awk</span></samp>
programming, their format and use deserve a separate chapter.

   <p><a name="index-forward-slash-_0028_0040code_007b_002f_007d_0029-307"></a><a name="index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029-308"></a>A regular expression enclosed in slashes (&lsquo;<samp><span class="samp">/</span></samp>&rsquo;)
is an <samp><span class="command">awk</span></samp> pattern that matches every input record whose text
belongs to that set. 
The simplest regular expression is a sequence of letters, numbers, or
both.  Such a regexp matches any string that contains that sequence. 
Thus, the regexp &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; matches any string containing &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;. 
Therefore, the pattern <code>/foo/</code> matches any input record containing
the three characters &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; <em>anywhere</em> in the record.  Other
kinds of regexps let you specify more complicated classes of strings.

   <p>Initially, the examples in this chapter are simple. 
As we explain more about how
regular expressions work, we present more complicated instances.

<ul class="menu">
<li><a accesskey="1" href="#Regexp-Usage">Regexp Usage</a>:                 How to Use Regular Expressions. 
<li><a accesskey="2" href="#Escape-Sequences">Escape Sequences</a>:             How to write nonprinting characters. 
<li><a accesskey="3" href="#Regexp-Operators">Regexp Operators</a>:             Regular Expression Operators. 
<li><a accesskey="4" href="#Bracket-Expressions">Bracket Expressions</a>:          What can go between &lsquo;<samp><span class="samp">[...]</span></samp>&rsquo;. 
<li><a accesskey="5" href="#GNU-Regexp-Operators">GNU Regexp Operators</a>:         Operators specific to GNU software. 
<li><a accesskey="6" href="#Case_002dsensitivity">Case-sensitivity</a>:             How to do case-insensitive matching. 
<li><a accesskey="7" href="#Leftmost-Longest">Leftmost Longest</a>:             How much text matches. 
<li><a accesskey="8" href="#Computed-Regexps">Computed Regexps</a>:             Using Dynamic Regexps. 
</ul>

<div class="node">
<a name="Regexp-Usage"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Escape-Sequences">Escape Sequences</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Regexp">Regexp</a>

</div>

<h3 class="section">3.1 How to Use Regular Expressions</h3>

<p><a name="index-regular-expressions_002c-as-patterns-309"></a>A regular expression can be used as a pattern by enclosing it in
slashes.  Then the regular expression is tested against the
entire text of each record.  (Normally, it only needs
to match some part of the text in order to succeed.)  For example, the
following prints the second field of each record that contains the string
&lsquo;<samp><span class="samp">foo</span></samp>&rsquo; anywhere in it:

<pre class="example">     $ <kbd>awk '/foo/ { print $2 }' BBS-list</kbd>
     -| 555-1234
     -| 555-6699
     -| 555-6480
     -| 555-2127
</pre>
   <p><a name="index-regular-expressions_002c-operators-310"></a><a name="index-operators_002c-string_002dmatching-311"></a><!-- @cindex operators, @code{~} -->
<a name="index-string_002dmatching-operators-312"></a><a name="index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-313"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-314"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-315"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-316"></a><!-- @cindex operators, @code{!~} -->
<a name="index-g_t_0040code_007bif_007d-statement-317"></a><a name="index-g_t_0040code_007bwhile_007d-statement-318"></a><a name="index-g_t_0040code_007bdo_007d_002d_0040code_007bwhile_007d-statement-319"></a><!-- @cindex statements, @code{if} -->
<!-- @cindex statements, @code{while} -->
<!-- @cindex statements, @code{do} -->
Regular expressions can also be used in matching expressions.  These
expressions allow you to specify the string to match against; it need
not be the entire current input record.  The two operators &lsquo;<samp><span class="samp">~</span></samp>&rsquo;
and &lsquo;<samp><span class="samp">!~</span></samp>&rsquo; perform regular expression comparisons.  Expressions
using these operators can be used as patterns, or in <code>if</code>,
<code>while</code>, <code>for</code>, and <code>do</code> statements. 
(See <a href="#Statements">Statements</a>.) 
For example:

<pre class="example">     <var>exp</var> ~ /<var>regexp</var>/
</pre>
   <p class="noindent">is true if the expression <var>exp</var> (taken as a string)
matches <var>regexp</var>.  The following example matches, or selects,
all input records with the uppercase letter &lsquo;<samp><span class="samp">J</span></samp>&rsquo; somewhere in the
first field:

<pre class="example">     $ <kbd>awk '$1 ~ /J/' inventory-shipped</kbd>
     -| Jan  13  25  15 115
     -| Jun  31  42  75 492
     -| Jul  24  34  67 436
     -| Jan  21  36  64 620
</pre>
   <p>So does this:

<pre class="example">     awk '{ if ($1 ~ /J/) print }' inventory-shipped
</pre>
   <p>This next example is true if the expression <var>exp</var>
(taken as a character string)
does <em>not</em> match <var>regexp</var>:

<pre class="example">     <var>exp</var> !~ /<var>regexp</var>/
</pre>
   <p>The following example matches,
or selects, all input records whose first field <em>does not</em> contain
the uppercase letter &lsquo;<samp><span class="samp">J</span></samp>&rsquo;:

<pre class="example">     $ <kbd>awk '$1 !~ /J/' inventory-shipped</kbd>
     -| Feb  15  32  24 226
     -| Mar  15  24  34 228
     -| Apr  31  52  63 420
     -| May  16  34  29 208
     ...
</pre>
   <p><a name="index-regexp-constants-320"></a><a name="index-regular-expressions_002c-constants_002c-See-regexp-constants-321"></a>When a regexp is enclosed in slashes, such as <code>/foo/</code>, we call it
a <dfn>regexp constant</dfn>, much like <code>5.27</code> is a numeric constant and
<code>"foo"</code> is a string constant.

<div class="node">
<a name="Escape-Sequences"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Regexp-Operators">Regexp Operators</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Regexp-Usage">Regexp Usage</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Regexp">Regexp</a>

</div>

<h3 class="section">3.2 Escape Sequences</h3>

<p><a name="index-escape-sequences-322"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-in-escape-sequences-323"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-in-escape-sequences-324"></a>Some characters cannot be included literally in string constants
(<code>"foo"</code>) or regexp constants (<code>/foo/</code>). 
Instead, they should be represented with <dfn>escape sequences</dfn>,
which are character sequences beginning with a backslash (&lsquo;<samp><span class="samp">\</span></samp>&rsquo;). 
One use of an escape sequence is to include a double-quote character in
a string constant.  Because a plain double quote ends the string, you
must use &lsquo;<samp><span class="samp">\"</span></samp>&rsquo; to represent an actual double-quote character as a
part of the string.  For example:

<pre class="example">     $ <kbd>awk 'BEGIN { print "He said \"hi!\" to her." }'</kbd>
     -| He said "hi!" to her.
</pre>
   <p>The  backslash character itself is another character that cannot be
included normally; you must write &lsquo;<samp><span class="samp">\\</span></samp>&rsquo; to put one backslash in the
string or regexp.  Thus, the string whose contents are the two characters
&lsquo;<samp><span class="samp">"</span></samp>&rsquo; and &lsquo;<samp><span class="samp">\</span></samp>&rsquo; must be written <code>"\"\\"</code>.

   <p>Other escape sequences represent unprintable characters
such as TAB or newline.  While there is nothing to stop you from entering most
unprintable characters directly in a string constant or regexp constant,
they may look ugly.

   <p>The following table lists
all the escape sequences used in <samp><span class="command">awk</span></samp> and
what they represent. Unless noted otherwise, all these escape
sequences apply to both string constants and regexp constants:

     <dl>
<dt><code>\\</code><dd>A literal backslash, &lsquo;<samp><span class="samp">\</span></samp>&rsquo;.

     <!-- @cindex @command{awk} language, V.4 version -->
     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005ca_007d-escape-sequence-325"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005ca_007d-escape-sequence-326"></a><br><dt><code>\a</code><dd>The &ldquo;alert&rdquo; character, <kbd>Ctrl-g</kbd>, ASCII code 7 (BEL). 
(This usually makes some sort of audible noise.)

     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cb_007d-escape-sequence-327"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cb_007d-escape-sequence-328"></a><br><dt><code>\b</code><dd>Backspace, <kbd>Ctrl-h</kbd>, ASCII code 8 (BS).

     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cf_007d-escape-sequence-329"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cf_007d-escape-sequence-330"></a><br><dt><code>\f</code><dd>Formfeed, <kbd>Ctrl-l</kbd>, ASCII code 12 (FF).

     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cn_007d-escape-sequence-331"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cn_007d-escape-sequence-332"></a><br><dt><code>\n</code><dd>Newline, <kbd>Ctrl-j</kbd>, ASCII code 10 (LF).

     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cr_007d-escape-sequence-333"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cr_007d-escape-sequence-334"></a><br><dt><code>\r</code><dd>Carriage return, <kbd>Ctrl-m</kbd>, ASCII code 13 (CR).

     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005ct_007d-escape-sequence-335"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005ct_007d-escape-sequence-336"></a><br><dt><code>\t</code><dd>Horizontal TAB, <kbd>Ctrl-i</kbd>, ASCII code 9 (HT).

     <!-- @cindex @command{awk} language, V.4 version -->
     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cv_007d-escape-sequence-337"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cv_007d-escape-sequence-338"></a><br><dt><code>\v</code><dd>Vertical tab, <kbd>Ctrl-k</kbd>, ASCII code 11 (VT).

     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_007d_0040var_007bnnn_007d-escape-sequence-339"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_007d_0040var_007bnnn_007d-escape-sequence-340"></a><br><dt><code>\</code><var>nnn</var><dd>The octal value <var>nnn</var>, where <var>nnn</var> stands for 1 to 3 digits
between &lsquo;<samp><span class="samp">0</span></samp>&rsquo; and &lsquo;<samp><span class="samp">7</span></samp>&rsquo;.  For example, the code for the ASCII ESC
(escape) character is &lsquo;<samp><span class="samp">\033</span></samp>&rsquo;.

     <!-- @cindex @command{awk} language, V.4 version -->
     <!-- @cindex @command{awk} language, POSIX version -->
     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cx_007d-escape-sequence-341"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cx_007d-escape-sequence-342"></a><a name="index-common-extensions_002c-_0040code_007b_005cx_007d-escape-sequence-343"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_005cx_007d-escape-sequence-344"></a><br><dt><code>\x</code><var>hh</var><code>...</code><dd>The hexadecimal value <var>hh</var>, where <var>hh</var> stands for a sequence
of hexadecimal digits (&lsquo;<samp><span class="samp">0</span></samp>&rsquo;&ndash;&lsquo;<samp><span class="samp">9</span></samp>&rsquo;, and either &lsquo;<samp><span class="samp">A</span></samp>&rsquo;&ndash;&lsquo;<samp><span class="samp">F</span></samp>&rsquo;
or &lsquo;<samp><span class="samp">a</span></samp>&rsquo;&ndash;&lsquo;<samp><span class="samp">f</span></samp>&rsquo;).  Like the same construct
in ISO C, the escape sequence continues until the first nonhexadecimal
digit is seen. (c.e.) 
However, using more than two hexadecimal digits produces
undefined results. (The &lsquo;<samp><span class="samp">\x</span></samp>&rsquo; escape sequence is not allowed in
POSIX <samp><span class="command">awk</span></samp>.)

     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_002f_007d-escape-sequence-345"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_002f_007d-escape-sequence-346"></a><br><dt><code>\/</code><dd>A literal slash (necessary for regexp constants only). 
This sequence is used when you want to write a regexp
constant that contains a slash. Because the regexp is delimited by
slashes, you need to escape the slash that is part of the pattern,
in order to tell <samp><span class="command">awk</span></samp> to keep processing the rest of the regexp.

     <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_0022_007d-escape-sequence-347"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_0022_007d-escape-sequence-348"></a><br><dt><code>\"</code><dd>A literal double quote (necessary for string constants only). 
This sequence is used when you want to write a string
constant that contains a double quote. Because the string is delimited by
double quotes, you need to escape the quote that is part of the string,
in order to tell <samp><span class="command">awk</span></samp> to keep processing the rest of the string. 
</dl>

   <p>In <samp><span class="command">gawk</span></samp>, a number of additional two-character sequences that begin
with a backslash have special meaning in regexps. 
See <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a>.

   <p>In a regexp, a backslash before any character that is not in the previous list
and not listed in
<a href="#GNU-Regexp-Operators">GNU Regexp Operators</a>,
means that the next character should be taken literally, even if it would
normally be a regexp operator.  For example, <code>/a\+b/</code> matches the three
characters &lsquo;<samp><span class="samp">a+b</span></samp>&rsquo;.

   <p><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-in-escape-sequences-349"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-in-escape-sequences-350"></a><a name="index-portability-351"></a>For complete portability, do not use a backslash before any character not
shown in the previous list.

   <p>To summarize:

     <ul>
<li>The escape sequences in the table above are always processed first,
for both string constants and regexp constants. This happens very early,
as soon as <samp><span class="command">awk</span></samp> reads your program.

     <li><samp><span class="command">gawk</span></samp> processes both regexp constants and dynamic regexps
(see <a href="#Computed-Regexps">Computed Regexps</a>),
for the special operators listed in
<a href="#GNU-Regexp-Operators">GNU Regexp Operators</a>.

     <li>A backslash before any other character means to treat that character
literally. 
</ul>

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Backslash Before Regular Characters</h4>

<p><a name="index-portability_002c-backslash-in-escape-sequences-352"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-backslashes-in-string-constants-353"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-in-escape-sequences_002c-POSIX-and-354"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-in-escape-sequences_002c-POSIX-and-355"></a>
<a name="index-troubleshooting_002c-backslash-before-nonspecial-character-356"></a>If you place a backslash in a string constant before something that is
not one of the characters previously listed, POSIX <samp><span class="command">awk</span></samp> purposely
leaves what happens as undefined.  There are two choices:

<!-- @cindex automatic warnings -->
<!-- @cindex warnings, automatic -->
     <dl>
<dt>Strip the backslash out<dd>This is what Brian Kernighan's <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp> both do. 
For example, <code>"a\qc"</code> is the same as <code>"aqc"</code>. 
(Because this is such an easy bug both to introduce and to miss,
<samp><span class="command">gawk</span></samp> warns you about it.) 
Consider &lsquo;<samp><span class="samp">FS = "[&nbsp;\t]+\|[&nbsp;\t]+"<!-- /@w --></span></samp>&rsquo; to use vertical bars
surrounded by whitespace as the field separator. There should be
two backslashes in the string: &lsquo;<samp><span class="samp">FS = "[&nbsp;\t]+\\|[&nbsp;\t]+"<!-- /@w --></span></samp>&rsquo;.) 
<!-- I did this!  This is why I added the warning. -->

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-escape-sequences-357"></a><a name="index-Unix-_0040command_007bawk_007d_002c-backslashes-in-escape-sequences-358"></a><br><dt>Leave the backslash alone<dd>Some other <samp><span class="command">awk</span></samp> implementations do this. 
In such implementations, typing <code>"a\qc"</code> is the same as typing
<code>"a\\qc"</code>. 
</dl>

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Escape Sequences for Metacharacters</h4>

<p><a name="index-metacharacters_002c-escape-sequences-for-359"></a>
Suppose you use an octal or hexadecimal
escape to represent a regexp metacharacter. 
(See <a href="#Regexp-Operators">Regexp Operators</a>.) 
Does <samp><span class="command">awk</span></samp> treat the character as a literal character or as a regexp
operator?

   <p><a name="index-dark-corner_002c-escape-sequences_002c-for-metacharacters-360"></a>Historically, such characters were taken literally. 
(d.c.) 
However, the POSIX standard indicates that they should be treated
as real metacharacters, which is what <samp><span class="command">gawk</span></samp> does. 
In compatibility mode (see <a href="#Options">Options</a>),
<samp><span class="command">gawk</span></samp> treats the characters represented by octal and hexadecimal
escape sequences literally when used in regexp constants. Thus,
<code>/a\52b/</code> is equivalent to <code>/a\*b/</code>.

<div class="node">
<a name="Regexp-Operators"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Bracket-Expressions">Bracket Expressions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Escape-Sequences">Escape Sequences</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Regexp">Regexp</a>

</div>

<h3 class="section">3.3 Regular Expression Operators</h3>

<!-- STARTOFRANGE regexpo -->
<p><a name="index-regular-expressions_002c-operators-361"></a>
You can combine regular expressions with special characters,
called <dfn>regular expression operators</dfn> or <dfn>metacharacters</dfn>, to
increase the power and versatility of regular expressions.

   <p>The escape sequences described
earlier
in <a href="#Escape-Sequences">Escape Sequences</a>,
are valid inside a regexp.  They are introduced by a &lsquo;<samp><span class="samp">\</span></samp>&rsquo; and
are recognized and converted into corresponding real characters as
the very first step in processing regexps.

   <p>Here is a list of metacharacters.  All characters that are not escape
sequences and that are not listed in the table stand for themselves:

     
<a name="index-backslash-_0028_0040code_007b_005c_007d_0029-362"></a>
<a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029-363"></a>
<dl><dt><code>\</code><dd>This is used to suppress the special meaning of a character when
matching.  For example, &lsquo;<samp><span class="samp">\$</span></samp>&rsquo;
matches the character &lsquo;<samp><span class="samp">$</span></samp>&rsquo;.

     <p><a name="index-regular-expressions_002c-anchors-in-364"></a><a name="index-Texinfo_002c-chapter-beginnings-in-files-365"></a><a name="index-g_t_0040code_007b_005e_007d-_0028caret_0029-366"></a><a name="index-caret-_0028_0040code_007b_005e_007d_0029-367"></a><br><dt><code>^</code><dd>This matches the beginning of a string.  For example, &lsquo;<samp><span class="samp">^@chapter</span></samp>&rsquo;
matches &lsquo;<samp><span class="samp">@chapter</span></samp>&rsquo; at the beginning of a string and can be used
to identify chapter beginnings in Texinfo source files. 
The &lsquo;<samp><span class="samp">^</span></samp>&rsquo; is known as an <dfn>anchor</dfn>, because it anchors the pattern to
match only at the beginning of the string.

     <p>It is important to realize that &lsquo;<samp><span class="samp">^</span></samp>&rsquo; does not match the beginning of
a line embedded in a string. 
The condition is not true in the following example:

     <pre class="example">          if ("line1\nLINE 2" ~ /^L/) ...
</pre>
     <p><a name="index-g_t_0040code_007b_0024_007d-_0028dollar-sign_0029-368"></a><a name="index-dollar-sign-_0028_0040code_007b_0024_007d_0029-369"></a><br><dt><code>$</code><dd>This is similar to &lsquo;<samp><span class="samp">^</span></samp>&rsquo;, but it matches only at the end of a string. 
For example, &lsquo;<samp><span class="samp">p$</span></samp>&rsquo;
matches a record that ends with a &lsquo;<samp><span class="samp">p</span></samp>&rsquo;.  The &lsquo;<samp><span class="samp">$</span></samp>&rsquo; is an anchor
and does not match the end of a line embedded in a string. 
The condition in the following example is not true:

     <pre class="example">          if ("line1\nLINE 2" ~ /1$/) ...
</pre>
     <p><a name="index-g_t_0040code_007b_002e_007d-_0028period_0029-370"></a><a name="index-period-_0028_0040code_007b_002e_007d_0029-371"></a><br><dt><code>. </code><span class="roman">(period)</span><dd>This matches any single character,
<em>including</em> the newline character.  For example, &lsquo;<samp><span class="samp">.P</span></samp>&rsquo;
matches any single character followed by a &lsquo;<samp><span class="samp">P</span></samp>&rsquo; in a string.  Using
concatenation, we can make a regular expression such as &lsquo;<samp><span class="samp">U.A</span></samp>&rsquo;, which
matches any three-character sequence that begins with &lsquo;<samp><span class="samp">U</span></samp>&rsquo; and ends
with &lsquo;<samp><span class="samp">A</span></samp>&rsquo;.

     <p><a name="index-POSIX-_0040command_007bawk_007d_002c-period-_0028_0040code_007b_002e_007d_0029_0040comma_007b_007d-using-372"></a>In strict POSIX mode (see <a href="#Options">Options</a>),
&lsquo;<samp><span class="samp">.</span></samp>&rsquo; does not match the <span class="sc">nul</span>
character, which is a character with all bits equal to zero. 
Otherwise, <span class="sc">nul</span> is just another character. Other versions of <samp><span class="command">awk</span></samp>
may not be able to match the <span class="sc">nul</span> character.

     <p><a name="index-g_t_0040code_007b_005b_005d_007d-_0028square-brackets_0029-373"></a><a name="index-square-brackets-_0028_0040code_007b_005b_005d_007d_0029-374"></a><a name="index-bracket-expressions-375"></a><a name="index-character-sets_002c-See-Also-bracket-expressions-376"></a><a name="index-character-lists_002c-See-bracket-expressions-377"></a><br><dt><code>[...]</code><dd>This is called a <dfn>bracket expression</dfn>.<a rel="footnote" href="#fn-15" name="fnd-15"><sup>15</sup></a>
It matches any <em>one</em> of the characters that are enclosed in
the square brackets.  For example, &lsquo;<samp><span class="samp">[MVX]</span></samp>&rsquo; matches any one of
the characters &lsquo;<samp><span class="samp">M</span></samp>&rsquo;, &lsquo;<samp><span class="samp">V</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">X</span></samp>&rsquo; in a string.  A full
discussion of what can be inside the square brackets of a bracket expression
is given in
<a href="#Bracket-Expressions">Bracket Expressions</a>.

     <p><a name="index-bracket-expressions_002c-complemented-378"></a><br><dt><code>[^ ...]</code><dd>This is a <dfn>complemented bracket expression</dfn>.  The first character after
the &lsquo;<samp><span class="samp">[</span></samp>&rsquo; <em>must</em> be a &lsquo;<samp><span class="samp">^</span></samp>&rsquo;.  It matches any characters
<em>except</em> those in the square brackets.  For example, &lsquo;<samp><span class="samp">[^awk]</span></samp>&rsquo;
matches any character that is not an &lsquo;<samp><span class="samp">a</span></samp>&rsquo;, &lsquo;<samp><span class="samp">w</span></samp>&rsquo;,
or &lsquo;<samp><span class="samp">k</span></samp>&rsquo;.

     <p><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029-379"></a><a name="index-vertical-bar-_0028_0040code_007b_007c_007d_0029-380"></a><br><dt><code>|</code><dd>This is the <dfn>alternation operator</dfn> and it is used to specify
alternatives. 
The &lsquo;<samp><span class="samp">|</span></samp>&rsquo; has the lowest precedence of all the regular
expression operators. 
For example, &lsquo;<samp><span class="samp">^P|[[:digit:]]</span></samp>&rsquo;
matches any string that matches either &lsquo;<samp><span class="samp">^P</span></samp>&rsquo; or &lsquo;<samp><span class="samp">[[:digit:]]</span></samp>&rsquo;.  This
means it matches any string that starts with &lsquo;<samp><span class="samp">P</span></samp>&rsquo; or contains a digit.

     <p>The alternation applies to the largest possible regexps on either side.

     <p><a name="index-g_t_0040code_007b_0028_0029_007d-_0028parentheses_0029-381"></a><a name="index-parentheses-_0040code_007b_0028_0029_007d-382"></a><br><dt><code>(...)</code><dd>Parentheses are used for grouping in regular expressions, as in
arithmetic.  They can be used to concatenate regular expressions
containing the alternation operator, &lsquo;<samp><span class="samp">|</span></samp>&rsquo;.  For example,
&lsquo;<samp><span class="samp">@(samp|code)\{[^}]+\}</span></samp>&rsquo; matches both &lsquo;<samp><span class="samp">@code{foo}</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">@samp{bar}</span></samp>&rsquo;. 
(These are Texinfo formatting control sequences. The &lsquo;<samp><span class="samp">+</span></samp>&rsquo; is
explained further on in this list.)

     <p><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_007d-operator_002c-as-regexp-operator-383"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_007d-operator_002c-as-regexp-operator-384"></a><br><dt><code>*</code><dd>This symbol means that the preceding regular expression should be
repeated as many times as necessary to find a match.  For example, &lsquo;<samp><span class="samp">ph*</span></samp>&rsquo;
applies the &lsquo;<samp><span class="samp">*</span></samp>&rsquo; symbol to the preceding &lsquo;<samp><span class="samp">h</span></samp>&rsquo; and looks for matches
of one &lsquo;<samp><span class="samp">p</span></samp>&rsquo; followed by any number of &lsquo;<samp><span class="samp">h</span></samp>&rsquo;s.  This also matches
just &lsquo;<samp><span class="samp">p</span></samp>&rsquo; if no &lsquo;<samp><span class="samp">h</span></samp>&rsquo;s are present.

     <p>The &lsquo;<samp><span class="samp">*</span></samp>&rsquo; repeats the <em>smallest</em> possible preceding expression. 
(Use parentheses if you want to repeat a larger expression.)  It finds
as many repetitions as possible.  For example,
&lsquo;<samp><span class="samp">awk '/\(c[ad][ad]*r x\)/ { print }' sample</span></samp>&rsquo;
prints every record in <samp><span class="file">sample</span></samp> containing a string of the form
&lsquo;<samp><span class="samp">(car x)</span></samp>&rsquo;, &lsquo;<samp><span class="samp">(cdr x)</span></samp>&rsquo;, &lsquo;<samp><span class="samp">(cadr x)</span></samp>&rsquo;, and so on. 
Notice the escaping of the parentheses by preceding them
with backslashes.

     <p><a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029-385"></a><a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029-386"></a><br><dt><code>+</code><dd>This symbol is similar to &lsquo;<samp><span class="samp">*</span></samp>&rsquo;, except that the preceding expression must be
matched at least once.  This means that &lsquo;<samp><span class="samp">wh+y</span></samp>&rsquo;
would match &lsquo;<samp><span class="samp">why</span></samp>&rsquo; and &lsquo;<samp><span class="samp">whhy</span></samp>&rsquo;, but not &lsquo;<samp><span class="samp">wy</span></samp>&rsquo;, whereas
&lsquo;<samp><span class="samp">wh*y</span></samp>&rsquo; would match all three of these strings. 
The following is a simpler
way of writing the last &lsquo;<samp><span class="samp">*</span></samp>&rsquo; example:

     <pre class="example">          awk '/\(c[ad]+r x\)/ { print }' sample
</pre>
     <p><a name="index-g_t_0040code_007b_003f_007d-_0028question-mark_0029-regexp-operator-387"></a><a name="index-question-mark-_0028_0040code_007b_003f_007d_0029-regexp-operator-388"></a><br><dt><code>?</code><dd>This symbol is similar to &lsquo;<samp><span class="samp">*</span></samp>&rsquo;, except that the preceding expression can be
matched either once or not at all.  For example, &lsquo;<samp><span class="samp">fe?d</span></samp>&rsquo;
matches &lsquo;<samp><span class="samp">fed</span></samp>&rsquo; and &lsquo;<samp><span class="samp">fd</span></samp>&rsquo;, but nothing else.

     <p><a name="index-interval-expressions-389"></a><br><dt><code>{</code><var>n</var><code>}</code><dt><code>{</code><var>n</var><code>,}</code><dt><code>{</code><var>n</var><code>,</code><var>m</var><code>}</code><dd>One or two numbers inside braces denote an <dfn>interval expression</dfn>. 
If there is one number in the braces, the preceding regexp is repeated
<var>n</var> times. 
If there are two numbers separated by a comma, the preceding regexp is
repeated <var>n</var> to <var>m</var> times. 
If there is one number followed by a comma, then the preceding regexp
is repeated at least <var>n</var> times:

          <dl>
<dt><code>wh{3}y</code><dd>Matches &lsquo;<samp><span class="samp">whhhy</span></samp>&rsquo;, but not &lsquo;<samp><span class="samp">why</span></samp>&rsquo; or &lsquo;<samp><span class="samp">whhhhy</span></samp>&rsquo;.

          <br><dt><code>wh{3,5}y</code><dd>Matches &lsquo;<samp><span class="samp">whhhy</span></samp>&rsquo;, &lsquo;<samp><span class="samp">whhhhy</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">whhhhhy</span></samp>&rsquo;, only.

          <br><dt><code>wh{2,}y</code><dd>Matches &lsquo;<samp><span class="samp">whhy</span></samp>&rsquo; or &lsquo;<samp><span class="samp">whhhy</span></samp>&rsquo;, and so on. 
</dl>

     <p><a name="index-POSIX-_0040command_007bawk_007d_002c-interval-expressions-in-390"></a>Interval expressions were not traditionally available in <samp><span class="command">awk</span></samp>. 
They were added as part of the POSIX standard to make <samp><span class="command">awk</span></samp>
and <samp><span class="command">egrep</span></samp> consistent with each other.

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-interval-expressions-and-391"></a>Initially, because old programs may use &lsquo;<samp><span class="samp">{</span></samp>&rsquo; and &lsquo;<samp><span class="samp">}</span></samp>&rsquo; in regexp
constants,
<samp><span class="command">gawk</span></samp> did <em>not</em> match interval expressions
in regexps.

     <p>However, beginning with version 4.0,
<samp><span class="command">gawk</span></samp> does match interval expressions by default. 
This is because compatibility with POSIX has become more
important to most <samp><span class="command">gawk</span></samp> users than compatibility with
old programs.

     <p>For programs that use &lsquo;<samp><span class="samp">{</span></samp>&rsquo; and &lsquo;<samp><span class="samp">}</span></samp>&rsquo; in regexp constants,
it is good practice to always escape them with a backslash.  Then the
regexp constants are valid and work the way you want them to, using
any version of <samp><span class="command">awk</span></samp>.<a rel="footnote" href="#fn-16" name="fnd-16"><sup>16</sup></a>

     <p>Finally, when &lsquo;<samp><span class="samp">{</span></samp>&rsquo; and &lsquo;<samp><span class="samp">}</span></samp>&rsquo; appear in regexp constants
in a way that cannot be interpreted as an interval expression
(such as <code>/q{a}/</code>), then they stand for themselves. 
</dl>

   <p><a name="index-precedence_002c-regexp-operators-392"></a><a name="index-regular-expressions_002c-operators_002c-precedence-of-393"></a>In regular expressions, the &lsquo;<samp><span class="samp">*</span></samp>&rsquo;, &lsquo;<samp><span class="samp">+</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">?</span></samp>&rsquo; operators,
as well as the braces &lsquo;<samp><span class="samp">{</span></samp>&rsquo; and &lsquo;<samp><span class="samp">}</span></samp>&rsquo;,
have
the highest precedence, followed by concatenation, and finally by &lsquo;<samp><span class="samp">|</span></samp>&rsquo;. 
As in arithmetic, parentheses can change how operators are grouped.

   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-regular-expressions-and-394"></a><a name="index-g_t_0040command_007bgawk_007d_002c-regular-expressions_002c-precedence-395"></a>In POSIX <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, the &lsquo;<samp><span class="samp">*</span></samp>&rsquo;, &lsquo;<samp><span class="samp">+</span></samp>&rsquo;, and
&lsquo;<samp><span class="samp">?</span></samp>&rsquo; operators stand for themselves when there is nothing in the
regexp that precedes them.  For example, <code>/+/</code> matches a literal
plus sign.  However, many other versions of <samp><span class="command">awk</span></samp> treat such a
usage as a syntax error.

   <p>If <samp><span class="command">gawk</span></samp> is in compatibility mode (see <a href="#Options">Options</a>), interval
expressions are not available in regular expressions. 
<!-- ENDOFRANGE regexpo -->

<div class="node">
<a name="Bracket-Expressions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#GNU-Regexp-Operators">GNU Regexp Operators</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Regexp-Operators">Regexp Operators</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Regexp">Regexp</a>

</div>

<h3 class="section">3.4 Using Bracket Expressions</h3>

<!-- STARTOFRANGE charlist -->
<p><a name="index-bracket-expressions-396"></a><a name="index-bracket-expressions_002c-range-expressions-397"></a><a name="index-range-expressions-_0028regexps_0029-398"></a>
As mentioned earlier, a bracket expression matches any character amongst
those listed between the opening and closing square brackets.

   <p>Within a bracket expression, a <dfn>range expression</dfn> consists of two
characters separated by a hyphen.  It matches any single character that
sorts between the two characters, based upon the system's native character
set.  For example, &lsquo;<samp><span class="samp">[0-9]</span></samp>&rsquo; is equivalent to &lsquo;<samp><span class="samp">[0123456789]</span></samp>&rsquo;. 
(See <a href="#Ranges-and-Locales">Ranges and Locales</a>, for an explanation of how the POSIX
standard and <samp><span class="command">gawk</span></samp> have changed over time.  This is mainly
of historical interest.)

   <p><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-in-bracket-expressions-399"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-in-bracket-expressions-400"></a><a name="index-g_t_0040code_007b_005e_007d-_0028caret_0029_002c-in-bracket-expressions-401"></a><a name="index-caret-_0028_0040code_007b_005e_007d_0029_002c-in-bracket-expressions-402"></a><a name="index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-in-bracket-expressions-403"></a><a name="index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-in-bracket-expressions-404"></a>To include one of the characters &lsquo;<samp><span class="samp">\</span></samp>&rsquo;, &lsquo;<samp><span class="samp">]</span></samp>&rsquo;, &lsquo;<samp><span class="samp">-</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">^</span></samp>&rsquo; in a
bracket expression, put a &lsquo;<samp><span class="samp">\</span></samp>&rsquo; in front of it.  For example:

<pre class="example">     [d\]]
</pre>
   <p class="noindent">matches either &lsquo;<samp><span class="samp">d</span></samp>&rsquo; or &lsquo;<samp><span class="samp">]</span></samp>&rsquo;.

   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-bracket-expressions-and-405"></a><a name="index-Extended-Regular-Expressions-_0028EREs_0029-406"></a><a name="index-EREs-_0028Extended-Regular-Expressions_0029-407"></a><a name="index-g_t_0040command_007begrep_007d-utility-408"></a>This treatment of &lsquo;<samp><span class="samp">\</span></samp>&rsquo; in bracket expressions
is compatible with other <samp><span class="command">awk</span></samp>
implementations and is also mandated by POSIX. 
The regular expressions in <samp><span class="command">awk</span></samp> are a superset
of the POSIX specification for Extended Regular Expressions (EREs). 
POSIX EREs are based on the regular expressions accepted by the
traditional <samp><span class="command">egrep</span></samp> utility.

   <p><a name="index-bracket-expressions_002c-character-classes-409"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-bracket-expressions-and_002c-character-classes-410"></a><dfn>Character classes</dfn> are a feature introduced in the POSIX standard. 
A character class is a special notation for describing
lists of characters that have a specific attribute, but the
actual characters can vary from country to country and/or
from character set to character set.  For example, the notion of what
is an alphabetic character differs between the United States and France.

   <p>A character class is only valid in a regexp <em>inside</em> the
brackets of a bracket expression.  Character classes consist of &lsquo;<samp><span class="samp">[:</span></samp>&rsquo;,
a keyword denoting the class, and &lsquo;<samp><span class="samp">:]</span></samp>&rsquo;. 
<a href="#table_002dchar_002dclasses">table-char-classes</a> lists the character classes defined by the
POSIX standard.

   <div class="float">
<a name="table_002dchar_002dclasses"></a>
   <p><table summary=""><tr align="left"><th valign="top" width="15%">Class </th><th valign="top" width="85%">Meaning
<br></th></tr><tr align="left"><td valign="top" width="15%"><code>[:alnum:]</code> </td><td valign="top" width="85%">Alphanumeric characters. 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:alpha:]</code> </td><td valign="top" width="85%">Alphabetic characters. 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:blank:]</code> </td><td valign="top" width="85%">Space and TAB characters. 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:cntrl:]</code> </td><td valign="top" width="85%">Control characters. 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:digit:]</code> </td><td valign="top" width="85%">Numeric characters. 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:graph:]</code> </td><td valign="top" width="85%">Characters that are both printable and visible. 
(A space is printable but not visible, whereas an &lsquo;<samp><span class="samp">a</span></samp>&rsquo; is both.) 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:lower:]</code> </td><td valign="top" width="85%">Lowercase alphabetic characters. 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:print:]</code> </td><td valign="top" width="85%">Printable characters (characters that are not control characters). 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:punct:]</code> </td><td valign="top" width="85%">Punctuation characters (characters that are not letters, digits,
control characters, or space characters). 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:space:]</code> </td><td valign="top" width="85%">Space characters (such as space, TAB, and formfeed, to name a few). 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:upper:]</code> </td><td valign="top" width="85%">Uppercase alphabetic characters. 
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>[:xdigit:]</code> </td><td valign="top" width="85%">Characters that are hexadecimal digits.
   <br></td></tr></table>
<p><strong class="float-caption">Table 3.1: POSIX Character Classes</strong></p></div>

   <p>For example, before the POSIX standard, you had to write <code>/[A-Za-z0-9]/</code>
to match alphanumeric characters.  If your
character set had other alphabetic characters in it, this would not
match them. 
With the POSIX character classes, you can write
<code>/[[:alnum:]]/</code> to match the alphabetic
and numeric characters in your character set.

   <p><a name="index-bracket-expressions_002c-collating-elements-411"></a><a name="index-bracket-expressions_002c-non_002dASCII-412"></a><a name="index-collating-elements-413"></a>Two additional special sequences can appear in bracket expressions. 
These apply to non-ASCII character sets, which can have single symbols
(called <dfn>collating elements</dfn>) that are represented with more than one
character. They can also have several characters that are equivalent for
<dfn>collating</dfn>, or sorting, purposes.  (For example, in French, a plain &ldquo;e&rdquo;
and a grave-accented &ldquo;&egrave;&rdquo; are equivalent.) 
These sequences are:

     
<a name="index-bracket-expressions_002c-collating-symbols-414"></a>
<a name="index-collating-symbols-415"></a>
<dl><dt>Collating symbols<dd>Multicharacter collating elements enclosed between
&lsquo;<samp><span class="samp">[.</span></samp>&rsquo; and &lsquo;<samp><span class="samp">.]</span></samp>&rsquo;.  For example, if &lsquo;<samp><span class="samp">ch</span></samp>&rsquo; is a collating element,
then <code>[[.ch.]]</code> is a regexp that matches this collating element, whereas
<code>[ch]</code> is a regexp that matches either &lsquo;<samp><span class="samp">c</span></samp>&rsquo; or &lsquo;<samp><span class="samp">h</span></samp>&rsquo;.

     <p><a name="index-bracket-expressions_002c-equivalence-classes-416"></a><br><dt>Equivalence classes<dd>Locale-specific names for a list of
characters that are equal. The name is enclosed between
&lsquo;<samp><span class="samp">[=</span></samp>&rsquo; and &lsquo;<samp><span class="samp">=]</span></samp>&rsquo;. 
For example, the name &lsquo;<samp><span class="samp">e</span></samp>&rsquo; might be used to represent all of
&ldquo;e,&rdquo; &ldquo;&egrave;,&rdquo; and &ldquo;&eacute;.&rdquo; In this case, <code>[[=e=]]</code> is a regexp
that matches any of &lsquo;<samp><span class="samp">e</span></samp>&rsquo;, &lsquo;<samp><span class="samp">&eacute;</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">&egrave;</span></samp>&rsquo;. 
</dl>

   <p>These features are very valuable in non-English-speaking locales.

   <p><a name="index-internationalization_002c-localization_002c-character-classes-417"></a><a name="index-g_t_0040command_007bgawk_007d_002c-character-classes-and-418"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-bracket-expressions-and_002c-character-classes-419"></a><blockquote>
<b>CAUTION:</b> The library functions that <samp><span class="command">gawk</span></samp> uses for regular
expression matching currently recognize only POSIX character classes;
they do not recognize collating symbols or equivalence classes. 
</blockquote>
   <!-- maybe one day ... -->
<!-- ENDOFRANGE charlist -->

<div class="node">
<a name="GNU-Regexp-Operators"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Case_002dsensitivity">Case-sensitivity</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Bracket-Expressions">Bracket Expressions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Regexp">Regexp</a>

</div>

<h3 class="section">3.5 <samp><span class="command">gawk</span></samp>-Specific Regexp Operators</h3>

<!-- This section adapted (long ago) from the regex-0.12 manual -->
<!-- STARTOFRANGE regexpg -->
<p><a name="index-regular-expressions_002c-operators_002c-_0040command_007bgawk_007d-420"></a><!-- STARTOFRANGE gregexp -->
<a name="index-g_t_0040command_007bgawk_007d_002c-regular-expressions_002c-operators-421"></a><a name="index-operators_002c-GNU_002dspecific-422"></a><a name="index-regular-expressions_002c-operators_002c-for-words-423"></a><a name="index-word_002c-regexp-definition-of-424"></a>GNU software that deals with regular expressions provides a number of
additional regexp operators.  These operators are described in this
section and are specific to <samp><span class="command">gawk</span></samp>;
they are not available in other <samp><span class="command">awk</span></samp> implementations. 
Most of the additional operators deal with word matching. 
For our purposes, a <dfn>word</dfn> is a sequence of one or more letters, digits,
or underscores (&lsquo;<samp><span class="samp">_</span></samp>&rsquo;):

     <dl>
<!-- @cindex operators, @code{\s} (@command{gawk}) -->
<a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cs_007d-operator-_0028_0040command_007bgawk_007d_0029-425"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cs_007d-operator-_0028_0040command_007bgawk_007d_0029-426"></a><dt><code>\s</code><dd>Matches any whitespace character. 
Think of it as shorthand for
<code>[[:space:]]</code><!-- /@w -->.

     <!-- @cindex operators, @code{\S} (@command{gawk}) -->
     <p><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cS_007d-operator-_0028_0040command_007bgawk_007d_0029-427"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cS_007d-operator-_0028_0040command_007bgawk_007d_0029-428"></a><br><dt><code>\S</code><dd>Matches any character that is not whitespace. 
Think of it as shorthand for
<code>[^[:space:]]</code><!-- /@w -->.

     <!-- @cindex operators, @code{\w} (@command{gawk}) -->
     <p><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cw_007d-operator-_0028_0040command_007bgawk_007d_0029-429"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cw_007d-operator-_0028_0040command_007bgawk_007d_0029-430"></a><br><dt><code>\w</code><dd>Matches any word-constituent character&mdash;that is, it matches any
letter, digit, or underscore. Think of it as shorthand for
<code>[[:alnum:]_]</code><!-- /@w -->.

     <!-- @cindex operators, @code{\W} (@command{gawk}) -->
     <p><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cW_007d-operator-_0028_0040command_007bgawk_007d_0029-431"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cW_007d-operator-_0028_0040command_007bgawk_007d_0029-432"></a><br><dt><code>\W</code><dd>Matches any character that is not word-constituent. 
Think of it as shorthand for
<code>[^[:alnum:]_]</code><!-- /@w -->.

     <!-- @cindex operators, @code{\<} (@command{gawk}) -->
     <p><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_003c_007d-operator-_0028_0040command_007bgawk_007d_0029-433"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_003c_007d-operator-_0028_0040command_007bgawk_007d_0029-434"></a><br><dt><code>\&lt;</code><dd>Matches the empty string at the beginning of a word. 
For example, <code>/\&lt;away/</code> matches &lsquo;<samp><span class="samp">away</span></samp>&rsquo; but not
&lsquo;<samp><span class="samp">stowaway</span></samp>&rsquo;.

     <!-- @cindex operators, @code{\>} (@command{gawk}) -->
     <p><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_003e_007d-operator-_0028_0040command_007bgawk_007d_0029-435"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_003e_007d-operator-_0028_0040command_007bgawk_007d_0029-436"></a><br><dt><code>\&gt;</code><dd>Matches the empty string at the end of a word. 
For example, <code>/stow\&gt;/</code> matches &lsquo;<samp><span class="samp">stow</span></samp>&rsquo; but not &lsquo;<samp><span class="samp">stowaway</span></samp>&rsquo;.

     <!-- @cindex operators, @code{\y} (@command{gawk}) -->
     <p><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cy_007d-operator-_0028_0040command_007bgawk_007d_0029-437"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cy_007d-operator-_0028_0040command_007bgawk_007d_0029-438"></a><a name="index-word-boundaries_0040comma_007b_007d-matching-439"></a><br><dt><code>\y</code><dd>Matches the empty string at either the beginning or the
end of a word (i.e., the word boundar<strong>y</strong>).  For example, &lsquo;<samp><span class="samp">\yballs?\y</span></samp>&rsquo;
matches either &lsquo;<samp><span class="samp">ball</span></samp>&rsquo; or &lsquo;<samp><span class="samp">balls</span></samp>&rsquo;, as a separate word.

     <!-- @cindex operators, @code{\B} (@command{gawk}) -->
     <p><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cB_007d-operator-_0028_0040command_007bgawk_007d_0029-440"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cB_007d-operator-_0028_0040command_007bgawk_007d_0029-441"></a><br><dt><code>\B</code><dd>Matches the empty string that occurs between two
word-constituent characters. For example,
<code>/\Brat\B/</code> matches &lsquo;<samp><span class="samp">crate</span></samp>&rsquo; but it does not match &lsquo;<samp><span class="samp">dirty rat</span></samp>&rsquo;. 
&lsquo;<samp><span class="samp">\B</span></samp>&rsquo; is essentially the opposite of &lsquo;<samp><span class="samp">\y</span></samp>&rsquo;. 
</dl>

   <p><a name="index-buffers_002c-operators-for-442"></a><a name="index-regular-expressions_002c-operators_002c-for-buffers-443"></a><a name="index-operators_002c-string_002dmatching_002c-for-buffers-444"></a>There are two other operators that work on buffers.  In Emacs, a
<dfn>buffer</dfn> is, naturally, an Emacs buffer.  For other programs,
<samp><span class="command">gawk</span></samp>'s regexp library routines consider the entire
string to match as the buffer. 
The operators are:

     <dl>
<dt><code>\`</code><dd><!-- @cindex operators, @code{\`} (@command{gawk}) -->
<a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_0060_007d-operator-_0028_0040command_007bgawk_007d_0029-445"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_0060_007d-operator-_0028_0040command_007bgawk_007d_0029-446"></a>Matches the empty string at the
beginning of a buffer (string).

     <!-- @cindex operators, @code{\'} (@command{gawk}) -->
     <p><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_0027_007d-operator-_0028_0040command_007bgawk_007d_0029-447"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_0027_007d-operator-_0028_0040command_007bgawk_007d_0029-448"></a><br><dt><code>\'</code><dd>Matches the empty string at the
end of a buffer (string). 
</dl>

   <p><a name="index-g_t_0040code_007b_005e_007d-_0028caret_0029-449"></a><a name="index-caret-_0028_0040code_007b_005e_007d_0029-450"></a><a name="index-g_t_0040code_007b_003f_007d-_0028question-mark_0029-regexp-operator-451"></a><a name="index-question-mark-_0028_0040code_007b_003f_007d_0029-regexp-operator-452"></a>Because &lsquo;<samp><span class="samp">^</span></samp>&rsquo; and &lsquo;<samp><span class="samp">$</span></samp>&rsquo; always work in terms of the beginning
and end of strings, these operators don't add any new capabilities
for <samp><span class="command">awk</span></samp>.  They are provided for compatibility with other
GNU software.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-word_002dboundary-operator-453"></a><a name="index-word_002dboundary-operator-_0028_0040command_007bgawk_007d_0029-454"></a><a name="index-operators_002c-word_002dboundary-_0028_0040command_007bgawk_007d_0029-455"></a>In other GNU software, the word-boundary operator is &lsquo;<samp><span class="samp">\b</span></samp>&rsquo;. However,
that conflicts with the <samp><span class="command">awk</span></samp> language's definition of &lsquo;<samp><span class="samp">\b</span></samp>&rsquo;
as backspace, so <samp><span class="command">gawk</span></samp> uses a different letter. 
An alternative method would have been to require two backslashes in the
GNU operators, but this was deemed too confusing. The current
method of using &lsquo;<samp><span class="samp">\y</span></samp>&rsquo; for the GNU &lsquo;<samp><span class="samp">\b</span></samp>&rsquo; appears to be the
lesser of two evils.

<!-- NOTE!!! Keep this in sync with the same table in the summary appendix! -->
<!-- Should really do this with file inclusion. -->
   <p><a name="index-regular-expressions_002c-_0040command_007bgawk_007d_002c-command_002dline-options-456"></a><a name="index-g_t_0040command_007bgawk_007d_002c-command_002dline-options-457"></a>The various command-line options
(see <a href="#Options">Options</a>)
control how <samp><span class="command">gawk</span></samp> interprets characters in regexps:

     <dl>
<dt>No options<dd>In the default case, <samp><span class="command">gawk</span></samp> provides all the facilities of
POSIX regexps and the
previously described
GNU regexp operators. 
GNU regexp operators described
in <a href="#Regexp-Operators">Regexp Operators</a>.

     <br><dt><code>--posix</code><dd>Only POSIX regexps are supported; the GNU operators are not special
(e.g., &lsquo;<samp><span class="samp">\w</span></samp>&rsquo; matches a literal &lsquo;<samp><span class="samp">w</span></samp>&rsquo;).  Interval expressions
are allowed.

     <br><dt><code>--traditional</code><dd>Traditional Unix <samp><span class="command">awk</span></samp> regexps are matched. The GNU operators
are not special, and interval expressions are not available. 
The POSIX character classes (<code>[[:alnum:]]</code>, etc.) are supported,
as Brian Kernighan's <samp><span class="command">awk</span></samp> does support them. 
Characters described by octal and hexadecimal escape sequences are
treated literally, even if they represent regexp metacharacters.

     <br><dt><code>--re-interval</code><dd>Allow interval expressions in regexps, if <samp><span class="option">--traditional</span></samp>
has been provided. 
Otherwise, interval expressions are available by default. 
</dl>
   <!-- ENDOFRANGE gregexp -->
<!-- ENDOFRANGE regexpg -->

<div class="node">
<a name="Case-sensitivity"></a>
<a name="Case_002dsensitivity"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Leftmost-Longest">Leftmost Longest</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#GNU-Regexp-Operators">GNU Regexp Operators</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Regexp">Regexp</a>

</div>

<h3 class="section">3.6 Case Sensitivity in Matching</h3>

<!-- STARTOFRANGE regexpcs -->
<p><a name="index-regular-expressions_002c-case-sensitivity-458"></a><!-- STARTOFRANGE csregexp -->
<a name="index-case-sensitivity_002c-regexps-and-459"></a>Case is normally significant in regular expressions, both when matching
ordinary characters (i.e., not metacharacters) and inside bracket
expressions.  Thus, a &lsquo;<samp><span class="samp">w</span></samp>&rsquo; in a regular expression matches only a lowercase
&lsquo;<samp><span class="samp">w</span></samp>&rsquo; and not an uppercase &lsquo;<samp><span class="samp">W</span></samp>&rsquo;.

   <p>The simplest way to do a case-independent match is to use a bracket
expression&mdash;for example, &lsquo;<samp><span class="samp">[Ww]</span></samp>&rsquo;.  However, this can be cumbersome if
you need to use it often, and it can make the regular expressions harder
to read.  There are two alternatives that you might prefer.

   <p>One way to perform a case-insensitive match at a particular point in the
program is to convert the data to a single case, using the
<code>tolower()</code> or <code>toupper()</code> built-in string functions (which we
haven't discussed yet;
see <a href="#String-Functions">String Functions</a>). 
For example:

<pre class="example">     tolower($1) ~ /foo/  { ... }
</pre>
   <p class="noindent">converts the first field to lowercase before matching against it. 
This works in any POSIX-compliant <samp><span class="command">awk</span></samp>.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-regular-expressions_002c-case-sensitivity-460"></a><a name="index-case-sensitivity_002c-_0040command_007bgawk_007d-461"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-regular-expressions-462"></a><a name="index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-463"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-464"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-465"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-466"></a><a name="index-g_t_0040code_007bIGNORECASE_007d-variable-467"></a><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-in-468"></a><!-- @cindex variables, @code{IGNORECASE} -->
Another method, specific to <samp><span class="command">gawk</span></samp>, is to set the variable
<code>IGNORECASE</code> to a nonzero value (see <a href="#Built_002din-Variables">Built-in Variables</a>). 
When <code>IGNORECASE</code> is not zero, <em>all</em> regexp and string
operations ignore case.  Changing the value of
<code>IGNORECASE</code> dynamically controls the case-sensitivity of the
program as it runs.  Case is significant by default because
<code>IGNORECASE</code> (like most variables) is initialized to zero:

<pre class="example">     x = "aB"
     if (x ~ /ab/) ...   # this test will fail
     
     IGNORECASE = 1
     if (x ~ /ab/) ...   # now it will succeed
</pre>
   <p>In general, you cannot use <code>IGNORECASE</code> to make certain rules
case-insensitive and other rules case-sensitive, because there is no
straightforward way
to set <code>IGNORECASE</code> just for the pattern of
a particular rule.<a rel="footnote" href="#fn-17" name="fnd-17"><sup>17</sup></a>
To do this, use either bracket expressions or <code>tolower()</code>.  However, one
thing you can do with <code>IGNORECASE</code> only is dynamically turn
case-sensitivity on or off for all the rules at once.

   <p><code>IGNORECASE</code> can be set on the command line or in a <code>BEGIN</code> rule
(see <a href="#Other-Arguments">Other Arguments</a>; also
see <a href="#Using-BEGIN_002fEND">Using BEGIN/END</a>). 
Setting <code>IGNORECASE</code> from the command line is a way to make
a program case-insensitive without having to edit it.

   <p>Both regexp and string comparison
operations are affected by <code>IGNORECASE</code>.

<!-- @cindex ISO 8859-1 -->
<!-- @cindex ISO Latin-1 -->
   <p>In multibyte locales,
the equivalences between upper-
and lowercase characters are tested based on the wide-character values of
the locale's character set. 
Otherwise, the characters are tested based
on the ISO-8859-1 (ISO Latin-1)
character set. This character set is a superset of the traditional 128
ASCII characters, which also provides a number of characters suitable
for use with European languages.<a rel="footnote" href="#fn-18" name="fnd-18"><sup>18</sup></a>

   <p>The value of <code>IGNORECASE</code> has no effect if <samp><span class="command">gawk</span></samp> is in
compatibility mode (see <a href="#Options">Options</a>). 
Case is always significant in compatibility mode. 
<!-- ENDOFRANGE csregexp -->
<!-- ENDOFRANGE regexpcs -->

<div class="node">
<a name="Leftmost-Longest"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Computed-Regexps">Computed Regexps</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Case_002dsensitivity">Case-sensitivity</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Regexp">Regexp</a>

</div>

<h3 class="section">3.7 How Much Text Matches?</h3>

<p><a name="index-regular-expressions_002c-leftmost-longest-match-469"></a><!-- @cindex matching, leftmost longest -->
Consider the following:

<pre class="example">     echo aaaabcd | awk '{ sub(/a+/, "&lt;A&gt;"); print }'
</pre>
   <p>This example uses the <code>sub()</code> function (which we haven't discussed yet;
see <a href="#String-Functions">String Functions</a>)
to make a change to the input record. Here, the regexp <code>/a+/</code>
indicates &ldquo;one or more &lsquo;<samp><span class="samp">a</span></samp>&rsquo; characters,&rdquo; and the replacement
text is &lsquo;<samp><span class="samp">&lt;A&gt;</span></samp>&rsquo;.

   <p>The input contains four &lsquo;<samp><span class="samp">a</span></samp>&rsquo; characters. 
<samp><span class="command">awk</span></samp> (and POSIX) regular expressions always match
the leftmost, <em>longest</em> sequence of input characters that can
match.  Thus, all four &lsquo;<samp><span class="samp">a</span></samp>&rsquo; characters are
replaced with &lsquo;<samp><span class="samp">&lt;A&gt;</span></samp>&rsquo; in this example:

<pre class="example">     $ <kbd>echo aaaabcd | awk '{ sub(/a+/, "&lt;A&gt;"); print }'</kbd>
     -| &lt;A&gt;bcd
</pre>
   <p>For simple match/no-match tests, this is not so important. But when doing
text matching and substitutions with the <code>match()</code>, <code>sub()</code>, <code>gsub()</code>,
and <code>gensub()</code> functions, it is very important. 
Understanding this principle is also important for regexp-based record
and field splitting (see <a href="#Records">Records</a>,
and also see <a href="#Field-Separators">Field Separators</a>).

<div class="node">
<a name="Computed-Regexps"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Leftmost-Longest">Leftmost Longest</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Regexp">Regexp</a>

</div>

<h3 class="section">3.8 Using Dynamic Regexps</h3>

<!-- STARTOFRANGE dregexp -->
<p><a name="index-regular-expressions_002c-computed-470"></a><!-- STARTOFRANGE regexpd -->
<a name="index-regular-expressions_002c-dynamic-471"></a><a name="index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-472"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-473"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-474"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-475"></a><!-- @cindex operators, @code{~} -->
<!-- @cindex operators, @code{!~} -->
The righthand side of a &lsquo;<samp><span class="samp">~</span></samp>&rsquo; or &lsquo;<samp><span class="samp">!~</span></samp>&rsquo; operator need not be a
regexp constant (i.e., a string of characters between slashes).  It may
be any expression.  The expression is evaluated and converted to a string
if necessary; the contents of the string are then used as the
regexp.  A regexp computed in this way is called a <dfn>dynamic
regexp</dfn>:

<pre class="example">     BEGIN { digits_regexp = "[[:digit:]]+" }
     $0 ~ digits_regexp    { print }
</pre>
   <p class="noindent">This sets <code>digits_regexp</code> to a regexp that describes one or more digits,
and tests whether the input record matches this regexp.

   <blockquote>
<b>NOTE:</b> When using the &lsquo;<samp><span class="samp">~</span></samp>&rsquo; and &lsquo;<samp><span class="samp">!~</span></samp>&rsquo;
operators, there is a difference between a regexp constant
enclosed in slashes and a string constant enclosed in double quotes. 
If you are going to use a string constant, you have to understand that
the string is, in essence, scanned <em>twice</em>: the first time when
<samp><span class="command">awk</span></samp> reads your program, and the second time when it goes to
match the string on the lefthand side of the operator with the pattern
on the right.  This is true of any string-valued expression (such as
<code>digits_regexp</code>, shown previously), not just string constants. 
</blockquote>

   <p><a name="index-regexp-constants_002c-slashes-vs_002e_0040_003a-quotes-476"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-regexp-constants-477"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-regexp-constants-478"></a><a name="index-g_t_0040code_007b_0022_007d-_0028double-quote_0029_002c-regexp-constants-479"></a><a name="index-double-quote-_0028_0040code_007b_0022_007d_0029_002c-regexp-constants-480"></a>What difference does it make if the string is
scanned twice? The answer has to do with escape sequences, and particularly
with backslashes.  To get a backslash into a regular expression inside a
string, you have to type two backslashes.

   <p>For example, <code>/\*/</code> is a regexp constant for a literal &lsquo;<samp><span class="samp">*</span></samp>&rsquo;. 
Only one backslash is needed.  To do the same thing with a string,
you have to type <code>"\\*"</code>.  The first backslash escapes the
second one so that the string actually contains the
two characters &lsquo;<samp><span class="samp">\</span></samp>&rsquo; and &lsquo;<samp><span class="samp">*</span></samp>&rsquo;.

   <p><a name="index-troubleshooting_002c-regexp-constants-vs_002e_0040_003a-string-constants-481"></a><a name="index-regexp-constants_002c-vs_002e_0040_003a-string-constants-482"></a><a name="index-string-constants_002c-vs_002e_0040_003a-regexp-constants-483"></a>Given that you can use both regexp and string constants to describe
regular expressions, which should you use?  The answer is &ldquo;regexp
constants,&rdquo; for several reasons:

     <ul>
<li>String constants are more complicated to write and
more difficult to read. Using regexp constants makes your programs
less error-prone.  Not understanding the difference between the two
kinds of constants is a common source of errors.

     <li>It is more efficient to use regexp constants. <samp><span class="command">awk</span></samp> can note
that you have supplied a regexp and store it internally in a form that
makes pattern matching more efficient.  When using a string constant,
<samp><span class="command">awk</span></samp> must first convert the string into this internal form and
then perform the pattern matching.

     <li>Using regexp constants is better form; it shows clearly that you
intend a regexp match. 
</ul>

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Using <code>\n</code> in Bracket Expressions of Dynamic Regexps</h4>

<p><a name="index-regular-expressions_002c-dynamic_002c-with-embedded-newlines-484"></a><a name="index-newlines_002c-in-dynamic-regexps-485"></a>
Some commercial versions of <samp><span class="command">awk</span></samp> do not allow the newline
character to be used inside a bracket expression for a dynamic regexp:

<pre class="example">     $ <kbd>awk '$0 ~ "[ \t\n]"'</kbd>
     error--&gt; awk: newline in character class [
     error--&gt; ]...
     error--&gt;  source line number 1
     error--&gt;  context is
     error--&gt;          &gt;&gt;&gt;  &lt;&lt;&lt;
</pre>
   <p><a name="index-newlines_002c-in-regexp-constants-486"></a>But a newline in a regexp constant works with no problem:

<pre class="example">     $ <kbd>awk '$0 ~ /[ \t\n]/'</kbd>
     <kbd>here is a sample line</kbd>
     -| here is a sample line
     <kbd>Ctrl-d</kbd>
</pre>
   <p><samp><span class="command">gawk</span></samp> does not have this problem, and it isn't likely to
occur often in practice, but it's worth noting for future reference. 
<!-- ENDOFRANGE dregexp -->
<!-- ENDOFRANGE regexpd -->
<!-- ENDOFRANGE regexp -->

<div class="node">
<a name="Reading-Files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Printing">Printing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Regexp">Regexp</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">4 Reading Input Files</h2>

<!-- STARTOFRANGE infir -->
<p><a name="index-input-files_002c-reading-487"></a><a name="index-input-files-488"></a><a name="index-g_t_0040code_007bFILENAME_007d-variable-489"></a>In the typical <samp><span class="command">awk</span></samp> program,
<samp><span class="command">awk</span></samp> reads all input either from the
standard input (by default, this is the keyboard, but often it is a pipe from another
command) or from files whose names you specify on the <samp><span class="command">awk</span></samp>
command line.  If you specify input files, <samp><span class="command">awk</span></samp> reads them
in order, processing all the data from one before going on to the next. 
The name of the current input file can be found in the built-in variable
<code>FILENAME</code>
(see <a href="#Built_002din-Variables">Built-in Variables</a>).

   <p><a name="index-records-490"></a><a name="index-fields-491"></a>The input is read in units called <dfn>records</dfn>, and is processed by the
rules of your program one record at a time. 
By default, each record is one line.  Each
record is automatically split into chunks called <dfn>fields</dfn>. 
This makes it more convenient for programs to work on the parts of a record.

   <p><a name="index-g_t_0040code_007bgetline_007d-command-492"></a>On rare occasions, you may need to use the <code>getline</code> command. 
The  <code>getline</code> command is valuable, both because it
can do explicit input from any number of files, and because the files
used with it do not have to be named on the <samp><span class="command">awk</span></samp> command line
(see <a href="#Getline">Getline</a>).

<ul class="menu">
<li><a accesskey="1" href="#Records">Records</a>:                      Controlling how data is split into records. 
<li><a accesskey="2" href="#Fields">Fields</a>:                       An introduction to fields. 
<li><a accesskey="3" href="#Nonconstant-Fields">Nonconstant Fields</a>:           Nonconstant Field Numbers. 
<li><a accesskey="4" href="#Changing-Fields">Changing Fields</a>:              Changing the Contents of a Field. 
<li><a accesskey="5" href="#Field-Separators">Field Separators</a>:             The field separator and how to change it. 
<li><a accesskey="6" href="#Constant-Size">Constant Size</a>:                Reading constant width data. 
<li><a accesskey="7" href="#Splitting-By-Content">Splitting By Content</a>:         Defining Fields By Content
<li><a accesskey="8" href="#Multiple-Line">Multiple Line</a>:                Reading multi-line records. 
<li><a accesskey="9" href="#Getline">Getline</a>:                      Reading files under explicit program control
                                using the <code>getline</code> function. 
<li><a href="#Command-line-directories">Command line directories</a>:     What happens if you put a directory on the
                                command line. 
</ul>

<div class="node">
<a name="Records"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Fields">Fields</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reading-Files">Reading Files</a>

</div>

<h3 class="section">4.1 How Input Is Split into Records</h3>

<!-- STARTOFRANGE inspl -->
<p><a name="index-input_002c-splitting-into-records-493"></a><!-- STARTOFRANGE recspl -->
<a name="index-records_002c-splitting-input-into-494"></a><a name="index-g_t_0040code_007bNR_007d-variable-495"></a><a name="index-g_t_0040code_007bFNR_007d-variable-496"></a>The <samp><span class="command">awk</span></samp> utility divides the input for your <samp><span class="command">awk</span></samp>
program into records and fields. 
<samp><span class="command">awk</span></samp> keeps track of the number of records that have
been read
so far
from the current input file.  This value is stored in a
built-in variable called <code>FNR</code>.  It is reset to zero when a new
file is started.  Another built-in variable, <code>NR</code>, records the total
number of input records read so far from all data files.  It starts at zero,
but is never automatically reset to zero.

   <p><a name="index-separators_002c-for-records-497"></a><a name="index-record-separators-498"></a>Records are separated by a character called the <dfn>record separator</dfn>. 
By default, the record separator is the newline character. 
This is why records are, by default, single lines. 
A different character can be used for the record separator by
assigning the character to the built-in variable <code>RS</code>.

   <p><a name="index-newlines_002c-as-record-separators-499"></a><a name="index-g_t_0040code_007bRS_007d-variable-500"></a>Like any other variable,
the value of <code>RS</code> can be changed in the <samp><span class="command">awk</span></samp> program
with the assignment operator, &lsquo;<samp><span class="samp">=</span></samp>&rsquo;
(see <a href="#Assignment-Ops">Assignment Ops</a>). 
The new record-separator character should be enclosed in quotation marks,
which indicate a string constant.  Often the right time to do this is
at the beginning of execution, before any input is processed,
so that the very first record is read with the proper separator. 
To do this, use the special <code>BEGIN</code> pattern
(see <a href="#BEGIN_002fEND">BEGIN/END</a>). 
For example:

   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern-501"></a>
<pre class="example">     awk 'BEGIN { RS = "/" }
          { print $0 }' BBS-list
</pre>
   <p class="noindent">changes the value of <code>RS</code> to <code>"/"</code>, before reading any input. 
This is a string whose first character is a slash; as a result, records
are separated by slashes.  Then the input file is read, and the second
rule in the <samp><span class="command">awk</span></samp> program (the action with no pattern) prints each
record.  Because each <code>print</code> statement adds a newline at the end of
its output, this <samp><span class="command">awk</span></samp> program copies the input
with each slash changed to a newline.  Here are the results of running
the program on <samp><span class="file">BBS-list</span></samp>:

<pre class="example">     $ <kbd>awk 'BEGIN { RS = "/" }</kbd>
     &gt;      <kbd>{ print $0 }' BBS-list</kbd>
     -| aardvark     555-5553     1200
     -| 300          B
     -| alpo-net     555-3412     2400
     -| 1200
     -| 300     A
     -| barfly       555-7685     1200
     -| 300          A
     -| bites        555-1675     2400
     -| 1200
     -| 300     A
     -| camelot      555-0542     300               C
     -| core         555-2912     1200
     -| 300          C
     -| fooey        555-1234     2400
     -| 1200
     -| 300     B
     -| foot         555-6699     1200
     -| 300          B
     -| macfoo       555-6480     1200
     -| 300          A
     -| sdace        555-3430     2400
     -| 1200
     -| 300     A
     -| sabafoo      555-2127     1200
     -| 300          C
     -|
</pre>
   <p class="noindent">Note that the entry for the &lsquo;<samp><span class="samp">camelot</span></samp>&rsquo; BBS is not split. 
In the original data file
(see <a href="#Sample-Data-Files">Sample Data Files</a>),
the line looks like this:

<pre class="example">     camelot      555-0542     300               C
</pre>
   <p class="noindent">It has one baud rate only, so there are no slashes in the record,
unlike the others which have two or more baud rates. 
In fact, this record is treated as part of the record
for the &lsquo;<samp><span class="samp">core</span></samp>&rsquo; BBS; the newline separating them in the output
is the original newline in the data file, not the one added by
<samp><span class="command">awk</span></samp> when it printed the record!

   <p><a name="index-record-separators_002c-changing-502"></a><a name="index-separators_002c-for-records-503"></a>Another way to change the record separator is on the command line,
using the variable-assignment feature
(see <a href="#Other-Arguments">Other Arguments</a>):

<pre class="example">     awk '{ print $0 }' RS="/" BBS-list
</pre>
   <p class="noindent">This sets <code>RS</code> to &lsquo;<samp><span class="samp">/</span></samp>&rsquo; before processing <samp><span class="file">BBS-list</span></samp>.

   <p>Using an unusual character such as &lsquo;<samp><span class="samp">/</span></samp>&rsquo; for the record separator
produces correct behavior in the vast majority of cases.

   <p>There is one unusual case, that occurs when <samp><span class="command">gawk</span></samp> is
being fully POSIX-compliant (see <a href="#Options">Options</a>). 
Then, the following (extreme) pipeline prints a surprising &lsquo;<samp><span class="samp">1</span></samp>&rsquo;:

<pre class="example">     $ echo | gawk --posix 'BEGIN { RS = "a" } ; { print NF }'
     -| 1
</pre>
   <p>There is one field, consisting of a newline.  The value of the built-in
variable <code>NF</code> is the number of fields in the current record. 
(In the normal case, <samp><span class="command">gawk</span></samp> treats the newline as whitespace,
printing &lsquo;<samp><span class="samp">0</span></samp>&rsquo; as the result. Most other versions of <samp><span class="command">awk</span></samp>
also act this way.)

   <p><a name="index-dark-corner_002c-input-files-504"></a>Reaching the end of an input file terminates the current input record,
even if the last character in the file is not the character in <code>RS</code>. 
(d.c.)

   <p><a name="index-null-strings-505"></a><a name="index-strings_002c-empty_002c-See-null-strings-506"></a>The empty string <code>""</code> (a string without any characters)
has a special meaning
as the value of <code>RS</code>. It means that records are separated
by one or more blank lines and nothing else. 
See <a href="#Multiple-Line">Multiple Line</a>, for more details.

   <p>If you change the value of <code>RS</code> in the middle of an <samp><span class="command">awk</span></samp> run,
the new value is used to delimit subsequent records, but the record
currently being processed, as well as records already processed, are not
affected.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bRT_007d-variable-in-507"></a><a name="index-g_t_0040code_007bRT_007d-variable-508"></a><a name="index-records_002c-terminating-509"></a><a name="index-terminating-records-510"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-record-separators-511"></a><a name="index-regular-expressions_002c-as-record-separators-512"></a><a name="index-record-separators_002c-regular-expressions-as-513"></a><a name="index-separators_002c-for-records_002c-regular-expressions-as-514"></a>After the end of the record has been determined, <samp><span class="command">gawk</span></samp>
sets the variable <code>RT</code> to the text in the input that matched
<code>RS</code>.

   <p><a name="index-common-extensions_002c-_0040code_007bRS_007d-as-a-regexp-515"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007bRS_007d-as-a-regexp-516"></a>When using <samp><span class="command">gawk</span></samp>,
the value of <code>RS</code> is not limited to a one-character
string.  It can be any regular expression
(see <a href="#Regexp">Regexp</a>). (c.e.) 
In general, each record
ends at the next string that matches the regular expression; the next
record starts at the end of the matching string.  This general rule is
actually at work in the usual case, where <code>RS</code> contains just a
newline: a record ends at the beginning of the next matching string (the
next newline in the input), and the following record starts just after
the end of this string (at the first character of the following line). 
The newline, because it matches <code>RS</code>, is not part of either record.

   <p>When <code>RS</code> is a single character, <code>RT</code>
contains the same single character. However, when <code>RS</code> is a
regular expression, <code>RT</code> contains
the actual input text that matched the regular expression.

   <p>If the input file ended without any text that matches <code>RS</code>,
<samp><span class="command">gawk</span></samp> sets <code>RT</code> to the null string.

   <p>The following example illustrates both of these features. 
It sets <code>RS</code> equal to a regular expression that
matches either a newline or a series of one or more uppercase letters
with optional leading and/or trailing whitespace:

<pre class="example">     $ <kbd>echo record 1 AAAA record 2 BBBB record 3 |</kbd>
     &gt; <kbd>gawk 'BEGIN { RS = "\n|( *[[:upper:]]+ *)" }</kbd>
     &gt;             <kbd>{ print "Record =", $0, "and RT =", RT }'</kbd>
     -| Record = record 1 and RT =  AAAA
     -| Record = record 2 and RT =  BBBB
     -| Record = record 3 and RT =
     -|
</pre>
   <p class="noindent">The final line of output has an extra blank line. This is because the
value of <code>RT</code> is a newline, and the <code>print</code> statement
supplies its own terminating newline. 
See <a href="#Simple-Sed">Simple Sed</a>, for a more useful example
of <code>RS</code> as a regexp and <code>RT</code>.

   <p>If you set <code>RS</code> to a regular expression that allows optional
trailing text, such as &lsquo;<samp><span class="samp">RS = "abc(XYZ)?"</span></samp>&rsquo; it is possible, due
to implementation constraints, that <samp><span class="command">gawk</span></samp> may match the leading
part of the regular expression, but not the trailing part, particularly
if the input text that could match the trailing part is fairly long. 
<samp><span class="command">gawk</span></samp> attempts to avoid this problem, but currently, there's
no guarantee that this will never happen.

   <blockquote>
<b>NOTE:</b> Remember that in <samp><span class="command">awk</span></samp>, the &lsquo;<samp><span class="samp">^</span></samp>&rsquo; and &lsquo;<samp><span class="samp">$</span></samp>&rsquo; anchor
metacharacters match the beginning and end of a <em>string</em>, and not
the beginning and end of a <em>line</em>.  As a result, something like
&lsquo;<samp><span class="samp">RS = "^[[:upper:]]"</span></samp>&rsquo; can only match at the beginning of a file. 
This is because <samp><span class="command">gawk</span></samp> views the input file as one long string
that happens to contain newline characters in it. 
It is thus best to avoid anchor characters in the value of <code>RS</code>. 
</blockquote>

   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bRS_007d_002f_0040code_007bRT_007d-variables-517"></a>The use of <code>RS</code> as a regular expression and the <code>RT</code>
variable are <samp><span class="command">gawk</span></samp> extensions; they are not available in
compatibility mode
(see <a href="#Options">Options</a>). 
In compatibility mode, only the first character of the value of
<code>RS</code> is used to determine the end of the record.

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: <code>RS = "\0"</code> Is Not Portable</h4>

<p><a name="index-advanced-features_002c-_0040value_007bDF_007ds-as-single-record-518"></a><a name="index-portability_002c-_0040value_007bDF_007ds-as-single-record-519"></a>There are times when you might want to treat an entire data file as a
single record.  The only way to make this happen is to give <code>RS</code>
a value that you know doesn't occur in the input file.  This is hard
to do in a general way, such that a program always works for arbitrary
input files. 
<!-- can you say `understatement' boys and girls? -->

   <p>You might think that for text files, the <span class="sc">nul</span> character, which
consists of a character with all bits equal to zero, is a good
value to use for <code>RS</code> in this case:

<pre class="example">     BEGIN { RS = "\0" }  # whole file becomes one record?
</pre>
   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-strings_002c-storing-520"></a><samp><span class="command">gawk</span></samp> in fact accepts this, and uses the <span class="sc">nul</span>
character for the record separator. 
However, this usage is <em>not</em> portable
to other <samp><span class="command">awk</span></samp> implementations.

   <p><a name="index-dark-corner_002c-strings_002c-storing-521"></a>All other <samp><span class="command">awk</span></samp> implementations<a rel="footnote" href="#fn-19" name="fnd-19"><sup>19</sup></a> store strings internally as C-style strings.  C strings use the
<span class="sc">nul</span> character as the string terminator.  In effect, this means that
&lsquo;<samp><span class="samp">RS = "\0"</span></samp>&rsquo; is the same as &lsquo;<samp><span class="samp">RS = ""</span></samp>&rsquo;. 
(d.c.)

   <p><a name="index-records_002c-treating-files-as-522"></a><a name="index-files_002c-as-single-records-523"></a>The best way to treat a whole file as a single record is to
simply read the file in, one record at a time, concatenating each
record onto the end of the previous ones. 
<!-- ENDOFRANGE inspl -->
<!-- ENDOFRANGE recspl -->

<div class="node">
<a name="Fields"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Nonconstant-Fields">Nonconstant Fields</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Records">Records</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reading-Files">Reading Files</a>

</div>

<h3 class="section">4.2 Examining Fields</h3>

<p><a name="index-examining-fields-524"></a><a name="index-fields-525"></a><a name="index-accessing-fields-526"></a><!-- STARTOFRANGE fiex -->
<a name="index-fields_002c-examining-527"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-field-separators-and-528"></a><a name="index-field-separators_002c-POSIX-and-529"></a><a name="index-separators_002c-field_002c-POSIX-and-530"></a>When <samp><span class="command">awk</span></samp> reads an input record, the record is
automatically <dfn>parsed</dfn> or separated by the <samp><span class="command">awk</span></samp> utility into chunks
called <dfn>fields</dfn>.  By default, fields are separated by <dfn>whitespace</dfn>,
like words in a line. 
Whitespace in <samp><span class="command">awk</span></samp> means any string of one or more spaces,
TABs, or newlines;<a rel="footnote" href="#fn-20" name="fnd-20"><sup>20</sup></a> other characters, such as
formfeed, vertical tab, etc., that are
considered whitespace by other languages, are <em>not</em> considered
whitespace by <samp><span class="command">awk</span></samp>.

   <p>The purpose of fields is to make it more convenient for you to refer to
these pieces of the record.  You don't have to use them&mdash;you can
operate on the whole record if you want&mdash;but fields are what make
simple <samp><span class="command">awk</span></samp> programs so powerful.

   <p><a name="index-field-operator-_0040code_007b_0024_007d-531"></a><a name="index-g_t_0040code_007b_0024_007d-_0028dollar-sign_0029_002c-_0040code_007b_0024_007d-field-operator-532"></a><a name="index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-_0040code_007b_0024_007d-field-operator-533"></a><a name="index-field-operators_0040comma_007b_007d-dollar-sign-as-534"></a>A dollar-sign (&lsquo;<samp><span class="samp">$</span></samp>&rsquo;) is used
to refer to a field in an <samp><span class="command">awk</span></samp> program,
followed by the number of the field you want.  Thus, <code>$1</code>
refers to the first field, <code>$2</code> to the second, and so on. 
(Unlike the Unix shells, the field numbers are not limited to single digits. 
<code>$127</code> is the one hundred twenty-seventh field in the record.) 
For example, suppose the following is a line of input:

<pre class="example">     This seems like a pretty nice example.
</pre>
   <p class="noindent">Here the first field, or <code>$1</code>, is &lsquo;<samp><span class="samp">This</span></samp>&rsquo;, the second field, or
<code>$2</code>, is &lsquo;<samp><span class="samp">seems</span></samp>&rsquo;, and so on.  Note that the last field,
<code>$7</code>, is &lsquo;<samp><span class="samp">example.</span></samp>&rsquo;.  Because there is no space between the
&lsquo;<samp><span class="samp">e</span></samp>&rsquo; and the &lsquo;<samp><span class="samp">.</span></samp>&rsquo;, the period is considered part of the seventh
field.

   <p><a name="index-g_t_0040code_007bNF_007d-variable-535"></a><a name="index-fields_002c-number-of-536"></a><code>NF</code> is a built-in variable whose value is the number of fields
in the current record.  <samp><span class="command">awk</span></samp> automatically updates the value
of <code>NF</code> each time it reads a record.  No matter how many fields
there are, the last field in a record can be represented by <code>$NF</code>. 
So, <code>$NF</code> is the same as <code>$7</code>, which is &lsquo;<samp><span class="samp">example.</span></samp>&rsquo;. 
If you try to reference a field beyond the last
one (such as <code>$8</code> when the record has only seven fields), you get
the empty string.  (If used in a numeric operation, you get zero.)

   <p>The use of <code>$0</code>, which looks like a reference to the &ldquo;zero-th&rdquo; field, is
a special case: it represents the whole input record
when you are not interested in specific fields. 
Here are some more examples:

<pre class="example">     $ <kbd>awk '$1 ~ /foo/ { print $0 }' BBS-list</kbd>
     -| fooey        555-1234     2400/1200/300     B
     -| foot         555-6699     1200/300          B
     -| macfoo       555-6480     1200/300          A
     -| sabafoo      555-2127     1200/300          C
</pre>
   <p class="noindent">This example prints each record in the file <samp><span class="file">BBS-list</span></samp> whose first
field contains the string &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;.  The operator &lsquo;<samp><span class="samp">~</span></samp>&rsquo; is called a
<dfn>matching operator</dfn>
(see <a href="#Regexp-Usage">Regexp Usage</a>);
it tests whether a string (here, the field <code>$1</code>) matches a given regular
expression.

   <p>By contrast, the following example
looks for &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; in <em>the entire record</em> and prints the first
field and the last field for each matching input record:

<pre class="example">     $ <kbd>awk '/foo/ { print $1, $NF }' BBS-list</kbd>
     -| fooey B
     -| foot B
     -| macfoo A
     -| sabafoo C
</pre>
   <!-- ENDOFRANGE fiex -->
<div class="node">
<a name="Nonconstant-Fields"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Changing-Fields">Changing Fields</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Fields">Fields</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reading-Files">Reading Files</a>

</div>

<h3 class="section">4.3 Nonconstant Field Numbers</h3>

<p><a name="index-fields_002c-numbers-537"></a><a name="index-field-numbers-538"></a>
The number of a field does not need to be a constant.  Any expression in
the <samp><span class="command">awk</span></samp> language can be used after a &lsquo;<samp><span class="samp">$</span></samp>&rsquo; to refer to a
field.  The value of the expression specifies the field number.  If the
value is a string, rather than a number, it is converted to a number. 
Consider this example:

<pre class="example">     awk '{ print $NR }'
</pre>
   <p class="noindent">Recall that <code>NR</code> is the number of records read so far: one in the
first record, two in the second, etc.  So this example prints the first
field of the first record, the second field of the second record, and so
on.  For the twentieth record, field number 20 is printed; most likely,
the record has fewer than 20 fields, so this prints a blank line. 
Here is another example of using expressions as field numbers:

<pre class="example">     awk '{ print $(2*2) }' BBS-list
</pre>
   <p><samp><span class="command">awk</span></samp> evaluates the expression &lsquo;<samp><span class="samp">(2*2)</span></samp>&rsquo; and uses
its value as the number of the field to print.  The &lsquo;<samp><span class="samp">*</span></samp>&rsquo; sign
represents multiplication, so the expression &lsquo;<samp><span class="samp">2*2</span></samp>&rsquo; evaluates to four. 
The parentheses are used so that the multiplication is done before the
&lsquo;<samp><span class="samp">$</span></samp>&rsquo; operation; they are necessary whenever there is a binary
operator in the field-number expression.  This example, then, prints the
hours of operation (the fourth field) for every line of the file
<samp><span class="file">BBS-list</span></samp>.  (All of the <samp><span class="command">awk</span></samp> operators are listed, in
order of decreasing precedence, in
<a href="#Precedence">Precedence</a>.)

   <p>If the field number you compute is zero, you get the entire record. 
Thus, &lsquo;<samp><span class="samp">$(2-2)</span></samp>&rsquo; has the same value as <code>$0</code>.  Negative field
numbers are not allowed; trying to reference one usually terminates
the program.  (The POSIX standard does not define
what happens when you reference a negative field number.  <samp><span class="command">gawk</span></samp>
notices this and terminates your program.  Other <samp><span class="command">awk</span></samp>
implementations may behave differently.)

   <p>As mentioned in <a href="#Fields">Fields</a>,
<samp><span class="command">awk</span></samp> stores the current record's number of fields in the built-in
variable <code>NF</code> (also see <a href="#Built_002din-Variables">Built-in Variables</a>).  The expression
<code>$NF</code> is not a special feature&mdash;it is the direct consequence of
evaluating <code>NF</code> and using its value as a field number.

<div class="node">
<a name="Changing-Fields"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Field-Separators">Field Separators</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Nonconstant-Fields">Nonconstant Fields</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reading-Files">Reading Files</a>

</div>

<h3 class="section">4.4 Changing the Contents of a Field</h3>

<!-- STARTOFRANGE ficon -->
<p><a name="index-fields_002c-changing-contents-of-539"></a>The contents of a field, as seen by <samp><span class="command">awk</span></samp>, can be changed within an
<samp><span class="command">awk</span></samp> program; this changes what <samp><span class="command">awk</span></samp> perceives as the
current input record.  (The actual input is untouched; <samp><span class="command">awk</span></samp> <em>never</em>
modifies the input file.) 
Consider the following example and its output:

<pre class="example">     $ <kbd>awk '{ nboxes = $3 ; $3 = $3 - 10</kbd>
     &gt;        <kbd>print nboxes, $3 }' inventory-shipped</kbd>
     -| 25 15
     -| 32 22
     -| 24 14
     ...
</pre>
   <p class="noindent">The program first saves the original value of field three in the variable
<code>nboxes</code>. 
The &lsquo;<samp><span class="samp">-</span></samp>&rsquo; sign represents subtraction, so this program reassigns
field three, <code>$3</code>, as the original value of field three minus ten:
&lsquo;<samp><span class="samp">$3 - 10</span></samp>&rsquo;.  (See <a href="#Arithmetic-Ops">Arithmetic Ops</a>.) 
Then it prints the original and new values for field three. 
(Someone in the warehouse made a consistent mistake while inventorying
the red boxes.)

   <p>For this to work, the text in field <code>$3</code> must make sense
as a number; the string of characters must be converted to a number
for the computer to do arithmetic on it.  The number resulting
from the subtraction is converted back to a string of characters that
then becomes field three. 
See <a href="#Conversion">Conversion</a>.

   <p>When the value of a field is changed (as perceived by <samp><span class="command">awk</span></samp>), the
text of the input record is recalculated to contain the new field where
the old one was.  In other words, <code>$0</code> changes to reflect the altered
field.  Thus, this program
prints a copy of the input file, with 10 subtracted from the second
field of each line:

<pre class="example">     $ <kbd>awk '{ $2 = $2 - 10; print $0 }' inventory-shipped</kbd>
     -| Jan 3 25 15 115
     -| Feb 5 32 24 226
     -| Mar 5 24 34 228
     ...
</pre>
   <p>It is also possible to also assign contents to fields that are out
of range.  For example:

<pre class="example">     $ awk '{ $6 = ($5 + $4 + $3 + $2)
     &gt;        print $6 }' inventory-shipped
     -| 168
     -| 297
     -| 301
     ...
</pre>
   <p><a name="index-adding_002c-fields-540"></a><a name="index-fields_002c-adding-541"></a>We've just created <code>$6</code>, whose value is the sum of fields
<code>$2</code>, <code>$3</code>, <code>$4</code>, and <code>$5</code>.  The &lsquo;<samp><span class="samp">+</span></samp>&rsquo; sign
represents addition.  For the file <samp><span class="file">inventory-shipped</span></samp>, <code>$6</code>
represents the total number of parcels shipped for a particular month.

   <p>Creating a new field changes <samp><span class="command">awk</span></samp>'s internal copy of the current
input record, which is the value of <code>$0</code>.  Thus, if you do &lsquo;<samp><span class="samp">print $0</span></samp>&rsquo;
after adding a field, the record printed includes the new field, with
the appropriate number of field separators between it and the previously
existing fields.

   <p><a name="index-g_t_0040code_007bOFS_007d-variable-542"></a><a name="index-output-field-separator_002c-See-_0040code_007bOFS_007d-variable-543"></a><a name="index-field-separators_002c-See-Also-_0040code_007bOFS_007d-544"></a>This recomputation affects and is affected by
<code>NF</code> (the number of fields; see <a href="#Fields">Fields</a>). 
For example, the value of <code>NF</code> is set to the number of the highest
field you create. 
The exact format of <code>$0</code> is also affected by a feature that has not been discussed yet:
the <dfn>output field separator</dfn>, <code>OFS</code>,
used to separate the fields (see <a href="#Output-Separators">Output Separators</a>).

   <p>Note, however, that merely <em>referencing</em> an out-of-range field
does <em>not</em> change the value of either <code>$0</code> or <code>NF</code>. 
Referencing an out-of-range field only produces an empty string.  For
example:

<pre class="example">     if ($(NF+1) != "")
         print "can't happen"
     else
         print "everything is normal"
</pre>
   <p class="noindent">should print &lsquo;<samp><span class="samp">everything is normal</span></samp>&rsquo;, because <code>NF+1</code> is certain
to be out of range.  (See <a href="#If-Statement">If Statement</a>,
for more information about <samp><span class="command">awk</span></samp>'s <code>if-else</code> statements. 
See <a href="#Typing-and-Comparison">Typing and Comparison</a>,
for more information about the &lsquo;<samp><span class="samp">!=</span></samp>&rsquo; operator.)

   <p>It is important to note that making an assignment to an existing field
changes the
value of <code>$0</code> but does not change the value of <code>NF</code>,
even when you assign the empty string to a field.  For example:

<pre class="example">     $ <kbd>echo a b c d | awk '{ OFS = ":"; $2 = ""</kbd>
     &gt;                       <kbd>print $0; print NF }'</kbd>
     -| a::c:d
     -| 4
</pre>
   <p class="noindent">The field is still there; it just has an empty value, denoted by
the two colons between &lsquo;<samp><span class="samp">a</span></samp>&rsquo; and &lsquo;<samp><span class="samp">c</span></samp>&rsquo;. 
This example shows what happens if you create a new field:

<pre class="example">     $ <kbd>echo a b c d | awk '{ OFS = ":"; $2 = ""; $6 = "new"</kbd>
     &gt;                       <kbd>print $0; print NF }'</kbd>
     -| a::c:d::new
     -| 6
</pre>
   <p class="noindent">The intervening field, <code>$5</code>, is created with an empty value
(indicated by the second pair of adjacent colons),
and <code>NF</code> is updated with the value six.

   <p><a name="index-dark-corner_002c-_0040code_007bNF_007d-variable_002c-decrementing-545"></a><a name="index-g_t_0040code_007bNF_007d-variable_002c-decrementing-546"></a>Decrementing <code>NF</code> throws away the values of the fields
after the new value of <code>NF</code> and recomputes <code>$0</code>. 
(d.c.) 
Here is an example:

<pre class="example">     $ echo a b c d e f | awk '{ print "NF =", NF;
     &gt;                            NF = 3; print $0 }'
     -| NF = 6
     -| a b c
</pre>
   <p><a name="index-portability_002c-_0040code_007bNF_007d-variable_0040comma_007b_007d-decrementing-547"></a><blockquote>
<b>CAUTION:</b> Some versions of <samp><span class="command">awk</span></samp> don't
rebuild <code>$0</code> when <code>NF</code> is decremented. Caveat emptor. 
</blockquote>

   <p>Finally, there are times when it is convenient to force
<samp><span class="command">awk</span></samp> to rebuild the entire record, using the current
value of the fields and <code>OFS</code>.  To do this, use the
seemingly innocuous assignment:

<pre class="example">     $1 = $1   # force record to be reconstituted
     print $0  # or whatever else with $0
</pre>
   <p class="noindent">This forces <samp><span class="command">awk</span></samp> to rebuild the record.  It does help
to add a comment, as we've shown here.

   <p>There is a flip side to the relationship between <code>$0</code> and
the fields.  Any assignment to <code>$0</code> causes the record to be
reparsed into fields using the <em>current</em> value of <code>FS</code>. 
This also applies to any built-in function that updates <code>$0</code>,
such as <code>sub()</code> and <code>gsub()</code>
(see <a href="#String-Functions">String Functions</a>).

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Understanding <code>$0</code></h4>

<p>It is important to remember that <code>$0</code> is the <em>full</em>
record, exactly as it was read from the input.  This includes
any leading or trailing whitespace, and the exact whitespace (or other
characters) that separate the fields.

   <p>It is a not-uncommon error to try to change the field separators
in a record simply by setting <code>FS</code> and <code>OFS</code>, and then
expecting a plain &lsquo;<samp><span class="samp">print</span></samp>&rsquo; or &lsquo;<samp><span class="samp">print $0</span></samp>&rsquo; to print the
modified record.

   <p>But this does not work, since nothing was done to change the record
itself.  Instead, you must force the record to be rebuilt, typically
with a statement such as &lsquo;<samp><span class="samp">$1 = $1</span></samp>&rsquo;, as described earlier.

<!-- ENDOFRANGE ficon -->
<div class="node">
<a name="Field-Separators"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Constant-Size">Constant Size</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Changing-Fields">Changing Fields</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reading-Files">Reading Files</a>

</div>

<h3 class="section">4.5 Specifying How Fields Are Separated</h3>

<ul class="menu">
<li><a accesskey="1" href="#Default-Field-Splitting">Default Field Splitting</a>:       How fields are normally separated. 
<li><a accesskey="2" href="#Regexp-Field-Splitting">Regexp Field Splitting</a>:        Using regexps as the field separator. 
<li><a accesskey="3" href="#Single-Character-Fields">Single Character Fields</a>:       Making each character a separate field. 
<li><a accesskey="4" href="#Command-Line-Field-Separator">Command Line Field Separator</a>:  Setting <code>FS</code> from the command-line. 
<li><a accesskey="5" href="#Field-Splitting-Summary">Field Splitting Summary</a>:       Some final points and a summary table. 
</ul>

<p><a name="index-g_t_0040code_007bFS_007d-variable-548"></a><a name="index-fields_002c-separating-549"></a><!-- STARTOFRANGE fisepr -->
<a name="index-field-separators-550"></a><!-- STARTOFRANGE fisepg -->
<a name="index-fields_002c-separating-551"></a>The <dfn>field separator</dfn>, which is either a single character or a regular
expression, controls the way <samp><span class="command">awk</span></samp> splits an input record into fields. 
<samp><span class="command">awk</span></samp> scans the input record for character sequences that
match the separator; the fields themselves are the text between the matches.

   <p>In the examples that follow, we use the bullet symbol (&bull;) to
represent spaces in the output. 
If the field separator is &lsquo;<samp><span class="samp">oo</span></samp>&rsquo;, then the following line:

<pre class="example">     moo goo gai pan
</pre>
   <p class="noindent">is split into three fields: &lsquo;<samp><span class="samp">m</span></samp>&rsquo;, &lsquo;<samp><span class="samp">&bull;g</span></samp>&rsquo;, and
&lsquo;<samp><span class="samp">&bull;gai&bull;pan</span></samp>&rsquo;. 
Note the leading spaces in the values of the second and third fields.

   <p><a name="index-troubleshooting_002c-_0040command_007bawk_007d-uses-_0040code_007bFS_007d-not-_0040code_007bIFS_007d-552"></a>The field separator is represented by the built-in variable <code>FS</code>. 
Shell programmers take note:  <samp><span class="command">awk</span></samp> does <em>not</em> use the
name <code>IFS</code> that is used by the POSIX-compliant shells (such as
the Unix Bourne shell, <samp><span class="command">sh</span></samp>, or Bash).

   <p><a name="index-g_t_0040code_007bFS_007d-variable_002c-changing-value-of-553"></a>The value of <code>FS</code> can be changed in the <samp><span class="command">awk</span></samp> program with the
assignment operator, &lsquo;<samp><span class="samp">=</span></samp>&rsquo; (see <a href="#Assignment-Ops">Assignment Ops</a>). 
Often the right time to do this is at the beginning of execution
before any input has been processed, so that the very first record
is read with the proper separator.  To do this, use the special
<code>BEGIN</code> pattern
(see <a href="#BEGIN_002fEND">BEGIN/END</a>). 
For example, here we set the value of <code>FS</code> to the string
<code>","</code>:

<pre class="example">     awk 'BEGIN { FS = "," } ; { print $2 }'
</pre>
   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern-554"></a>Given the input line:

<pre class="example">     John Q. Smith, 29 Oak St., Walamazoo, MI 42139
</pre>
   <p class="noindent">this <samp><span class="command">awk</span></samp> program extracts and prints the string
&lsquo;<samp><span class="samp">&bull;29&bull;Oak&bull;St.</span></samp>&rsquo;.

   <p><a name="index-field-separators_002c-choice-of-555"></a><a name="index-regular-expressions-as-field-separators-556"></a><a name="index-field-separators_002c-regular-expressions-as-557"></a>Sometimes the input data contains separator characters that don't
separate fields the way you thought they would.  For instance, the
person's name in the example we just used might have a title or
suffix attached, such as:

<pre class="example">     John Q. Smith, LXIX, 29 Oak St., Walamazoo, MI 42139
</pre>
   <p class="noindent">The same program would extract &lsquo;<samp><span class="samp">&bull;LXIX</span></samp>&rsquo;, instead of
&lsquo;<samp><span class="samp">&bull;29&bull;Oak&bull;St.</span></samp>&rsquo;. 
If you were expecting the program to print the
address, you would be surprised.  The moral is to choose your data layout and
separator characters carefully to prevent such problems. 
(If the data is not in a form that is easy to process, perhaps you
can massage it first with a separate <samp><span class="command">awk</span></samp> program.)

<div class="node">
<a name="Default-Field-Splitting"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Regexp-Field-Splitting">Regexp Field Splitting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Field-Separators">Field Separators</a>

</div>

<h4 class="subsection">4.5.1 Whitespace Normally Separates Fields</h4>

<p><a name="index-newlines_002c-as-field-separators-558"></a><a name="index-whitespace_002c-as-field-separators-559"></a>Fields are normally separated by whitespace sequences
(spaces, TABs, and newlines), not by single spaces.  Two spaces in a row do not
delimit an empty field.  The default value of the field separator <code>FS</code>
is a string containing a single space, <code>"&nbsp;"</code><!-- /@w -->.  If <samp><span class="command">awk</span></samp>
interpreted this value in the usual way, each space character would separate
fields, so two spaces in a row would make an empty field between them. 
The reason this does not happen is that a single space as the value of
<code>FS</code> is a special case&mdash;it is taken to specify the default manner
of delimiting fields.

   <p>If <code>FS</code> is any other single character, such as <code>","</code>, then
each occurrence of that character separates two fields.  Two consecutive
occurrences delimit an empty field.  If the character occurs at the
beginning or the end of the line, that too delimits an empty field.  The
space character is the only single character that does not follow these
rules.

<div class="node">
<a name="Regexp-Field-Splitting"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Single-Character-Fields">Single Character Fields</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Default-Field-Splitting">Default Field Splitting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Field-Separators">Field Separators</a>

</div>

<h4 class="subsection">4.5.2 Using Regular Expressions to Separate Fields</h4>

<!-- STARTOFRANGE regexpfs -->
<p><a name="index-regular-expressions_002c-as-field-separators-560"></a><!-- STARTOFRANGE fsregexp -->
<a name="index-field-separators_002c-regular-expressions-as-561"></a>The previous subsection
discussed the use of single characters or simple strings as the
value of <code>FS</code>. 
More generally, the value of <code>FS</code> may be a string containing any
regular expression.  In this case, each match in the record for the regular
expression separates fields.  For example, the assignment:

<pre class="example">     FS = ", \t"
</pre>
   <p class="noindent">makes every area of an input line that consists of a comma followed by a
space and a TAB into a field separator.

   <p>For a less trivial example of a regular expression, try using
single spaces to separate fields the way single commas are used. 
<code>FS</code> can be set to <code>"[&nbsp;]"</code><!-- /@w --> (left bracket, space, right
bracket).  This regular expression matches a single space and nothing else
(see <a href="#Regexp">Regexp</a>).

   <p>There is an important difference between the two cases of &lsquo;<samp><span class="samp">FS = "&nbsp;"<!-- /@w --></span></samp>&rsquo;
(a single space) and &lsquo;<samp><span class="samp">FS = "[&nbsp;\t\n]+"<!-- /@w --></span></samp>&rsquo;
(a regular expression matching one or more spaces, TABs, or newlines). 
For both values of <code>FS</code>, fields are separated by <dfn>runs</dfn>
(multiple adjacent occurrences) of spaces, TABs,
and/or newlines.  However, when the value of <code>FS</code> is <code>"&nbsp;"</code><!-- /@w -->,
<samp><span class="command">awk</span></samp> first strips leading and trailing whitespace from
the record and then decides where the fields are. 
For example, the following pipeline prints &lsquo;<samp><span class="samp">b</span></samp>&rsquo;:

<pre class="example">     $ <kbd>echo ' a b c d ' | awk '{ print $2 }'</kbd>
     -| b
</pre>
   <p class="noindent">However, this pipeline prints &lsquo;<samp><span class="samp">a</span></samp>&rsquo; (note the extra spaces around
each letter):

<pre class="example">     $ <kbd>echo ' a  b  c  d ' | awk 'BEGIN { FS = "[ \t\n]+" }</kbd>
     &gt;                                  <kbd>{ print $2 }'</kbd>
     -| a
</pre>
   <p class="noindent"><a name="index-null-strings-562"></a><a name="index-strings_002c-null-563"></a><a name="index-empty-strings_002c-See-null-strings-564"></a>In this case, the first field is <dfn>null</dfn> or empty.

   <p>The stripping of leading and trailing whitespace also comes into
play whenever <code>$0</code> is recomputed.  For instance, study this pipeline:

<pre class="example">     $ <kbd>echo '   a b c d' | awk '{ print; $2 = $2; print }'</kbd>
     -|    a b c d
     -| a b c d
</pre>
   <p class="noindent">The first <code>print</code> statement prints the record as it was read,
with leading whitespace intact.  The assignment to <code>$2</code> rebuilds
<code>$0</code> by concatenating <code>$1</code> through <code>$NF</code> together,
separated by the value of <code>OFS</code>.  Because the leading whitespace
was ignored when finding <code>$1</code>, it is not part of the new <code>$0</code>. 
Finally, the last <code>print</code> statement prints the new <code>$0</code>.

   <p><a name="index-g_t_0040code_007bFS_007d_002c-containing-_0040code_007b_005e_007d-565"></a><a name="index-g_t_0040code_007b_005e_007d_002c-in-_0040code_007bFS_007d-566"></a><a name="index-dark-corner_002c-_0040code_007b_005e_007d_002c-in-_0040code_007bFS_007d-567"></a>There is an additional subtlety to be aware of when using regular expressions
for field splitting. 
It is not well-specified in the POSIX standard, or anywhere else, what &lsquo;<samp><span class="samp">^</span></samp>&rsquo;
means when splitting fields.  Does the &lsquo;<samp><span class="samp">^</span></samp>&rsquo;  match only at the beginning of
the entire record? Or is each field separator a new string?  It turns out that
different <samp><span class="command">awk</span></samp> versions answer this question differently, and you
should not rely on any specific behavior in your programs. 
(d.c.)

   <p>As a point of information, Brian Kernighan's <samp><span class="command">awk</span></samp> allows &lsquo;<samp><span class="samp">^</span></samp>&rsquo;
to match only at the beginning of the record. <samp><span class="command">gawk</span></samp>
also works this way. For example:

<pre class="example">     $ <kbd>echo 'xxAA  xxBxx  C' |</kbd>
     &gt; <kbd>gawk -F '(^x+)|( +)' '{ for (i = 1; i &lt;= NF; i++)</kbd>
     &gt;                                   <kbd>printf "--&gt;%s&lt;--\n", $i }'</kbd>
     -| --&gt;&lt;--
     -| --&gt;AA&lt;--
     -| --&gt;xxBxx&lt;--
     -| --&gt;C&lt;--
</pre>
   <!-- ENDOFRANGE regexpfs -->
<!-- ENDOFRANGE fsregexp -->
<div class="node">
<a name="Single-Character-Fields"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Command-Line-Field-Separator">Command Line Field Separator</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Regexp-Field-Splitting">Regexp Field Splitting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Field-Separators">Field Separators</a>

</div>

<h4 class="subsection">4.5.3 Making Each Character a Separate Field</h4>

<p><a name="index-common-extensions_002c-single-character-fields-568"></a><a name="index-extensions_002c-common_0040comma_007b_007d-single-character-fields-569"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-single_002dcharacter-fields-570"></a><a name="index-single_002dcharacter-fields-571"></a><a name="index-fields_002c-single_002dcharacter-572"></a>There are times when you may want to examine each character
of a record separately.  This can be done in <samp><span class="command">gawk</span></samp> by
simply assigning the null string (<code>""</code>) to <code>FS</code>. (c.e.) 
In this case,
each individual character in the record becomes a separate field. 
For example:

<pre class="example">     $ <kbd>echo a b | gawk 'BEGIN { FS = "" }</kbd>
     &gt;                  <kbd>{</kbd>
     &gt;                      <kbd>for (i = 1; i &lt;= NF; i = i + 1)</kbd>
     &gt;                          <kbd>print "Field", i, "is", $i</kbd>
     &gt;                  <kbd>}'</kbd>
     -| Field 1 is a
     -| Field 2 is
     -| Field 3 is b
</pre>
   <p><a name="index-dark-corner_002c-_0040code_007bFS_007d-as-null-string-573"></a><a name="index-FS-variable_002c-as-null-string-574"></a>Traditionally, the behavior of <code>FS</code> equal to <code>""</code> was not defined. 
In this case, most versions of Unix <samp><span class="command">awk</span></samp> simply treat the entire record
as only having one field. 
(d.c.) 
In compatibility mode
(see <a href="#Options">Options</a>),
if <code>FS</code> is the null string, then <samp><span class="command">gawk</span></samp> also
behaves this way.

<div class="node">
<a name="Command-Line-Field-Separator"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Field-Splitting-Summary">Field Splitting Summary</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Single-Character-Fields">Single Character Fields</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Field-Separators">Field Separators</a>

</div>

<h4 class="subsection">4.5.4 Setting <code>FS</code> from the Command Line</h4>

<p><a name="index-g_t_0040code_007b_002dF_007d-option-575"></a><a name="index-options_002c-command_002dline-576"></a><a name="index-command-line_002c-options-577"></a><a name="index-field-separators_002c-on-command-line-578"></a><a name="index-command-line_002c-_0040code_007bFS_007d-on_0040comma_007b_007d-setting-579"></a><a name="index-g_t_0040code_007bFS_007d-variable_002c-setting-from-command-line-580"></a>
<code>FS</code> can be set on the command line.  Use the <samp><span class="option">-F</span></samp> option to
do so.  For example:

<pre class="example">     awk -F, '<var>program</var>' <var>input-files</var>
</pre>
   <p class="noindent">sets <code>FS</code> to the &lsquo;<samp><span class="samp">,</span></samp>&rsquo; character.  Notice that the option uses
an uppercase &lsquo;<samp><span class="samp">F</span></samp>&rsquo; instead of a lowercase &lsquo;<samp><span class="samp">f</span></samp>&rsquo;. The latter
option (<samp><span class="option">-f</span></samp>) specifies a file
containing an <samp><span class="command">awk</span></samp> program.  Case is significant in command-line
options:
the <samp><span class="option">-F</span></samp> and <samp><span class="option">-f</span></samp> options have nothing to do with each other. 
You can use both options at the same time to set the <code>FS</code> variable
<em>and</em> get an <samp><span class="command">awk</span></samp> program from a file.

   <p>The value used for the argument to <samp><span class="option">-F</span></samp> is processed in exactly the
same way as assignments to the built-in variable <code>FS</code>. 
Any special characters in the field separator must be escaped
appropriately.  For example, to use a &lsquo;<samp><span class="samp">\</span></samp>&rsquo; as the field separator
on the command line, you would have to type:

<pre class="example">     # same as FS = "\\"
     awk -F\\\\ '...' files ...
</pre>
   <p class="noindent"><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-as-field-separators-581"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-as-field-separators-582"></a>Because &lsquo;<samp><span class="samp">\</span></samp>&rsquo; is used for quoting in the shell, <samp><span class="command">awk</span></samp> sees
&lsquo;<samp><span class="samp">-F\\</span></samp>&rsquo;.  Then <samp><span class="command">awk</span></samp> processes the &lsquo;<samp><span class="samp">\\</span></samp>&rsquo; for escape
characters (see <a href="#Escape-Sequences">Escape Sequences</a>), finally yielding
a single &lsquo;<samp><span class="samp">\</span></samp>&rsquo; to use for the field separator.

<!-- @cindex historical features -->
   <p>As a special case, in compatibility mode
(see <a href="#Options">Options</a>),
if the argument to <samp><span class="option">-F</span></samp> is &lsquo;<samp><span class="samp">t</span></samp>&rsquo;, then <code>FS</code> is set to
the TAB character.  If you type &lsquo;<samp><span class="samp">-F\t</span></samp>&rsquo; at the
shell, without any quotes, the &lsquo;<samp><span class="samp">\</span></samp>&rsquo; gets deleted, so <samp><span class="command">awk</span></samp>
figures that you really want your fields to be separated with TABs and
not &lsquo;<samp><span class="samp">t</span></samp>&rsquo;s.  Use &lsquo;<samp><span class="samp">-v FS="t"</span></samp>&rsquo; or &lsquo;<samp><span class="samp">-F"[t]"</span></samp>&rsquo; on the command line
if you really do want to separate your fields with &lsquo;<samp><span class="samp">t</span></samp>&rsquo;s.

   <p>As an example, let's use an <samp><span class="command">awk</span></samp> program file called <samp><span class="file">baud.awk</span></samp>
that contains the pattern <code>/300/</code> and the action &lsquo;<samp><span class="samp">print $1</span></samp>&rsquo;:

<pre class="example">     /300/   { print $1 }
</pre>
   <p>Let's also set <code>FS</code> to be the &lsquo;<samp><span class="samp">-</span></samp>&rsquo; character and run the
program on the file <samp><span class="file">BBS-list</span></samp>.  The following command prints a
list of the names of the bulletin boards that operate at 300 baud and
the first three digits of their phone numbers:

<!-- tweaked to make the tex output look better in @smallbook -->
<pre class="example">     $ <kbd>awk -F- -f baud.awk BBS-list</kbd>
     -| aardvark     555
     -| alpo
     -| barfly       555
     -| bites        555
     -| camelot      555
     -| core         555
     -| fooey        555
     -| foot         555
     -| macfoo       555
     -| sdace        555
     -| sabafoo      555
</pre>
   <p class="noindent">Note the second line of output.  The second line
in the original file looked like this:

<pre class="example">     alpo-net     555-3412     2400/1200/300     A
</pre>
   <p>The &lsquo;<samp><span class="samp">-</span></samp>&rsquo; as part of the system's name was used as the field
separator, instead of the &lsquo;<samp><span class="samp">-</span></samp>&rsquo; in the phone number that was
originally intended.  This demonstrates why you have to be careful in
choosing your field and record separators.

   <p><a name="index-Unix-_0040command_007bawk_007d_002c-password-files_0040comma_007b_007d-field-separators-and-583"></a>Perhaps the most common use of a single character as the field
separator occurs when processing the Unix system password file. 
On many Unix systems, each user has a separate entry in the system password
file, one line per user.  The information in these lines is separated
by colons.  The first field is the user's login name and the second is
the user's (encrypted or shadow) password.  A password file entry might look
like this:

   <p><a name="index-Robbins_002c-Arnold-584"></a>
<pre class="example">     arnold:xyzzy:2076:10:Arnold Robbins:/home/arnold:/bin/bash
</pre>
   <p>The following program searches the system password file and prints
the entries for users who have no password:

<pre class="example">     awk -F: '$2 == ""' /etc/passwd
</pre>
   <div class="node">
<a name="Field-Splitting-Summary"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Command-Line-Field-Separator">Command Line Field Separator</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Field-Separators">Field Separators</a>

</div>

<h4 class="subsection">4.5.5 Field-Splitting Summary</h4>

<p>It is important to remember that when you assign a string constant
as the value of <code>FS</code>, it undergoes normal <samp><span class="command">awk</span></samp> string
processing.  For example, with Unix <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>,
the assignment &lsquo;<samp><span class="samp">FS = "\.."</span></samp>&rsquo; assigns the character string <code>".."</code>
to <code>FS</code> (the backslash is stripped).  This creates a regexp meaning
&ldquo;fields are separated by occurrences of any two characters.&rdquo;
If instead you want fields to be separated by a literal period followed
by any single character, use &lsquo;<samp><span class="samp">FS = "\\.."</span></samp>&rsquo;.

   <p>The following table summarizes how fields are split, based on the value
of <code>FS</code> (&lsquo;<samp><span class="samp">==</span></samp>&rsquo; means &ldquo;is equal to&rdquo;):

     <dl>
<dt><code>FS == " "</code><dd>Fields are separated by runs of whitespace.  Leading and trailing
whitespace are ignored.  This is the default.

     <br><dt><code>FS == </code><var>any other single character</var><dd>Fields are separated by each occurrence of the character.  Multiple
successive occurrences delimit empty fields, as do leading and
trailing occurrences. 
The character can even be a regexp metacharacter; it does not need
to be escaped.

     <br><dt><code>FS == </code><var>regexp</var><dd>Fields are separated by occurrences of characters that match <var>regexp</var>. 
Leading and trailing matches of <var>regexp</var> delimit empty fields.

     <br><dt><code>FS == ""</code><dd>Each individual character in the record becomes a separate field. 
(This is a <samp><span class="command">gawk</span></samp> extension; it is not specified by the
POSIX standard.) 
</dl>

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Changing <code>FS</code> Does Not Affect the Fields</h4>

<p><a name="index-POSIX-_0040command_007bawk_007d_002c-field-separators-and-585"></a><a name="index-field-separators_002c-POSIX-and-586"></a>According to the POSIX standard, <samp><span class="command">awk</span></samp> is supposed to behave
as if each record is split into fields at the time it is read. 
In particular, this means that if you change the value of <code>FS</code>
after a record is read, the value of the fields (i.e., how they were split)
should reflect the old value of <code>FS</code>, not the new one.

   <p><a name="index-dark-corner_002c-field-separators-587"></a><a name="index-g_t_0040command_007bsed_007d-utility-588"></a><a name="index-stream-editors-589"></a>However, many older implementations of <samp><span class="command">awk</span></samp> do not work this way.  Instead,
they defer splitting the fields until a field is actually
referenced.  The fields are split
using the <em>current</em> value of <code>FS</code>! 
(d.c.) 
This behavior can be difficult
to diagnose. The following example illustrates the difference
between the two methods. 
(The <samp><span class="command">sed</span></samp><a rel="footnote" href="#fn-21" name="fnd-21"><sup>21</sup></a>
command prints just the first line of <samp><span class="file">/etc/passwd</span></samp>.)

<pre class="example">     sed 1q /etc/passwd | awk '{ FS = ":" ; print $1 }'
</pre>
   <p class="noindent">which usually prints:

<pre class="example">     root
</pre>
   <p class="noindent">on an incorrect implementation of <samp><span class="command">awk</span></samp>, while <samp><span class="command">gawk</span></samp>
prints something like:

<pre class="example">     root:nSijPlPhZZwgE:0:0:Root:/:
</pre>
   <!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: <code>FS</code> and <code>IGNORECASE</code></h4>

<p>The <code>IGNORECASE</code> variable
(see <a href="#User_002dmodified">User-modified</a>)
affects field splitting <em>only</em> when the value of <code>FS</code> is a regexp. 
It has no effect when <code>FS</code> is a single character, even if
that character is a letter.  Thus, in the following code:

<pre class="example">     FS = "c"
     IGNORECASE = 1
     $0 = "aCa"
     print $1
</pre>
   <p class="noindent">The output is &lsquo;<samp><span class="samp">aCa</span></samp>&rsquo;.  If you really want to split fields on an
alphabetic character while ignoring case, use a regexp that will
do it for you.  E.g., &lsquo;<samp><span class="samp">FS = "[c]"</span></samp>&rsquo;.  In this case, <code>IGNORECASE</code>
will take effect.

<!-- ENDOFRANGE fisepr -->
<!-- ENDOFRANGE fisepg -->
<div class="node">
<a name="Constant-Size"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Splitting-By-Content">Splitting By Content</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Field-Separators">Field Separators</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reading-Files">Reading Files</a>

</div>

<h3 class="section">4.6 Reading Fixed-Width Data</h3>

<blockquote>
<b>NOTE:</b> This section discusses an advanced
feature of <samp><span class="command">gawk</span></samp>.  If you are a novice <samp><span class="command">awk</span></samp> user,
you might want to skip it on the first reading. 
</blockquote>

<p><a name="index-data_002c-fixed_002dwidth-590"></a><a name="index-fixed_002dwidth-data-591"></a><a name="index-advanced-features_002c-fixed_002dwidth-data-592"></a><samp><span class="command">gawk</span></samp> provides a facility for dealing with
fixed-width fields with no distinctive field separator.  For example,
data of this nature arises in the input for old Fortran programs where
numbers are run together, or in the output of programs that did not
anticipate the use of their output as input for other programs.

   <p>An example of the latter is a table where all the columns are lined up by
the use of a variable number of spaces and <em>empty fields are just
spaces</em>.  Clearly, <samp><span class="command">awk</span></samp>'s normal field splitting based on <code>FS</code>
does not work well in this case.  Although a portable <samp><span class="command">awk</span></samp> program
can use a series of <code>substr()</code> calls on <code>$0</code>
(see <a href="#String-Functions">String Functions</a>),
this is awkward and inefficient for a large number of fields.

   <p><a name="index-troubleshooting_002c-fatal-errors_002c-field-widths_0040comma_007b_007d-specifying-593"></a><a name="index-g_t_0040command_007bw_007d-utility-594"></a><a name="index-g_t_0040code_007bFIELDWIDTHS_007d-variable-595"></a><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bFIELDWIDTHS_007d-variable-in-596"></a>The splitting of an input record into fixed-width fields is specified by
assigning a string containing space-separated numbers to the built-in
variable <code>FIELDWIDTHS</code>.  Each number specifies the width of the field,
<em>including</em> columns between fields.  If you want to ignore the columns
between fields, you can specify the width as a separate field that is
subsequently ignored. 
It is a fatal error to supply a field width that is not a positive number. 
The following data is the output of the Unix <samp><span class="command">w</span></samp> utility.  It is useful
to illustrate the use of <code>FIELDWIDTHS</code>:

<pre class="example">      10:06pm  up 21 days, 14:04,  23 users
     User     tty       login  idle   JCPU   PCPU  what
     hzuo     ttyV0     8:58pm            9      5  vi p24.tex
     hzang    ttyV3     6:37pm    50                -csh
     eklye    ttyV5     9:53pm            7      1  em thes.tex
     dportein ttyV6     8:17pm  1:47                -csh
     gierd    ttyD3    10:00pm     1                elm
     dave     ttyD4     9:47pm            4      4  w
     brent    ttyp0    26Jun91  4:46  26:46   4:41  bash
     dave     ttyq4    26Jun9115days     46     46  wnewmail
</pre>
   <p>The following program takes the above input, converts the idle time to
number of seconds, and prints out the first two fields and the calculated
idle time:

   <blockquote>
<b>NOTE:</b> This program uses a number of <samp><span class="command">awk</span></samp> features that
haven't been introduced yet. 
</blockquote>

<pre class="example">     BEGIN  { FIELDWIDTHS = "9 6 10 6 7 7 35" }
     NR &gt; 2 {
         idle = $4
         sub(/^  */, "", idle)   # strip leading spaces
         if (idle == "")
             idle = 0
         if (idle ~ /:/) {
             split(idle, t, ":")
             idle = t[1] * 60 + t[2]
         }
         if (idle ~ /days/)
             idle *= 24 * 60 * 60
     
         print $1, $2, idle
     }
</pre>
   <p>Running the program on the data produces the following results:

<pre class="example">     hzuo      ttyV0  0
     hzang     ttyV3  50
     eklye     ttyV5  0
     dportein  ttyV6  107
     gierd     ttyD3  1
     dave      ttyD4  0
     brent     ttyp0  286
     dave      ttyq4  1296000
</pre>
   <p>Another (possibly more practical) example of fixed-width input data
is the input from a deck of balloting cards.  In some parts of
the United States, voters mark their choices by punching holes in computer
cards.  These cards are then processed to count the votes for any particular
candidate or on any particular issue.  Because a voter may choose not to
vote on some issue, any column on the card may be empty.  An <samp><span class="command">awk</span></samp>
program for processing such data could use the <code>FIELDWIDTHS</code> feature
to simplify reading the data.  (Of course, getting <samp><span class="command">gawk</span></samp> to run on
a system with card readers is another story!)

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-splitting-fields-and-597"></a>Assigning a value to <code>FS</code> causes <samp><span class="command">gawk</span></samp> to use
<code>FS</code> for field splitting again.  Use &lsquo;<samp><span class="samp">FS = FS</span></samp>&rsquo; to make this happen,
without having to know the current value of <code>FS</code>. 
In order to tell which kind of field splitting is in effect,
use <code>PROCINFO["FS"]</code>
(see <a href="#Auto_002dset">Auto-set</a>). 
The value is <code>"FS"</code> if regular field splitting is being used,
or it is <code>"FIELDWIDTHS"</code> if fixed-width field splitting is being used:

<pre class="example">     if (PROCINFO["FS"] == "FS")
         <var>regular field splitting</var> ...
     else if  (PROCINFO["FS"] == "FIELDWIDTHS")
         <var>fixed-width field splitting</var> ...
     else
         <var>content-based field splitting</var> ... (see next section)
</pre>
   <p>This information is useful when writing a function
that needs to temporarily change <code>FS</code> or <code>FIELDWIDTHS</code>,
read some records, and then restore the original settings
(see <a href="#Passwd-Functions">Passwd Functions</a>,
for an example of such a function).

<div class="node">
<a name="Splitting-By-Content"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Multiple-Line">Multiple Line</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Constant-Size">Constant Size</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reading-Files">Reading Files</a>

</div>

<h3 class="section">4.7 Defining Fields By Content</h3>

<blockquote>
<b>NOTE:</b> This section discusses an advanced
feature of <samp><span class="command">gawk</span></samp>.  If you are a novice <samp><span class="command">awk</span></samp> user,
you might want to skip it on the first reading. 
</blockquote>

<p><a name="index-advanced-features_002c-specifying-field-content-598"></a>Normally, when using <code>FS</code>, <samp><span class="command">gawk</span></samp> defines the fields as the
parts of the record that occur in between each field separator. In other
words, <code>FS</code> defines what a field <em>is not</em>, instead of what a field
<em>is</em>. 
However, there are times when you really want to define the fields by
what they are, and not by what they are not.

   <p>The most notorious such case
is so-called <dfn>comma separated value</dfn> (CSV) data. Many spreadsheet programs,
for example, can export their data into text files, where each record is
terminated with a newline, and fields are separated by commas. If only
commas separated the data, there wouldn't be an issue. The problem comes when
one of the fields contains an <em>embedded</em> comma. While there is no
formal standard specification for CSV data<a rel="footnote" href="#fn-22" name="fnd-22"><sup>22</sup></a>,
in such cases, most programs embed the field in double quotes. So we might
have data like this:

<pre class="example">     <!-- file eg/misc/addresses.csv -->
     Robbins,Arnold,"1234 A Pretty Street, NE",MyTown,MyState,12345-6789,USA
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bFPAT_007d-variable-in-599"></a><a name="index-g_t_0040code_007bFPAT_007d-variable-600"></a>The <code>FPAT</code> variable offers a solution for cases like this. 
The value of <code>FPAT</code> should be a string that provides a regular expression. 
This regular expression describes the contents of each field.

   <p>In the case of CSV data as presented above, each field is either &ldquo;anything that
is not a comma,&rdquo; or &ldquo;a double quote, anything that is not a double quote, and a
closing double quote.&rdquo;  If written as a regular expression constant
(see <a href="#Regexp">Regexp</a>),
we would have <code>/([^,]+)|("[^"]+")/</code>. 
Writing this as a string requires us to escape the double quotes, leading to:

<pre class="example">     FPAT = "([^,]+)|(\"[^\"]+\")"
</pre>
   <p>Putting this to use, here is a simple program to parse the data:

<pre class="example">     <!-- file eg/misc/simple-csv.awk -->
     BEGIN {
         FPAT = "([^,]+)|(\"[^\"]+\")"
     }
     
     {
         print "NF = ", NF
         for (i = 1; i &lt;= NF; i++) {
             printf("$%d = &lt;%s&gt;\n", i, $i)
         }
     }
     <!-- endfile -->
</pre>
   <p>When run, we get the following:

<pre class="example">     $ <kbd>gawk -f simple-csv.awk addresses.csv</kbd>
     NF =  7
     $1 = &lt;Robbins&gt;
     $2 = &lt;Arnold&gt;
     $3 = &lt;"1234 A Pretty Street, NE"&gt;
     $4 = &lt;MyTown&gt;
     $5 = &lt;MyState&gt;
     $6 = &lt;12345-6789&gt;
     $7 = &lt;USA&gt;
</pre>
   <p>Note the embedded comma in the value of <code>$3</code>.

   <p>A straightforward improvement when processing CSV data of this sort
would be to remove the quotes when they occur, with something like this:

<pre class="example">     if (substr($i, 1, 1) == "\"") {
         len = length($i)
         $i = substr($i, 2, len - 2)    # Get text within the two quotes
     }
</pre>
   <p>As with <code>FS</code>, the <code>IGNORECASE</code> variable (see <a href="#User_002dmodified">User-modified</a>)
affects field splitting with <code>FPAT</code>.

   <p>Similar to <code>FIELDWIDTHS</code>, the value of <code>PROCINFO["FS"]</code>
will be <code>"FPAT"</code> if content-based field splitting is being used.

   <blockquote>
<b>NOTE:</b> Some programs export CSV data that contains embedded newlines between
the double quotes.  <samp><span class="command">gawk</span></samp> provides no way to deal with this. 
Since there is no formal specification for CSV data, there isn't much
more to be done;
the <code>FPAT</code> mechanism provides an elegant solution for the majority
of cases, and the <samp><span class="command">gawk</span></samp> maintainer is satisfied with that. 
</blockquote>

   <p>As written, the regexp used for <code>FPAT</code> requires that each field
have a least one character.  A straightforward modification
(changing changed the first &lsquo;<samp><span class="samp">+</span></samp>&rsquo; to &lsquo;<samp><span class="samp">*</span></samp>&rsquo;) allows fields to be empty:

<pre class="example">     FPAT = "([^,]*)|(\"[^\"]+\")"
</pre>
   <p>Finally, the <code>patsplit()</code> function makes the same functionality
available for splitting regular strings (see <a href="#String-Functions">String Functions</a>).

<div class="node">
<a name="Multiple-Line"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getline">Getline</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Splitting-By-Content">Splitting By Content</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reading-Files">Reading Files</a>

</div>

<h3 class="section">4.8 Multiple-Line Records</h3>

<!-- STARTOFRANGE recm -->
<p><a name="index-records_002c-multiline-601"></a><!-- STARTOFRANGE imr -->
<a name="index-input_002c-multiline-records-602"></a><!-- STARTOFRANGE frm -->
<a name="index-files_002c-reading_002c-multiline-records-603"></a><a name="index-input_002c-files_002c-See-input-files-604"></a>In some databases, a single line cannot conveniently hold all the
information in one entry.  In such cases, you can use multiline
records.  The first step in doing this is to choose your data format.

   <p><a name="index-record-separators_002c-with-multiline-records-605"></a>One technique is to use an unusual character or string to separate
records.  For example, you could use the formfeed character (written
&lsquo;<samp><span class="samp">\f</span></samp>&rsquo; in <samp><span class="command">awk</span></samp>, as in C) to separate them, making each record
a page of the file.  To do this, just set the variable <code>RS</code> to
<code>"\f"</code> (a string containing the formfeed character).  Any
other character could equally well be used, as long as it won't be part
of the data in a record.

   <p><a name="index-g_t_0040code_007bRS_007d-variable_002c-multiline-records-and-606"></a>Another technique is to have blank lines separate records.  By a special
dispensation, an empty string as the value of <code>RS</code> indicates that
records are separated by one or more blank lines.  When <code>RS</code> is set
to the empty string, each record always ends at the first blank line
encountered.  The next record doesn't start until the first nonblank
line that follows.  No matter how many blank lines appear in a row, they
all act as one record separator. 
(Blank lines must be completely empty; lines that contain only
whitespace do not count.)

   <p><a name="index-leftmost-longest-match-607"></a><a name="index-matching_002c-leftmost-longest-608"></a>You can achieve the same effect as &lsquo;<samp><span class="samp">RS = ""</span></samp>&rsquo; by assigning the
string <code>"\n\n+"</code> to <code>RS</code>. This regexp matches the newline
at the end of the record and one or more blank lines after the record. 
In addition, a regular expression always matches the longest possible
sequence when there is a choice
(see <a href="#Leftmost-Longest">Leftmost Longest</a>). 
So the next record doesn't start until
the first nonblank line that follows&mdash;no matter how many blank lines
appear in a row, they are considered one record separator.

   <p><a name="index-dark-corner_002c-multiline-records-609"></a>There is an important difference between &lsquo;<samp><span class="samp">RS = ""</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">RS = "\n\n+"</span></samp>&rsquo;. In the first case, leading newlines in the input
data file are ignored, and if a file ends without extra blank lines
after the last record, the final newline is removed from the record. 
In the second case, this special processing is not done. 
(d.c.)

   <p><a name="index-field-separators_002c-in-multiline-records-610"></a>Now that the input is separated into records, the second step is to
separate the fields in the record.  One way to do this is to divide each
of the lines into fields in the normal manner.  This happens by default
as the result of a special feature.  When <code>RS</code> is set to the empty
string, <em>and</em> <code>FS</code> is set to a single character,
the newline character <em>always</em> acts as a field separator. 
This is in addition to whatever field separations result from
<code>FS</code>.<a rel="footnote" href="#fn-23" name="fnd-23"><sup>23</sup></a>

   <p>The original motivation for this special exception was probably to provide
useful behavior in the default case (i.e., <code>FS</code> is equal
to <code>"&nbsp;"</code><!-- /@w -->).  This feature can be a problem if you really don't
want the newline character to separate fields, because there is no way to
prevent it.  However, you can work around this by using the <code>split()</code>
function to break up the record manually
(see <a href="#String-Functions">String Functions</a>). 
If you have a single character field separator, you can work around
the special feature in a different way, by making <code>FS</code> into a
regexp for that single character.  For example, if the field
separator is a percent character, instead of
&lsquo;<samp><span class="samp">FS = "%"</span></samp>&rsquo;, use &lsquo;<samp><span class="samp">FS = "[%]"</span></samp>&rsquo;.

   <p>Another way to separate fields is to
put each field on a separate line: to do this, just set the
variable <code>FS</code> to the string <code>"\n"</code>.  (This single
character separator matches a single newline.) 
A practical example of a data file organized this way might be a mailing
list, where each entry is separated by blank lines.  Consider a mailing
list in a file named <samp><span class="file">addresses</span></samp>, which looks like this:

<pre class="example">     Jane Doe
     123 Main Street
     Anywhere, SE 12345-6789
     
     John Smith
     456 Tree-lined Avenue
     Smallville, MW 98765-4321
     ...
</pre>
   <p class="noindent">A simple program to process this file is as follows:

<pre class="example">     # addrs.awk --- simple mailing list program
     
     # Records are separated by blank lines.
     # Each line is one field.
     BEGIN { RS = "" ; FS = "\n" }
     
     {
           print "Name is:", $1
           print "Address is:", $2
           print "City and State are:", $3
           print ""
     }
</pre>
   <p>Running the program produces the following output:

<pre class="example">     $ awk -f addrs.awk addresses
     -| Name is: Jane Doe
     -| Address is: 123 Main Street
     -| City and State are: Anywhere, SE 12345-6789
     -|
     -| Name is: John Smith
     -| Address is: 456 Tree-lined Avenue
     -| City and State are: Smallville, MW 98765-4321
     -|
     ...
</pre>
   <p>See <a href="#Labels-Program">Labels Program</a>, for a more realistic
program that deals with address lists. 
The following
table
summarizes how records are split, based on the
value of
<code>RS</code>:

     <dl>
<dt><code>RS == "\n"</code><dd>Records are separated by the newline character (&lsquo;<samp><span class="samp">\n</span></samp>&rsquo;).  In effect,
every line in the data file is a separate record, including blank lines. 
This is the default.

     <br><dt><code>RS == </code><var>any single character</var><dd>Records are separated by each occurrence of the character.  Multiple
successive occurrences delimit empty records.

     <br><dt><code>RS == ""</code><dd>Records are separated by runs of blank lines. 
When <code>FS</code> is a single character, then
the newline character
always serves as a field separator, in addition to whatever value
<code>FS</code> may have. Leading and trailing newlines in a file are ignored.

     <br><dt><code>RS == </code><var>regexp</var><dd>Records are separated by occurrences of characters that match <var>regexp</var>. 
Leading and trailing matches of <var>regexp</var> delimit empty records. 
(This is a <samp><span class="command">gawk</span></samp> extension; it is not specified by the
POSIX standard.) 
</dl>

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bRT_007d-variable-in-611"></a><a name="index-g_t_0040code_007bRT_007d-variable-612"></a>In all cases, <samp><span class="command">gawk</span></samp> sets <code>RT</code> to the input text that matched the
value specified by <code>RS</code>. 
But if the input file ended without any text that matches <code>RS</code>,
then <samp><span class="command">gawk</span></samp> sets <code>RT</code> to the null string. 
<!-- ENDOFRANGE recm -->
<!-- ENDOFRANGE imr -->
<!-- ENDOFRANGE frm -->

<div class="node">
<a name="Getline"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Command-line-directories">Command line directories</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Multiple-Line">Multiple Line</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reading-Files">Reading Files</a>

</div>

<h3 class="section">4.9 Explicit Input with <code>getline</code></h3>

<!-- STARTOFRANGE getl -->
<p><a name="index-g_t_0040code_007bgetline_007d-command_002c-explicit-input-with-613"></a><a name="index-input_002c-explicit-614"></a>So far we have been getting our input data from <samp><span class="command">awk</span></samp>'s main
input stream&mdash;either the standard input (usually your terminal, sometimes
the output from another program) or from the
files specified on the command line.  The <samp><span class="command">awk</span></samp> language has a
special built-in command called <code>getline</code> that
can be used to read input under your explicit control.

   <p>The <code>getline</code> command is used in several different ways and should
<em>not</em> be used by beginners. 
The examples that follow the explanation of the <code>getline</code> command
include material that has not been covered yet.  Therefore, come back
and study the <code>getline</code> command <em>after</em> you have reviewed the
rest of this Web page and have a good knowledge of how <samp><span class="command">awk</span></samp> works.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-in-615"></a><a name="index-g_t_0040code_007bERRNO_007d-variable-616"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bgetline_007d-command-617"></a><a name="index-g_t_0040code_007bgetline_007d-command_002c-return-values-618"></a><a name="index-g_t_0040code_007b_002d_002dsandbox_007d-option_002c-input-redirection-with-_0040command_007bgetline_007d-619"></a>
The <code>getline</code> command returns one if it finds a record and zero if
it encounters the end of the file.  If there is some error in getting
a record, such as a file that cannot be opened, then <code>getline</code>
returns &minus;1.  In this case, <samp><span class="command">gawk</span></samp> sets the variable
<code>ERRNO</code> to a string describing the error that occurred.

   <p>In the following examples, <var>command</var> stands for a string value that
represents a shell command.

   <blockquote>
<b>NOTE:</b> When <samp><span class="option">--sandbox</span></samp> is specified (see <a href="#Options">Options</a>),
reading lines from files, pipes and coprocesses is disabled. 
</blockquote>

<ul class="menu">
<li><a accesskey="1" href="#Plain-Getline">Plain Getline</a>:                Using <code>getline</code> with no arguments. 
<li><a accesskey="2" href="#Getline_002fVariable">Getline/Variable</a>:             Using <code>getline</code> into a variable. 
<li><a accesskey="3" href="#Getline_002fFile">Getline/File</a>:                 Using <code>getline</code> from a file. 
<li><a accesskey="4" href="#Getline_002fVariable_002fFile">Getline/Variable/File</a>:        Using <code>getline</code> into a variable from a
                                file. 
<li><a accesskey="5" href="#Getline_002fPipe">Getline/Pipe</a>:                 Using <code>getline</code> from a pipe. 
<li><a accesskey="6" href="#Getline_002fVariable_002fPipe">Getline/Variable/Pipe</a>:        Using <code>getline</code> into a variable from a
                                pipe. 
<li><a accesskey="7" href="#Getline_002fCoprocess">Getline/Coprocess</a>:            Using <code>getline</code> from a coprocess. 
<li><a accesskey="8" href="#Getline_002fVariable_002fCoprocess">Getline/Variable/Coprocess</a>:   Using <code>getline</code> into a variable from a
                                coprocess. 
<li><a accesskey="9" href="#Getline-Notes">Getline Notes</a>:                Important things to know about <code>getline</code>. 
<li><a href="#Getline-Summary">Getline Summary</a>:              Summary of <code>getline</code> Variants. 
</ul>

<div class="node">
<a name="Plain-Getline"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getline_002fVariable">Getline/Variable</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getline">Getline</a>

</div>

<h4 class="subsection">4.9.1 Using <code>getline</code> with No Arguments</h4>

<p>The <code>getline</code> command can be used without arguments to read input
from the current input file.  All it does in this case is read the next
input record and split it up into fields.  This is useful if you've
finished processing the current record, but want to do some special
processing on the next record <em>right now</em>.  For example:

<pre class="example">     {
          if ((t = index($0, "/*")) != 0) {
               # value of `tmp' will be "" if t is 1
               tmp = substr($0, 1, t - 1)
               u = index(substr($0, t + 2), "*/")
               offset = t + 2
               while (u == 0) {
                    if (getline &lt;= 0) {
                         m = "unexpected EOF or error"
                         m = (m ": " ERRNO)
                         print m &gt; "/dev/stderr"
                         exit
                    }
                    u = index($0, "*/")
                    offset = 0
               }
               # substr() expression will be "" if */
               # occurred at end of line
               $0 = tmp substr($0, offset + u + 2)
          }
          print $0
     }
</pre>
   <p>This <samp><span class="command">awk</span></samp> program deletes C-style comments (&lsquo;<samp><span class="samp">/* ... 
*/</span></samp>&rsquo;) from the input.  By replacing the &lsquo;<samp><span class="samp">print $0</span></samp>&rsquo; with other
statements, you could perform more complicated processing on the
decommented input, such as searching for matches of a regular
expression.  (This program has a subtle problem&mdash;it does not work if one
comment ends and another begins on the same line.)

   <p>This form of the <code>getline</code> command sets <code>NF</code>,
<code>NR</code>, <code>FNR</code>, and the value of <code>$0</code>.

   <blockquote>
<b>NOTE:</b> The new value of <code>$0</code> is used to test
the patterns of any subsequent rules.  The original value
of <code>$0</code> that triggered the rule that executed <code>getline</code>
is lost. 
By contrast, the <code>next</code> statement reads a new record
but immediately begins processing it normally, starting with the first
rule in the program.  See <a href="#Next-Statement">Next Statement</a>. 
</blockquote>

<div class="node">
<a name="Getline%2fVariable"></a>
<a name="Getline_002fVariable"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getline_002fFile">Getline/File</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Plain-Getline">Plain Getline</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getline">Getline</a>

</div>

<h4 class="subsection">4.9.2 Using <code>getline</code> into a Variable</h4>

<p><a name="index-variables_002c-_0040code_007bgetline_007d-command-into_0040comma_007b_007d-using-620"></a>
You can use &lsquo;<samp><span class="samp">getline </span><var>var</var></samp>&rsquo; to read the next record from
<samp><span class="command">awk</span></samp>'s input into the variable <var>var</var>.  No other processing is
done. 
For example, suppose the next line is a comment or a special string,
and you want to read it without triggering
any rules.  This form of <code>getline</code> allows you to read that line
and store it in a variable so that the main
read-a-line-and-check-each-rule loop of <samp><span class="command">awk</span></samp> never sees it. 
The following example swaps every two lines of input:

<pre class="example">     {
          if ((getline tmp) &gt; 0) {
               print tmp
               print $0
          } else
               print $0
     }
</pre>
   <p class="noindent">It takes the following list:

<pre class="example">     wan
     tew
     free
     phore
</pre>
   <p class="noindent">and produces these results:

<pre class="example">     tew
     wan
     phore
     free
</pre>
   <p>The <code>getline</code> command used in this way sets only the variables
<code>NR</code> and <code>FNR</code> (and of course, <var>var</var>).  The record is not
split into fields, so the values of the fields (including <code>$0</code>) and
the value of <code>NF</code> do not change.

<div class="node">
<a name="Getline%2fFile"></a>
<a name="Getline_002fFile"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getline_002fVariable_002fFile">Getline/Variable/File</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getline_002fVariable">Getline/Variable</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getline">Getline</a>

</div>

<h4 class="subsection">4.9.3 Using <code>getline</code> from a File</h4>

<p><a name="index-input-redirection-621"></a><a name="index-redirection-of-input-622"></a><a name="index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_007d-operator-_0028I_002fO_0029-623"></a><a name="index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_007d-operator-_0028I_002fO_0029-624"></a><a name="index-operators_002c-input_002foutput-625"></a>Use &lsquo;<samp><span class="samp">getline &lt; </span><var>file</var></samp>&rsquo; to read the next record from <var>file</var>. 
Here <var>file</var> is a string-valued expression that
specifies the file name.  &lsquo;<samp><span class="samp">&lt; </span><var>file</var></samp>&rsquo; is called a <dfn>redirection</dfn>
because it directs input to come from a different place. 
For example, the following
program reads its input record from the file <samp><span class="file">secondary.input</span></samp> when it
encounters a first field with a value equal to 10 in the current input
file:

<pre class="example">     {
         if ($1 == 10) {
              getline &lt; "secondary.input"
              print
         } else
              print
     }
</pre>
   <p>Because the main input stream is not used, the values of <code>NR</code> and
<code>FNR</code> are not changed. However, the record it reads is split into fields in
the normal manner, so the values of <code>$0</code> and the other fields are
changed, resulting in a new value of <code>NF</code>.

   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007b_003c_007d-operator-and-626"></a><!-- Thanks to Paul Eggert for initial wording here -->
According to POSIX, &lsquo;<samp><span class="samp">getline &lt; </span><var>expression</var></samp>&rsquo; is ambiguous if
<var>expression</var> contains unparenthesized operators other than
&lsquo;<samp><span class="samp">$</span></samp>&rsquo;; for example, &lsquo;<samp><span class="samp">getline &lt; dir "/" file</span></samp>&rsquo; is ambiguous
because the concatenation operator is not parenthesized.  You should
write it as &lsquo;<samp><span class="samp">getline &lt; (dir "/" file)</span></samp>&rsquo; if you want your program
to be portable to all <samp><span class="command">awk</span></samp> implementations.

<div class="node">
<a name="Getline%2fVariable%2fFile"></a>
<a name="Getline_002fVariable_002fFile"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getline_002fPipe">Getline/Pipe</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getline_002fFile">Getline/File</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getline">Getline</a>

</div>

<h4 class="subsection">4.9.4 Using <code>getline</code> into a Variable from a File</h4>

<p><a name="index-variables_002c-_0040code_007bgetline_007d-command-into_0040comma_007b_007d-using-627"></a>
Use &lsquo;<samp><span class="samp">getline </span><var>var</var><span class="samp"> &lt; </span><var>file</var></samp>&rsquo; to read input
from the file
<var>file</var>, and put it in the variable <var>var</var>.  As above, <var>file</var>
is a string-valued expression that specifies the file from which to read.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bRT_007d-variable-in-628"></a><a name="index-g_t_0040code_007bRT_007d-variable-629"></a>In this version of <code>getline</code>, none of the built-in variables are
changed and the record is not split into fields.  The only variable
changed is <var>var</var>.<a rel="footnote" href="#fn-24" name="fnd-24"><sup>24</sup></a>
For example, the following program copies all the input files to the
output, except for records that say &lsquo;<samp><span class="samp">@include&nbsp;</span><var>filename</var></samp>&rsquo;<!-- /@w -->. 
Such a record is replaced by the contents of the file
<var>filename</var>:

<pre class="example">     {
          if (NF == 2 &amp;&amp; $1 == "@include") {
               while ((getline line &lt; $2) &gt; 0)
                    print line
               close($2)
          } else
               print
     }
</pre>
   <p>Note here how the name of the extra input file is not built into
the program; it is taken directly from the data, specifically from the second field on
the &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; line.

   <p><a name="index-g_t_0040code_007bclose_0028_0029_007d-function-630"></a>The <code>close()</code> function is called to ensure that if two identical
&lsquo;<samp><span class="samp">@include</span></samp>&rsquo; lines appear in the input, the entire specified file is
included twice. 
See <a href="#Close-Files-And-Pipes">Close Files And Pipes</a>.

   <p>One deficiency of this program is that it does not process nested
&lsquo;<samp><span class="samp">@include</span></samp>&rsquo; statements
(i.e., &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; statements in included files)
the way a true macro preprocessor would. 
See <a href="#Igawk-Program">Igawk Program</a>, for a program
that does handle nested &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; statements.

<div class="node">
<a name="Getline%2fPipe"></a>
<a name="Getline_002fPipe"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getline_002fVariable_002fPipe">Getline/Variable/Pipe</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getline_002fVariable_002fFile">Getline/Variable/File</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getline">Getline</a>

</div>

<h4 class="subsection">4.9.5 Using <code>getline</code> from a Pipe</h4>

<p><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_007d-operator-_0028I_002fO_0029-631"></a><a name="index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_007d-operator-_0028I_002fO_0029-632"></a><a name="index-input-pipeline-633"></a><a name="index-pipes_002c-input-634"></a><a name="index-operators_002c-input_002foutput-635"></a>The output of a command can also be piped into <code>getline</code>, using
&lsquo;<samp><var>command</var><span class="samp"> | getline</span></samp>&rsquo;.  In
this case, the string <var>command</var> is run as a shell command and its output
is piped into <samp><span class="command">awk</span></samp> to be used as input.  This form of <code>getline</code>
reads one record at a time from the pipe. 
For example, the following program copies its input to its output, except for
lines that begin with &lsquo;<samp><span class="samp">@execute</span></samp>&rsquo;, which are replaced by the output
produced by running the rest of the line as a shell command:

<pre class="example">     {
          if ($1 == "@execute") {
               tmp = substr($0, 10)        # Remove "@execute"
               while ((tmp | getline) &gt; 0)
                    print
               close(tmp)
          } else
               print
     }
</pre>
   <p class="noindent"><a name="index-g_t_0040code_007bclose_0028_0029_007d-function-636"></a>The <code>close()</code> function is called to ensure that if two identical
&lsquo;<samp><span class="samp">@execute</span></samp>&rsquo; lines appear in the input, the command is run for
each one. 
See <a href="#Close-Files-And-Pipes">Close Files And Pipes</a>. 
<!-- Exercise!! -->
<!-- This example is unrealistic, since you could just use system -->
Given the input:

<pre class="example">     foo
     bar
     baz
     @execute who
     bletch
</pre>
   <p class="noindent">the program might produce:

   <p><a name="index-Robbins_002c-Bill-637"></a><a name="index-Robbins_002c-Miriam-638"></a><a name="index-Robbins_002c-Arnold-639"></a>
<pre class="example">     foo
     bar
     baz
     arnold     ttyv0   Jul 13 14:22
     miriam     ttyp0   Jul 13 14:23     (murphy:0)
     bill       ttyp1   Jul 13 14:23     (murphy:0)
     bletch
</pre>
   <p class="noindent">Notice that this program ran the command <samp><span class="command">who</span></samp> and printed the previous result. 
(If you try this program yourself, you will of course get different results,
depending upon who is logged in on your system.)

   <p>This variation of <code>getline</code> splits the record into fields, sets the
value of <code>NF</code>, and recomputes the value of <code>$0</code>.  The values of
<code>NR</code> and <code>FNR</code> are not changed.

   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007b_007c_007d-I_002fO-operator-and-640"></a><!-- Thanks to Paul Eggert for initial wording here -->
According to POSIX, &lsquo;<samp><var>expression</var><span class="samp"> | getline</span></samp>&rsquo; is ambiguous if
<var>expression</var> contains unparenthesized operators other than
&lsquo;<samp><span class="samp">$</span></samp>&rsquo;&mdash;for example, &lsquo;<samp><span class="samp">"echo&nbsp;"<!-- /@w --> "date" | getline</span></samp>&rsquo; is ambiguous
because the concatenation operator is not parenthesized.  You should
write it as &lsquo;<samp><span class="samp">("echo&nbsp;"<!-- /@w --> "date") | getline</span></samp>&rsquo; if you want your program
to be portable to all <samp><span class="command">awk</span></samp> implementations.

   <blockquote>
<b>NOTE:</b> Unfortunately, <samp><span class="command">gawk</span></samp> has not been consistent in its treatment
of a construct like &lsquo;<samp><span class="samp">"echo&nbsp;"<!-- /@w --> "date" | getline</span></samp>&rsquo;. 
Most versions, including the current version, treat it at as
&lsquo;<samp><span class="samp">("echo&nbsp;"<!-- /@w --> "date") | getline</span></samp>&rsquo;. 
(This how Brian Kernighan's <samp><span class="command">awk</span></samp> behaves.) 
Some versions changed and treated it as
&lsquo;<samp><span class="samp">"echo&nbsp;"<!-- /@w --> ("date" | getline)</span></samp>&rsquo;. 
(This is how <samp><span class="command">mawk</span></samp> behaves.) 
In short, <em>always</em> use explicit parentheses, and then you won't
have to worry. 
</blockquote>

<div class="node">
<a name="Getline%2fVariable%2fPipe"></a>
<a name="Getline_002fVariable_002fPipe"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getline_002fCoprocess">Getline/Coprocess</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getline_002fPipe">Getline/Pipe</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getline">Getline</a>

</div>

<h4 class="subsection">4.9.6 Using <code>getline</code> into a Variable from a Pipe</h4>

<p><a name="index-variables_002c-_0040code_007bgetline_007d-command-into_0040comma_007b_007d-using-641"></a>
When you use &lsquo;<samp><var>command</var><span class="samp"> | getline </span><var>var</var></samp>&rsquo;, the
output of <var>command</var> is sent through a pipe to
<code>getline</code> and into the variable <var>var</var>.  For example, the
following program reads the current date and time into the variable
<code>current_time</code>, using the <samp><span class="command">date</span></samp> utility, and then
prints it:

<pre class="example">     BEGIN {
          "date" | getline current_time
          close("date")
          print "Report printed on " current_time
     }
</pre>
   <p>In this version of <code>getline</code>, none of the built-in variables are
changed and the record is not split into fields.

<div class="node">
<a name="Getline%2fCoprocess"></a>
<a name="Getline_002fCoprocess"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getline_002fVariable_002fCoprocess">Getline/Variable/Coprocess</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getline_002fVariable_002fPipe">Getline/Variable/Pipe</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getline">Getline</a>

</div>

<h4 class="subsection">4.9.7 Using <code>getline</code> from a Coprocess</h4>

<p><a name="index-coprocesses_002c-_0040code_007bgetline_007d-from-642"></a><a name="index-g_t_0040code_007bgetline_007d-command_002c-coprocesses_0040comma_007b_007d-using-from-643"></a><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-644"></a><a name="index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-645"></a><a name="index-operators_002c-input_002foutput-646"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-input_002foutput-operators-647"></a>
Input into <code>getline</code> from a pipe is a one-way operation. 
The command that is started with &lsquo;<samp><var>command</var><span class="samp"> | getline</span></samp>&rsquo; only
sends data <em>to</em> your <samp><span class="command">awk</span></samp> program.

   <p>On occasion, you might want to send data to another program
for processing and then read the results back. 
<samp><span class="command">gawk</span></samp> allows you to start a <dfn>coprocess</dfn>, with which two-way
communications are possible.  This is done with the &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo;
operator. 
Typically, you write data to the coprocess first and then
read results back, as shown in the following:

<pre class="example">     print "<var>some query</var>" |&amp; "db_server"
     "db_server" |&amp; getline
</pre>
   <p class="noindent">which sends a query to <samp><span class="command">db_server</span></samp> and then reads the results.

   <p>The values of <code>NR</code> and
<code>FNR</code> are not changed,
because the main input stream is not used. 
However, the record is split into fields in
the normal manner, thus changing the values of <code>$0</code>, of the other fields,
and of <code>NF</code>.

   <p>Coprocesses are an advanced feature. They are discussed here only because
this is the section on <code>getline</code>. 
See <a href="#Two_002dway-I_002fO">Two-way I/O</a>,
where coprocesses are discussed in more detail.

<div class="node">
<a name="Getline%2fVariable%2fCoprocess"></a>
<a name="Getline_002fVariable_002fCoprocess"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getline-Notes">Getline Notes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getline_002fCoprocess">Getline/Coprocess</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getline">Getline</a>

</div>

<h4 class="subsection">4.9.8 Using <code>getline</code> into a Variable from a Coprocess</h4>

<p><a name="index-variables_002c-_0040code_007bgetline_007d-command-into_0040comma_007b_007d-using-648"></a>
When you use &lsquo;<samp><var>command</var><span class="samp"> |&amp; getline </span><var>var</var></samp>&rsquo;, the output from
the coprocess <var>command</var> is sent through a two-way pipe to <code>getline</code>
and into the variable <var>var</var>.

   <p>In this version of <code>getline</code>, none of the built-in variables are
changed and the record is not split into fields.  The only variable
changed is <var>var</var>.

<div class="node">
<a name="Getline-Notes"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getline-Summary">Getline Summary</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getline_002fVariable_002fCoprocess">Getline/Variable/Coprocess</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getline">Getline</a>

</div>

<h4 class="subsection">4.9.9 Points to Remember About <code>getline</code></h4>

<p>Here are some miscellaneous points about <code>getline</code> that
you should bear in mind:

     <ul>
<li>When <code>getline</code> changes the value of <code>$0</code> and <code>NF</code>,
<samp><span class="command">awk</span></samp> does <em>not</em> automatically jump to the start of the
program and start testing the new record against every pattern. 
However, the new record is tested against any subsequent rules.

     <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-implementation-limitations-649"></a><a name="index-implementation-issues_002c-_0040command_007bgawk_007d_002c-limits-650"></a><a name="index-g_t_0040command_007bawk_007d_002c-implementations_002c-limits-651"></a><a name="index-g_t_0040command_007bgawk_007d_002c-implementation-issues_002c-limits-652"></a><li>Many <samp><span class="command">awk</span></samp> implementations limit the number of pipelines that an <samp><span class="command">awk</span></samp>
program may have open to just one.  In <samp><span class="command">gawk</span></samp>, there is no such limit. 
You can open as many pipelines (and coprocesses) as the underlying operating
system permits.

     <p><a name="index-side-effects_002c-_0040code_007bFILENAME_007d-variable-653"></a><a name="index-g_t_0040code_007bFILENAME_007d-variable_002c-_0040code_007bgetline_007d_0040comma_007b_007d-setting-with-654"></a><a name="index-dark-corner_002c-_0040code_007bFILENAME_007d-variable-655"></a><a name="index-g_t_0040code_007bgetline_007d-command_002c-_0040code_007bFILENAME_007d-variable-and-656"></a><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bgetline_007d-and-657"></a><li>An interesting side effect occurs if you use <code>getline</code> without a
redirection inside a <code>BEGIN</code> rule. Because an unredirected <code>getline</code>
reads from the command-line data files, the first <code>getline</code> command
causes <samp><span class="command">awk</span></samp> to set the value of <code>FILENAME</code>. Normally,
<code>FILENAME</code> does not have a value inside <code>BEGIN</code> rules, because you
have not yet started to process the command-line data files. 
(d.c.) 
(See <a href="#BEGIN_002fEND">BEGIN/END</a>,
also see <a href="#Auto_002dset">Auto-set</a>.)

     <li>Using <code>FILENAME</code> with <code>getline</code>
(&lsquo;<samp><span class="samp">getline &lt; FILENAME</span></samp>&rsquo;)
is likely to be a source for
confusion.  <samp><span class="command">awk</span></samp> opens a separate input stream from the
current input file.  However, by not using a variable, <code>$0</code>
and <code>NR</code> are still updated.  If you're doing this, it's
probably by accident, and you should reconsider what it is you're
trying to accomplish.

     <li><a href="#Getline-Summary">Getline Summary</a>, presents a table summarizing the
<code>getline</code> variants and which variables they can affect. 
It is worth noting that those variants which do not use redirection
can cause <code>FILENAME</code> to be updated if they cause
<samp><span class="command">awk</span></samp> to start reading a new input file.

     <li>If the variable being assigned is an expression with side effects,
different versions of <samp><span class="command">awk</span></samp> behave differently upon encountering
end-of-file.  Some versions don't evaluate the expression; many versions
(including <samp><span class="command">gawk</span></samp>) do.  Here is an example, due to Duncan Moore:

     <pre class="example">          BEGIN {
              system("echo 1 &gt; f")
              while ((getline a[++c] &lt; "f") &gt; 0) { }
              print c
          }
</pre>
     <p class="noindent">Here, the side effect is the &lsquo;<samp><span class="samp">++c</span></samp>&rsquo;.  Is <code>c</code> incremented if
end of file is encountered, before the element in <code>a</code> is assigned?

     <p><samp><span class="command">gawk</span></samp> treats <code>getline</code> like a function call, and evaluates
the expression &lsquo;<samp><span class="samp">a[++c]</span></samp>&rsquo; before attempting to read from <samp><span class="file">f</span></samp>. 
Other versions of <samp><span class="command">awk</span></samp> only evaluate the expression once they
know that there is a string value to be assigned.  Caveat Emptor. 
</ul>

<div class="node">
<a name="Getline-Summary"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getline-Notes">Getline Notes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Getline">Getline</a>

</div>

<h4 class="subsection">4.9.10 Summary of <code>getline</code> Variants</h4>

<p><a name="index-g_t_0040code_007bgetline_007d-command_002c-variants-658"></a>
<a href="#table_002dgetline_002dvariants">table-getline-variants</a>
summarizes the eight variants of <code>getline</code>,
listing which built-in variables are set by each one,
and whether the variant is standard or a <samp><span class="command">gawk</span></samp> extension.

   <div class="float">
<a name="table_002dgetline_002dvariants"></a>
   <p><table summary=""><tr align="left"><th valign="top" width="33%">Variant </th><th valign="top" width="38%">Effect </th><th valign="top" width="27%">Standard / Extension
<br></th></tr><tr align="left"><td valign="top" width="33%"><code>getline</code> </td><td valign="top" width="38%">Sets <code>$0</code>, <code>NF</code>, <code>FNR</code>, and <code>NR</code> </td><td valign="top" width="27%">Standard
<br></td></tr><tr align="left"><td valign="top" width="33%"><code>getline</code> <var>var</var> </td><td valign="top" width="38%">Sets <var>var</var>, <code>FNR</code>, and <code>NR</code> </td><td valign="top" width="27%">Standard
<br></td></tr><tr align="left"><td valign="top" width="33%"><code>getline &lt;</code> <var>file</var> </td><td valign="top" width="38%">Sets <code>$0</code> and <code>NF</code> </td><td valign="top" width="27%">Standard
<br></td></tr><tr align="left"><td valign="top" width="33%"><code>getline </code><var>var</var><code> &lt; </code><var>file</var> </td><td valign="top" width="38%">Sets <var>var</var> </td><td valign="top" width="27%">Standard
<br></td></tr><tr align="left"><td valign="top" width="33%"><var>command</var> <code>| getline</code> </td><td valign="top" width="38%">Sets <code>$0</code> and <code>NF</code> </td><td valign="top" width="27%">Standard
<br></td></tr><tr align="left"><td valign="top" width="33%"><var>command</var> <code>| getline</code> <var>var</var> </td><td valign="top" width="38%">Sets <var>var</var> </td><td valign="top" width="27%">Standard
<br></td></tr><tr align="left"><td valign="top" width="33%"><var>command</var> <code>|&amp; getline</code> </td><td valign="top" width="38%">Sets <code>$0</code> and <code>NF</code> </td><td valign="top" width="27%">Extension
<br></td></tr><tr align="left"><td valign="top" width="33%"><var>command</var> <code>|&amp; getline</code> <var>var</var> </td><td valign="top" width="38%">Sets <var>var</var> </td><td valign="top" width="27%">Extension
   <br></td></tr></table>
<p><strong class="float-caption">Table 4.1: getline Variants and What They Set</strong></p></div>
<!-- ENDOFRANGE getl -->
<!-- ENDOFRANGE inex -->
<!-- ENDOFRANGE infir -->

<div class="node">
<a name="Command-line-directories"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getline">Getline</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Reading-Files">Reading Files</a>

</div>

<h3 class="section">4.10 Directories On The Command Line</h3>

<p><a name="index-directories_002c-command-line-659"></a><a name="index-command-line_002c-directories-on-660"></a>
According to the POSIX standard, files named on the <samp><span class="command">awk</span></samp>
command line must be text files.  It is a fatal error if they are not. 
Most versions of <samp><span class="command">awk</span></samp> treat a directory on the command line as
a fatal error.

   <p>By default, <samp><span class="command">gawk</span></samp> produces a warning for a directory on the
command line, but otherwise ignores it.  If either of the <samp><span class="option">--posix</span></samp>
or <samp><span class="option">--traditional</span></samp> options is given, then <samp><span class="command">gawk</span></samp> reverts
to treating a directory on the command line as a fatal error.

<div class="node">
<a name="Printing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Expressions">Expressions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Reading-Files">Reading Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">5 Printing Output</h2>

<!-- STARTOFRANGE prnt -->
<p><a name="index-printing-661"></a><a name="index-output_002c-printing_002c-See-printing-662"></a>One of the most common programming actions is to <dfn>print</dfn>, or output,
some or all of the input.  Use the <code>print</code> statement
for simple output, and the <code>printf</code> statement
for fancier formatting. 
The <code>print</code> statement is not limited when
computing <em>which</em> values to print. However, with two exceptions,
you cannot specify <em>how</em> to print them&mdash;how many
columns, whether to use exponential notation or not, and so on. 
(For the exceptions, see <a href="#Output-Separators">Output Separators</a>, and
<a href="#OFMT">OFMT</a>.) 
For printing with specifications, you need the <code>printf</code> statement
(see <a href="#Printf">Printf</a>).

<!-- STARTOFRANGE prnts -->
   <p><a name="index-g_t_0040code_007bprint_007d-statement-663"></a><a name="index-g_t_0040code_007bprintf_007d-statement-664"></a>Besides basic and formatted printing, this chapter
also covers I/O redirections to files and pipes, introduces
the special file names that <samp><span class="command">gawk</span></samp> processes internally,
and discusses the <code>close()</code> built-in function.

<ul class="menu">
<li><a accesskey="1" href="#Print">Print</a>:                        The <code>print</code> statement. 
<li><a accesskey="2" href="#Print-Examples">Print Examples</a>:               Simple examples of <code>print</code> statements. 
<li><a accesskey="3" href="#Output-Separators">Output Separators</a>:            The output separators and how to change them. 
<li><a accesskey="4" href="#OFMT">OFMT</a>:                         Controlling Numeric Output With <code>print</code>. 
<li><a accesskey="5" href="#Printf">Printf</a>:                       The <code>printf</code> statement. 
<li><a accesskey="6" href="#Redirection">Redirection</a>:                  How to redirect output to multiple files and
                                pipes. 
<li><a accesskey="7" href="#Special-Files">Special Files</a>:                File name interpretation in <samp><span class="command">gawk</span></samp>. 
                                <samp><span class="command">gawk</span></samp> allows access to inherited file
                                descriptors. 
<li><a accesskey="8" href="#Close-Files-And-Pipes">Close Files And Pipes</a>:        Closing Input and Output Files and Pipes. 
</ul>

<div class="node">
<a name="Print"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Print-Examples">Print Examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printing">Printing</a>

</div>

<h3 class="section">5.1 The <code>print</code> Statement</h3>

<p>The <code>print</code> statement is used for producing output with simple, standardized
formatting.  Specify only the strings or numbers to print, in a
list separated by commas.  They are output, separated by single spaces,
followed by a newline.  The statement looks like this:

<pre class="example">     print <var>item1</var>, <var>item2</var>, ...
</pre>
   <p class="noindent">The entire list of items may be optionally enclosed in parentheses.  The
parentheses are necessary if any of the item expressions uses the &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo;
relational operator; otherwise it could be confused with an output redirection
(see <a href="#Redirection">Redirection</a>).

   <p>The items to print can be constant strings or numbers, fields of the
current record (such as <code>$1</code>), variables, or any <samp><span class="command">awk</span></samp>
expression.  Numeric values are converted to strings and then printed.

   <p><a name="index-records_002c-printing-665"></a><a name="index-lines_002c-blank_002c-printing-666"></a><a name="index-text_002c-printing-667"></a>The simple statement &lsquo;<samp><span class="samp">print</span></samp>&rsquo; with no items is equivalent to
&lsquo;<samp><span class="samp">print $0</span></samp>&rsquo;: it prints the entire current record.  To print a blank
line, use &lsquo;<samp><span class="samp">print ""</span></samp>&rsquo;, where <code>""</code> is the empty string. 
To print a fixed piece of text, use a string constant, such as
<code>"Don't&nbsp;Panic"</code><!-- /@w -->, as one item.  If you forget to use the
double-quote characters, your text is taken as an <samp><span class="command">awk</span></samp>
expression, and you will probably get an error.  Keep in mind that a
space is printed between any two items.

<div class="node">
<a name="Print-Examples"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Output-Separators">Output Separators</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Print">Print</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printing">Printing</a>

</div>

<h3 class="section">5.2 <code>print</code> Statement Examples</h3>

<p>Each <code>print</code> statement makes at least one line of output.  However, it
isn't limited to only one line.  If an item value is a string containing a
newline, the newline is output along with the rest of the string.  A
single <code>print</code> statement can make any number of lines this way.

   <p><a name="index-newlines_002c-printing-668"></a>The following is an example of printing a string that contains embedded newlines
(the &lsquo;<samp><span class="samp">\n</span></samp>&rsquo; is an escape sequence, used to represent the newline
character; see <a href="#Escape-Sequences">Escape Sequences</a>):

<pre class="example">     $ <kbd>awk 'BEGIN { print "line one\nline two\nline three" }'</kbd>
     -| line one
     -| line two
     -| line three
</pre>
   <p><a name="index-fields_002c-printing-669"></a>The next example, which is run on the <samp><span class="file">inventory-shipped</span></samp> file,
prints the first two fields of each input record, with a space between
them:

<pre class="example">     $ <kbd>awk '{ print $1, $2 }' inventory-shipped</kbd>
     -| Jan 13
     -| Feb 15
     -| Mar 15
     ...
</pre>
   <p><a name="index-g_t_0040code_007bprint_007d-statement_002c-commas_002c-omitting-670"></a><a name="index-troubleshooting_002c-_0040code_007bprint_007d-statement_0040comma_007b_007d-omitting-commas-671"></a>A common mistake in using the <code>print</code> statement is to omit the comma
between two items.  This often has the effect of making the items run
together in the output, with no space.  The reason for this is that
juxtaposing two string expressions in <samp><span class="command">awk</span></samp> means to concatenate
them.  Here is the same program, without the comma:

<pre class="example">     $ <kbd>awk '{ print $1 $2 }' inventory-shipped</kbd>
     -| Jan13
     -| Feb15
     -| Mar15
     ...
</pre>
   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-headings_0040comma_007b_007d-adding-672"></a>To someone unfamiliar with the <samp><span class="file">inventory-shipped</span></samp> file, neither
example's output makes much sense.  A heading line at the beginning
would make it clearer.  Let's add some headings to our table of months
(<code>$1</code>) and green crates shipped (<code>$2</code>).  We do this using the
<code>BEGIN</code> pattern
(see <a href="#BEGIN_002fEND">BEGIN/END</a>)
so that the headings are only printed once:

<pre class="example">     awk 'BEGIN {  print "Month Crates"
                   print "----- ------" }
                {  print $1, $2 }' inventory-shipped
</pre>
   <p class="noindent">When run, the program prints the following:

<pre class="example">     Month Crates
     ----- ------
     Jan 13
     Feb 15
     Mar 15
     ...
</pre>
   <p class="noindent">The only problem, however, is that the headings and the table data
don't line up!  We can fix this by printing some spaces between the
two fields:

<pre class="example">     awk 'BEGIN { print "Month Crates"
                  print "----- ------" }
                { print $1, "     ", $2 }' inventory-shipped
</pre>
   <p><a name="index-g_t_0040code_007bprintf_007d-statement_002c-columns_0040comma_007b_007d-aligning-673"></a><a name="index-columns_002c-aligning-674"></a>Lining up columns this way can get pretty
complicated when there are many columns to fix.  Counting spaces for two
or three columns is simple, but any more than this can take up
a lot of time. This is why the <code>printf</code> statement was
created (see <a href="#Printf">Printf</a>);
one of its specialties is lining up columns of data.

   <p><a name="index-line-continuations_002c-in-_0040code_007bprint_007d-statement-675"></a><a name="index-g_t_0040code_007bprint_007d-statement_002c-line-continuations-and-676"></a><blockquote>
<b>NOTE:</b> You can continue either a <code>print</code> or
<code>printf</code> statement simply by putting a newline after any comma
(see <a href="#Statements_002fLines">Statements/Lines</a>). 
</blockquote>
   <!-- ENDOFRANGE prnts -->

<div class="node">
<a name="Output-Separators"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#OFMT">OFMT</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Print-Examples">Print Examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printing">Printing</a>

</div>

<h3 class="section">5.3 Output Separators</h3>

<p><a name="index-g_t_0040code_007bOFS_007d-variable-677"></a>As mentioned previously, a <code>print</code> statement contains a list
of items separated by commas.  In the output, the items are normally
separated by single spaces.  However, this doesn't need to be the case;
a single space is simply the default.  Any string of
characters may be used as the <dfn>output field separator</dfn> by setting the
built-in variable <code>OFS</code>.  The initial value of this variable
is the string <code>"&nbsp;"</code><!-- /@w -->&mdash;that is, a single space.

   <p>The output from an entire <code>print</code> statement is called an
<dfn>output record</dfn>.  Each <code>print</code> statement outputs one output
record, and then outputs a string called the <dfn>output record separator</dfn>
(or <code>ORS</code>).  The initial
value of <code>ORS</code> is the string <code>"\n"</code>; i.e., a newline
character.  Thus, each <code>print</code> statement normally makes a separate line.

   <p><a name="index-output_002c-records-678"></a><a name="index-output-record-separator_002c-See-_0040code_007bORS_007d-variable-679"></a><a name="index-g_t_0040code_007bORS_007d-variable-680"></a><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bOFS_007d_002f_0040code_007bORS_007d-variables_002c-assigning-values-to-681"></a>In order to change how output fields and records are separated, assign
new values to the variables <code>OFS</code> and <code>ORS</code>.  The usual
place to do this is in the <code>BEGIN</code> rule
(see <a href="#BEGIN_002fEND">BEGIN/END</a>), so
that it happens before any input is processed.  It can also be done
with assignments on the command line, before the names of the input
files, or using the <samp><span class="option">-v</span></samp> command-line option
(see <a href="#Options">Options</a>). 
The following example prints the first and second fields of each input
record, separated by a semicolon, with a blank line added after each
newline:

<pre class="example">     $ <kbd>awk 'BEGIN { OFS = ";"; ORS = "\n\n" }</kbd>
     &gt;            <kbd>{ print $1, $2 }' BBS-list</kbd>
     -| aardvark;555-5553
     -|
     -| alpo-net;555-3412
     -|
     -| barfly;555-7685
     ...
</pre>
   <p>If the value of <code>ORS</code> does not contain a newline, the program's output
runs together on a single line.

<div class="node">
<a name="OFMT"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Printf">Printf</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Output-Separators">Output Separators</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printing">Printing</a>

</div>

<h3 class="section">5.4 Controlling Numeric Output with <code>print</code></h3>

<p><a name="index-numeric_002c-output-format-682"></a><a name="index-formats_0040comma_007b_007d-numeric-output-683"></a>When printing numeric values with the <code>print</code> statement,
<samp><span class="command">awk</span></samp> internally converts the number to a string of characters
and prints that string.  <samp><span class="command">awk</span></samp> uses the <code>sprintf()</code> function
to do this conversion
(see <a href="#String-Functions">String Functions</a>). 
For now, it suffices to say that the <code>sprintf()</code>
function accepts a <dfn>format specification</dfn> that tells it how to format
numbers (or strings), and that there are a number of different ways in which
numbers can be formatted.  The different format specifications are discussed
more fully in
<a href="#Control-Letters">Control Letters</a>.

   <p><a name="index-g_t_0040code_007bsprintf_0028_0029_007d-function-684"></a><a name="index-g_t_0040code_007bOFMT_007d-variable-685"></a><a name="index-output_002c-format-specifier_0040comma_007b_007d-_0040code_007bOFMT_007d-686"></a>The built-in variable <code>OFMT</code> contains the default format specification
that <code>print</code> uses with <code>sprintf()</code> when it wants to convert a
number to a string for printing. 
The default value of <code>OFMT</code> is <code>"%.6g"</code>. 
The way <code>print</code> prints numbers can be changed
by supplying different format specifications
as the value of <code>OFMT</code>, as shown in the following example:

<pre class="example">     $ <kbd>awk 'BEGIN {</kbd>
     &gt;   <kbd>OFMT = "%.0f"  # print numbers as integers (rounds)</kbd>
     &gt;   <kbd>print 17.23, 17.54 }'</kbd>
     -| 17 18
</pre>
   <p class="noindent"><a name="index-dark-corner_002c-_0040code_007bOFMT_007d-variable-687"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bOFMT_007d-variable-and-688"></a><a name="index-g_t_0040code_007bOFMT_007d-variable_002c-POSIX-_0040command_007bawk_007d-and-689"></a>According to the POSIX standard, <samp><span class="command">awk</span></samp>'s behavior is undefined
if <code>OFMT</code> contains anything but a floating-point conversion specification. 
(d.c.)

<div class="node">
<a name="Printf"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Redirection">Redirection</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#OFMT">OFMT</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printing">Printing</a>

</div>

<h3 class="section">5.5 Using <code>printf</code> Statements for Fancier Printing</h3>

<!-- STARTOFRANGE printfs -->
<p><a name="index-g_t_0040code_007bprintf_007d-statement-690"></a><a name="index-output_002c-formatted-691"></a><a name="index-formatting-output-692"></a>For more precise control over the output format than what is
provided by <code>print</code>, use <code>printf</code>. 
With <code>printf</code> you can
specify the width to use for each item, as well as various
formatting choices for numbers (such as what output base to use, whether to
print an exponent, whether to print a sign, and how many digits to print
after the decimal point).  You do this by supplying a string, called
the <dfn>format string</dfn>, that controls how and where to print the other
arguments.

<ul class="menu">
<li><a accesskey="1" href="#Basic-Printf">Basic Printf</a>:                 Syntax of the <code>printf</code> statement. 
<li><a accesskey="2" href="#Control-Letters">Control Letters</a>:              Format-control letters. 
<li><a accesskey="3" href="#Format-Modifiers">Format Modifiers</a>:             Format-specification modifiers. 
<li><a accesskey="4" href="#Printf-Examples">Printf Examples</a>:              Several examples. 
</ul>

<div class="node">
<a name="Basic-Printf"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Control-Letters">Control Letters</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printf">Printf</a>

</div>

<h4 class="subsection">5.5.1 Introduction to the <code>printf</code> Statement</h4>

<p><a name="index-g_t_0040code_007bprintf_007d-statement_002c-syntax-of-693"></a>A simple <code>printf</code> statement looks like this:

<pre class="example">     printf <var>format</var>, <var>item1</var>, <var>item2</var>, ...
</pre>
   <p class="noindent">The entire list of arguments may optionally be enclosed in parentheses.  The
parentheses are necessary if any of the item expressions use the &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo;
relational operator; otherwise, it can be confused with an output redirection
(see <a href="#Redirection">Redirection</a>).

   <p><a name="index-format-strings-694"></a>The difference between <code>printf</code> and <code>print</code> is the <var>format</var>
argument.  This is an expression whose value is taken as a string; it
specifies how to output each of the other arguments.  It is called the
<dfn>format string</dfn>.

   <p>The format string is very similar to that in the ISO C library function
<code>printf()</code>.  Most of <var>format</var> is text to output verbatim. 
Scattered among this text are <dfn>format specifiers</dfn>&mdash;one per item. 
Each format specifier says to output the next item in the argument list
at that place in the format.

   <p>The <code>printf</code> statement does not automatically append a newline
to its output.  It outputs only what the format string specifies. 
So if a newline is needed, you must include one in the format string. 
The output separator variables <code>OFS</code> and <code>ORS</code> have no effect
on <code>printf</code> statements. For example:

<pre class="example">     $ <kbd>awk 'BEGIN {</kbd>
     &gt;    <kbd>ORS = "\nOUCH!\n"; OFS = "+"</kbd>
     &gt;    <kbd>msg = "Dont Panic!"</kbd>
     &gt;    <kbd>printf "%s\n", msg</kbd>
     &gt; <kbd>}'</kbd>
     -| Dont Panic!
</pre>
   <p class="noindent">Here, neither the &lsquo;<samp><span class="samp">+</span></samp>&rsquo; nor the &lsquo;<samp><span class="samp">OUCH</span></samp>&rsquo; appear in
the output message.

<div class="node">
<a name="Control-Letters"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Format-Modifiers">Format Modifiers</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basic-Printf">Basic Printf</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printf">Printf</a>

</div>

<h4 class="subsection">5.5.2 Format-Control Letters</h4>

<p><a name="index-g_t_0040code_007bprintf_007d-statement_002c-format_002dcontrol-characters-695"></a><a name="index-format-specifiers_002c-_0040code_007bprintf_007d-statement-696"></a>
A format specifier starts with the character &lsquo;<samp><span class="samp">%</span></samp>&rsquo; and ends with
a <dfn>format-control letter</dfn>&mdash;it tells the <code>printf</code> statement
how to output one item.  The format-control letter specifies what <em>kind</em>
of value to print.  The rest of the format specifier is made up of
optional <dfn>modifiers</dfn> that control <em>how</em> to print the value, such as
the field width.  Here is a list of the format-control letters:

     <dl>
<dt><code>%c</code><dd>Print a number as an ASCII character; thus, &lsquo;<samp><span class="samp">printf "%c",
65</span></samp>&rsquo; outputs the letter &lsquo;<samp><span class="samp">A</span></samp>&rsquo;. The output for a string value is
the first character of the string.

     <p><a name="index-dark-corner_002c-format_002dcontrol-characters-697"></a><a name="index-g_t_0040command_007bgawk_007d_002c-format_002dcontrol-characters-698"></a><blockquote>
<b>NOTE:</b> The POSIX standard says the first character of a string is printed. 
In locales with multibyte characters, <samp><span class="command">gawk</span></samp> attempts to
convert the leading bytes of the string into a valid wide character
and then to print the multibyte encoding of that character. 
Similarly, when printing a numeric value, <samp><span class="command">gawk</span></samp> allows the
value to be within the numeric range of values that can be held
in a wide character.

     <p>Other <samp><span class="command">awk</span></samp> versions generally restrict themselves to printing
the first byte of a string or to numeric values within the range of
a single byte (0&ndash;255). 
</blockquote>

     <br><dt><code>%d</code><span class="roman">,</span><code> %i</code><dd>Print a decimal integer. 
The two control letters are equivalent. 
(The &lsquo;<samp><span class="samp">%i</span></samp>&rsquo; specification is for compatibility with ISO C.)

     <br><dt><code>%e</code><span class="roman">,</span><code> %E</code><dd>Print a number in scientific (exponential) notation;
for example:

     <pre class="example">          printf "%4.3e\n", 1950
</pre>
     <p class="noindent">prints &lsquo;<samp><span class="samp">1.950e+03</span></samp>&rsquo;, with a total of four significant figures, three of
which follow the decimal point. 
(The &lsquo;<samp><span class="samp">4.3</span></samp>&rsquo; represents two modifiers,
discussed in the next subsection.) 
&lsquo;<samp><span class="samp">%E</span></samp>&rsquo; uses &lsquo;<samp><span class="samp">E</span></samp>&rsquo; instead of &lsquo;<samp><span class="samp">e</span></samp>&rsquo; in the output.

     <br><dt><code>%f</code><dd>Print a number in floating-point notation. 
For example:

     <pre class="example">          printf "%4.3f", 1950
</pre>
     <p class="noindent">prints &lsquo;<samp><span class="samp">1950.000</span></samp>&rsquo;, with a total of four significant figures, three of
which follow the decimal point. 
(The &lsquo;<samp><span class="samp">4.3</span></samp>&rsquo; represents two modifiers,
discussed in the next subsection.)

     <p>On systems supporting IEEE 754 floating point format, values
representing negative
infinity are formatted as
&lsquo;<samp><span class="samp">-inf</span></samp>&rsquo; or &lsquo;<samp><span class="samp">-infinity</span></samp>&rsquo;,
and positive infinity as
&lsquo;<samp><span class="samp">inf</span></samp>&rsquo; and &lsquo;<samp><span class="samp">infinity</span></samp>&rsquo;. 
The special &ldquo;not a number&rdquo; value formats as &lsquo;<samp><span class="samp">-nan</span></samp>&rsquo; or &lsquo;<samp><span class="samp">nan</span></samp>&rsquo;.

     <br><dt><code>%F</code><dd>Like &lsquo;<samp><span class="samp">%f</span></samp>&rsquo; but the infinity and &ldquo;not a number&rdquo; values are spelled
using uppercase letters.

     <p>The &lsquo;<samp><span class="samp">%F</span></samp>&rsquo; format is a POSIX extension to ISO C; not all systems
support it.  On those that don't, <samp><span class="command">gawk</span></samp> uses &lsquo;<samp><span class="samp">%f</span></samp>&rsquo; instead.

     <br><dt><code>%g</code><span class="roman">,</span><code> %G</code><dd>Print a number in either scientific notation or in floating-point
notation, whichever uses fewer characters; if the result is printed in
scientific notation, &lsquo;<samp><span class="samp">%G</span></samp>&rsquo; uses &lsquo;<samp><span class="samp">E</span></samp>&rsquo; instead of &lsquo;<samp><span class="samp">e</span></samp>&rsquo;.

     <br><dt><code>%o</code><dd>Print an unsigned octal integer
(see <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>).

     <br><dt><code>%s</code><dd>Print a string.

     <br><dt><code>%u</code><dd>Print an unsigned decimal integer. 
(This format is of marginal use, because all numbers in <samp><span class="command">awk</span></samp>
are floating-point; it is provided primarily for compatibility with C.)

     <br><dt><code>%x</code><span class="roman">,</span><code> %X</code><dd>Print an unsigned hexadecimal integer;
&lsquo;<samp><span class="samp">%X</span></samp>&rsquo; uses the letters &lsquo;<samp><span class="samp">A</span></samp>&rsquo; through &lsquo;<samp><span class="samp">F</span></samp>&rsquo;
instead of &lsquo;<samp><span class="samp">a</span></samp>&rsquo; through &lsquo;<samp><span class="samp">f</span></samp>&rsquo;
(see <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>).

     <br><dt><code>%%</code><dd>Print a single &lsquo;<samp><span class="samp">%</span></samp>&rsquo;. 
This does not consume an
argument and it ignores any modifiers. 
</dl>

   <p><a name="index-dark-corner_002c-format_002dcontrol-characters-699"></a><a name="index-g_t_0040command_007bgawk_007d_002c-format_002dcontrol-characters-700"></a><blockquote>
<b>NOTE:</b> When using the integer format-control letters for values that are
outside the range of the widest C integer type, <samp><span class="command">gawk</span></samp> switches to
the &lsquo;<samp><span class="samp">%g</span></samp>&rsquo; format specifier. If <samp><span class="option">--lint</span></samp> is provided on the
command line (see <a href="#Options">Options</a>), <samp><span class="command">gawk</span></samp>
warns about this.  Other versions of <samp><span class="command">awk</span></samp> may print invalid
values or do something else entirely. 
(d.c.) 
</blockquote>

<div class="node">
<a name="Format-Modifiers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Printf-Examples">Printf Examples</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Control-Letters">Control Letters</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printf">Printf</a>

</div>

<h4 class="subsection">5.5.3 Modifiers for <code>printf</code> Formats</h4>

<!-- STARTOFRANGE pfm -->
<p><a name="index-g_t_0040code_007bprintf_007d-statement_002c-modifiers-701"></a><a name="index-modifiers_0040comma_007b_007d-in-format-specifiers-702"></a>A format specification can also include <dfn>modifiers</dfn> that can control
how much of the item's value is printed, as well as how much space it gets. 
The modifiers come between the &lsquo;<samp><span class="samp">%</span></samp>&rsquo; and the format-control letter. 
We will use the bullet symbol &ldquo;&bull;&rdquo; in the following examples to
represent
spaces in the output. Here are the possible modifiers, in the order in
which they may appear:

     
<a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bprint_007d_002f_0040code_007bprintf_007d-statements-703"></a>
<a name="index-g_t_0040code_007bprintf_007d-statement_002c-positional-specifiers-704"></a>
<dl><!-- the command does NOT start a secondary -->
<a name="index-positional-specifiers_002c-_0040code_007bprintf_007d-statement-705"></a><dt><var>N</var><code>$</code><dd>An integer constant followed by a &lsquo;<samp><span class="samp">$</span></samp>&rsquo; is a <dfn>positional specifier</dfn>. 
Normally, format specifications are applied to arguments in the order
given in the format string.  With a positional specifier, the format
specification is applied to a specific argument, instead of what
would be the next argument in the list.  Positional specifiers begin
counting with one. Thus:

     <pre class="example">          printf "%s %s\n", "don't", "panic"
          printf "%2$s %1$s\n", "panic", "don't"
</pre>
     <p class="noindent">prints the famous friendly message twice.

     <p>At first glance, this feature doesn't seem to be of much use. 
It is in fact a <samp><span class="command">gawk</span></samp> extension, intended for use in translating
messages at runtime. 
See <a href="#Printf-Ordering">Printf Ordering</a>,
which describes how and why to use positional specifiers. 
For now, we will not use them.

     <br><dt><code>-</code><dd>The minus sign, used before the width modifier (see later on in
this list),
says to left-justify
the argument within its specified width.  Normally, the argument
is printed right-justified in the specified width.  Thus:

     <pre class="example">          printf "%-4s", "foo"
</pre>
     <p class="noindent">prints &lsquo;<samp><span class="samp">foo&bull;</span></samp>&rsquo;.

     <br><dt><var>space</var><dd>For numeric conversions, prefix positive values with a space and
negative values with a minus sign.

     <br><dt><code>+</code><dd>The plus sign, used before the width modifier (see later on in
this list),
says to always supply a sign for numeric conversions, even if the data
to format is positive. The &lsquo;<samp><span class="samp">+</span></samp>&rsquo; overrides the space modifier.

     <br><dt><code>#</code><dd>Use an &ldquo;alternate form&rdquo; for certain control letters. 
For &lsquo;<samp><span class="samp">%o</span></samp>&rsquo;, supply a leading zero. 
For &lsquo;<samp><span class="samp">%x</span></samp>&rsquo; and &lsquo;<samp><span class="samp">%X</span></samp>&rsquo;, supply a leading &lsquo;<samp><span class="samp">0x</span></samp>&rsquo; or &lsquo;<samp><span class="samp">0X</span></samp>&rsquo; for
a nonzero result. 
For &lsquo;<samp><span class="samp">%e</span></samp>&rsquo;, &lsquo;<samp><span class="samp">%E</span></samp>&rsquo;, &lsquo;<samp><span class="samp">%f</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">%F</span></samp>&rsquo;, the result always
contains a decimal point. 
For &lsquo;<samp><span class="samp">%g</span></samp>&rsquo; and &lsquo;<samp><span class="samp">%G</span></samp>&rsquo;, trailing zeros are not removed from the result.

     <br><dt><code>0</code><dd>A leading &lsquo;<samp><span class="samp">0</span></samp>&rsquo; (zero) acts as a flag that indicates that output should be
padded with zeros instead of spaces. 
This applies only to the numeric output formats. 
This flag only has an effect when the field width is wider than the
value to print.

     <br><dt><code>'</code><dd>A single quote or apostrophe character is a POSIX extension to ISO C. 
It indicates that the integer part of a floating point value, or the
entire part of an integer decimal value, should have a thousands-separator
character in it.  This only works in locales that support such characters. 
For example:

     <pre class="example">          $ <kbd>cat thousands.awk</kbd>          <i>Show source program</i>
          -| BEGIN { printf "%'d\n", 1234567 }
          $ <kbd>LC_ALL=C gawk -f thousands.awk</kbd>
          -| 1234567                   <i>Results in "C" locale</i>
          $ <kbd>LC_ALL=en_US.UTF-8 gawk -f thousands.awk</kbd>
          -| 1,234,567                 <i>Results in US English UTF locale</i>
</pre>
     <p class="noindent">For more information about locales and internationalization issues,
see <a href="#Locales">Locales</a>.

     <blockquote>
<b>NOTE:</b> The &lsquo;<samp><span class="samp">'</span></samp>&rsquo; flag is a nice feature, but its use complicates things: it
becomes difficult to use it in command-line programs.  For information
on appropriate quoting tricks, see <a href="#Quoting">Quoting</a>. 
</blockquote>

     <br><dt><var>width</var><dd>This is a number specifying the desired minimum width of a field.  Inserting any
number between the &lsquo;<samp><span class="samp">%</span></samp>&rsquo; sign and the format-control character forces the
field to expand to this width.  The default way to do this is to
pad with spaces on the left.  For example:

     <pre class="example">          printf "%4s", "foo"
</pre>
     <p class="noindent">prints &lsquo;<samp><span class="samp">&bull;foo</span></samp>&rsquo;.

     <p>The value of <var>width</var> is a minimum width, not a maximum.  If the item
value requires more than <var>width</var> characters, it can be as wide as
necessary.  Thus, the following:

     <pre class="example">          printf "%4s", "foobar"
</pre>
     <p class="noindent">prints &lsquo;<samp><span class="samp">foobar</span></samp>&rsquo;.

     <p>Preceding the <var>width</var> with a minus sign causes the output to be
padded with spaces on the right, instead of on the left.

     <br><dt><code>.</code><var>prec</var><dd>A period followed by an integer constant
specifies the precision to use when printing. 
The meaning of the precision varies by control letter:

          <dl>
<dt><code>%d</code>, <code>%i</code>, <code>%o</code>, <code>%u</code>, <code>%x</code>, <code>%X</code><dd>Minimum number of digits to print.

          <br><dt><code>%e</code>, <code>%E</code>, <code>%f</code>, <code>%F</code><dd>Number of digits to the right of the decimal point.

          <br><dt><code>%g</code>, <code>%G</code><dd>Maximum number of significant digits.

          <br><dt><code>%s</code><dd>Maximum number of characters from the string that should print. 
</dl>

     <p>Thus, the following:

     <pre class="example">          printf "%.4s", "foobar"
</pre>
     <p class="noindent">prints &lsquo;<samp><span class="samp">foob</span></samp>&rsquo;. 
</dl>

   <p>The C library <code>printf</code>'s dynamic <var>width</var> and <var>prec</var>
capability (for example, <code>"%*.*s"</code>) is supported.  Instead of
supplying explicit <var>width</var> and/or <var>prec</var> values in the format
string, they are passed in the argument list.  For example:

<pre class="example">     w = 5
     p = 3
     s = "abcdefg"
     printf "%*.*s\n", w, p, s
</pre>
   <p class="noindent">is exactly equivalent to:

<pre class="example">     s = "abcdefg"
     printf "%5.3s\n", s
</pre>
   <p class="noindent">Both programs output &lsquo;<samp><span class="samp">&bull;&bull;abc<!-- /@w --></span></samp>&rsquo;. 
Earlier versions of <samp><span class="command">awk</span></samp> did not support this capability. 
If you must use such a version, you may simulate this feature by using
concatenation to build up the format string, like so:

<pre class="example">     w = 5
     p = 3
     s = "abcdefg"
     printf "%" w "." p "s\n", s
</pre>
   <p class="noindent">This is not particularly easy to read but it does work.

<!-- @cindex lint checks -->
   <p><a name="index-troubleshooting_002c-fatal-errors_002c-_0040code_007bprintf_007d-format-strings-706"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bprintf_007d-format-strings-and-707"></a>C programmers may be used to supplying additional
&lsquo;<samp><span class="samp">l</span></samp>&rsquo;, &lsquo;<samp><span class="samp">L</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">h</span></samp>&rsquo;
modifiers in <code>printf</code> format strings. These are not valid in <samp><span class="command">awk</span></samp>. 
Most <samp><span class="command">awk</span></samp> implementations silently ignore them. 
If <samp><span class="option">--lint</span></samp> is provided on the command line
(see <a href="#Options">Options</a>),
<samp><span class="command">gawk</span></samp> warns about their use. If <samp><span class="option">--posix</span></samp> is supplied,
their use is a fatal error. 
<!-- ENDOFRANGE pfm -->

<div class="node">
<a name="Printf-Examples"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Format-Modifiers">Format Modifiers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printf">Printf</a>

</div>

<h4 class="subsection">5.5.4 Examples Using <code>printf</code></h4>

<p>The following simple example shows
how to use <code>printf</code> to make an aligned table:

<pre class="example">     awk '{ printf "%-10s %s\n", $1, $2 }' BBS-list
</pre>
   <p class="noindent">This command
prints the names of the bulletin boards (<code>$1</code>) in the file
<samp><span class="file">BBS-list</span></samp> as a string of 10 characters that are left-justified.  It also
prints the phone numbers (<code>$2</code>) next on the line.  This
produces an aligned two-column table of names and phone numbers,
as shown here:

<pre class="example">     $ <kbd>awk '{ printf "%-10s %s\n", $1, $2 }' BBS-list</kbd>
     -| aardvark   555-5553
     -| alpo-net   555-3412
     -| barfly     555-7685
     -| bites      555-1675
     -| camelot    555-0542
     -| core       555-2912
     -| fooey      555-1234
     -| foot       555-6699
     -| macfoo     555-6480
     -| sdace      555-3430
     -| sabafoo    555-2127
</pre>
   <p>In this case, the phone numbers had to be printed as strings because
the numbers are separated by a dash.  Printing the phone numbers as
numbers would have produced just the first three digits: &lsquo;<samp><span class="samp">555</span></samp>&rsquo;. 
This would have been pretty confusing.

   <p>It wasn't necessary to specify a width for the phone numbers because
they are last on their lines.  They don't need to have spaces
after them.

   <p>The table could be made to look even nicer by adding headings to the
tops of the columns.  This is done using the <code>BEGIN</code> pattern
(see <a href="#BEGIN_002fEND">BEGIN/END</a>)
so that the headers are only printed once, at the beginning of
the <samp><span class="command">awk</span></samp> program:

<pre class="example">     awk 'BEGIN { print "Name      Number"
                  print "----      ------" }
          { printf "%-10s %s\n", $1, $2 }' BBS-list
</pre>
   <p>The above example mixes <code>print</code> and <code>printf</code> statements in
the same program.  Using just <code>printf</code> statements can produce the
same results:

<pre class="example">     awk 'BEGIN { printf "%-10s %s\n", "Name", "Number"
                  printf "%-10s %s\n", "----", "------" }
          { printf "%-10s %s\n", $1, $2 }' BBS-list
</pre>
   <p class="noindent">Printing each column heading with the same format specification
used for the column elements ensures that the headings
are aligned just like the columns.

   <p>The fact that the same format specification is used three times can be
emphasized by storing it in a variable, like this:

<pre class="example">     awk 'BEGIN { format = "%-10s %s\n"
                  printf format, "Name", "Number"
                  printf format, "----", "------" }
          { printf format, $1, $2 }' BBS-list
</pre>
   <!-- !!! exercise -->
   <p>At this point, it would be a worthwhile exercise to use the
<code>printf</code> statement to line up the headings and table data for the
<samp><span class="file">inventory-shipped</span></samp> example that was covered earlier in the section
on the <code>print</code> statement
(see <a href="#Print">Print</a>). 
<!-- ENDOFRANGE printfs -->

<div class="node">
<a name="Redirection"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Special-Files">Special Files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Printf">Printf</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printing">Printing</a>

</div>

<h3 class="section">5.6 Redirecting Output of <code>print</code> and <code>printf</code></h3>

<p><a name="index-output-redirection-708"></a><a name="index-redirection-of-output-709"></a><a name="index-g_t_0040code_007b_002d_002dsandbox_007d-option_002c-output-redirection-with-_0040code_007bprint_007d_002c-_0040code_007bprintf_007d-710"></a>So far, the output from <code>print</code> and <code>printf</code> has gone
to the standard
output, usually the screen.  Both <code>print</code> and <code>printf</code> can
also send their output to other places. 
This is called <dfn>redirection</dfn>.

   <blockquote>
<b>NOTE:</b> When <samp><span class="option">--sandbox</span></samp> is specified (see <a href="#Options">Options</a>),
redirecting output to files and pipes is disabled. 
</blockquote>

   <p>A redirection appears after the <code>print</code> or <code>printf</code> statement. 
Redirections in <samp><span class="command">awk</span></samp> are written just like redirections in shell
commands, except that they are written inside the <samp><span class="command">awk</span></samp> program.

<!-- the commas here are part of the see also -->
   <p><a name="index-g_t_0040code_007bprint_007d-statement_002c-See-Also-redirection_002c-of-output-711"></a><a name="index-g_t_0040code_007bprintf_007d-statement_002c-See-Also-redirection_002c-of-output-712"></a>There are four forms of output redirection: output to a file, output
appended to a file, output through a pipe to another command, and output
to a coprocess.  They are all shown for the <code>print</code> statement,
but they work identically for <code>printf</code>:

     
<a name="index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_007d-operator-_0028I_002fO_0029-713"></a>
<a name="index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_007d-operator-_0028I_002fO_0029-714"></a>
<a name="index-operators_002c-input_002foutput-715"></a>
<dl><dt><code>print </code><var>items</var><code> &gt; </code><var>output-file</var><dd>This redirection prints the items into the output file named
<var>output-file</var>.  The file name <var>output-file</var> can be any
expression.  Its value is changed to a string and then used as a
file name (see <a href="#Expressions">Expressions</a>).

     <p>When this type of redirection is used, the <var>output-file</var> is erased
before the first output is written to it.  Subsequent writes to the same
<var>output-file</var> do not erase <var>output-file</var>, but append to it. 
(This is different from how you use redirections in shell scripts.) 
If <var>output-file</var> does not exist, it is created.  For example, here
is how an <samp><span class="command">awk</span></samp> program can write a list of BBS names to one
file named <samp><span class="file">name-list</span></samp>, and a list of phone numbers to another file
named <samp><span class="file">phone-list</span></samp>:

     <pre class="example">          $ <kbd>awk '{ print $2 &gt; "phone-list"</kbd>
          &gt;        <kbd>print $1 &gt; "name-list" }' BBS-list</kbd>
          $ <kbd>cat phone-list</kbd>
          -| 555-5553
          -| 555-3412
          ...
          $ <kbd>cat name-list</kbd>
          -| aardvark
          -| alpo-net
          ...
</pre>
     <p class="noindent">Each output file contains one name or number per line.

     <p><a name="index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_003e_007d-operator-_0028I_002fO_0029-716"></a><a name="index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_003e_007d-operator-_0028I_002fO_0029-717"></a><br><dt><code>print </code><var>items</var><code> &gt;&gt; </code><var>output-file</var><dd>This redirection prints the items into the pre-existing output file
named <var>output-file</var>.  The difference between this and the
single-&lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo; redirection is that the old contents (if any) of
<var>output-file</var> are not erased.  Instead, the <samp><span class="command">awk</span></samp> output is
appended to the file. 
If <var>output-file</var> does not exist, then it is created.

     <p><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_007d-operator-_0028I_002fO_0029-718"></a><a name="index-pipes_002c-output-719"></a><a name="index-output_002c-pipes-720"></a><br><dt><code>print </code><var>items</var><code> | </code><var>command</var><dd>It is possible to send output to another program through a pipe
instead of into a file.   This redirection opens a pipe to
<var>command</var>, and writes the values of <var>items</var> through this pipe
to another process created to execute <var>command</var>.

     <p>The redirection argument <var>command</var> is actually an <samp><span class="command">awk</span></samp>
expression.  Its value is converted to a string whose contents give
the shell command to be run.  For example, the following produces two
files, one unsorted list of BBS names, and one list sorted in reverse
alphabetical order:

     <pre class="example">          awk '{ print $1 &gt; "names.unsorted"
                 command = "sort -r &gt; names.sorted"
                 print $1 | command }' BBS-list
</pre>
     <p>The unsorted list is written with an ordinary redirection, while
the sorted list is written by piping through the <samp><span class="command">sort</span></samp> utility.

     <p>The next example uses redirection to mail a message to the mailing
list &lsquo;<samp><span class="samp">bug-system</span></samp>&rsquo;.  This might be useful when trouble is encountered
in an <samp><span class="command">awk</span></samp> script run periodically for system maintenance:

     <pre class="example">          report = "mail bug-system"
          print "Awk script failed:", $0 | report
          m = ("at record number " FNR " of " FILENAME)
          print m | report
          close(report)
</pre>
     <p>The message is built using string concatenation and saved in the variable
<code>m</code>.  It's then sent down the pipeline to the <samp><span class="command">mail</span></samp> program. 
(The parentheses group the items to concatenate&mdash;see
<a href="#Concatenation">Concatenation</a>.)

     <p>The <code>close()</code> function is called here because it's a good idea to close
the pipe as soon as all the intended output has been sent to it. 
See <a href="#Close-Files-And-Pipes">Close Files And Pipes</a>,
for more information.

     <p>This example also illustrates the use of a variable to represent
a <var>file</var> or <var>command</var>&mdash;it is not necessary to always
use a string constant.  Using a variable is generally a good idea,
because (if you mean to refer to that same file or command)
<samp><span class="command">awk</span></samp> requires that the string value be spelled identically
every time.

     <p><a name="index-coprocesses-721"></a><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-722"></a><a name="index-operators_002c-input_002foutput-723"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-input_002foutput-operators-724"></a><br><dt><code>print </code><var>items</var><code> |&amp; </code><var>command</var><dd>This redirection prints the items to the input of <var>command</var>. 
The difference between this and the
single-&lsquo;<samp><span class="samp">|</span></samp>&rsquo; redirection is that the output from <var>command</var>
can be read with <code>getline</code>. 
Thus <var>command</var> is a <dfn>coprocess</dfn>, which works together with,
but subsidiary to, the <samp><span class="command">awk</span></samp> program.

     <p>This feature is a <samp><span class="command">gawk</span></samp> extension, and is not available in
POSIX <samp><span class="command">awk</span></samp>. 
See <a href="#Getline_002fCoprocess">Getline/Coprocess</a>,
for a brief discussion. 
See <a href="#Two_002dway-I_002fO">Two-way I/O</a>,
for a more complete discussion. 
</dl>

   <p>Redirecting output using &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">&gt;&gt;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">|</span></samp>&rsquo;, or &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo;
asks the system to open a file, pipe, or coprocess only if the particular
<var>file</var> or <var>command</var> you specify has not already been written
to by your program or if it has been closed since it was last written to.

   <p><a name="index-troubleshooting_002c-printing-725"></a>It is a common error to use &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo; redirection for the first <code>print</code>
to a file, and then to use &lsquo;<samp><span class="samp">&gt;&gt;</span></samp>&rsquo; for subsequent output:

<pre class="example">     # clear the file
     print "Don't panic" &gt; "guide.txt"
     ...
     # append
     print "Avoid improbability generators" &gt;&gt; "guide.txt"
</pre>
   <p class="noindent">This is indeed how redirections must be used from the shell.  But in
<samp><span class="command">awk</span></samp>, it isn't necessary.  In this kind of case, a program should
use &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo; for all the <code>print</code> statements, since the output file
is only opened once. (It happens that if you mix &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo; and &lsquo;<samp><span class="samp">&gt;&gt;</span></samp>&rsquo;
that output is produced in the expected order. However, mixing the operators
for the same file is definitely poor style, and is confusing to readers
of your program.)

   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-implementation-limitations-726"></a><a name="index-implementation-issues_002c-_0040command_007bgawk_007d_002c-limits-727"></a><a name="index-g_t_0040command_007bawk_007d_002c-implementation-issues_002c-pipes-728"></a><a name="index-g_t_0040command_007bgawk_007d_002c-implementation-issues_002c-pipes-729"></a>As mentioned earlier
(see <a href="#Getline-Notes">Getline Notes</a>),
many
Many
older
<samp><span class="command">awk</span></samp> implementations limit the number of pipelines that an <samp><span class="command">awk</span></samp>
program may have open to just one!  In <samp><span class="command">gawk</span></samp>, there is no such limit. 
<samp><span class="command">gawk</span></samp> allows a program to
open as many pipelines as the underlying operating system permits.

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Piping into <samp><span class="command">sh</span></samp></h4>

<p><a name="index-advanced-features_002c-piping-into-_0040command_007bsh_007d-730"></a><a name="index-shells_002c-piping-commands-into-731"></a>
A particularly powerful way to use redirection is to build command lines
and pipe them into the shell, <samp><span class="command">sh</span></samp>.  For example, suppose you
have a list of files brought over from a system where all the file names
are stored in uppercase, and you wish to rename them to have names in
all lowercase.  The following program is both simple and efficient:

<!-- @cindex @command{mv} utility -->
<pre class="example">     { printf("mv %s %s\n", $0, tolower($0)) | "sh" }
     
     END { close("sh") }
</pre>
   <p>The <code>tolower()</code> function returns its argument string with all
uppercase characters converted to lowercase
(see <a href="#String-Functions">String Functions</a>). 
The program builds up a list of command lines,
using the <samp><span class="command">mv</span></samp> utility to rename the files. 
It then sends the list to the shell for execution. 
<!-- ENDOFRANGE outre -->
<!-- ENDOFRANGE reout -->

<div class="node">
<a name="Special-Files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Close-Files-And-Pipes">Close Files And Pipes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Redirection">Redirection</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printing">Printing</a>

</div>

<h3 class="section">5.7 Special File Names in <samp><span class="command">gawk</span></samp></h3>

<!-- STARTOFRANGE gfn -->
<p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040value_007bFN_007ds-in-732"></a>
<samp><span class="command">gawk</span></samp> provides a number of special file names that it interprets
internally.  These file names provide access to standard file descriptors
and TCP/IP networking.

<ul class="menu">
<li><a accesskey="1" href="#Special-FD">Special FD</a>:                   Special files for I/O. 
<li><a accesskey="2" href="#Special-Network">Special Network</a>:              Special files for network communications. 
<li><a accesskey="3" href="#Special-Caveats">Special Caveats</a>:              Things to watch out for. 
</ul>

<div class="node">
<a name="Special-FD"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Special-Network">Special Network</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Special-Files">Special Files</a>

</div>

<h4 class="subsection">5.7.1 Special Files for Standard Descriptors</h4>

<p><a name="index-standard-input-733"></a><a name="index-input_002c-standard-734"></a><a name="index-standard-output-735"></a><a name="index-output_002c-standard-736"></a><a name="index-error-output-737"></a><a name="index-standard-error-738"></a><a name="index-file-descriptors-739"></a><a name="index-files_002c-descriptors_002c-See-file-descriptors-740"></a>
Running programs conventionally have three input and output streams
already available to them for reading and writing.  These are known as
the <dfn>standard input</dfn>, <dfn>standard output</dfn>, and <dfn>standard error
output</dfn>.  These streams are, by default, connected to your keyboard and screen, but
they are often redirected with the shell, via the &lsquo;<samp><span class="samp">&lt;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">&lt;&lt;</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">&gt;&gt;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">&gt;&amp;</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">|</span></samp>&rsquo; operators.  Standard error
is typically used for writing error messages; the reason there are two separate
streams, standard output and standard error, is so that they can be
redirected separately.

   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-error-messages-741"></a><a name="index-error-handling-742"></a>In other implementations of <samp><span class="command">awk</span></samp>, the only way to write an error
message to standard error in an <samp><span class="command">awk</span></samp> program is as follows:

<pre class="example">     print "Serious error detected!" | "cat 1&gt;&amp;2"
</pre>
   <p class="noindent">This works by opening a pipeline to a shell command that can access the
standard error stream that it inherits from the <samp><span class="command">awk</span></samp> process. 
This is far from elegant, and it is also inefficient, because it requires a
separate process.  So people writing <samp><span class="command">awk</span></samp> programs often
don't do this.  Instead, they send the error messages to the
screen, like this:

<pre class="example">     print "Serious error detected!" &gt; "/dev/tty"
</pre>
   <p class="noindent">(<samp><span class="file">/dev/tty</span></samp> is a special file supplied by the operating system
that is connected to your keyboard and screen. It represents the
&ldquo;terminal,&rdquo;<a rel="footnote" href="#fn-25" name="fnd-25"><sup>25</sup></a> which on modern systems is a keyboard
and screen, not a serial console.) 
This usually has the same effect but not always: although the
standard error stream is usually the screen, it can be redirected; when
that happens, writing to the screen is not correct.  In fact, if
<samp><span class="command">awk</span></samp> is run from a background job, it may not have a
terminal at all. 
Then opening <samp><span class="file">/dev/tty</span></samp> fails.

   <p><samp><span class="command">gawk</span></samp> provides special file names for accessing the three standard
streams. (c.e.). It also provides syntax for accessing
any other inherited open files.  If the file name matches
one of these special names when <samp><span class="command">gawk</span></samp> redirects input or output,
then it directly uses the stream that the file name stands for. 
These special file names work for all operating systems that <samp><span class="command">gawk</span></samp>
has been ported to, not just those that are POSIX-compliant:

   <p><a name="index-common-extensions_002c-_0040code_007b_002fdev_002fstdin_007d-special-file-743"></a><a name="index-common-extensions_002c-_0040code_007b_002fdev_002fstdout_007d-special-file-744"></a><a name="index-common-extensions_002c-_0040code_007b_002fdev_002fstderr_007d-special-file-745"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_002fdev_002fstdin_007d-special-file-746"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_002fdev_002fstdout_007d-special-file-747"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_002fdev_002fstderr_007d-special-file-748"></a><a name="index-g_t_0040value_007bFN_007ds_002c-standard-streams-in-_0040command_007bgawk_007d-749"></a><a name="index-g_t_0040code_007b_002fdev_002f_0040dots_007b_007d_007d-special-files-_0028_0040command_007bgawk_007d_0029-750"></a><a name="index-files_002c-_0040code_007b_002fdev_002f_0040dots_007b_007d_007d-special-files-751"></a><a name="index-g_t_0040code_007b_002fdev_002ffd_002f_0040var_007bN_007d_007d-special-files-752"></a>
     <dl>
<dt><samp><span class="file">/dev/stdin</span></samp><dd>The standard input (file descriptor 0).

     <br><dt><samp><span class="file">/dev/stdout</span></samp><dd>The standard output (file descriptor 1).

     <br><dt><samp><span class="file">/dev/stderr</span></samp><dd>The standard error output (file descriptor 2).

     <br><dt><samp><span class="file">/dev/fd/</span><var>N</var></samp><dd>The file associated with file descriptor <var>N</var>.  Such a file must
be opened by the program initiating the <samp><span class="command">awk</span></samp> execution (typically
the shell).  Unless special pains are taken in the shell from which
<samp><span class="command">gawk</span></samp> is invoked, only descriptors 0, 1, and 2 are available. 
</dl>

   <p>The file names <samp><span class="file">/dev/stdin</span></samp>, <samp><span class="file">/dev/stdout</span></samp>, and <samp><span class="file">/dev/stderr</span></samp>
are aliases for <samp><span class="file">/dev/fd/0</span></samp>, <samp><span class="file">/dev/fd/1</span></samp>, and <samp><span class="file">/dev/fd/2</span></samp>,
respectively. However, they are more self-explanatory. 
The proper way to write an error message in a <samp><span class="command">gawk</span></samp> program
is to use <samp><span class="file">/dev/stderr</span></samp>, like this:

<pre class="example">     print "Serious error detected!" &gt; "/dev/stderr"
</pre>
   <p><a name="index-troubleshooting_002c-quotes-with-_0040value_007bFN_007ds-753"></a>Note the use of quotes around the file name. 
Like any other redirection, the value must be a string. 
It is a common error to omit the quotes, which leads
to confusing results. 
<!-- Exercise: What does it do?  :-) -->

   <p>Finally, using the <code>close()</code> function on a file name of the
form <code>"/dev/fd/</code><var>N</var><code>"</code>, for file descriptor numbers
above two, will actually close the given file descriptor.

   <p>The <samp><span class="file">/dev/stdin</span></samp>, <samp><span class="file">/dev/stdout</span></samp>, and <samp><span class="file">/dev/stderr</span></samp>
special files are also recognized internally by several other
versions of <samp><span class="command">awk</span></samp>.

<div class="node">
<a name="Special-Network"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Special-Caveats">Special Caveats</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Special-FD">Special FD</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Special-Files">Special Files</a>

</div>

<h4 class="subsection">5.7.2 Special Files for Network Communications</h4>

<p><a name="index-networks_002c-support-for-754"></a><a name="index-TCP_002fIP_002c-support-for-755"></a>
<samp><span class="command">gawk</span></samp> programs
can open a two-way
TCP/IP connection, acting as either a client or a server. 
This is done using a special file name of the form:

<pre class="example">     <samp><span class="file">/</span><var>net-type</var><span class="file">/</span><var>protocol</var><span class="file">/</span><var>local-port</var><span class="file">/</span><var>remote-host</var><span class="file">/</span><var>remote-port</var></samp>
</pre>
   <p>The <var>net-type</var> is one of &lsquo;<samp><span class="samp">inet</span></samp>&rsquo;, &lsquo;<samp><span class="samp">inet4</span></samp>&rsquo; or &lsquo;<samp><span class="samp">inet6</span></samp>&rsquo;. 
The <var>protocol</var> is one of &lsquo;<samp><span class="samp">tcp</span></samp>&rsquo; or &lsquo;<samp><span class="samp">udp</span></samp>&rsquo;,
and the other fields represent the other essential pieces of information
for making a networking connection. 
These file names are used with the &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operator for communicating
with a coprocess
(see <a href="#Two_002dway-I_002fO">Two-way I/O</a>). 
This is an advanced feature, mentioned here only for completeness. 
Full discussion is delayed until
<a href="#TCP_002fIP-Networking">TCP/IP Networking</a>.

<div class="node">
<a name="Special-Caveats"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Special-Network">Special Network</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Special-Files">Special Files</a>

</div>

<h4 class="subsection">5.7.3 Special File Name Caveats</h4>

<p>Here is a list of things to bear in mind when using the
special file names that <samp><span class="command">gawk</span></samp> provides:

     
<a name="index-compatibility-mode-_0028_0040command_007bgawk_007d_0029_002c-_0040value_007bFN_007ds-756"></a>
<a name="index-g_t_0040value_007bFN_007ds_002c-in-compatibility-mode-757"></a>
<ul><li>Recognition of these special file names is disabled if <samp><span class="command">gawk</span></samp> is in
compatibility mode (see <a href="#Options">Options</a>).

     <li><samp><span class="command">gawk</span></samp> <em>always</em>
interprets these special file names. 
For example, using &lsquo;<samp><span class="samp">/dev/fd/4</span></samp>&rsquo;
for output actually writes on file descriptor 4, and not on a new
file descriptor that is <code>dup()</code>'ed from file descriptor 4.  Most of
the time this does not matter; however, it is important to <em>not</em>
close any of the files related to file descriptors 0, 1, and 2. 
Doing so results in unpredictable behavior. 
</ul>
   <!-- ENDOFRANGE gfn -->

<div class="node">
<a name="Close-Files-And-Pipes"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Special-Files">Special Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Printing">Printing</a>

</div>

<h3 class="section">5.8 Closing Input and Output Redirections</h3>

<p><a name="index-files_002c-output_002c-See-output-files-758"></a><!-- STARTOFRANGE ifc -->
<a name="index-input-files_002c-closing-759"></a><!-- STARTOFRANGE ofc -->
<a name="index-output_002c-files_0040comma_007b_007d-closing-760"></a><!-- STARTOFRANGE pc -->
<a name="index-pipes_002c-closing-761"></a><!-- STARTOFRANGE cc -->
<a name="index-coprocesses_002c-closing-762"></a><a name="index-g_t_0040code_007bgetline_007d-command_002c-coprocesses_0040comma_007b_007d-using-from-763"></a>
If the same file name or the same shell command is used with <code>getline</code>
more than once during the execution of an <samp><span class="command">awk</span></samp> program
(see <a href="#Getline">Getline</a>),
the file is opened (or the command is executed) the first time only. 
At that time, the first record of input is read from that file or command. 
The next time the same file or command is used with <code>getline</code>,
another record is read from it, and so on.

   <p>Similarly, when a file or pipe is opened for output, <samp><span class="command">awk</span></samp> remembers
the file name or command associated with it, and subsequent
writes to the same file or command are appended to the previous writes. 
The file or pipe stays open until <samp><span class="command">awk</span></samp> exits.

   <p><a name="index-g_t_0040code_007bclose_0028_0029_007d-function-764"></a>This implies that special steps are necessary in order to read the same
file again from the beginning, or to rerun a shell command (rather than
reading more output from the same command).  The <code>close()</code> function
makes these things possible:

<pre class="example">     close(<var>filename</var>)
</pre>
   <p class="noindent">or:

<pre class="example">     close(<var>command</var>)
</pre>
   <p>The argument <var>filename</var> or <var>command</var> can be any expression.  Its
value must <em>exactly</em> match the string that was used to open the file or
start the command (spaces and other &ldquo;irrelevant&rdquo; characters
included). For example, if you open a pipe with this:

<pre class="example">     "sort -r names" | getline foo
</pre>
   <p class="noindent">then you must close it with this:

<pre class="example">     close("sort -r names")
</pre>
   <p>Once this function call is executed, the next <code>getline</code> from that
file or command, or the next <code>print</code> or <code>printf</code> to that
file or command, reopens the file or reruns the command. 
Because the expression that you use to close a file or pipeline must
exactly match the expression used to open the file or run the command,
it is good practice to use a variable to store the file name or command. 
The previous example becomes the following:

<pre class="example">     sortcom = "sort -r names"
     sortcom | getline foo
     ...
     close(sortcom)
</pre>
   <p class="noindent">This helps avoid hard-to-find typographical errors in your <samp><span class="command">awk</span></samp>
programs.  Here are some of the reasons for closing an output file:

     <ul>
<li>To write a file and read it back later on in the same <samp><span class="command">awk</span></samp>
program.  Close the file after writing it, then
begin reading it with <code>getline</code>.

     <li>To write numerous files, successively, in the same <samp><span class="command">awk</span></samp>
program.  If the files aren't closed, eventually <samp><span class="command">awk</span></samp> may exceed a
system limit on the number of open files in one process.  It is best to
close each one when the program has finished writing it.

     <li>To make a command finish.  When output is redirected through a pipe,
the command reading the pipe normally continues to try to read input
as long as the pipe is open.  Often this means the command cannot
really do its work until the pipe is closed.  For example, if
output is redirected to the <samp><span class="command">mail</span></samp> program, the message is not
actually sent until the pipe is closed.

     <li>To run the same program a second time, with the same arguments. 
This is not the same thing as giving more input to the first run!

     <p>For example, suppose a program pipes output to the <samp><span class="command">mail</span></samp> program. 
If it outputs several lines redirected to this pipe without closing
it, they make a single message of several lines.  By contrast, if the
program closes the pipe after each line of output, then each line makes
a separate message. 
</ul>

   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bclose_0028_0029_007d-function-765"></a><a name="index-portability_002c-_0040code_007bclose_0028_0029_007d-function-and-766"></a>If you use more files than the system allows you to have open,
<samp><span class="command">gawk</span></samp> attempts to multiplex the available open files among
your data files.  <samp><span class="command">gawk</span></samp>'s ability to do this depends upon the
facilities of your operating system, so it may not always work.  It is
therefore both good practice and good portability advice to always
use <code>close()</code> on your files when you are done with them. 
In fact, if you are using a lot of pipes, it is essential that
you close commands when done. For example, consider something like this:

<pre class="example">     {
         ...
         command = ("grep " $1 " /some/file | my_prog -q " $3)
         while ((command | getline) &gt; 0) {
             <var>process output of</var> command
         }
         # need close(command) here
     }
</pre>
   <p>This example creates a new pipeline based on data in <em>each</em> record. 
Without the call to <code>close()</code> indicated in the comment, <samp><span class="command">awk</span></samp>
creates child processes to run the commands, until it eventually
runs out of file descriptors for more pipelines.

   <p>Even though each command has finished (as indicated by the end-of-file
return status from <code>getline</code>), the child process is not
terminated;<a rel="footnote" href="#fn-26" name="fnd-26"><sup>26</sup></a>
<!-- Good old UNIX: give the marketing guys fits, that's the ticket -->
more importantly, the file descriptor for the pipe
is not closed and released until <code>close()</code> is called or
<samp><span class="command">awk</span></samp> exits.

   <p><code>close()</code> will silently do nothing if given an argument that
does not represent a file, pipe or coprocess that was opened with
a redirection.

   <p>Note also that &lsquo;<samp><span class="samp">close(FILENAME)</span></samp>&rsquo; has no
&ldquo;magic&rdquo; effects on the implicit loop that reads through the
files named on the command line.  It is, more likely, a close
of a file that was never opened, so <samp><span class="command">awk</span></samp> silently
does nothing.

   <p><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029_002c-pipes_0040comma_007b_007d-closing-767"></a>When using the &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operator to communicate with a coprocess,
it is occasionally useful to be able to close one end of the two-way
pipe without closing the other. 
This is done by supplying a second argument to <code>close()</code>. 
As in any other call to <code>close()</code>,
the first argument is the name of the command or special file used
to start the coprocess. 
The second argument should be a string, with either of the values
<code>"to"</code> or <code>"from"</code>.  Case does not matter. 
As this is an advanced feature, a more complete discussion is
delayed until
<a href="#Two_002dway-I_002fO">Two-way I/O</a>,
which discusses it in more detail and gives an example.

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Using <code>close()</code>'s Return Value</h4>

<p><a name="index-advanced-features_002c-_0040code_007bclose_0028_0029_007d-function-768"></a><a name="index-dark-corner_002c-_0040code_007bclose_0028_0029_007d-function-769"></a><a name="index-g_t_0040code_007bclose_0028_0029_007d-function_002c-return-values-770"></a><a name="index-return-values_0040comma_007b_007d-_0040code_007bclose_0028_0029_007d-function-771"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bclose_0028_0029_007d-function-772"></a><a name="index-Unix-_0040command_007bawk_007d_002c-_0040code_007bclose_0028_0029_007d-function-and-773"></a>
In many versions of Unix <samp><span class="command">awk</span></samp>, the <code>close()</code> function
is actually a statement.  It is a syntax error to try and use the return
value from <code>close()</code>:
(d.c.)

<pre class="example">     command = "..."
     command | getline info
     retval = close(command)  # syntax error in many Unix awks
</pre>
   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-in-774"></a><a name="index-g_t_0040code_007bERRNO_007d-variable-775"></a><samp><span class="command">gawk</span></samp> treats <code>close()</code> as a function. 
The return value is &minus;1 if the argument names something
that was never opened with a redirection, or if there is
a system problem closing the file or process. 
In these cases, <samp><span class="command">gawk</span></samp> sets the built-in variable
<code>ERRNO</code> to a string describing the problem.

   <p>In <samp><span class="command">gawk</span></samp>,
when closing a pipe or coprocess (input or output),
the return value is the exit status of the command.<a rel="footnote" href="#fn-27" name="fnd-27"><sup>27</sup></a>
Otherwise, it is the return value from the system's <code>close()</code> or
<code>fclose()</code> C functions when closing input or output
files, respectively. 
This value is zero if the close succeeds, or &minus;1 if
it fails.

   <p>The POSIX standard is very vague; it says that <code>close()</code>
returns zero on success and nonzero otherwise.  In general,
different implementations vary in what they report when closing
pipes; thus the return value cannot be used portably. 
(d.c.) 
In POSIX mode (see <a href="#Options">Options</a>), <samp><span class="command">gawk</span></samp> just returns zero
when closing a pipe.

<!-- ENDOFRANGE ifc -->
<!-- ENDOFRANGE ofc -->
<!-- ENDOFRANGE pc -->
<!-- ENDOFRANGE cc -->
<!-- ENDOFRANGE prnt -->
<div class="node">
<a name="Expressions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Patterns-and-Actions">Patterns and Actions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Printing">Printing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">6 Expressions</h2>

<!-- STARTOFRANGE exps -->
<p><a name="index-expressions-776"></a>
Expressions are the basic building blocks of <samp><span class="command">awk</span></samp> patterns
and actions.  An expression evaluates to a value that you can print, test,
or pass to a function.  Additionally, an expression
can assign a new value to a variable or a field by using an assignment operator.

   <p>An expression can serve as a pattern or action statement on its own. 
Most other kinds of
statements contain one or more expressions that specify the data on which to
operate.  As in other languages, expressions in <samp><span class="command">awk</span></samp> include
variables, array references, constants, and function calls, as well as
combinations of these with various operators.

<ul class="menu">
<li><a accesskey="1" href="#Values">Values</a>:                       Constants, Variables, and Regular Expressions. 
<li><a accesskey="2" href="#All-Operators">All Operators</a>:                <samp><span class="command">gawk</span></samp>'s operators. 
<li><a accesskey="3" href="#Truth-Values-and-Conditions">Truth Values and Conditions</a>:  Testing for true and false. 
<li><a accesskey="4" href="#Function-Calls">Function Calls</a>:               A function call is an expression. 
<li><a accesskey="5" href="#Precedence">Precedence</a>:                   How various operators nest. 
<li><a accesskey="6" href="#Locales">Locales</a>:                      How the locale affects things. 
</ul>

<div class="node">
<a name="Values"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#All-Operators">All Operators</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Expressions">Expressions</a>

</div>

<h3 class="section">6.1 Constants, Variables and Conversions</h3>

<p>Expressions are built up from values and the operations performed
upon them. This section describes the elementary objects
which provide the values used in expressions.

<ul class="menu">
<li><a accesskey="1" href="#Constants">Constants</a>:                    String, numeric and regexp constants. 
<li><a accesskey="2" href="#Using-Constant-Regexps">Using Constant Regexps</a>:       When and how to use a regexp constant. 
<li><a accesskey="3" href="#Variables">Variables</a>:                    Variables give names to values for later use. 
<li><a accesskey="4" href="#Conversion">Conversion</a>:                   The conversion of strings to numbers and vice
                                versa. 
</ul>

<div class="node">
<a name="Constants"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-Constant-Regexps">Using Constant Regexps</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Values">Values</a>

</div>

<h4 class="subsection">6.1.1 Constant Expressions</h4>

<p><a name="index-constants_002c-types-of-777"></a>
The simplest type of expression is the <dfn>constant</dfn>, which always has
the same value.  There are three types of constants: numeric,
string, and regular expression.

   <p>Each is used in the appropriate context when you need a data
value that isn't going to change.  Numeric constants can
have different forms, but are stored identically internally.

<ul class="menu">
<li><a accesskey="1" href="#Scalar-Constants">Scalar Constants</a>:             Numeric and string constants. 
<li><a accesskey="2" href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>:           What are octal and hex numbers. 
<li><a accesskey="3" href="#Regexp-Constants">Regexp Constants</a>:             Regular Expression constants. 
</ul>

<div class="node">
<a name="Scalar-Constants"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Constants">Constants</a>

</div>

<h5 class="subsubsection">6.1.1.1 Numeric and String Constants</h5>

<p><a name="index-numeric_002c-constants-778"></a>A <dfn>numeric constant</dfn> stands for a number.  This number can be an
integer, a decimal fraction, or a number in scientific (exponential)
notation.<a rel="footnote" href="#fn-28" name="fnd-28"><sup>28</sup></a>
Here are some examples of numeric constants that all
have the same value:

<pre class="example">     105
     1.05e+2
     1050e-1
</pre>
   <p><a name="index-string-constants-779"></a>A string constant consists of a sequence of characters enclosed in
double-quotation marks.  For example:

<pre class="example">     "parrot"
</pre>
   <p class="noindent"><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-strings-780"></a><a name="index-strings_002c-length-of-781"></a>represents the string whose contents are &lsquo;<samp><span class="samp">parrot</span></samp>&rsquo;.  Strings in
<samp><span class="command">gawk</span></samp> can be of any length, and they can contain any of the possible
eight-bit ASCII characters including ASCII <span class="sc">nul</span> (character code zero). 
Other <samp><span class="command">awk</span></samp>
implementations may have difficulty with some character codes.

<div class="node">
<a name="Nondecimal-numbers"></a>
<a name="Nondecimal_002dnumbers"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Regexp-Constants">Regexp Constants</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Scalar-Constants">Scalar Constants</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Constants">Constants</a>

</div>

<h5 class="subsubsection">6.1.1.2 Octal and Hexadecimal Numbers</h5>

<p><a name="index-octal-numbers-782"></a><a name="index-hexadecimal-numbers-783"></a><a name="index-numbers_002c-octal-784"></a><a name="index-numbers_002c-hexadecimal-785"></a>
In <samp><span class="command">awk</span></samp>, all numbers are in decimal; i.e., base 10.  Many other
programming languages allow you to specify numbers in other bases, often
octal (base 8) and hexadecimal (base 16). 
In octal, the numbers go 0, 1, 2, 3, 4, 5, 6, 7, 10, 11, 12, etc. 
Just as &lsquo;<samp><span class="samp">11</span></samp>&rsquo;, in decimal, is 1 times 10 plus 1, so
&lsquo;<samp><span class="samp">11</span></samp>&rsquo;, in octal, is 1 times 8, plus 1. This equals 9 in decimal. 
In hexadecimal, there are 16 digits. Since the everyday decimal
number system only has ten digits (&lsquo;<samp><span class="samp">0</span></samp>&rsquo;&ndash;&lsquo;<samp><span class="samp">9</span></samp>&rsquo;), the letters
&lsquo;<samp><span class="samp">a</span></samp>&rsquo; through &lsquo;<samp><span class="samp">f</span></samp>&rsquo; are used to represent the rest. 
(Case in the letters is usually irrelevant; hexadecimal &lsquo;<samp><span class="samp">a</span></samp>&rsquo; and &lsquo;<samp><span class="samp">A</span></samp>&rsquo;
have the same value.) 
Thus, &lsquo;<samp><span class="samp">11</span></samp>&rsquo;, in
hexadecimal, is 1 times 16 plus 1, which equals 17 in decimal.

   <p>Just by looking at plain &lsquo;<samp><span class="samp">11</span></samp>&rsquo;, you can't tell what base it's in. 
So, in C, C++, and other languages derived from C,
<!-- such as PERL, but we won't mention that.... -->
there is a special notation to signify the base. 
Octal numbers start with a leading &lsquo;<samp><span class="samp">0</span></samp>&rsquo;,
and hexadecimal numbers start with a leading &lsquo;<samp><span class="samp">0x</span></samp>&rsquo; or &lsquo;<samp><span class="samp">0X</span></samp>&rsquo;:

     <dl>
<dt><code>11</code><dd>Decimal value 11.

     <br><dt><code>011</code><dd>Octal 11, decimal value 9.

     <br><dt><code>0x11</code><dd>Hexadecimal 11, decimal value 17. 
</dl>

   <p>This example shows the difference:

<pre class="example">     $ <kbd>gawk 'BEGIN { printf "%d, %d, %d\n", 011, 11, 0x11 }'</kbd>
     -| 9, 11, 17
</pre>
   <p>Being able to use octal and hexadecimal constants in your programs is most
useful when working with data that cannot be represented conveniently as
characters or as regular numbers, such as binary data of various sorts.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-octal-numbers-and-786"></a><a name="index-g_t_0040command_007bgawk_007d_002c-hexadecimal-numbers-and-787"></a><samp><span class="command">gawk</span></samp> allows the use of octal and hexadecimal
constants in your program text.  However, such numbers in the input data
are not treated differently; doing so by default would break old
programs. 
(If you really need to do this, use the <samp><span class="option">--non-decimal-data</span></samp>
command-line option;
see <a href="#Nondecimal-Data">Nondecimal Data</a>.) 
If you have octal or hexadecimal data,
you can use the <code>strtonum()</code> function
(see <a href="#String-Functions">String Functions</a>)
to convert the data into a number. 
Most of the time, you will want to use octal or hexadecimal constants
when working with the built-in bit manipulation functions;
see <a href="#Bitwise-Functions">Bitwise Functions</a>,
for more information.

   <p>Unlike some early C implementations, &lsquo;<samp><span class="samp">8</span></samp>&rsquo; and &lsquo;<samp><span class="samp">9</span></samp>&rsquo; are not valid
in octal constants; e.g., <samp><span class="command">gawk</span></samp> treats &lsquo;<samp><span class="samp">018</span></samp>&rsquo; as decimal 18:

<pre class="example">     $ <kbd>gawk 'BEGIN { print "021 is", 021 ; print 018 }'</kbd>
     -| 021 is 17
     -| 18
</pre>
   <p><a name="index-compatibility-mode-_0028_0040command_007bgawk_007d_0029_002c-octal-numbers-788"></a><a name="index-compatibility-mode-_0028_0040command_007bgawk_007d_0029_002c-hexadecimal-numbers-789"></a>Octal and hexadecimal source code constants are a <samp><span class="command">gawk</span></samp> extension. 
If <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>),
they are not available.

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: A Constant's Base Does Not Affect Its Value</h4>

<p><a name="index-advanced-features_002c-constants_0040comma_007b_007d-values-of-790"></a>
Once a numeric constant has
been converted internally into a number,
<samp><span class="command">gawk</span></samp> no longer remembers
what the original form of the constant was; the internal value is
always used.  This has particular consequences for conversion of
numbers to strings:

<pre class="example">     $ <kbd>gawk 'BEGIN { printf "0x11 is &lt;%s&gt;\n", 0x11 }'</kbd>
     -| 0x11 is &lt;17&gt;
</pre>
   <div class="node">
<a name="Regexp-Constants"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Constants">Constants</a>

</div>

<h5 class="subsubsection">6.1.1.3 Regular Expression Constants</h5>

<!-- STARTOFRANGE rec -->
<p><a name="index-regexp-constants-791"></a><a name="index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-792"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-793"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-794"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-795"></a>A regexp constant is a regular expression description enclosed in
slashes, such as <code>/^beginning&nbsp;and&nbsp;end$/<!-- /@w --></code>.  Most regexps used in
<samp><span class="command">awk</span></samp> programs are constant, but the &lsquo;<samp><span class="samp">~</span></samp>&rsquo; and &lsquo;<samp><span class="samp">!~</span></samp>&rsquo;
matching operators can also match computed or dynamic regexps
(which are just ordinary strings or variables that contain a regexp). 
<!-- ENDOFRANGE cnst -->

<div class="node">
<a name="Using-Constant-Regexps"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Variables">Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Constants">Constants</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Values">Values</a>

</div>

<h4 class="subsection">6.1.2 Using Regular Expression Constants</h4>

<p><a name="index-dark-corner_002c-regexp-constants-796"></a>When used on the righthand side of the &lsquo;<samp><span class="samp">~</span></samp>&rsquo; or &lsquo;<samp><span class="samp">!~</span></samp>&rsquo;
operators, a regexp constant merely stands for the regexp that is to be
matched. 
However, regexp constants (such as <code>/foo/</code>) may be used like simple expressions. 
When a
regexp constant appears by itself, it has the same meaning as if it appeared
in a pattern, i.e., &lsquo;<samp><span class="samp">($0 ~ /foo/)</span></samp>&rsquo;
(d.c.) 
See <a href="#Expression-Patterns">Expression Patterns</a>. 
This means that the following two code segments:

<pre class="example">     if ($0 ~ /barfly/ || $0 ~ /camelot/)
         print "found"
</pre>
   <p class="noindent">and:

<pre class="example">     if (/barfly/ || /camelot/)
         print "found"
</pre>
   <p class="noindent">are exactly equivalent. 
One rather bizarre consequence of this rule is that the following
Boolean expression is valid, but does not do what the user probably
intended:

<pre class="example">     # Note that /foo/ is on the left of the ~
     if (/foo/ ~ $1) print "found foo"
</pre>
   <!-- @cindex automatic warnings -->
<!-- @cindex warnings, automatic -->
   <p><a name="index-g_t_0040command_007bgawk_007d_002c-regexp-constants-and-797"></a><a name="index-regexp-constants_002c-in-_0040command_007bgawk_007d-798"></a>This code is &ldquo;obviously&rdquo; testing <code>$1</code> for a match against the regexp
<code>/foo/</code>.  But in fact, the expression &lsquo;<samp><span class="samp">/foo/ ~ $1</span></samp>&rsquo; really means
&lsquo;<samp><span class="samp">($0 ~ /foo/) ~ $1</span></samp>&rsquo;.  In other words, first match the input record
against the regexp <code>/foo/</code>.  The result is either zero or one,
depending upon the success or failure of the match.  That result
is then matched against the first field in the record. 
Because it is unlikely that you would ever really want to make this kind of
test, <samp><span class="command">gawk</span></samp> issues a warning when it sees this construct in
a program. 
Another consequence of this rule is that the assignment statement:

<pre class="example">     matches = /foo/
</pre>
   <p class="noindent">assigns either zero or one to the variable <code>matches</code>, depending
upon the contents of the current input record.

   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-regexp-constants-799"></a><a name="index-dark-corner_002c-regexp-constants_002c-as-arguments-to-user_002ddefined-functions-800"></a><a name="index-g_t_0040code_007bgensub_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-801"></a><a name="index-g_t_0040code_007bsub_0028_0029_007d-function-802"></a><a name="index-g_t_0040code_007bgsub_0028_0029_007d-function-803"></a>Constant regular expressions are also used as the first argument for
the <code>gensub()</code>, <code>sub()</code>, and <code>gsub()</code> functions, as the
second argument of the <code>match()</code> function,
and as the third argument of the <code>patsplit()</code> function
(see <a href="#String-Functions">String Functions</a>). 
Modern implementations of <samp><span class="command">awk</span></samp>, including <samp><span class="command">gawk</span></samp>, allow
the third argument of <code>split()</code> to be a regexp constant, but some
older implementations do not. 
(d.c.) 
This can lead to confusion when attempting to use regexp constants
as arguments to user-defined functions
(see <a href="#User_002ddefined">User-defined</a>). 
For example:

<pre class="example">     function mysub(pat, repl, str, global)
     {
         if (global)
             gsub(pat, repl, str)
         else
             sub(pat, repl, str)
         return str
     }
     
     {
         ...
         text = "hi! hi yourself!"
         mysub(/hi/, "howdy", text, 1)
         ...
     }
</pre>
   <!-- @cindex automatic warnings -->
<!-- @cindex warnings, automatic -->
   <p>In this example, the programmer wants to pass a regexp constant to the
user-defined function <code>mysub</code>, which in turn passes it on to
either <code>sub()</code> or <code>gsub()</code>.  However, what really happens is that
the <code>pat</code> parameter is either one or zero, depending upon whether
or not <code>$0</code> matches <code>/hi/</code>. 
<samp><span class="command">gawk</span></samp> issues a warning when it sees a regexp constant used as
a parameter to a user-defined function, since passing a truth value in
this way is probably not what was intended. 
<!-- ENDOFRANGE rec -->

<div class="node">
<a name="Variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conversion">Conversion</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Constant-Regexps">Using Constant Regexps</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Values">Values</a>

</div>

<h4 class="subsection">6.1.3 Variables</h4>

<p><a name="index-variables_002c-user_002ddefined-804"></a><a name="index-user_002ddefined_002c-variables-805"></a>Variables are ways of storing values at one point in your program for
use later in another part of your program.  They can be manipulated
entirely within the program text, and they can also be assigned values
on the <samp><span class="command">awk</span></samp> command line.

<ul class="menu">
<li><a accesskey="1" href="#Using-Variables">Using Variables</a>:              Using variables in your programs. 
<li><a accesskey="2" href="#Assignment-Options">Assignment Options</a>:           Setting variables on the command-line and a
                                summary of command-line syntax. This is an
                                advanced method of input. 
</ul>

<div class="node">
<a name="Using-Variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Assignment-Options">Assignment Options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Variables">Variables</a>

</div>

<h5 class="subsubsection">6.1.3.1 Using Variables in a Program</h5>

<p>Variables let you give names to values and refer to them later.  Variables
have already been used in many of the examples.  The name of a variable
must be a sequence of letters, digits, or underscores, and it may not begin
with a digit.  Case is significant in variable names; <code>a</code> and <code>A</code>
are distinct variables.

   <p>A variable name is a valid expression by itself; it represents the
variable's current value.  Variables are given new values with
<dfn>assignment operators</dfn>, <dfn>increment operators</dfn>, and
<dfn>decrement operators</dfn>. 
See <a href="#Assignment-Ops">Assignment Ops</a>. 
In addition, the <code>sub()</code> and <code>gsub()</code> functions can
change a variable's value, and the <code>match()</code>, <code>patsplit()</code>
and <code>split()</code> functions can change the contents of their
array parameters. See <a href="#String-Functions">String Functions</a>.

   <p><a name="index-variables_002c-built_002din-806"></a><a name="index-variables_002c-initializing-807"></a>A few variables have special built-in meanings, such as <code>FS</code> (the
field separator), and <code>NF</code> (the number of fields in the current input
record).  See <a href="#Built_002din-Variables">Built-in Variables</a>, for a list of the built-in variables. 
These built-in variables can be used and assigned just like all other
variables, but their values are also used or changed automatically by
<samp><span class="command">awk</span></samp>.  All built-in variables' names are entirely uppercase.

   <p>Variables in <samp><span class="command">awk</span></samp> can be assigned either numeric or string values. 
The kind of value a variable holds can change over the life of a program. 
By default, variables are initialized to the empty string, which
is zero if converted to a number.  There is no need to explicitly
&ldquo;initialize&rdquo; a variable in <samp><span class="command">awk</span></samp>,
which is what you would do in C and in most other traditional languages.

<div class="node">
<a name="Assignment-Options"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Variables">Using Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Variables">Variables</a>

</div>

<h5 class="subsubsection">6.1.3.2 Assigning Variables on the Command Line</h5>

<p><a name="index-variables_002c-assigning-on-command-line-808"></a><a name="index-command-line_002c-variables_0040comma_007b_007d-assigning-on-809"></a>
Any <samp><span class="command">awk</span></samp> variable can be set by including a <dfn>variable assignment</dfn>
among the arguments on the command line when <samp><span class="command">awk</span></samp> is invoked
(see <a href="#Other-Arguments">Other Arguments</a>). 
Such an assignment has the following form:

<pre class="example">     <var>variable</var>=<var>text</var>
</pre>
   <p><a name="index-g_t_0040code_007b_002dv_007d-option_002c-variables_0040comma_007b_007d-assigning-810"></a>With it, a variable is set either at the beginning of the
<samp><span class="command">awk</span></samp> run or in between input files. 
When the assignment is preceded with the <samp><span class="option">-v</span></samp> option,
as in the following:

<pre class="example">     -v <var>variable</var>=<var>text</var>
</pre>
   <p class="noindent">the variable is set at the very beginning, even before the
<code>BEGIN</code> rules execute.  The <samp><span class="option">-v</span></samp> option and its assignment
must precede all the file name arguments, as well as the program text. 
(See <a href="#Options">Options</a>, for more information about
the <samp><span class="option">-v</span></samp> option.) 
Otherwise, the variable assignment is performed at a time determined by
its position among the input file arguments&mdash;after the processing of the
preceding input file argument.  For example:

<pre class="example">     awk '{ print $n }' n=4 inventory-shipped n=2 BBS-list
</pre>
   <p class="noindent">prints the value of field number <code>n</code> for all input records.  Before
the first file is read, the command line sets the variable <code>n</code>
equal to four.  This causes the fourth field to be printed in lines from
<samp><span class="file">inventory-shipped</span></samp>.  After the first file has finished,
but before the second file is started, <code>n</code> is set to two, so that the
second field is printed in lines from <samp><span class="file">BBS-list</span></samp>:

<pre class="example">     $ <kbd>awk '{ print $n }' n=4 inventory-shipped n=2 BBS-list</kbd>
     -| 15
     -| 24
     ...
     -| 555-5553
     -| 555-3412
     ...
</pre>
   <p><a name="index-dark-corner_002c-command_002dline-arguments-811"></a>Command-line arguments are made available for explicit examination by
the <samp><span class="command">awk</span></samp> program in the <code>ARGV</code> array
(see <a href="#ARGC-and-ARGV">ARGC and ARGV</a>). 
<samp><span class="command">awk</span></samp> processes the values of command-line assignments for escape
sequences
(see <a href="#Escape-Sequences">Escape Sequences</a>). 
(d.c.)

<div class="node">
<a name="Conversion"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variables">Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Values">Values</a>

</div>

<h4 class="subsection">6.1.4 Conversion of Strings and Numbers</h4>

<p><a name="index-converting_002c-strings-to-numbers-812"></a><a name="index-strings_002c-converting-813"></a><a name="index-numbers_002c-converting-814"></a><a name="index-converting_002c-numbers-to-strings-815"></a>Strings are converted to numbers and numbers are converted to strings, if the context
of the <samp><span class="command">awk</span></samp> program demands it.  For example, if the value of
either <code>foo</code> or <code>bar</code> in the expression &lsquo;<samp><span class="samp">foo + bar</span></samp>&rsquo;
happens to be a string, it is converted to a number before the addition
is performed.  If numeric values appear in string concatenation, they
are converted to strings.  Consider the following:

<pre class="example">     two = 2; three = 3
     print (two three) + 4
</pre>
   <p class="noindent">This prints the (numeric) value 27.  The numeric values of
the variables <code>two</code> and <code>three</code> are converted to strings and
concatenated together.  The resulting string is converted back to the
number 23, to which 4 is then added.

   <p><a name="index-null-strings_002c-converting-numbers-to-strings-816"></a><a name="index-type-conversion-817"></a>If, for some reason, you need to force a number to be converted to a
string, concatenate that number with the empty string, <code>""</code>. 
To force a string to be converted to a number, add zero to that string. 
A string is converted to a number by interpreting any numeric prefix
of the string as numerals:
<code>"2.5"</code> converts to 2.5, <code>"1e3"</code> converts to 1000, and <code>"25fix"</code>
has a numeric value of 25. 
Strings that can't be interpreted as valid numbers convert to zero.

   <p><a name="index-g_t_0040code_007bCONVFMT_007d-variable-818"></a>The exact manner in which numbers are converted into strings is controlled
by the <samp><span class="command">awk</span></samp> built-in variable <code>CONVFMT</code> (see <a href="#Built_002din-Variables">Built-in Variables</a>). 
Numbers are converted using the <code>sprintf()</code> function
with <code>CONVFMT</code> as the format
specifier
(see <a href="#String-Functions">String Functions</a>).

   <p><code>CONVFMT</code>'s default value is <code>"%.6g"</code>, which prints a value with
at most six significant digits.  For some applications, you might want to
change it to specify more precision. 
On most modern machines,
17 digits is usually enough to capture a floating-point number's
value exactly.<a rel="footnote" href="#fn-29" name="fnd-29"><sup>29</sup></a>

   <p><a name="index-dark-corner_002c-_0040code_007bCONVFMT_007d-variable-819"></a>Strange results can occur if you set <code>CONVFMT</code> to a string that doesn't
tell <code>sprintf()</code> how to format floating-point numbers in a useful way. 
For example, if you forget the &lsquo;<samp><span class="samp">%</span></samp>&rsquo; in the format, <samp><span class="command">awk</span></samp> converts
all numbers to the same constant string.

   <p>As a special case, if a number is an integer, then the result of converting
it to a string is <em>always</em> an integer, no matter what the value of
<code>CONVFMT</code> may be.  Given the following code fragment:

<pre class="example">     CONVFMT = "%2.2f"
     a = 12
     b = a ""
</pre>
   <p class="noindent"><code>b</code> has the value <code>"12"</code>, not <code>"12.00"</code>. 
(d.c.)

   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bOFMT_007d-variable-and-820"></a><a name="index-g_t_0040code_007bOFMT_007d-variable-821"></a><a name="index-portability_002c-new-_0040command_007bawk_007d-vs_002e_0040_003a-old-_0040command_007bawk_007d-822"></a><a name="index-g_t_0040command_007bawk_007d_002c-new-vs_002e_0040_003a-old_002c-_0040code_007bOFMT_007d-variable-823"></a>Prior to the POSIX standard, <samp><span class="command">awk</span></samp> used the value
of <code>OFMT</code> for converting numbers to strings.  <code>OFMT</code>
specifies the output format to use when printing numbers with <code>print</code>. 
<code>CONVFMT</code> was introduced in order to separate the semantics of
conversion from the semantics of printing.  Both <code>CONVFMT</code> and
<code>OFMT</code> have the same default value: <code>"%.6g"</code>.  In the vast majority
of cases, old <samp><span class="command">awk</span></samp> programs do not change their behavior. 
However, these semantics for <code>OFMT</code> are something to keep in mind if you must
port your new-style program to older implementations of <samp><span class="command">awk</span></samp>. 
We recommend
that instead of changing your programs, just port <samp><span class="command">gawk</span></samp> itself. 
See <a href="#Print">Print</a>,
for more information on the <code>print</code> statement.

   <p>And, once again, where you are can matter when it comes to converting
between numbers and strings.  In <a href="#Locales">Locales</a>, we mentioned that
the local character set and language (the locale) can affect how
<samp><span class="command">gawk</span></samp> matches characters.  The locale also affects numeric
formats.  In particular, for <samp><span class="command">awk</span></samp> programs, it affects the
decimal point character.  The <code>"C"</code> locale, and most English-language
locales, use the period character (&lsquo;<samp><span class="samp">.</span></samp>&rsquo;) as the decimal point. 
However, many (if not most) European and non-English locales use the comma
(&lsquo;<samp><span class="samp">,</span></samp>&rsquo;) as the decimal point character.

   <p>The POSIX standard says that <samp><span class="command">awk</span></samp> always uses the period as the decimal
point when reading the <samp><span class="command">awk</span></samp> program source code, and for command-line
variable assignments (see <a href="#Other-Arguments">Other Arguments</a>). 
However, when interpreting input data, for <code>print</code> and <code>printf</code> output,
and for number to string conversion, the local decimal point character is used. 
Here are some examples indicating the difference in behavior,
on a GNU/Linux system:

<pre class="example">     $ <kbd>gawk 'BEGIN { printf "%g\n", 3.1415927 }'</kbd>
     -| 3.14159
     $ <kbd>LC_ALL=en_DK gawk 'BEGIN { printf "%g\n", 3.1415927 }'</kbd>
     -| 3,14159
     $ <kbd>echo 4,321 | gawk '{ print $1 + 1 }'</kbd>
     -| 5
     $ <kbd>echo 4,321 | LC_ALL=en_DK gawk '{ print $1 + 1 }'</kbd>
     -| 5,321
</pre>
   <p class="noindent">The &lsquo;<samp><span class="samp">en_DK</span></samp>&rsquo; locale is for English in Denmark, where the comma acts as
the decimal point separator.  In the normal <code>"C"</code> locale, <samp><span class="command">gawk</span></samp>
treats &lsquo;<samp><span class="samp">4,321</span></samp>&rsquo; as &lsquo;<samp><span class="samp">4</span></samp>&rsquo;, while in the Danish locale, it's treated
as the full number, 4.321.

   <p>Some earlier versions of <samp><span class="command">gawk</span></samp> fully complied with this aspect
of the standard.  However, many users in non-English locales complained
about this behavior, since their data used a period as the decimal
point, so the default behavior was restored to use a period as the
decimal point character.  You can use the <samp><span class="option">--use-lc-numeric</span></samp>
option (see <a href="#Options">Options</a>) to force <samp><span class="command">gawk</span></samp> to use the locale's
decimal point character.  (<samp><span class="command">gawk</span></samp> also uses the locale's decimal
point character when in POSIX mode, either via <samp><span class="option">--posix</span></samp>, or the
<samp><span class="env">POSIXLY_CORRECT</span></samp> environment variable.)

   <p><a href="#table_002dlocale_002daffects">table-locale-affects</a> describes the cases in which the locale's decimal
point character is used and when a period is used. Some of these
features have not been described yet.

   <div class="float">
<a name="table_002dlocale_002daffects"></a>
   <p><table summary=""><tr align="left"><th valign="top" width="15%">Feature </th><th valign="top" width="20%">Default </th><th valign="top" width="45%"><samp><span class="option">--posix</span></samp> or <samp><span class="option">--use-lc-numeric</span></samp>
<br></th></tr><tr align="left"><td valign="top" width="15%"><code>%'g</code> </td><td valign="top" width="20%">Use locale </td><td valign="top" width="45%">Use locale
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>%g</code> </td><td valign="top" width="20%">Use period </td><td valign="top" width="45%">Use locale
<br></td></tr><tr align="left"><td valign="top" width="15%">Input </td><td valign="top" width="20%">Use period </td><td valign="top" width="45%">Use locale
<br></td></tr><tr align="left"><td valign="top" width="15%"><code>strtonum()</code> </td><td valign="top" width="20%">Use period </td><td valign="top" width="45%">Use locale
   <br></td></tr></table>
<p><strong class="float-caption">Table 6.1: Locale Decimal Point versus A Period</strong></p></div>

   <p>Finally, modern day formal standards and IEEE standard floating point
representation can have an unusual but important effect on the way
<samp><span class="command">gawk</span></samp> converts some special string values to numbers.  The details
are presented in <a href="#POSIX-Floating-Point-Problems">POSIX Floating Point Problems</a>.

<div class="node">
<a name="All-Operators"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Truth-Values-and-Conditions">Truth Values and Conditions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Values">Values</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Expressions">Expressions</a>

</div>

<h3 class="section">6.2 Operators: Doing Something With Values</h3>

<p>This section introduces the <dfn>operators</dfn> which make use
of the values provided by constants and variables.

<ul class="menu">
<li><a accesskey="1" href="#Arithmetic-Ops">Arithmetic Ops</a>:               Arithmetic operations (&lsquo;<samp><span class="samp">+</span></samp>&rsquo;, &lsquo;<samp><span class="samp">-</span></samp>&rsquo;,
                                etc.) 
<li><a accesskey="2" href="#Concatenation">Concatenation</a>:                Concatenating strings. 
<li><a accesskey="3" href="#Assignment-Ops">Assignment Ops</a>:               Changing the value of a variable or a field. 
<li><a accesskey="4" href="#Increment-Ops">Increment Ops</a>:                Incrementing the numeric value of a variable. 
</ul>

<div class="node">
<a name="Arithmetic-Ops"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Concatenation">Concatenation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#All-Operators">All Operators</a>

</div>

<h4 class="subsection">6.2.1 Arithmetic Operators</h4>

<p><a name="index-arithmetic-operators-824"></a><a name="index-operators_002c-arithmetic-825"></a><!-- @cindex addition -->
<!-- @cindex subtraction -->
<!-- @cindex multiplication -->
<!-- @cindex division -->
<!-- @cindex remainder -->
<!-- @cindex quotient -->
<!-- @cindex exponentiation -->

   <p>The <samp><span class="command">awk</span></samp> language uses the common arithmetic operators when
evaluating expressions.  All of these arithmetic operators follow normal
precedence rules and work as you would expect them to.

   <p>The following example uses a file named <samp><span class="file">grades</span></samp>, which contains
a list of student names as well as three test scores per student (it's
a small class):

<pre class="example">     Pat   100 97 58
     Sandy  84 72 93
     Chris  72 92 89
</pre>
   <p class="noindent">This program takes the file <samp><span class="file">grades</span></samp> and prints the average
of the scores:

<pre class="example">     $ <kbd>awk '{ sum = $2 + $3 + $4 ; avg = sum / 3</kbd>
     &gt;        <kbd>print $1, avg }' grades</kbd>
     -| Pat 85
     -| Sandy 83
     -| Chris 84.3333
</pre>
   <p>The following list provides the arithmetic operators in <samp><span class="command">awk</span></samp>, in order from
the highest precedence to the lowest:

     <dl>
<dt><code>- </code><var>x</var><dd>Negation.

     <br><dt><code>+ </code><var>x</var><dd>Unary plus; the expression is converted to a number.

     <p><a name="index-common-extensions_002c-_0040code_007b_002a_002a_007d-operator-826"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_002a_002a_007d-operator-827"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-arithmetic-operators-and-828"></a><br><dt><var>x</var><code> ^ </code><var>y</var><dt><var>x</var><code> ** </code><var>y</var><dd>Exponentiation; <var>x</var> raised to the <var>y</var> power.  &lsquo;<samp><span class="samp">2 ^ 3</span></samp>&rsquo; has
the value eight; the character sequence &lsquo;<samp><span class="samp">**</span></samp>&rsquo; is equivalent to
&lsquo;<samp><span class="samp">^</span></samp>&rsquo;. (c.e.)

     <br><dt><var>x</var><code> * </code><var>y</var><dd>Multiplication.

     <p><a name="index-troubleshooting_002c-division-829"></a><a name="index-division-830"></a><br><dt><var>x</var><code> / </code><var>y</var><dd>Division;  because all numbers in <samp><span class="command">awk</span></samp> are floating-point
numbers, the result is <em>not</em> rounded to an integer&mdash;&lsquo;<samp><span class="samp">3 / 4</span></samp>&rsquo; has
the value 0.75.  (It is a common mistake, especially for C programmers,
to forget that <em>all</em> numbers in <samp><span class="command">awk</span></samp> are floating-point,
and that division of integer-looking constants produces a real number,
not an integer.)

     <br><dt><var>x</var><code> % </code><var>y</var><dd>Remainder; further discussion is provided in the text, just
after this list.

     <br><dt><var>x</var><code> + </code><var>y</var><dd>Addition.

     <br><dt><var>x</var><code> - </code><var>y</var><dd>Subtraction. 
</dl>

   <p>Unary plus and minus have the same precedence,
the multiplication operators all have the same precedence, and
addition and subtraction have the same precedence.

   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-trunc_002dmod-operation-831"></a><a name="index-trunc_002dmod-operation-832"></a>When computing the remainder of &lsquo;<samp><var>x</var><span class="samp"> % </span><var>y</var></samp>&rsquo;,
the quotient is rounded toward zero to an integer and
multiplied by <var>y</var>. This result is subtracted from <var>x</var>;
this operation is sometimes known as &ldquo;trunc-mod.&rdquo;  The following
relation always holds:

<pre class="example">     b * int(a / b) + (a % b) == a
</pre>
   <p>One possibly undesirable effect of this definition of remainder is that
<var>x</var><code> % </code><var>y</var> is negative if <var>x</var> is negative.  Thus:

<pre class="example">     -17 % 8 = -1
</pre>
   <p>In other <samp><span class="command">awk</span></samp> implementations, the signedness of the remainder
may be machine-dependent. 
<!-- !!! what does posix say? -->

   <p><a name="index-portability_002c-_0040code_007b_002a_002a_007d-operator-and-833"></a><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_002a_007d-operator-834"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_002a_007d-operator-835"></a><blockquote>
<b>NOTE:</b> The POSIX standard only specifies the use of &lsquo;<samp><span class="samp">^</span></samp>&rsquo;
for exponentiation. 
For maximum portability, do not use the &lsquo;<samp><span class="samp">**</span></samp>&rsquo; operator. 
</blockquote>

<div class="node">
<a name="Concatenation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Assignment-Ops">Assignment Ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Arithmetic-Ops">Arithmetic Ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#All-Operators">All Operators</a>

</div>

<h4 class="subsection">6.2.2 String Concatenation</h4>

<p><a name="index-Kernighan_002c-Brian-836"></a><blockquote>
<i>It seemed like a good idea at the time.</i><br>
Brian Kernighan
</blockquote>

   <p><a name="index-string-operators-837"></a><a name="index-operators_002c-string-838"></a><a name="index-concatenating-839"></a>There is only one string operation: concatenation.  It does not have a
specific operator to represent it.  Instead, concatenation is performed by
writing expressions next to one another, with no operator.  For example:

<pre class="example">     $ <kbd>awk '{ print "Field number one: " $1 }' BBS-list</kbd>
     -| Field number one: aardvark
     -| Field number one: alpo-net
     ...
</pre>
   <p>Without the space in the string constant after the &lsquo;<samp><span class="samp">:</span></samp>&rsquo;, the line
runs together.  For example:

<pre class="example">     $ <kbd>awk '{ print "Field number one:" $1 }' BBS-list</kbd>
     -| Field number one:aardvark
     -| Field number one:alpo-net
     ...
</pre>
   <p><a name="index-troubleshooting_002c-string-concatenation-840"></a>Because string concatenation does not have an explicit operator, it is
often necessary to insure that it happens at the right time by using
parentheses to enclose the items to concatenate.  For example,
you might expect that the
following code fragment concatenates <code>file</code> and <code>name</code>:

<pre class="example">     file = "file"
     name = "name"
     print "something meaningful" &gt; file name
</pre>
   <p class="noindent">This produces a syntax error with some versions of Unix
<samp><span class="command">awk</span></samp>.<a rel="footnote" href="#fn-30" name="fnd-30"><sup>30</sup></a>
It is necessary to use the following:

<pre class="example">     print "something meaningful" &gt; (file name)
</pre>
   <p><a name="index-order-of-evaluation_002c-concatenation-841"></a><a name="index-evaluation-order_002c-concatenation-842"></a><a name="index-side-effects-843"></a>Parentheses should be used around concatenation in all but the
most common contexts, such as on the righthand side of &lsquo;<samp><span class="samp">=</span></samp>&rsquo;. 
Be careful about the kinds of expressions used in string concatenation. 
In particular, the order of evaluation of expressions used for concatenation
is undefined in the <samp><span class="command">awk</span></samp> language.  Consider this example:

<pre class="example">     BEGIN {
         a = "don't"
         print (a " " (a = "panic"))
     }
</pre>
   <p class="noindent">It is not defined whether the assignment to <code>a</code> happens
before or after the value of <code>a</code> is retrieved for producing the
concatenated value.  The result could be either &lsquo;<samp><span class="samp">don't panic</span></samp>&rsquo;,
or &lsquo;<samp><span class="samp">panic panic</span></samp>&rsquo;. 
<!-- see test/nasty.awk for a worse example -->

   <p>The precedence of concatenation, when mixed with other operators, is often
counter-intuitive.  Consider this example:

<pre class="example">     $ <kbd>awk 'BEGIN { print -12 " " -24 }'</kbd>
     -| -12-24
</pre>
   <p>This &ldquo;obviously&rdquo; is concatenating &minus;12, a space, and &minus;24. 
But where did the space disappear to? 
The answer lies in the combination of operator precedences and
<samp><span class="command">awk</span></samp>'s automatic conversion rules.  To get the desired result,
write the program this way:

<pre class="example">     $ <kbd>awk 'BEGIN { print -12 " " (-24) }'</kbd>
     -| -12 -24
</pre>
   <p>This forces <samp><span class="command">awk</span></samp> to treat the &lsquo;<samp><span class="samp">-</span></samp>&rsquo; on the &lsquo;<samp><span class="samp">-24</span></samp>&rsquo; as unary. 
Otherwise, it's parsed as follows:

<pre class="display">         &minus;12 (<code>" "</code> &minus; 24)
     &rArr; &minus;12 (0 &minus; 24)
     &rArr; &minus;12 (&minus;24)
     &rArr; &minus;12&minus;24
</pre>
   <p>As mentioned earlier,
when doing concatenation, <em>parenthesize</em>.  Otherwise,
you're never quite sure what you'll get.

<div class="node">
<a name="Assignment-Ops"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Increment-Ops">Increment Ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Concatenation">Concatenation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#All-Operators">All Operators</a>

</div>

<h4 class="subsection">6.2.3 Assignment Expressions</h4>

<!-- STARTOFRANGE asop -->
<p><a name="index-assignment-operators-844"></a><!-- STARTOFRANGE opas -->
<a name="index-operators_002c-assignment-845"></a><!-- STARTOFRANGE exas -->
<a name="index-expressions_002c-assignment-846"></a><a name="index-g_t_0040code_007b_003d_007d-_0028equals-sign_0029_002c-_0040code_007b_003d_007d-operator-847"></a><a name="index-equals-sign-_0028_0040code_007b_003d_007d_0029_002c-_0040code_007b_003d_007d-operator-848"></a>An <dfn>assignment</dfn> is an expression that stores a (usually different)
value into a variable.  For example, let's assign the value one to the variable
<code>z</code>:

<pre class="example">     z = 1
</pre>
   <p>After this expression is executed, the variable <code>z</code> has the value one. 
Whatever old value <code>z</code> had before the assignment is forgotten.

   <p>Assignments can also store string values.  For example, the
following stores
the value <code>"this food is good"</code> in the variable <code>message</code>:

<pre class="example">     thing = "food"
     predicate = "good"
     message = "this " thing " is " predicate
</pre>
   <p class="noindent"><a name="index-side-effects_002c-assignment-expressions-849"></a>This also illustrates string concatenation. 
The &lsquo;<samp><span class="samp">=</span></samp>&rsquo; sign is called an <dfn>assignment operator</dfn>.  It is the
simplest assignment operator because the value of the righthand
operand is stored unchanged. 
Most operators (addition, concatenation, and so on) have no effect
except to compute a value.  If the value isn't used, there's no reason to
use the operator.  An assignment operator is different; it does
produce a value, but even if you ignore it, the assignment still
makes itself felt through the alteration of the variable.  We call this
a <dfn>side effect</dfn>.

   <p><a name="index-lvalues_002frvalues-850"></a><a name="index-rvalues_002flvalues-851"></a><a name="index-assignment-operators_002c-lvalues_002frvalues-852"></a><a name="index-operators_002c-assignment-853"></a>The lefthand operand of an assignment need not be a variable
(see <a href="#Variables">Variables</a>); it can also be a field
(see <a href="#Changing-Fields">Changing Fields</a>) or
an array element (see <a href="#Arrays">Arrays</a>). 
These are all called <dfn>lvalues</dfn>,
which means they can appear on the lefthand side of an assignment operator. 
The righthand operand may be any expression; it produces the new value
that the assignment stores in the specified variable, field, or array
element. (Such values are called <dfn>rvalues</dfn>.)

   <p><a name="index-variables_002c-types-of-854"></a>It is important to note that variables do <em>not</em> have permanent types. 
A variable's type is simply the type of whatever value it happens
to hold at the moment.  In the following program fragment, the variable
<code>foo</code> has a numeric value at first, and a string value later on:

<pre class="example">     foo = 1
     print foo
     foo = "bar"
     print foo
</pre>
   <p class="noindent">When the second assignment gives <code>foo</code> a string value, the fact that
it previously had a numeric value is forgotten.

   <p>String values that do not begin with a digit have a numeric value of
zero. After executing the following code, the value of <code>foo</code> is five:

<pre class="example">     foo = "a string"
     foo = foo + 5
</pre>
   <blockquote>
<b>NOTE:</b> Using a variable as a number and then later as a string
can be confusing and is poor programming style.  The previous two examples
illustrate how <samp><span class="command">awk</span></samp> works, <em>not</em> how you should write your
programs! 
</blockquote>

   <p>An assignment is an expression, so it has a value&mdash;the same value that
is assigned.  Thus, &lsquo;<samp><span class="samp">z = 1</span></samp>&rsquo; is an expression with the value one. 
One consequence of this is that you can write multiple assignments together,
such as:

<pre class="example">     x = y = z = 5
</pre>
   <p class="noindent">This example stores the value five in all three variables
(<code>x</code>, <code>y</code>, and <code>z</code>). 
It does so because the
value of &lsquo;<samp><span class="samp">z = 5</span></samp>&rsquo;, which is five, is stored into <code>y</code> and then
the value of &lsquo;<samp><span class="samp">y = z = 5</span></samp>&rsquo;, which is five, is stored into <code>x</code>.

   <p>Assignments may be used anywhere an expression is called for.  For
example, it is valid to write &lsquo;<samp><span class="samp">x != (y = 1)</span></samp>&rsquo; to set <code>y</code> to one,
and then test whether <code>x</code> equals one.  But this style tends to make
programs hard to read; such nesting of assignments should be avoided,
except perhaps in a one-shot program.

   <p><a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_003d_007d-operator-855"></a><a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_003d_007d-operator-856"></a>Aside from &lsquo;<samp><span class="samp">=</span></samp>&rsquo;, there are several other assignment operators that
do arithmetic with the old value of the variable.  For example, the
operator &lsquo;<samp><span class="samp">+=</span></samp>&rsquo; computes a new value by adding the righthand value
to the old value of the variable.  Thus, the following assignment adds
five to the value of <code>foo</code>:

<pre class="example">     foo += 5
</pre>
   <p class="noindent">This is equivalent to the following:

<pre class="example">     foo = foo + 5
</pre>
   <p class="noindent">Use whichever makes the meaning of your program clearer.

   <p>There are situations where using &lsquo;<samp><span class="samp">+=</span></samp>&rsquo; (or any assignment operator)
is <em>not</em> the same as simply repeating the lefthand operand in the
righthand expression.  For example:

   <p><a name="index-Rankin_002c-Pat-857"></a>
<pre class="example">     # Thanks to Pat Rankin for this example
     BEGIN  {
         foo[rand()] += 5
         for (x in foo)
            print x, foo[x]
     
         bar[rand()] = bar[rand()] + 5
         for (x in bar)
            print x, bar[x]
     }
</pre>
   <p><a name="index-operators_002c-assignment_002c-evaluation-order-858"></a><a name="index-assignment-operators_002c-evaluation-order-859"></a>The indices of <code>bar</code> are practically guaranteed to be different, because
<code>rand()</code> returns different values each time it is called. 
(Arrays and the <code>rand()</code> function haven't been covered yet. 
See <a href="#Arrays">Arrays</a>,
and see <a href="#Numeric-Functions">Numeric Functions</a>, for more information). 
This example illustrates an important fact about assignment
operators: the lefthand expression is only evaluated <em>once</em>. 
It is up to the implementation as to which expression is evaluated
first, the lefthand or the righthand. 
Consider this example:

<pre class="example">     i = 1
     a[i += 2] = i + 1
</pre>
   <p class="noindent">The value of <code>a[3]</code> could be either two or four.

   <p><a href="#table_002dassign_002dops">table-assign-ops</a> lists the arithmetic assignment operators.  In each
case, the righthand operand is an expression whose value is converted
to a number.

   <p><a name="index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_003d_007d-operator-860"></a><a name="index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_003d_007d-operator-861"></a><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_003d_007d-operator-862"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_003d_007d-operator-863"></a><a name="index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029_002c-_0040code_007b_002f_003d_007d-operator-864"></a><a name="index-forward-slash-_0028_0040code_007b_002f_007d_0029_002c-_0040code_007b_002f_003d_007d-operator-865"></a><a name="index-g_t_0040code_007b_0025_007d-_0028percent-sign_0029_002c-_0040code_007b_0025_003d_007d-operator-866"></a><a name="index-percent-sign-_0028_0040code_007b_0025_007d_0029_002c-_0040code_007b_0025_003d_007d-operator-867"></a><a name="index-g_t_0040code_007b_005e_007d-_0028caret_0029_002c-_0040code_007b_005e_003d_007d-operator-868"></a><a name="index-caret-_0028_0040code_007b_005e_007d_0029_002c-_0040code_007b_005e_003d_007d-operator-869"></a><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_002a_003d_007d-operator-870"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_002a_003d_007d-operator-871"></a><div class="float">
<a name="table_002dassign_002dops"></a>
   <p><table summary=""><tr align="left"><th valign="top" width="30%">Operator </th><th valign="top" width="70%">Effect
<br></th></tr><tr align="left"><td valign="top" width="30%"><var>lvalue</var> <code>+=</code> <var>increment</var> </td><td valign="top" width="70%">Adds <var>increment</var> to the value of <var>lvalue</var>. 
<br></td></tr><tr align="left"><td valign="top" width="30%"><var>lvalue</var> <code>-=</code> <var>decrement</var> </td><td valign="top" width="70%">Subtracts <var>decrement</var> from the value of <var>lvalue</var>. 
<br></td></tr><tr align="left"><td valign="top" width="30%"><var>lvalue</var> <code>*=</code> <var>coefficient</var> </td><td valign="top" width="70%">Multiplies the value of <var>lvalue</var> by <var>coefficient</var>. 
<br></td></tr><tr align="left"><td valign="top" width="30%"><var>lvalue</var> <code>/=</code> <var>divisor</var> </td><td valign="top" width="70%">Divides the value of <var>lvalue</var> by <var>divisor</var>. 
<br></td></tr><tr align="left"><td valign="top" width="30%"><var>lvalue</var> <code>%=</code> <var>modulus</var> </td><td valign="top" width="70%">Sets <var>lvalue</var> to its remainder by <var>modulus</var>. 
<a name="index-common-extensions_002c-_0040code_007b_002a_002a_003d_007d-operator-872"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_002a_002a_003d_007d-operator-873"></a><a name="index-g_t_0040command_007bawk_007d-language_002c-POSIX-version-874"></a><a name="index-POSIX-_0040command_007bawk_007d-875"></a><br></td></tr><tr align="left"><td valign="top" width="30%"><var>lvalue</var> <code>^=</code> <var>power</var> </td><td valign="top" width="70%">
<br></td></tr><tr align="left"><td valign="top" width="30%"><var>lvalue</var> <code>**=</code> <var>power</var> </td><td valign="top" width="70%">Raises <var>lvalue</var> to the power <var>power</var>. (c.e.)
   <br></td></tr></table>
<p><strong class="float-caption">Table 6.2: Arithmetic Assignment Operators</strong></p></div>

   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007b_002a_002a_003d_007d-operator-and-876"></a><a name="index-portability_002c-_0040code_007b_002a_002a_003d_007d-operator-and-877"></a><blockquote>
<b>NOTE:</b> Only the &lsquo;<samp><span class="samp">^=</span></samp>&rsquo; operator is specified by POSIX. 
For maximum portability, do not use the &lsquo;<samp><span class="samp">**=</span></samp>&rsquo; operator. 
</blockquote>

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Syntactic Ambiguities Between &lsquo;<samp><span class="samp">/=</span></samp>&rsquo; and Regular Expressions</h4>

<p><a name="index-advanced-features_002c-regexp-constants-878"></a><a name="index-dark-corner_002c-regexp-constants_002c-_0040code_007b_002f_003d_007d-operator-and-879"></a><a name="index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029_002c-_0040code_007b_002f_003d_007d-operator_002c-vs_002e-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d-regexp-constant-880"></a><a name="index-forward-slash-_0028_0040code_007b_002f_007d_0029_002c-_0040code_007b_002f_003d_007d-operator_002c-vs_002e-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d-regexp-constant-881"></a><a name="index-regexp-constants_002c-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d_002c-_0040code_007b_002f_003d_007d-operator-and-882"></a>
<!-- derived from email from  "Nelson H. F. Beebe" <beebe@math.utah.edu> -->
<!-- Date: Mon, 1 Sep 1997 13:38:35 -0600 (MDT) -->

   <p><a name="index-dark-corner-883"></a><a name="index-ambiguity_002c-syntactic_003a-_0040code_007b_002f_003d_007d-operator-vs_002e-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d-regexp-constant-884"></a><a name="index-syntactic-ambiguity_003a-_0040code_007b_002f_003d_007d-operator-vs_002e-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d-regexp-constant-885"></a><a name="index-g_t_0040code_007b_002f_003d_007d-operator-vs_002e-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d-regexp-constant-886"></a>There is a syntactic ambiguity between the <code>/=</code> assignment
operator and regexp constants whose first character is an &lsquo;<samp><span class="samp">=</span></samp>&rsquo;. 
(d.c.) 
This is most notable in commercial <samp><span class="command">awk</span></samp> versions. 
For example:

<pre class="example">     $ awk /==/ /dev/null
     error--&gt; awk: syntax error at source line 1
     error--&gt;  context is
     error--&gt;         &gt;&gt;&gt; /= &lt;&lt;&lt;
     error--&gt; awk: bailing out at source line 1
</pre>
   <p class="noindent">A workaround is:

<pre class="example">     awk '/[=]=/' /dev/null
</pre>
   <p><samp><span class="command">gawk</span></samp> does not have this problem,
nor do the other
freely available versions described in
<a href="#Other-Versions">Other Versions</a>. 
<!-- ENDOFRANGE exas -->
<!-- ENDOFRANGE opas -->
<!-- ENDOFRANGE asop -->

<div class="node">
<a name="Increment-Ops"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Assignment-Ops">Assignment Ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#All-Operators">All Operators</a>

</div>

<h4 class="subsection">6.2.4 Increment and Decrement Operators</h4>

<!-- STARTOFRANGE inop -->
<p><a name="index-increment-operators-887"></a><!-- STARTOFRANGE opde -->
<a name="index-operators_002c-decrement_002fincrement-888"></a><dfn>Increment</dfn> and <dfn>decrement operators</dfn> increase or decrease the value of
a variable by one.  An assignment operator can do the same thing, so
the increment operators add no power to the <samp><span class="command">awk</span></samp> language; however, they
are convenient abbreviations for very common operations.

   <p><a name="index-side-effects-889"></a><a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_002b_007d-_0028decrement_002fincrement-operators_0029-890"></a><a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_002b_007d-_0028decrement_002fincrement-operators_0029-891"></a><a name="index-side-effects_002c-decrement_002fincrement-operators-892"></a>The operator used for adding one is written &lsquo;<samp><span class="samp">++</span></samp>&rsquo;.  It can be used to increment
a variable either before or after taking its value. 
To pre-increment a variable <code>v</code>, write &lsquo;<samp><span class="samp">++v</span></samp>&rsquo;.  This adds
one to the value of <code>v</code>&mdash;that new value is also the value of the
expression. (The assignment expression &lsquo;<samp><span class="samp">v += 1</span></samp>&rsquo; is completely
equivalent.) 
Writing the &lsquo;<samp><span class="samp">++</span></samp>&rsquo; after the variable specifies post-increment.  This
increments the variable value just the same; the difference is that the
value of the increment expression itself is the variable's <em>old</em>
value.  Thus, if <code>foo</code> has the value four, then the expression &lsquo;<samp><span class="samp">foo++</span></samp>&rsquo;
has the value four, but it changes the value of <code>foo</code> to five. 
In other words, the operator returns the old value of the variable,
but with the side effect of incrementing it.

   <p>The post-increment &lsquo;<samp><span class="samp">foo++</span></samp>&rsquo; is nearly the same as writing &lsquo;<samp><span class="samp">(foo
+= 1) - 1</span></samp>&rsquo;.  It is not perfectly equivalent because all numbers in
<samp><span class="command">awk</span></samp> are floating-point&mdash;in floating-point, &lsquo;<samp><span class="samp">foo + 1 - 1</span></samp>&rsquo; does
not necessarily equal <code>foo</code>.  But the difference is minute as
long as you stick to numbers that are fairly small (less than 10e12).

   <p><a name="index-g_t_0040code_007b_0024_007d-_0028dollar-sign_0029_002c-incrementing-fields-and-arrays-893"></a><a name="index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-incrementing-fields-and-arrays-894"></a>Fields and array elements are incremented
just like variables.  (Use &lsquo;<samp><span class="samp">$(i++)</span></samp>&rsquo; when you want to do a field reference
and a variable increment at the same time.  The parentheses are necessary
because of the precedence of the field reference operator &lsquo;<samp><span class="samp">$</span></samp>&rsquo;.)

   <p><a name="index-decrement-operators-895"></a>The decrement operator &lsquo;<samp><span class="samp">--</span></samp>&rsquo; works just like &lsquo;<samp><span class="samp">++</span></samp>&rsquo;, except that
it subtracts one instead of adding it.  As with &lsquo;<samp><span class="samp">++</span></samp>&rsquo;, it can be used before
the lvalue to pre-decrement or after it to post-decrement. 
Following is a summary of increment and decrement expressions:

     
<a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_002b_007d-operator-896"></a>
<a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_002b_007d-operator-897"></a>
<dl><dt><code>++</code><var>lvalue</var><dd>Increment <var>lvalue</var>, returning the new value as the
value of the expression.

     <br><dt><var>lvalue</var><code>++</code><dd>Increment <var>lvalue</var>, returning the <em>old</em> value of <var>lvalue</var>
as the value of the expression.

     <p><a name="index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_002d_007d-operator-898"></a><a name="index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_002d_007d-operator-899"></a><br><dt><code>--</code><var>lvalue</var><dd>Decrement <var>lvalue</var>, returning the new value as the
value of the expression. 
(This expression is
like &lsquo;<samp><span class="samp">++</span><var>lvalue</var></samp>&rsquo;, but instead of adding, it subtracts.)

     <br><dt><var>lvalue</var><code>--</code><dd>Decrement <var>lvalue</var>, returning the <em>old</em> value of <var>lvalue</var>
as the value of the expression. 
(This expression is
like &lsquo;<samp><var>lvalue</var><span class="samp">++</span></samp>&rsquo;, but instead of adding, it subtracts.) 
</dl>

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Operator Evaluation Order</h4>

<p><a name="index-advanced-features_002c-operators_0040comma_007b_007d-precedence-900"></a><a name="index-precedence-901"></a><a name="index-operators_002c-precedence-902"></a><a name="index-portability_002c-operators-903"></a><a name="index-evaluation-order-904"></a><a name="index-Marx_002c-Groucho-905"></a><blockquote>
<i>Doctor, doctor!  It hurts when I do this!<br>
So don't do that!</i><br>
Groucho Marx
</blockquote>

<p class="noindent">What happens for something like the following?

<pre class="example">     b = 6
     print b += b++
</pre>
   <p class="noindent">Or something even stranger?

<pre class="example">     b = 6
     b += ++b + b++
     print b
</pre>
   <p><a name="index-side-effects-906"></a>In other words, when do the various side effects prescribed by the
postfix operators (&lsquo;<samp><span class="samp">b++</span></samp>&rsquo;) take effect? 
When side effects happen is <dfn>implementation defined</dfn>. 
In other words, it is up to the particular version of <samp><span class="command">awk</span></samp>. 
The result for the first example may be 12 or 13, and for the second, it
may be 22 or 23.

   <p>In short, doing things like this is not recommended and definitely
not anything that you can rely upon for portability. 
You should avoid such things in your own programs. 
<!-- You'll sleep better at night and be able to look at yourself -->
<!-- in the mirror in the morning. -->
<!-- ENDOFRANGE inop -->
<!-- ENDOFRANGE opde -->
<!-- ENDOFRANGE deop -->

<div class="node">
<a name="Truth-Values-and-Conditions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Function-Calls">Function Calls</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#All-Operators">All Operators</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Expressions">Expressions</a>

</div>

<h3 class="section">6.3 Truth Values and Conditions</h3>

<p>In certain contexts, expression values also serve as &ldquo;truth values;&rdquo; i.e.,
they determine what should happen next as the program runs. This
section describes how <samp><span class="command">awk</span></samp> defines &ldquo;true&rdquo; and &ldquo;false&rdquo;
and how values are compared.

<ul class="menu">
<li><a accesskey="1" href="#Truth-Values">Truth Values</a>:                 What is ``true'' and what is ``false''. 
<li><a accesskey="2" href="#Typing-and-Comparison">Typing and Comparison</a>:        How variables acquire types and how this
                                affects comparison of numbers and strings with
                                &lsquo;<samp><span class="samp">&lt;</span></samp>&rsquo;, etc. 
<li><a accesskey="3" href="#Boolean-Ops">Boolean Ops</a>:                  Combining comparison expressions using boolean
                                operators &lsquo;<samp><span class="samp">||</span></samp>&rsquo; (``or''), &lsquo;<samp><span class="samp">&amp;&amp;</span></samp>&rsquo;
                                (``and'') and &lsquo;<samp><span class="samp">!</span></samp>&rsquo; (``not''). 
<li><a accesskey="4" href="#Conditional-Exp">Conditional Exp</a>:              Conditional expressions select between two
                                subexpressions under control of a third
                                subexpression. 
</ul>

<div class="node">
<a name="Truth-Values"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Typing-and-Comparison">Typing and Comparison</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Truth-Values-and-Conditions">Truth Values and Conditions</a>

</div>

<h4 class="subsection">6.3.1 True and False in <samp><span class="command">awk</span></samp></h4>

<p><a name="index-truth-values-907"></a><a name="index-logical-false_002ftrue-908"></a><a name="index-false_002c-logical-909"></a><a name="index-true_002c-logical-910"></a>
<a name="index-null-strings-911"></a>Many programming languages have a special representation for the concepts
of &ldquo;true&rdquo; and &ldquo;false.&rdquo;  Such languages usually use the special
constants <code>true</code> and <code>false</code>, or perhaps their uppercase
equivalents. 
However, <samp><span class="command">awk</span></samp> is different. 
It borrows a very simple concept of true and
false from C.  In <samp><span class="command">awk</span></samp>, any nonzero numeric value <em>or</em> any
nonempty string value is true.  Any other value (zero or the null
string, <code>""</code>) is false.  The following program prints &lsquo;<samp><span class="samp">A strange
truth value</span></samp>&rsquo; three times:

<pre class="example">     BEGIN {
        if (3.1415927)
            print "A strange truth value"
        if ("Four Score And Seven Years Ago")
            print "A strange truth value"
        if (j = 57)
            print "A strange truth value"
     }
</pre>
   <p><a name="index-dark-corner-912"></a>There is a surprising consequence of the &ldquo;nonzero or non-null&rdquo; rule:
the string constant <code>"0"</code> is actually true, because it is non-null. 
(d.c.)

<div class="node">
<a name="Typing-and-Comparison"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Boolean-Ops">Boolean Ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Truth-Values">Truth Values</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Truth-Values-and-Conditions">Truth Values and Conditions</a>

</div>

<h4 class="subsection">6.3.2 Variable Typing and Comparison Expressions</h4>

<blockquote>
<i>The Guide is definitive. Reality is frequently inaccurate.</i><br>
The Hitchhiker's Guide to the Galaxy
</blockquote>

<!-- STARTOFRANGE comex -->
   <p><a name="index-comparison-expressions-913"></a><!-- STARTOFRANGE excom -->
<a name="index-expressions_002c-comparison-914"></a><a name="index-expressions_002c-matching_002c-See-comparison-expressions-915"></a><a name="index-matching_002c-expressions_002c-See-comparison-expressions-916"></a><a name="index-relational-operators_002c-See-comparison-operators-917"></a><a name="index-operators_002c-relational_002c-See-operators_0040comma_007b_007d-comparison-918"></a><!-- STARTOFRANGE varting -->
<a name="index-variable-typing-919"></a><!-- STARTOFRANGE vartypc -->
<a name="index-variables_002c-types-of_002c-comparison-expressions-and-920"></a>Unlike other programming languages, <samp><span class="command">awk</span></samp> variables do not have a
fixed type. Instead, they can be either a number or a string, depending
upon the value that is assigned to them. 
We look now at how variables are typed, and how <samp><span class="command">awk</span></samp>
compares variables.

<ul class="menu">
<li><a accesskey="1" href="#Variable-Typing">Variable Typing</a>:              String type versus numeric type. 
<li><a accesskey="2" href="#Comparison-Operators">Comparison Operators</a>:         The comparison operators. 
<li><a accesskey="3" href="#POSIX-String-Comparison">POSIX String Comparison</a>:      String comparison with POSIX rules. 
</ul>

<div class="node">
<a name="Variable-Typing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Comparison-Operators">Comparison Operators</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Typing-and-Comparison">Typing and Comparison</a>

</div>

<h5 class="subsubsection">6.3.2.1 String Type Versus Numeric Type</h5>

<p><a name="index-numeric_002c-strings-921"></a><a name="index-strings_002c-numeric-922"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-numeric-strings-and-923"></a>The 1992 POSIX standard introduced
the concept of a <dfn>numeric string</dfn>, which is simply a string that looks
like a number&mdash;for example, <code>"&nbsp;+2"<!-- /@w --></code>.  This concept is used
for determining the type of a variable. 
The type of the variable is important because the types of two variables
determine how they are compared. 
The various versions of the POSIX standard did not get the rules
quite right for several editions.  Fortunately, as of at least the
2008 standard (and possibly earlier), the standard has been fixed,
and variable typing follows these rules:<a rel="footnote" href="#fn-31" name="fnd-31"><sup>31</sup></a>

     <ul>
<li>A numeric constant or the result of a numeric operation has the <var>numeric</var>
attribute.

     <li>A string constant or the result of a string operation has the <var>string</var>
attribute.

     <li>Fields, <code>getline</code> input, <code>FILENAME</code>, <code>ARGV</code> elements,
<code>ENVIRON</code> elements, and the elements of an array created by
<code>patsplit()</code>, <code>split()</code> and <code>match()</code> that are numeric
strings have the <var>strnum</var> attribute.  Otherwise, they have
the <var>string</var> attribute.  Uninitialized variables also have the
<var>strnum</var> attribute.

     <li>Attributes propagate across assignments but are not changed by
any use. 
<!-- (Although a use may cause the entity to acquire an additional -->
<!-- value such that it has both a numeric and string value, this leaves the -->
<!-- attribute unchanged.) -->
<!-- This is important but not relevant -->
</ul>

   <p>The last rule is particularly important. In the following program,
<code>a</code> has numeric type, even though it is later used in a string
operation:

<pre class="example">     BEGIN {
          a = 12.345
          b = a " is a cute number"
          print b
     }
</pre>
   <p>When two operands are compared, either string comparison or numeric comparison
may be used. This depends upon the attributes of the operands, according to the
following symmetric matrix:

<!-- thanks to Karl Berry, kb@cs.umb.edu, for major help with TeX tables -->
<pre class="display">             +&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;
             |       STRING          NUMERIC         STRNUM
     &mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;
             |
     STRING  |       string          string          string
             |
     NUMERIC |       string          numeric         numeric
             |
     STRNUM  |       string          numeric         numeric
     &mdash;&mdash;&mdash;&ndash;+&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;
</pre>
   <p>The basic idea is that user input that looks numeric&mdash;and <em>only</em>
user input&mdash;should be treated as numeric, even though it is actually
made of characters and is therefore also a string. 
Thus, for example, the string constant <code>"&nbsp;+3.14"</code><!-- /@w -->,
when it appears in program source code,
is a string&mdash;even though it looks numeric&mdash;and
is <em>never</em> treated as number for comparison
purposes.

   <p>In short, when one operand is a &ldquo;pure&rdquo; string, such as a string
constant, then a string comparison is performed.  Otherwise, a
numeric comparison is performed.

   <p>This point bears additional emphasis: All user input is made of characters,
and so is first and foremost of <var>string</var> type; input strings
that look numeric are additionally given the <var>strnum</var> attribute. 
Thus, the six-character input string &lsquo;<samp><span class="samp">&nbsp;+3.14</span></samp>&rsquo;<!-- /@w --> receives the
<var>strnum</var> attribute. In contrast, the eight-character literal
<code>"&nbsp;+3.14"</code><!-- /@w --> appearing in program text is a string constant. 
The following examples print &lsquo;<samp><span class="samp">1</span></samp>&rsquo; when the comparison between
the two different constants is true, &lsquo;<samp><span class="samp">0</span></samp>&rsquo; otherwise:

<pre class="example">     $ <kbd>echo ' +3.14' | gawk '{ print $0 == " +3.14" }'</kbd>    <i>True</i>
     -| 1
     $ <kbd>echo ' +3.14' | gawk '{ print $0 == "+3.14" }'</kbd>     <i>False</i>
     -| 0
     $ <kbd>echo ' +3.14' | gawk '{ print $0 == "3.14" }'</kbd>      <i>False</i>
     -| 0
     $ <kbd>echo ' +3.14' | gawk '{ print $0 == 3.14 }'</kbd>        <i>True</i>
     -| 1
     $ <kbd>echo ' +3.14' | gawk '{ print $1 == " +3.14" }'</kbd>    <i>False</i>
     -| 0
     $ <kbd>echo ' +3.14' | gawk '{ print $1 == "+3.14" }'</kbd>     <i>True</i>
     -| 1
     $ <kbd>echo ' +3.14' | gawk '{ print $1 == "3.14" }'</kbd>      <i>False</i>
     -| 0
     $ <kbd>echo ' +3.14' | gawk '{ print $1 == 3.14 }'</kbd>        <i>True</i>
     -| 1
</pre>
   <div class="node">
<a name="Comparison-Operators"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#POSIX-String-Comparison">POSIX String Comparison</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variable-Typing">Variable Typing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Typing-and-Comparison">Typing and Comparison</a>

</div>

<h5 class="subsubsection">6.3.2.2 Comparison Operators</h5>

<p><dfn>Comparison expressions</dfn> compare strings or numbers for
relationships such as equality.  They are written using <dfn>relational
operators</dfn>, which are a superset of those in C. 
<a href="#table_002drelational_002dops">table-relational-ops</a> describes them.

   <p><a name="index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_007d-operator-924"></a><a name="index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_007d-operator-925"></a><a name="index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_003d_007d-operator-926"></a><a name="index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_003d_007d-operator-927"></a><a name="index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_003d_007d-operator-928"></a><a name="index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_003d_007d-operator-929"></a><a name="index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_007d-operator-930"></a><a name="index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_007d-operator-931"></a><a name="index-g_t_0040code_007b_003d_007d-_0028equals-sign_0029_002c-_0040code_007b_003d_003d_007d-operator-932"></a><a name="index-equals-sign-_0028_0040code_007b_003d_007d_0029_002c-_0040code_007b_003d_003d_007d-operator-933"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_003d_007d-operator-934"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_003d_007d-operator-935"></a><a name="index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-936"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-937"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-938"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-939"></a><a name="index-g_t_0040code_007bin_007d-operator-940"></a><div class="float">
<a name="table_002drelational_002dops"></a>
   <p><table summary=""><tr align="left"><th valign="top" width="25%">Expression </th><th valign="top" width="75%">Result
<br></th></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>&lt;</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is less than <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>&lt;=</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is less than or equal to <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>&gt;</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is greater than <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>&gt;=</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is greater than or equal to <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>==</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is equal to <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>!=</code> <var>y</var> </td><td valign="top" width="75%">True if <var>x</var> is not equal to <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>~</code> <var>y</var> </td><td valign="top" width="75%">True if the string <var>x</var> matches the regexp denoted by <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>x</var> <code>!~</code> <var>y</var> </td><td valign="top" width="75%">True if the string <var>x</var> does not match the regexp denoted by <var>y</var>. 
<br></td></tr><tr align="left"><td valign="top" width="25%"><var>subscript</var> <code>in</code> <var>array</var> </td><td valign="top" width="75%">True if the array <var>array</var> has an element with the subscript <var>subscript</var>.
   <br></td></tr></table>
<p><strong class="float-caption">Table 6.3: Relational Operators</strong></p></div>

   <p>Comparison expressions have the value one if true and zero if false. 
When comparing operands of mixed types, numeric operands are converted
to strings using the value of <code>CONVFMT</code>
(see <a href="#Conversion">Conversion</a>).

   <p>Strings are compared
by comparing the first character of each, then the second character of each,
and so on.  Thus, <code>"10"</code> is less than <code>"9"</code>.  If there are two
strings where one is a prefix of the other, the shorter string is less than
the longer one.  Thus, <code>"abc"</code> is less than <code>"abcd"</code>.

   <p><a name="index-troubleshooting_002c-_0040code_007b_003d_003d_007d-operator-941"></a>It is very easy to accidentally mistype the &lsquo;<samp><span class="samp">==</span></samp>&rsquo; operator and
leave off one of the &lsquo;<samp><span class="samp">=</span></samp>&rsquo; characters.  The result is still valid
<samp><span class="command">awk</span></samp> code, but the program does not do what is intended:

<pre class="example">     if (a = b)   # oops! should be a == b
        ...
     else
        ...
</pre>
   <p class="noindent">Unless <code>b</code> happens to be zero or the null string, the <code>if</code>
part of the test always succeeds.  Because the operators are
so similar, this kind of error is very difficult to spot when
scanning the source code.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-comparison-operators-and-942"></a>The following table of expressions illustrates the kind of comparison
<samp><span class="command">gawk</span></samp> performs, as well as what the result of the comparison is:

     <dl>
<dt><code>1.5 &lt;= 2.0</code><dd>numeric comparison (true)

     <br><dt><code>"abc" &gt;= "xyz"</code><dd>string comparison (false)

     <br><dt><code>1.5 != " +2"</code><dd>string comparison (true)

     <br><dt><code>"1e2" &lt; "3"</code><dd>string comparison (true)

     <br><dt><code>a = 2; b = "2"</code><dt><code>a == b</code><dd>string comparison (true)

     <br><dt><code>a = 2; b = " +2"</code><br><dt><code>a == b</code><dd>string comparison (false)
</dl>

   <p>In this example:

<pre class="example">     $ <kbd>echo 1e2 3 | awk '{ print ($1 &lt; $2) ? "true" : "false" }'</kbd>
     -| false
</pre>
   <p><a name="index-comparison-expressions_002c-string-vs_002e_0040_003a-regexp-943"></a><!-- @cindex string comparison vs.@: regexp comparison -->
<!-- @cindex regexp comparison vs.@: string comparison -->
the result is &lsquo;<samp><span class="samp">false</span></samp>&rsquo; because both <code>$1</code> and <code>$2</code>
are user input.  They are numeric strings&mdash;therefore both have
the <var>strnum</var> attribute, dictating a numeric comparison. 
The purpose of the comparison rules and the use of numeric strings is
to attempt to produce the behavior that is &ldquo;least surprising,&rdquo; while
still &ldquo;doing the right thing.&rdquo;

   <p>String comparisons and regular expression comparisons are very different. 
For example:

<pre class="example">     x == "foo"
</pre>
   <p class="noindent">has the value one, or is true if the variable <code>x</code>
is precisely &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;.  By contrast:

<pre class="example">     x ~ /foo/
</pre>
   <p class="noindent">has the value one if <code>x</code> contains &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;, such as
<code>"Oh, what a fool am I!"</code>.

   <p><a name="index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-944"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-945"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-946"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-947"></a>The righthand operand of the &lsquo;<samp><span class="samp">~</span></samp>&rsquo; and &lsquo;<samp><span class="samp">!~</span></samp>&rsquo; operators may be
either a regexp constant (<code>/.../</code>) or an ordinary
expression. In the latter case, the value of the expression as a string is used as a
dynamic regexp (see <a href="#Regexp-Usage">Regexp Usage</a>; also
see <a href="#Computed-Regexps">Computed Regexps</a>).

   <p><a name="index-g_t_0040command_007bawk_007d_002c-regexp-constants-and-948"></a><a name="index-regexp-constants-949"></a>In modern implementations of <samp><span class="command">awk</span></samp>, a constant regular
expression in slashes by itself is also an expression.  The regexp
<code>/</code><var>regexp</var><code>/</code> is an abbreviation for the following comparison expression:

<pre class="example">     $0 ~ /<var>regexp</var>/
</pre>
   <p>One special place where <code>/foo/</code> is <em>not</em> an abbreviation for
&lsquo;<samp><span class="samp">$0 ~ /foo/</span></samp>&rsquo; is when it is the righthand operand of &lsquo;<samp><span class="samp">~</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">!~</span></samp>&rsquo;. 
See <a href="#Using-Constant-Regexps">Using Constant Regexps</a>,
where this is discussed in more detail.

<div class="node">
<a name="POSIX-String-Comparison"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Comparison-Operators">Comparison Operators</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Typing-and-Comparison">Typing and Comparison</a>

</div>

<h5 class="subsubsection">6.3.2.3 String Comparison With POSIX Rules</h5>

<p>The POSIX standard says that string comparison is performed based
on the locale's collating order.  This is usually very different
from the results obtained when doing straight character-by-character
comparison.<a rel="footnote" href="#fn-32" name="fnd-32"><sup>32</sup></a>

   <p>Because this behavior differs considerably from existing practice,
<samp><span class="command">gawk</span></samp> only implements it when in POSIX mode (see <a href="#Options">Options</a>). 
Here is an example to illustrate the difference, in an &lsquo;<samp><span class="samp">en_US.UTF-8</span></samp>&rsquo;
locale:

<pre class="example">     $ <kbd>gawk 'BEGIN { printf("ABC &lt; abc = %s\n",</kbd>
     &gt;                     <kbd>("ABC" &lt; "abc" ? "TRUE" : "FALSE")) }'</kbd>
     -| ABC &lt; abc = TRUE
     $ <kbd>gawk --posix 'BEGIN { printf("ABC &lt; abc = %s\n",</kbd>
     &gt;                             <kbd>("ABC" &lt; "abc" ? "TRUE" : "FALSE")) }'</kbd>
     -| ABC &lt; abc = FALSE
</pre>
   <!-- ENDOFRANGE comex -->
<!-- ENDOFRANGE excom -->
<!-- ENDOFRANGE vartypc -->
<!-- ENDOFRANGE varting -->
<div class="node">
<a name="Boolean-Ops"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Conditional-Exp">Conditional Exp</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Typing-and-Comparison">Typing and Comparison</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Truth-Values-and-Conditions">Truth Values and Conditions</a>

</div>

<h4 class="subsection">6.3.3 Boolean Expressions</h4>

<p><a name="index-and-Boolean_002dlogic-operator-950"></a><a name="index-or-Boolean_002dlogic-operator-951"></a><a name="index-not-Boolean_002dlogic-operator-952"></a><!-- STARTOFRANGE exbo -->
<a name="index-expressions_002c-Boolean-953"></a><!-- STARTOFRANGE boex -->
<a name="index-Boolean-expressions-954"></a><a name="index-operators_002c-Boolean_002c-See-Boolean-expressions-955"></a><a name="index-Boolean-operators_002c-See-Boolean-expressions-956"></a><a name="index-logical-operators_002c-See-Boolean-expressions-957"></a><a name="index-operators_002c-logical_002c-See-Boolean-expressions-958"></a>
A <dfn>Boolean expression</dfn> is a combination of comparison expressions or
matching expressions, using the Boolean operators &ldquo;or&rdquo;
(&lsquo;<samp><span class="samp">||</span></samp>&rsquo;), &ldquo;and&rdquo; (&lsquo;<samp><span class="samp">&amp;&amp;</span></samp>&rsquo;), and &ldquo;not&rdquo; (&lsquo;<samp><span class="samp">!</span></samp>&rsquo;), along with
parentheses to control nesting.  The truth value of the Boolean expression is
computed by combining the truth values of the component expressions. 
Boolean expressions are also referred to as <dfn>logical expressions</dfn>. 
The terms are equivalent.

   <p>Boolean expressions can be used wherever comparison and matching
expressions can be used.  They can be used in <code>if</code>, <code>while</code>,
<code>do</code>, and <code>for</code> statements
(see <a href="#Statements">Statements</a>). 
They have numeric values (one if true, zero if false) that come into play
if the result of the Boolean expression is stored in a variable or
used in arithmetic.

   <p>In addition, every Boolean expression is also a valid pattern, so
you can use one as a pattern to control the execution of rules. 
The Boolean operators are:

     <dl>
<dt><var>boolean1</var><code> &amp;&amp; </code><var>boolean2</var><dd>True if both <var>boolean1</var> and <var>boolean2</var> are true.  For example,
the following statement prints the current input record if it contains
both &lsquo;<samp><span class="samp">2400</span></samp>&rsquo; and &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;:

     <pre class="example">          if ($0 ~ /2400/ &amp;&amp; $0 ~ /foo/) print
</pre>
     <p><a name="index-side-effects_002c-Boolean-operators-959"></a>The subexpression <var>boolean2</var> is evaluated only if <var>boolean1</var>
is true.  This can make a difference when <var>boolean2</var> contains
expressions that have side effects. In the case of &lsquo;<samp><span class="samp">$0 ~ /foo/ &amp;&amp;
($2 == bar++)</span></samp>&rsquo;, the variable <code>bar</code> is not incremented if there is
no substring &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; in the record.

     <br><dt><var>boolean1</var><code> || </code><var>boolean2</var><dd>True if at least one of <var>boolean1</var> or <var>boolean2</var> is true. 
For example, the following statement prints all records in the input
that contain <em>either</em> &lsquo;<samp><span class="samp">2400</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">foo</span></samp>&rsquo; or both:

     <pre class="example">          if ($0 ~ /2400/ || $0 ~ /foo/) print
</pre>
     <p>The subexpression <var>boolean2</var> is evaluated only if <var>boolean1</var>
is false.  This can make a difference when <var>boolean2</var> contains
expressions that have side effects.

     <br><dt><code>! </code><var>boolean</var><dd>True if <var>boolean</var> is false.  For example,
the following program prints &lsquo;<samp><span class="samp">no home!</span></samp>&rsquo; in
the unusual event that the <samp><span class="env">HOME</span></samp> environment
variable is not defined:

     <pre class="example">          BEGIN { if (! ("HOME" in ENVIRON))
                         print "no home!" }
</pre>
     <p>(The <code>in</code> operator is described in
<a href="#Reference-to-Elements">Reference to Elements</a>.) 
</dl>

   <p><a name="index-short_002dcircuit-operators-960"></a><a name="index-operators_002c-short_002dcircuit-961"></a><a name="index-g_t_0040code_007b_0026_007d-_0028ampersand_0029_002c-_0040code_007b_0026_0026_007d-operator-962"></a><a name="index-ampersand-_0028_0040code_007b_0026_007d_0029_002c-_0040code_007b_0026_0026_007d-operator-963"></a><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_007c_007d-operator-964"></a><a name="index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_007c_007d-operator-965"></a>The &lsquo;<samp><span class="samp">&amp;&amp;</span></samp>&rsquo; and &lsquo;<samp><span class="samp">||</span></samp>&rsquo; operators are called <dfn>short-circuit</dfn>
operators because of the way they work.  Evaluation of the full expression
is &ldquo;short-circuited&rdquo; if the result can be determined part way through
its evaluation.

   <p><a name="index-line-continuations-966"></a>Statements that use &lsquo;<samp><span class="samp">&amp;&amp;</span></samp>&rsquo; or &lsquo;<samp><span class="samp">||</span></samp>&rsquo; can be continued simply
by putting a newline after them.  But you cannot put a newline in front
of either of these operators without using backslash continuation
(see <a href="#Statements_002fLines">Statements/Lines</a>).

   <p><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007d--operator-967"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007d-operator-968"></a><a name="index-newlines-969"></a><a name="index-variables_002c-flag-970"></a><a name="index-flag-variables-971"></a>The actual value of an expression using the &lsquo;<samp><span class="samp">!</span></samp>&rsquo; operator is
either one or zero, depending upon the truth value of the expression it
is applied to. 
The &lsquo;<samp><span class="samp">!</span></samp>&rsquo; operator is often useful for changing the sense of a flag
variable from false to true and back again. For example, the following
program is one way to print lines in between special bracketing lines:

<pre class="example">     $1 == "START"   { interested = ! interested; next }
     interested == 1 { print }
     $1 == "END"     { interested = ! interested; next }
</pre>
   <p class="noindent">The variable <code>interested</code>, as with all <samp><span class="command">awk</span></samp> variables, starts
out initialized to zero, which is also false.  When a line is seen whose
first field is &lsquo;<samp><span class="samp">START</span></samp>&rsquo;, the value of <code>interested</code> is toggled
to true, using &lsquo;<samp><span class="samp">!</span></samp>&rsquo;. The next rule prints lines as long as
<code>interested</code> is true.  When a line is seen whose first field is
&lsquo;<samp><span class="samp">END</span></samp>&rsquo;, <code>interested</code> is toggled back to false.<a rel="footnote" href="#fn-33" name="fnd-33"><sup>33</sup></a>

   <p><a name="index-g_t_0040code_007bnext_007d-statement-972"></a><blockquote>
<b>NOTE:</b> The <code>next</code> statement is discussed in
<a href="#Next-Statement">Next Statement</a>. 
<code>next</code> tells <samp><span class="command">awk</span></samp> to skip the rest of the rules, get the
next record, and start processing the rules over again at the top. 
The reason it's there is to avoid printing the bracketing
&lsquo;<samp><span class="samp">START</span></samp>&rsquo; and &lsquo;<samp><span class="samp">END</span></samp>&rsquo; lines. 
</blockquote>
   <!-- ENDOFRANGE exbo -->
<!-- ENDOFRANGE boex -->

<div class="node">
<a name="Conditional-Exp"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Boolean-Ops">Boolean Ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Truth-Values-and-Conditions">Truth Values and Conditions</a>

</div>

<h4 class="subsection">6.3.4 Conditional Expressions</h4>

<p><a name="index-conditional-expressions-973"></a><a name="index-expressions_002c-conditional-974"></a><a name="index-expressions_002c-selecting-975"></a>
A <dfn>conditional expression</dfn> is a special kind of expression that has
three operands.  It allows you to use one expression's value to select
one of two other expressions. 
The conditional expression is the same as in the C language,
as shown here:

<pre class="example">     <var>selector</var> ? <var>if-true-exp</var> : <var>if-false-exp</var>
</pre>
   <p class="noindent">There are three subexpressions.  The first, <var>selector</var>, is always
computed first.  If it is &ldquo;true&rdquo; (not zero or not null), then
<var>if-true-exp</var> is computed next and its value becomes the value of
the whole expression.  Otherwise, <var>if-false-exp</var> is computed next
and its value becomes the value of the whole expression. 
For example, the following expression produces the absolute value of <code>x</code>:

<pre class="example">     x &gt;= 0 ? x : -x
</pre>
   <p><a name="index-side-effects_002c-conditional-expressions-976"></a>Each time the conditional expression is computed, only one of
<var>if-true-exp</var> and <var>if-false-exp</var> is used; the other is ignored. 
This is important when the expressions have side effects.  For example,
this conditional expression examines element <code>i</code> of either array
<code>a</code> or array <code>b</code>, and increments <code>i</code>:

<pre class="example">     x == y ? a[i++] : b[i++]
</pre>
   <p class="noindent">This is guaranteed to increment <code>i</code> exactly once, because each time
only one of the two increment expressions is executed
and the other is not. 
See <a href="#Arrays">Arrays</a>,
for more information about arrays.

   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-line-continuations-977"></a><a name="index-line-continuations_002c-_0040command_007bgawk_007d-978"></a><a name="index-g_t_0040command_007bgawk_007d_002c-line-continuation-in-979"></a>As a minor <samp><span class="command">gawk</span></samp> extension,
a statement that uses &lsquo;<samp><span class="samp">?:</span></samp>&rsquo; can be continued simply
by putting a newline after either character. 
However, putting a newline in front
of either character does not work without using backslash continuation
(see <a href="#Statements_002fLines">Statements/Lines</a>). 
If <samp><span class="option">--posix</span></samp> is specified
(see <a href="#Options">Options</a>), then this extension is disabled.

<div class="node">
<a name="Function-Calls"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Precedence">Precedence</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Truth-Values-and-Conditions">Truth Values and Conditions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Expressions">Expressions</a>

</div>

<h3 class="section">6.4 Function Calls</h3>

<p><a name="index-function-calls-980"></a>
A <dfn>function</dfn> is a name for a particular calculation. 
This enables you to
ask for it by name at any point in the program.  For
example, the function <code>sqrt()</code> computes the square root of a number.

   <p><a name="index-functions_002c-built_002din-981"></a>A fixed set of functions are <dfn>built-in</dfn>, which means they are
available in every <samp><span class="command">awk</span></samp> program.  The <code>sqrt()</code> function is one
of these.  See <a href="#Built_002din">Built-in</a>, for a list of built-in
functions and their descriptions.  In addition, you can define
functions for use in your program. 
See <a href="#User_002ddefined">User-defined</a>,
for instructions on how to do this.

   <p><a name="index-arguments_002c-in-function-calls-982"></a>The way to use a function is with a <dfn>function call</dfn> expression,
which consists of the function name followed immediately by a list of
<dfn>arguments</dfn> in parentheses.  The arguments are expressions that
provide the raw materials for the function's calculations. 
When there is more than one argument, they are separated by commas.  If
there are no arguments, just write &lsquo;<samp><span class="samp">()</span></samp>&rsquo; after the function name. 
The following examples show function calls with and without arguments:

<pre class="example">     sqrt(x^2 + y^2)        <i>one argument</i>
     atan2(y, x)            <i>two arguments</i>
     rand()                 <i>no arguments</i>
</pre>
   <p><a name="index-troubleshooting_002c-function-call-syntax-983"></a><blockquote>
<b>CAUTION:</b> Do not put any space between the function name and the open-parenthesis! 
A user-defined function name looks just like the name of a
variable&mdash;a space would make the expression look like concatenation of
a variable with an expression inside parentheses. 
With built-in functions, space before the parenthesis is harmless, but
it is best not to get into the habit of using space to avoid mistakes
with user-defined functions. 
</blockquote>

   <p>Each function expects a particular number
of arguments.  For example, the <code>sqrt()</code> function must be called with
a single argument, the number of which to take the square root:

<pre class="example">     sqrt(<var>argument</var>)
</pre>
   <p>Some of the built-in functions have one or
more optional arguments. 
If those arguments are not supplied, the functions
use a reasonable default value. 
See <a href="#Built_002din">Built-in</a>, for full details.  If arguments
are omitted in calls to user-defined functions, then those arguments are
treated as local variables and initialized to the empty string
(see <a href="#User_002ddefined">User-defined</a>).

   <p>As an advanced feature, <samp><span class="command">gawk</span></samp> provides indirect function calls,
which is a way to choose the function to call at runtime, instead of
when you write the source code to your program. We defer discussion of
this feature until later; see <a href="#Indirect-Calls">Indirect Calls</a>.

   <p><a name="index-side-effects_002c-function-calls-984"></a>Like every other expression, the function call has a value, which is
computed by the function based on the arguments you give it.  In this
example, the value of &lsquo;<samp><span class="samp">sqrt(</span><var>argument</var><span class="samp">)</span></samp>&rsquo; is the square root of
<var>argument</var>. 
The following program reads numbers, one number per line, and prints the
square root of each one:

<pre class="example">     $ <kbd>awk '{ print "The square root of", $1, "is", sqrt($1) }'</kbd>
     <kbd>1</kbd>
     -| The square root of 1 is 1
     <kbd>3</kbd>
     -| The square root of 3 is 1.73205
     <kbd>5</kbd>
     -| The square root of 5 is 2.23607
     <kbd>Ctrl-d</kbd>
</pre>
   <p>A function can also have side effects, such as assigning
values to certain variables or doing I/O. 
This program shows how the <code>match()</code> function
(see <a href="#String-Functions">String Functions</a>)
changes the variables <code>RSTART</code> and <code>RLENGTH</code>:

<pre class="example">     {
         if (match($1, $2))
             print RSTART, RLENGTH
         else
             print "no match"
     }
</pre>
   <p class="noindent">Here is a sample run:

<pre class="example">     $ <kbd>awk -f matchit.awk</kbd>
     <kbd>aaccdd  c+</kbd>
     -| 3 2
     <kbd>foo     bar</kbd>
     -| no match
     <kbd>abcdefg e</kbd>
     -| 5 1
</pre>
   <div class="node">
<a name="Precedence"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Locales">Locales</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Function-Calls">Function Calls</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Expressions">Expressions</a>

</div>

<h3 class="section">6.5 Operator Precedence (How Operators Nest)</h3>

<!-- STARTOFRANGE prec -->
<p><a name="index-precedence-985"></a><!-- STARTOFRANGE oppr -->
<a name="index-operators_002c-precedence-986"></a>
<dfn>Operator precedence</dfn> determines how operators are grouped when
different operators appear close by in one expression.  For example,
&lsquo;<samp><span class="samp">*</span></samp>&rsquo; has higher precedence than &lsquo;<samp><span class="samp">+</span></samp>&rsquo;; thus, &lsquo;<samp><span class="samp">a + b * c</span></samp>&rsquo;
means to multiply <code>b</code> and <code>c</code>, and then add <code>a</code> to the
product (i.e., &lsquo;<samp><span class="samp">a + (b * c)</span></samp>&rsquo;).

   <p>The normal precedence of the operators can be overruled by using parentheses. 
Think of the precedence rules as saying where the
parentheses are assumed to be.  In
fact, it is wise to always use parentheses whenever there is an unusual
combination of operators, because other people who read the program may
not remember what the precedence is in this case. 
Even experienced programmers occasionally forget the exact rules,
which leads to mistakes. 
Explicit parentheses help prevent
any such mistakes.

   <p>When operators of equal precedence are used together, the leftmost
operator groups first, except for the assignment, conditional, and
exponentiation operators, which group in the opposite order. 
Thus, &lsquo;<samp><span class="samp">a - b + c</span></samp>&rsquo; groups as &lsquo;<samp><span class="samp">(a - b) + c</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">a = b = c</span></samp>&rsquo; groups as &lsquo;<samp><span class="samp">a = (b = c)</span></samp>&rsquo;.

   <p>Normally the precedence of prefix unary operators does not matter,
because there is only one way to interpret
them: innermost first.  Thus, &lsquo;<samp><span class="samp">$++i</span></samp>&rsquo; means &lsquo;<samp><span class="samp">$(++i)</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">++$x</span></samp>&rsquo; means &lsquo;<samp><span class="samp">++($x)</span></samp>&rsquo;.  However, when another operator follows
the operand, then the precedence of the unary operators can matter. 
&lsquo;<samp><span class="samp">$x^2</span></samp>&rsquo; means &lsquo;<samp><span class="samp">($x)^2</span></samp>&rsquo;, but &lsquo;<samp><span class="samp">-x^2</span></samp>&rsquo; means
&lsquo;<samp><span class="samp">-(x^2)</span></samp>&rsquo;, because &lsquo;<samp><span class="samp">-</span></samp>&rsquo; has lower precedence than &lsquo;<samp><span class="samp">^</span></samp>&rsquo;,
whereas &lsquo;<samp><span class="samp">$</span></samp>&rsquo; has higher precedence. 
Also, operators cannot be combined in a way that violates the
precedence rules; for example, &lsquo;<samp><span class="samp">$$0++--</span></samp>&rsquo; is not a valid
expression because the first &lsquo;<samp><span class="samp">$</span></samp>&rsquo; has higher precedence than the
&lsquo;<samp><span class="samp">++</span></samp>&rsquo;; to avoid the problem the expression can be rewritten as
&lsquo;<samp><span class="samp">$($0++)--</span></samp>&rsquo;.

   <p>This table presents <samp><span class="command">awk</span></samp>'s operators, in order of highest
to lowest precedence:

<!-- use @code in the items, looks better in TeX w/o all the quotes -->
     <dl>
<dt><code>(...)</code><dd>Grouping.

     <p><a name="index-g_t_0040code_007b_0024_007d-_0028dollar-sign_0029_002c-_0040code_007b_0024_007d-field-operator-987"></a><a name="index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-_0040code_007b_0024_007d-field-operator-988"></a><br><dt><code>$</code><dd>Field reference.

     <p><a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_002b_007d-operator-989"></a><a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_002b_007d-operator-990"></a><a name="index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_002d_007d-_0028decrement_002fincrement_0029-operator-991"></a><a name="index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_002d_007d-_0028decrement_002fincrement_0029-operators-992"></a><br><dt><code>++ --</code><dd>Increment, decrement.

     <p><a name="index-g_t_0040code_007b_005e_007d-_0028caret_0029_002c-_0040code_007b_005e_007d-operator-993"></a><a name="index-caret-_0028_0040code_007b_005e_007d_0029_002c-_0040code_007b_005e_007d-operator-994"></a><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_002a_007d-operator-995"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_002a_007d-operator-996"></a><br><dt><code>^ **</code><dd>Exponentiation.  These operators group right-to-left.

     <p><a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_007d-operator-997"></a><a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_007d-operator-998"></a><a name="index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_007d-operator-999"></a><a name="index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_007d-operator-1000"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007d-operator-1001"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007d-operator-1002"></a><br><dt><code>+ - !</code><dd>Unary plus, minus, logical &ldquo;not.&rdquo;

     <p><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_007d-operator_002c-as-multiplication-operator-1003"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_007d-operator_002c-as-multiplication-operator-1004"></a><a name="index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029_002c-_0040code_007b_002f_007d-operator-1005"></a><a name="index-forward-slash-_0028_0040code_007b_002f_007d_0029_002c-_0040code_007b_002f_007d-operator-1006"></a><a name="index-g_t_0040code_007b_0025_007d-_0028percent-sign_0029_002c-_0040code_007b_0025_007d-operator-1007"></a><a name="index-percent-sign-_0028_0040code_007b_0025_007d_0029_002c-_0040code_007b_0025_007d-operator-1008"></a><br><dt><code>* / %</code><dd>Multiplication, division, remainder.

     <p><a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_007d-operator-1009"></a><a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_007d-operator-1010"></a><a name="index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_007d-operator-1011"></a><a name="index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_007d-operator-1012"></a><br><dt><code>+ -</code><dd>Addition, subtraction.

     <br><dt><span class="roman">String Concatenation</span><dd>There is no special symbol for concatenation. 
The operands are simply written side by side
(see <a href="#Concatenation">Concatenation</a>).

     <p><a name="index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_007d-operator-1013"></a><a name="index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_007d-operator-1014"></a><a name="index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_003d_007d-operator-1015"></a><a name="index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_003d_007d-operator-1016"></a><a name="index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_003d_007d-operator-1017"></a><a name="index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_003d_007d-operator-1018"></a><a name="index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_007d-operator-1019"></a><a name="index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_007d-operator-1020"></a><a name="index-g_t_0040code_007b_003d_007d-_0028equals-sign_0029_002c-_0040code_007b_003d_003d_007d-operator-1021"></a><a name="index-equals-sign-_0028_0040code_007b_003d_007d_0029_002c-_0040code_007b_003d_003d_007d-operator-1022"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_003d_007d-operator-1023"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_003d_007d-operator-1024"></a><a name="index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_003e_007d-operator-_0028I_002fO_0029-1025"></a><a name="index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_003e_007d-operator-_0028I_002fO_0029-1026"></a><a name="index-operators_002c-input_002foutput-1027"></a><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_007d-operator-_0028I_002fO_0029-1028"></a><a name="index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_007d-operator-_0028I_002fO_0029-1029"></a><a name="index-operators_002c-input_002foutput-1030"></a><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-1031"></a><a name="index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-1032"></a><a name="index-operators_002c-input_002foutput-1033"></a><br><dt><code>&lt; &lt;= == != &gt; &gt;= &gt;&gt; | |&amp;</code><dd>Relational and redirection. 
The relational operators and the redirections have the same precedence
level.  Characters such as &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo; serve both as relationals and as
redirections; the context distinguishes between the two meanings.

     <p><a name="index-g_t_0040code_007bprint_007d-statement_002c-I_002fO-operators-in-1034"></a><a name="index-g_t_0040code_007bprintf_007d-statement_002c-I_002fO-operators-in-1035"></a>Note that the I/O redirection operators in <code>print</code> and <code>printf</code>
statements belong to the statement level, not to expressions.  The
redirection does not produce an expression that could be the operand of
another operator.  As a result, it does not make sense to use a
redirection operator near another operator of lower precedence without
parentheses.  Such combinations (for example, &lsquo;<samp><span class="samp">print foo &gt; a ? b : c</span></samp>&rsquo;),
result in syntax errors. 
The correct way to write this statement is &lsquo;<samp><span class="samp">print foo &gt; (a ? b : c)</span></samp>&rsquo;.

     <p><a name="index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-1036"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-1037"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-1038"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-1039"></a><br><dt><code>~ !~</code><dd>Matching, nonmatching.

     <p><a name="index-g_t_0040code_007bin_007d-operator-1040"></a><br><dt><code>in</code><dd>Array membership.

     <p><a name="index-g_t_0040code_007b_0026_007d-_0028ampersand_0029_002c-_0040code_007b_0026_0026_007d-operator-1041"></a><a name="index-ampersand-_0028_0040code_007b_0026_007d_0029_002c-_0040code_007b_0026_0026_007d-operator-1042"></a><br><dt><code>&amp;&amp;</code><dd>Logical &ldquo;and&rdquo;.

     <p><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_007c_007d-operator-1043"></a><a name="index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_007c_007d-operator-1044"></a><br><dt><code>||</code><dd>Logical &ldquo;or&rdquo;.

     <p><a name="index-g_t_0040code_007b_003f_007d-_0028question-mark_0029_002c-_0040code_007b_003f_003a_007d-operator-1045"></a><a name="index-question-mark-_0028_0040code_007b_003f_007d_0029_002c-_0040code_007b_003f_003a_007d-operator-1046"></a><br><dt><code>?:</code><dd>Conditional.  This operator groups right-to-left.

     <p><a name="index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_003d_007d-operator-1047"></a><a name="index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_003d_007d-operator-1048"></a><a name="index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_003d_007d-operator-1049"></a><a name="index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_003d_007d-operator-1050"></a><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_003d_007d-operator-1051"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_003d_007d-operator-1052"></a><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_002a_003d_007d-operator-1053"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_002a_003d_007d-operator-1054"></a><a name="index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029_002c-_0040code_007b_002f_003d_007d-operator-1055"></a><a name="index-forward-slash-_0028_0040code_007b_002f_007d_0029_002c-_0040code_007b_002f_003d_007d-operator-1056"></a><a name="index-g_t_0040code_007b_0025_007d-_0028percent-sign_0029_002c-_0040code_007b_0025_003d_007d-operator-1057"></a><a name="index-percent-sign-_0028_0040code_007b_0025_007d_0029_002c-_0040code_007b_0025_003d_007d-operator-1058"></a><a name="index-g_t_0040code_007b_005e_007d-_0028caret_0029_002c-_0040code_007b_005e_003d_007d-operator-1059"></a><a name="index-caret-_0028_0040code_007b_005e_007d_0029_002c-_0040code_007b_005e_003d_007d-operator-1060"></a><br><dt><code>= += -= *= /= %= ^= **=</code><dd>Assignment.  These operators group right-to-left. 
</dl>

   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007b_002a_002a_007d-operator-and-1061"></a><a name="index-portability_002c-operators_002c-not-in-POSIX-_0040command_007bawk_007d-1062"></a><blockquote>
<b>NOTE:</b> The &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">**</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">**=</span></samp>&rsquo; operators are not specified by POSIX. 
For maximum portability, do not use them. 
</blockquote>
   <!-- ENDOFRANGE prec -->
<!-- ENDOFRANGE oppr -->

<div class="node">
<a name="Locales"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Precedence">Precedence</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Expressions">Expressions</a>

</div>

<h3 class="section">6.6 Where You Are Makes A Difference</h3>

<p><a name="index-locale_002c-definition-of-1063"></a>
Modern systems support the notion of <dfn>locales</dfn>: a way to tell
the system about the local character set and language.

   <p>Once upon a time, the locale setting used to affect regexp matching
(see <a href="#Ranges-and-Locales">Ranges and Locales</a>), but this is no longer true.

   <p>Locales can affect record splitting. 
For the normal case of &lsquo;<samp><span class="samp">RS = "\n"</span></samp>&rsquo;, the locale is largely irrelevant. 
For other single-character record separators, setting &lsquo;<samp><span class="samp">LC_ALL=C</span></samp>&rsquo;
in the environment
will give you much better performance when reading records.  Otherwise,
<samp><span class="command">gawk</span></samp> has to make several function calls, <em>per input
character</em>, to find the record terminator.

   <p>According to POSIX, string comparison is also affected by locales
(similar to regular expressions).  The details are presented in
<a href="#POSIX-String-Comparison">POSIX String Comparison</a>.

   <p>Finally, the locale affects the value of the decimal point character
used when <samp><span class="command">gawk</span></samp> parses input data.  This is discussed in
detail in <a href="#Conversion">Conversion</a>.

<!-- ENDOFRANGE exps -->
<div class="node">
<a name="Patterns-and-Actions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Arrays">Arrays</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Expressions">Expressions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">7 Patterns, Actions, and Variables</h2>

<!-- STARTOFRANGE pat -->
<p><a name="index-patterns-1064"></a>
As you have already seen, each <samp><span class="command">awk</span></samp> statement consists of
a pattern with an associated action.  This chapter describes how
you build patterns and actions, what kinds of things you can do within
actions, and <samp><span class="command">awk</span></samp>'s built-in variables.

   <p>The pattern-action rules and the statements available for use
within actions form the core of <samp><span class="command">awk</span></samp> programming. 
In a sense, everything covered
up to here has been the foundation
that programs are built on top of.  Now it's time to start
building something useful.

<ul class="menu">
<li><a accesskey="1" href="#Pattern-Overview">Pattern Overview</a>:             What goes into a pattern. 
<li><a accesskey="2" href="#Using-Shell-Variables">Using Shell Variables</a>:        How to use shell variables with <samp><span class="command">awk</span></samp>. 
<li><a accesskey="3" href="#Action-Overview">Action Overview</a>:              What goes into an action. 
<li><a accesskey="4" href="#Statements">Statements</a>:                   Describes the various control statements in
                                detail. 
<li><a accesskey="5" href="#Built_002din-Variables">Built-in Variables</a>:           Summarizes the built-in variables. 
</ul>

<div class="node">
<a name="Pattern-Overview"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-Shell-Variables">Using Shell Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Patterns-and-Actions">Patterns and Actions</a>

</div>

<h3 class="section">7.1 Pattern Elements</h3>

<ul class="menu">
<li><a accesskey="1" href="#Regexp-Patterns">Regexp Patterns</a>:              Using regexps as patterns. 
<li><a accesskey="2" href="#Expression-Patterns">Expression Patterns</a>:          Any expression can be used as a pattern. 
<li><a accesskey="3" href="#Ranges">Ranges</a>:                       Pairs of patterns specify record ranges. 
<li><a accesskey="4" href="#BEGIN_002fEND">BEGIN/END</a>:                    Specifying initialization and cleanup rules. 
<li><a accesskey="5" href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a>:            Two special patterns for advanced control. 
<li><a accesskey="6" href="#Empty">Empty</a>:                        The empty pattern, which matches every record. 
</ul>

<p><a name="index-patterns_002c-types-of-1065"></a>Patterns in <samp><span class="command">awk</span></samp> control the execution of rules&mdash;a rule is
executed when its pattern matches the current input record. 
The following is a summary of the types of <samp><span class="command">awk</span></samp> patterns:

     <dl>
<dt><code>/</code><var>regular expression</var><code>/</code><dd>A regular expression. It matches when the text of the
input record fits the regular expression. 
(See <a href="#Regexp">Regexp</a>.)

     <br><dt><var>expression</var><dd>A single expression.  It matches when its value
is nonzero (if a number) or non-null (if a string). 
(See <a href="#Expression-Patterns">Expression Patterns</a>.)

     <br><dt><var>pat1</var><code>, </code><var>pat2</var><dd>A pair of patterns separated by a comma, specifying a range of records. 
The range includes both the initial record that matches <var>pat1</var> and
the final record that matches <var>pat2</var>. 
(See <a href="#Ranges">Ranges</a>.)

     <br><dt><code>BEGIN</code><dt><code>END</code><dd>Special patterns for you to supply startup or cleanup actions for your
<samp><span class="command">awk</span></samp> program. 
(See <a href="#BEGIN_002fEND">BEGIN/END</a>.)

     <br><dt><code>BEGINFILE</code><dt><code>ENDFILE</code><dd>Special patterns for you to supply startup or cleanup actions to be
done on a per file basis. 
(See <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a>.)

     <br><dt><var>empty</var><dd>The empty pattern matches every input record. 
(See <a href="#Empty">Empty</a>.) 
</dl>

<div class="node">
<a name="Regexp-Patterns"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Expression-Patterns">Expression Patterns</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Overview">Pattern Overview</a>

</div>

<h4 class="subsection">7.1.1 Regular Expressions as Patterns</h4>

<p><a name="index-patterns_002c-expressions-as-1066"></a><a name="index-regular-expressions_002c-as-patterns-1067"></a>
Regular expressions are one of the first kinds of patterns presented
in this book. 
This kind of pattern is simply a regexp constant in the pattern part of
a rule.  Its  meaning is &lsquo;<samp><span class="samp">$0 ~ /</span><var>pattern</var><span class="samp">/</span></samp>&rsquo;. 
The pattern matches when the input record matches the regexp. 
For example:

<pre class="example">     /foo|bar|baz/  { buzzwords++ }
     END            { print buzzwords, "buzzwords seen" }
</pre>
   <div class="node">
<a name="Expression-Patterns"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Ranges">Ranges</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Regexp-Patterns">Regexp Patterns</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Overview">Pattern Overview</a>

</div>

<h4 class="subsection">7.1.2 Expressions as Patterns</h4>

<p><a name="index-expressions_002c-as-patterns-1068"></a>
Any <samp><span class="command">awk</span></samp> expression is valid as an <samp><span class="command">awk</span></samp> pattern. 
The pattern matches if the expression's value is nonzero (if a
number) or non-null (if a string). 
The expression is reevaluated each time the rule is tested against a new
input record.  If the expression uses fields such as <code>$1</code>, the
value depends directly on the new input record's text; otherwise, it
depends on only what has happened so far in the execution of the
<samp><span class="command">awk</span></samp> program.

   <p><a name="index-comparison-expressions_002c-as-patterns-1069"></a><a name="index-patterns_002c-comparison-expressions-as-1070"></a>Comparison expressions, using the comparison operators described in
<a href="#Typing-and-Comparison">Typing and Comparison</a>,
are a very common kind of pattern. 
Regexp matching and nonmatching are also very common expressions. 
The left operand of the &lsquo;<samp><span class="samp">~</span></samp>&rsquo; and &lsquo;<samp><span class="samp">!~</span></samp>&rsquo; operators is a string. 
The right operand is either a constant regular expression enclosed in
slashes (<code>/</code><var>regexp</var><code>/</code>), or any expression whose string value
is used as a dynamic regular expression
(see <a href="#Computed-Regexps">Computed Regexps</a>). 
The following example prints the second field of each input record
whose first field is precisely &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;:

   <p><a name="index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029_002c-patterns-and-1071"></a><a name="index-forward-slash-_0028_0040code_007b_002f_007d_0029_002c-patterns-and-1072"></a><a name="index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-1073"></a><a name="index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-1074"></a><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-1075"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-1076"></a>
<pre class="example">     $ <kbd>awk '$1 == "foo" { print $2 }' BBS-list</kbd>
</pre>
   <p class="noindent">(There is no output, because there is no BBS site with the exact name &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;.) 
Contrast this with the following regular expression match, which
accepts any record with a first field that contains &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;:

<pre class="example">     $ <kbd>awk '$1 ~ /foo/ { print $2 }' BBS-list</kbd>
     -| 555-1234
     -| 555-6699
     -| 555-6480
     -| 555-2127
</pre>
   <p><a name="index-regexp-constants_002c-as-patterns-1077"></a><a name="index-patterns_002c-regexp-constants-as-1078"></a>A regexp constant as a pattern is also a special case of an expression
pattern.  The expression <code>/foo/</code> has the value one if &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;
appears in the current input record. Thus, as a pattern, <code>/foo/</code>
matches any record containing &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;.

   <p><a name="index-Boolean-expressions_002c-as-patterns-1079"></a>Boolean expressions are also commonly used as patterns. 
Whether the pattern
matches an input record depends on whether its subexpressions match. 
For example, the following command prints all the records in
<samp><span class="file">BBS-list</span></samp> that contain both &lsquo;<samp><span class="samp">2400</span></samp>&rsquo; and &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;:

<pre class="example">     $ <kbd>awk '/2400/ &amp;&amp; /foo/' BBS-list</kbd>
     -| fooey        555-1234     2400/1200/300     B
</pre>
   <p>The following command prints all records in
<samp><span class="file">BBS-list</span></samp> that contain <em>either</em> &lsquo;<samp><span class="samp">2400</span></samp>&rsquo; or &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;
(or both, of course):

<pre class="example">     $ <kbd>awk '/2400/ || /foo/' BBS-list</kbd>
     -| alpo-net     555-3412     2400/1200/300     A
     -| bites        555-1675     2400/1200/300     A
     -| fooey        555-1234     2400/1200/300     B
     -| foot         555-6699     1200/300          B
     -| macfoo       555-6480     1200/300          A
     -| sdace        555-3430     2400/1200/300     A
     -| sabafoo      555-2127     1200/300          C
</pre>
   <p>The following command prints all records in
<samp><span class="file">BBS-list</span></samp> that do <em>not</em> contain the string &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;:

<pre class="example">     $ <kbd>awk '! /foo/' BBS-list</kbd>
     -| aardvark     555-5553     1200/300          B
     -| alpo-net     555-3412     2400/1200/300     A
     -| barfly       555-7685     1200/300          A
     -| bites        555-1675     2400/1200/300     A
     -| camelot      555-0542     300               C
     -| core         555-2912     1200/300          C
     -| sdace        555-3430     2400/1200/300     A
</pre>
   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-Boolean-patterns-and-1080"></a><a name="index-g_t_0040code_007bEND_007d-pattern_002c-Boolean-patterns-and-1081"></a><a name="index-g_t_0040code_007bBEGINFILE_007d-pattern_002c-Boolean-patterns-and-1082"></a><a name="index-g_t_0040code_007bENDFILE_007d-pattern_002c-Boolean-patterns-and-1083"></a>The subexpressions of a Boolean operator in a pattern can be constant regular
expressions, comparisons, or any other <samp><span class="command">awk</span></samp> expressions.  Range
patterns are not expressions, so they cannot appear inside Boolean
patterns.  Likewise, the special patterns <code>BEGIN</code>, <code>END</code>,
<code>BEGINFILE</code> and <code>ENDFILE</code>,
which never match any input record, are not expressions and cannot
appear inside Boolean patterns.

   <p>The precedence of the different operators which can appear in
patterns is described in <a href="#Precedence">Precedence</a>.

<div class="node">
<a name="Ranges"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#BEGIN_002fEND">BEGIN/END</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Expression-Patterns">Expression Patterns</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Overview">Pattern Overview</a>

</div>

<h4 class="subsection">7.1.3 Specifying Record Ranges with Patterns</h4>

<p><a name="index-range-patterns-1084"></a><a name="index-patterns_002c-ranges-in-1085"></a><a name="index-lines_002c-matching-ranges-of-1086"></a><a name="index-g_t_0040code_007b_002c_007d-_0028comma_0029_002c-in-range-patterns-1087"></a><a name="index-comma-_0028_0040code_007b_002c_007d_0029_002c-in-range-patterns-1088"></a>A <dfn>range pattern</dfn> is made of two patterns separated by a comma, in
the form &lsquo;<samp><var>begpat</var><span class="samp">, </span><var>endpat</var></samp>&rsquo;.  It is used to match ranges of
consecutive input records.  The first pattern, <var>begpat</var>, controls
where the range begins, while <var>endpat</var> controls where
the pattern ends.  For example, the following:

<pre class="example">     awk '$1 == "on", $1 == "off"' myfile
</pre>
   <p class="noindent">prints every record in <samp><span class="file">myfile</span></samp> between &lsquo;<samp><span class="samp">on</span></samp>&rsquo;/&lsquo;<samp><span class="samp">off</span></samp>&rsquo; pairs, inclusive.

   <p>A range pattern starts out by matching <var>begpat</var> against every
input record.  When a record matches <var>begpat</var>, the range pattern is
<dfn>turned on</dfn> and the range pattern matches this record as well.  As long as
the range pattern stays turned on, it automatically matches every input
record read.  The range pattern also matches <var>endpat</var> against every
input record; when this succeeds, the range pattern is turned off again
for the following record.  Then the range pattern goes back to checking
<var>begpat</var> against each record.

   <p><a name="index-g_t_0040code_007bif_007d-statement_002c-actions_0040comma_007b_007d-changing-1089"></a>The record that turns on the range pattern and the one that turns it
off both match the range pattern.  If you don't want to operate on
these records, you can write <code>if</code> statements in the rule's action
to distinguish them from the records you are interested in.

   <p>It is possible for a pattern to be turned on and off by the same
record. If the record satisfies both conditions, then the action is
executed for just that record. 
For example, suppose there is text between two identical markers (e.g.,
the &lsquo;<samp><span class="samp">%</span></samp>&rsquo; symbol), each on its own line, that should be ignored. 
A first attempt would be to
combine a range pattern that describes the delimited text with the
<code>next</code> statement
(not discussed yet, see <a href="#Next-Statement">Next Statement</a>). 
This causes <samp><span class="command">awk</span></samp> to skip any further processing of the current
record and start over again with the next input record. Such a program
looks like this:

<pre class="example">     /^%$/,/^%$/    { next }
                    { print }
</pre>
   <p class="noindent"><a name="index-lines_002c-skipping-between-markers-1090"></a><!-- @cindex flag variables -->
This program fails because the range pattern is both turned on and turned off
by the first line, which just has a &lsquo;<samp><span class="samp">%</span></samp>&rsquo; on it.  To accomplish this task,
write the program in the following manner, using a flag:

   <p><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007d-operator-1091"></a>
<pre class="example">     /^%$/     { skip = ! skip; next }
     skip == 1 { next } # skip lines with `skip' set
</pre>
   <p>In a range pattern, the comma (&lsquo;<samp><span class="samp">,</span></samp>&rsquo;) has the lowest precedence of
all the operators (i.e., it is evaluated last).  Thus, the following
program attempts to combine a range pattern with another, simpler test:

<pre class="example">     echo Yes | awk '/1/,/2/ || /Yes/'
</pre>
   <p>The intent of this program is &lsquo;<samp><span class="samp">(/1/,/2/) || /Yes/</span></samp>&rsquo;. 
However, <samp><span class="command">awk</span></samp> interprets this as &lsquo;<samp><span class="samp">/1/, (/2/ || /Yes/)</span></samp>&rsquo;. 
This cannot be changed or worked around; range patterns do not combine
with other patterns:

<pre class="example">     $ <kbd>echo Yes | gawk '(/1/,/2/) || /Yes/'</kbd>
     error--&gt; gawk: cmd. line:1: (/1/,/2/) || /Yes/
     error--&gt; gawk: cmd. line:1:           ^ syntax error
</pre>
   <div class="node">
<a name="BEGIN%2fEND"></a>
<a name="BEGIN_002fEND"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Ranges">Ranges</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Overview">Pattern Overview</a>

</div>

<h4 class="subsection">7.1.4 The <code>BEGIN</code> and <code>END</code> Special Patterns</h4>

<!-- STARTOFRANGE beg -->
<p><a name="index-g_t_0040code_007bBEGIN_007d-pattern-1092"></a><!-- STARTOFRANGE end -->
<a name="index-g_t_0040code_007bEND_007d-pattern-1093"></a>All the patterns described so far are for matching input records. 
The <code>BEGIN</code> and <code>END</code> special patterns are different. 
They supply startup and cleanup actions for <samp><span class="command">awk</span></samp> programs. 
<code>BEGIN</code> and <code>END</code> rules must have actions; there is no default
action for these rules because there is no current record when they run. 
<code>BEGIN</code> and <code>END</code> rules are often referred to as
&ldquo;<code>BEGIN</code> and <code>END</code> blocks&rdquo; by long-time <samp><span class="command">awk</span></samp>
programmers.

<ul class="menu">
<li><a accesskey="1" href="#Using-BEGIN_002fEND">Using BEGIN/END</a>:              How and why to use BEGIN/END rules. 
<li><a accesskey="2" href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a>:            I/O issues in BEGIN/END rules. 
</ul>

<div class="node">
<a name="Using-BEGIN%2fEND"></a>
<a name="Using-BEGIN_002fEND"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#BEGIN_002fEND">BEGIN/END</a>

</div>

<h5 class="subsubsection">7.1.4.1 Startup and Cleanup Actions</h5>

<p>A <code>BEGIN</code> rule is executed once only, before the first input record
is read. Likewise, an <code>END</code> rule is executed once only, after all the
input is read.  For example:

<pre class="example">     $ <kbd>awk '</kbd>
     &gt; <kbd>BEGIN { print "Analysis of \"foo\"" }</kbd>
     &gt; <kbd>/foo/ { ++n }</kbd>
     &gt; <kbd>END   { print "\"foo\" appears", n, "times." }' BBS-list</kbd>
     -| Analysis of "foo"
     -| "foo" appears 4 times.
</pre>
   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-operators-and-1094"></a><a name="index-g_t_0040code_007bEND_007d-pattern_002c-operators-and-1095"></a>This program finds the number of records in the input file <samp><span class="file">BBS-list</span></samp>
that contain the string &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;.  The <code>BEGIN</code> rule prints a title
for the report.  There is no need to use the <code>BEGIN</code> rule to
initialize the counter <code>n</code> to zero, since <samp><span class="command">awk</span></samp> does this
automatically (see <a href="#Variables">Variables</a>). 
The second rule increments the variable <code>n</code> every time a
record containing the pattern &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; is read.  The <code>END</code> rule
prints the value of <code>n</code> at the end of the run.

   <p>The special patterns <code>BEGIN</code> and <code>END</code> cannot be used in ranges
or with Boolean operators (indeed, they cannot be used with any operators). 
An <samp><span class="command">awk</span></samp> program may have multiple <code>BEGIN</code> and/or <code>END</code>
rules.  They are executed in the order in which they appear: all the <code>BEGIN</code>
rules at startup and all the <code>END</code> rules at termination. 
<code>BEGIN</code> and <code>END</code> rules may be intermixed with other rules. 
This feature was added in the 1987 version of <samp><span class="command">awk</span></samp> and is included
in the POSIX standard. 
The original (1978) version of <samp><span class="command">awk</span></samp>
required the <code>BEGIN</code> rule to be placed at the beginning of the
program, the <code>END</code> rule to be placed at the end, and only allowed one of
each. 
This is no longer required, but it is a good idea to follow this template
in terms of program organization and readability.

   <p>Multiple <code>BEGIN</code> and <code>END</code> rules are useful for writing
library functions, because each library file can have its own <code>BEGIN</code> and/or
<code>END</code> rule to do its own initialization and/or cleanup. 
The order in which library functions are named on the command line
controls the order in which their <code>BEGIN</code> and <code>END</code> rules are
executed.  Therefore, you have to be careful when writing such rules in
library files so that the order in which they are executed doesn't matter. 
See <a href="#Options">Options</a>, for more information on
using library functions. 
See <a href="#Library-Functions">Library Functions</a>,
for a number of useful library functions.

   <p>If an <samp><span class="command">awk</span></samp> program has only <code>BEGIN</code> rules and no
other rules, then the program exits after the <code>BEGIN</code> rule is
run.<a rel="footnote" href="#fn-34" name="fnd-34"><sup>34</sup></a>  However, if an
<code>END</code> rule exists, then the input is read, even if there are
no other rules in the program.  This is necessary in case the <code>END</code>
rule checks the <code>FNR</code> and <code>NR</code> variables.

<div class="node">
<a name="I%2fO-And-BEGIN%2fEND"></a>
<a name="I_002fO-And-BEGIN_002fEND"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-BEGIN_002fEND">Using BEGIN/END</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#BEGIN_002fEND">BEGIN/END</a>

</div>

<h5 class="subsubsection">7.1.4.2 Input/Output from <code>BEGIN</code> and <code>END</code> Rules</h5>

<p><a name="index-input_002foutput_002c-from-_0040code_007bBEGIN_007d-and-_0040code_007bEND_007d-1096"></a>There are several (sometimes subtle) points to remember when doing I/O
from a <code>BEGIN</code> or <code>END</code> rule. 
The first has to do with the value of <code>$0</code> in a <code>BEGIN</code>
rule.  Because <code>BEGIN</code> rules are executed before any input is read,
there simply is no input record, and therefore no fields, when
executing <code>BEGIN</code> rules.  References to <code>$0</code> and the fields
yield a null string or zero, depending upon the context.  One way
to give <code>$0</code> a real value is to execute a <code>getline</code> command
without a variable (see <a href="#Getline">Getline</a>). 
Another way is simply to assign a value to <code>$0</code>.

   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bBEGIN_007d_002f_0040code_007bEND_007d-patterns-1097"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bBEGIN_007d_002f_0040code_007bEND_007d-patterns-1098"></a><a name="index-g_t_0040code_007bprint_007d-statement_002c-_0040code_007bBEGIN_007d_002f_0040code_007bEND_007d-patterns-and-1099"></a><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bprint_007d-statement-and-1100"></a><a name="index-g_t_0040code_007bEND_007d-pattern_002c-_0040code_007bprint_007d-statement-and-1101"></a>The second point is similar to the first but from the other direction. 
Traditionally, due largely to implementation issues, <code>$0</code> and
<code>NF</code> were <em>undefined</em> inside an <code>END</code> rule. 
The POSIX standard specifies that <code>NF</code> is available in an <code>END</code>
rule. It contains the number of fields from the last input record. 
Most probably due to an oversight, the standard does not say that <code>$0</code>
is also preserved, although logically one would think that it should be. 
In fact, <samp><span class="command">gawk</span></samp> does preserve the value of <code>$0</code> for use in
<code>END</code> rules.  Be aware, however, that Brian Kernighan's <samp><span class="command">awk</span></samp>, and possibly
other implementations, do not.

   <p>The third point follows from the first two.  The meaning of &lsquo;<samp><span class="samp">print</span></samp>&rsquo;
inside a <code>BEGIN</code> or <code>END</code> rule is the same as always:
&lsquo;<samp><span class="samp">print $0</span></samp>&rsquo;.  If <code>$0</code> is the null string, then this prints an
empty record.  Many long time <samp><span class="command">awk</span></samp> programmers use an unadorned
&lsquo;<samp><span class="samp">print</span></samp>&rsquo; in <code>BEGIN</code> and <code>END</code> rules, to mean &lsquo;<samp><span class="samp">print&nbsp;""<!-- /@w --></span></samp>&rsquo;,
relying on <code>$0</code> being null.  Although one might generally get away with
this in <code>BEGIN</code> rules, it is a very bad idea in <code>END</code> rules,
at least in <samp><span class="command">gawk</span></samp>.  It is also poor style, since if an empty
line is needed in the output, the program should print one explicitly.

   <p><a name="index-g_t_0040code_007bnext_007d-statement_002c-_0040code_007bBEGIN_007d_002f_0040code_007bEND_007d-patterns-and-1102"></a><a name="index-g_t_0040code_007bnextfile_007d-statement_002c-_0040code_007bBEGIN_007d_002f_0040code_007bEND_007d-patterns-and-1103"></a><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1104"></a><a name="index-g_t_0040code_007bEND_007d-pattern_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1105"></a>Finally, the <code>next</code> and <code>nextfile</code> statements are not allowed
in a <code>BEGIN</code> rule, because the implicit
read-a-record-and-match-against-the-rules loop has not started yet.  Similarly, those statements
are not valid in an <code>END</code> rule, since all the input has been read. 
(See <a href="#Next-Statement">Next Statement</a>, and see
<a href="#Nextfile-Statement">Nextfile Statement</a>.) 
<!-- ENDOFRANGE beg -->
<!-- ENDOFRANGE end -->

<div class="node">
<a name="BEGINFILE%2fENDFILE"></a>
<a name="BEGINFILE_002fENDFILE"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Empty">Empty</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#BEGIN_002fEND">BEGIN/END</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Overview">Pattern Overview</a>

</div>

<h4 class="subsection">7.1.5 The <code>BEGINFILE</code> and <code>ENDFILE</code> Special Patterns</h4>

<p><a name="index-g_t_0040code_007bBEGINFILE_007d-pattern-1106"></a><a name="index-g_t_0040code_007bENDFILE_007d-pattern-1107"></a>
This section describes a <samp><span class="command">gawk</span></samp>-specific feature.

   <p>Two special kinds of rule, <code>BEGINFILE</code> and <code>ENDFILE</code>, give
you &ldquo;hooks&rdquo; into <samp><span class="command">gawk</span></samp>'s command-line file processing loop. 
As with the <code>BEGIN</code> and <code>END</code> rules (see <a href="#BEGIN_002fEND">BEGIN/END</a>), all
<code>BEGINFILE</code> rules in a program are merged, in the order they are
read by <samp><span class="command">gawk</span></samp>, and all <code>ENDFILE</code> rules are merged as well.

   <p>The body of the <code>BEGINFILE</code> rules is executed just before
<samp><span class="command">gawk</span></samp> reads the first record from a file.  <code>FILENAME</code>
is set to the name of the current file, and <code>FNR</code> is set to zero.

   <p>The <code>BEGINFILE</code> rule provides you the opportunity for two tasks
that would otherwise be difficult or impossible to perform:

     <ul>
<li>You can test if the file is readable.  Normally, it is a fatal error if a
file named on the command line cannot be opened for reading.  However,
you can bypass the fatal error and move on to the next file on the
command line.

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-in-1108"></a><a name="index-g_t_0040code_007bERRNO_007d-variable-1109"></a><a name="index-g_t_0040code_007bnextfile_007d-statement_002c-_0040code_007bBEGINFILE_007d_002f_0040code_007bENDFILE_007d-patterns-and-1110"></a>You do this by checking if the <code>ERRNO</code> variable is not the empty
string; if so, then <samp><span class="command">gawk</span></samp> was not able to open the file. In
this case, your program can execute the <code>nextfile</code> statement
(see <a href="#Nextfile-Statement">Nextfile Statement</a>).  This causes <samp><span class="command">gawk</span></samp> to skip
the file entirely.  Otherwise, <samp><span class="command">gawk</span></samp> exits with the usual
fatal error.

     <li>If you have written extensions that modify the record handling (by inserting
an &ldquo;open hook&rdquo;), you can invoke them at this point, before <samp><span class="command">gawk</span></samp>
has started processing the file.  (This is a <em>very</em> advanced feature,
currently used only by the <a href="http://xmlgawk.sourceforge.net">XMLgawk project</a>.) 
</ul>

   <p>The <code>ENDFILE</code> rule is called when <samp><span class="command">gawk</span></samp> has finished processing
the last record in an input file.  For the last input file,
it will be called before any <code>END</code> rules. 
The <code>ENDFILE</code> rule is executed even for empty input files.

   <p>Normally, when an error occurs when reading input in the normal input
processing loop, the error is fatal.  However, if an <code>ENDFILE</code>
rule is present, the error becomes non-fatal, and instead <code>ERRNO</code>
is set.  This makes it possible to catch and process I/O errors at the
level of the <samp><span class="command">awk</span></samp> program.

   <p><a name="index-g_t_0040code_007bnext_007d-statement_002c-_0040code_007bBEGINFILE_007d_002f_0040code_007bENDFILE_007d-patterns-and-1111"></a>The <code>next</code> statement (see <a href="#Next-Statement">Next Statement</a>) is not allowed inside
either a <code>BEGINFILE</code> or and <code>ENDFILE</code> rule.  The <code>nextfile</code>
statement (see <a href="#Nextfile-Statement">Nextfile Statement</a>) is allowed only inside a
<code>BEGINFILE</code> rule, but not inside an <code>ENDFILE</code> rule.

   <p><a name="index-g_t_0040code_007bgetline_007d-statement_002c-_0040code_007bBEGINFILE_007d_002f_0040code_007bENDFILE_007d-patterns-and-1112"></a>The <code>getline</code> statement (see <a href="#Getline">Getline</a>) is restricted inside
both <code>BEGINFILE</code> and <code>ENDFILE</code>.  Only the &lsquo;<samp><span class="samp">getline
</span><var>variable</var><span class="samp"> &lt; </span><var>file</var></samp>&rsquo; form is allowed.

   <p><code>BEGINFILE</code> and <code>ENDFILE</code> are <samp><span class="command">gawk</span></samp> extensions. 
In most other <samp><span class="command">awk</span></samp> implementations, or if <samp><span class="command">gawk</span></samp> is in
compatibility mode (see <a href="#Options">Options</a>), they are not special.

<!-- FIXME: For 4.1 maybe deal with this? -->
<div class="node">
<a name="Empty"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Pattern-Overview">Pattern Overview</a>

</div>

<h4 class="subsection">7.1.6 The Empty Pattern</h4>

<p><a name="index-empty-pattern-1113"></a><a name="index-patterns_002c-empty-1114"></a>An empty (i.e., nonexistent) pattern is considered to match <em>every</em>
input record.  For example, the program:

<pre class="example">     awk '{ print $1 }' BBS-list
</pre>
   <p class="noindent">prints the first field of every record. 
<!-- ENDOFRANGE pat -->

<div class="node">
<a name="Using-Shell-Variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Action-Overview">Action Overview</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Pattern-Overview">Pattern Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Patterns-and-Actions">Patterns and Actions</a>

</div>

<h3 class="section">7.2 Using Shell Variables in Programs</h3>

<p><a name="index-shells_002c-variables-1115"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-shell-variables-in-1116"></a><!-- @cindex shell and @command{awk} interaction -->

   <p><samp><span class="command">awk</span></samp> programs are often used as components in larger
programs written in shell. 
For example, it is very common to use a shell variable to
hold a pattern that the <samp><span class="command">awk</span></samp> program searches for. 
There are two ways to get the value of the shell variable
into the body of the <samp><span class="command">awk</span></samp> program.

   <p><a name="index-shells_002c-quoting-1117"></a>The most common method is to use shell quoting to substitute
the variable's value into the program inside the script. 
For example, in the following program:

<pre class="example">     printf "Enter search pattern: "
     read pattern
     awk "/$pattern/ "'{ nmatches++ }
          END { print nmatches, "found" }' /path/to/data
</pre>
   <p class="noindent">the <samp><span class="command">awk</span></samp> program consists of two pieces of quoted text
that are concatenated together to form the program. 
The first part is double-quoted, which allows substitution of
the <code>pattern</code> shell variable inside the quotes. 
The second part is single-quoted.

   <p>Variable substitution via quoting works, but can be potentially
messy.  It requires a good understanding of the shell's quoting rules
(see <a href="#Quoting">Quoting</a>),
and it's often difficult to correctly
match up the quotes when reading the program.

   <p>A better method is to use <samp><span class="command">awk</span></samp>'s variable assignment feature
(see <a href="#Assignment-Options">Assignment Options</a>)
to assign the shell variable's value to an <samp><span class="command">awk</span></samp> variable's
value.  Then use dynamic regexps to match the pattern
(see <a href="#Computed-Regexps">Computed Regexps</a>). 
The following shows how to redo the
previous example using this technique:

<pre class="example">     printf "Enter search pattern: "
     read pattern
     awk -v pat="$pattern" '$0 ~ pat { nmatches++ }
            END { print nmatches, "found" }' /path/to/data
</pre>
   <p class="noindent">Now, the <samp><span class="command">awk</span></samp> program is just one single-quoted string. 
The assignment &lsquo;<samp><span class="samp">-v pat="$pattern"</span></samp>&rsquo; still requires double quotes,
in case there is whitespace in the value of <code>$pattern</code>. 
The <samp><span class="command">awk</span></samp> variable <code>pat</code> could be named <code>pattern</code>
too, but that would be more confusing.  Using a variable also
provides more flexibility, since the variable can be used anywhere inside
the program&mdash;for printing, as an array subscript, or for any other
use&mdash;without requiring the quoting tricks at every point in the program.

<div class="node">
<a name="Action-Overview"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Statements">Statements</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Using-Shell-Variables">Using Shell Variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Patterns-and-Actions">Patterns and Actions</a>

</div>

<h3 class="section">7.3 Actions</h3>

<!-- @cindex action, definition of -->
<!-- @cindex curly braces -->
<!-- @cindex action, curly braces -->
<!-- @cindex action, separating statements -->
<p><a name="index-actions-1118"></a>
An <samp><span class="command">awk</span></samp> program or script consists of a series of
rules and function definitions interspersed.  (Functions are
described later.  See <a href="#User_002ddefined">User-defined</a>.) 
A rule contains a pattern and an action, either of which (but not
both) may be omitted.  The purpose of the <dfn>action</dfn> is to tell
<samp><span class="command">awk</span></samp> what to do once a match for the pattern is found.  Thus,
in outline, an <samp><span class="command">awk</span></samp> program generally looks like this:

<pre class="example">     <span class="roman">[</span><var>pattern</var><span class="roman">]</span>  { <var>action</var> }
      <var>pattern</var>  <span class="roman">[</span>{ <var>action</var> }<span class="roman">]</span>
     ...
     function <var>name</var>(<var>args</var>) { ... }
     ...
</pre>
   <p><a name="index-g_t_0040code_007b_0040_007b_0040_007d_007d-_0028braces_0029_002c-actions-and-1119"></a><a name="index-braces-_0028_0040code_007b_0040_007b_0040_007d_007d_0029_002c-actions-and-1120"></a><a name="index-separators_002c-for-statements-in-actions-1121"></a><a name="index-newlines_002c-separating-statements-in-actions-1122"></a><a name="index-g_t_0040code_007b_003b_007d-_0028semicolon_0029_002c-separating-statements-in-actions-1123"></a><a name="index-semicolon-_0028_0040code_007b_003b_007d_0029_002c-separating-statements-in-actions-1124"></a>An action consists of one or more <samp><span class="command">awk</span></samp> <dfn>statements</dfn>, enclosed
in curly braces (&lsquo;<samp><span class="samp">{...}</span></samp>&rsquo;).  Each statement specifies one
thing to do.  The statements are separated by newlines or semicolons. 
The curly braces around an action must be used even if the action
contains only one statement, or if it contains no statements at
all.  However, if you omit the action entirely, omit the curly braces as
well.  An omitted action is equivalent to &lsquo;<samp><span class="samp">{ print $0 }</span></samp>&rsquo;:

<pre class="example">     /foo/  { }     <i>match </i><code>foo</code><i>, do nothing --- empty action</i>
     /foo/          <i>match </i><code>foo</code><i>, print the record --- omitted action</i>
</pre>
   <p>The following types of statements are supported in <samp><span class="command">awk</span></samp>:

     
<a name="index-side-effects_002c-statements-1125"></a>
<dl><dt>Expressions<dd>Call functions or assign values to variables
(see <a href="#Expressions">Expressions</a>).  Executing
this kind of statement simply computes the value of the expression. 
This is useful when the expression has side effects
(see <a href="#Assignment-Ops">Assignment Ops</a>).

     <br><dt>Control statements<dd>Specify the control flow of <samp><span class="command">awk</span></samp>
programs.  The <samp><span class="command">awk</span></samp> language gives you C-like constructs
(<code>if</code>, <code>for</code>, <code>while</code>, and <code>do</code>) as well as a few
special ones (see <a href="#Statements">Statements</a>).

     <br><dt>Compound statements<dd>Consist of one or more statements enclosed in
curly braces.  A compound statement is used in order to put several
statements together in the body of an <code>if</code>, <code>while</code>, <code>do</code>,
or <code>for</code> statement.

     <br><dt>Input statements<dd>Use the <code>getline</code> command
(see <a href="#Getline">Getline</a>). 
Also supplied in <samp><span class="command">awk</span></samp> are the <code>next</code>
statement (see <a href="#Next-Statement">Next Statement</a>),
and the <code>nextfile</code> statement
(see <a href="#Nextfile-Statement">Nextfile Statement</a>).

     <br><dt>Output statements<dd>Such as <code>print</code> and <code>printf</code>. 
See <a href="#Printing">Printing</a>.

     <br><dt>Deletion statements<dd>For deleting array elements. 
See <a href="#Delete">Delete</a>. 
</dl>

<div class="node">
<a name="Statements"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Built_002din-Variables">Built-in Variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Action-Overview">Action Overview</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Patterns-and-Actions">Patterns and Actions</a>

</div>

<h3 class="section">7.4 Control Statements in Actions</h3>

<!-- STARTOFRANGE csta -->
<p><a name="index-control-statements-1126"></a><!-- STARTOFRANGE acs -->
<a name="index-statements_002c-control_002c-in-actions-1127"></a><!-- STARTOFRANGE accs -->
<a name="index-actions_002c-control-statements-in-1128"></a>
<dfn>Control statements</dfn>, such as <code>if</code>, <code>while</code>, and so on,
control the flow of execution in <samp><span class="command">awk</span></samp> programs.  Most of <samp><span class="command">awk</span></samp>'s
control statements are patterned after similar statements in C.

   <p><a name="index-compound-statements_0040comma_007b_007d-control-statements-and-1129"></a><a name="index-statements_002c-compound_0040comma_007b_007d-control-statements-and-1130"></a><a name="index-body_002c-in-actions-1131"></a><a name="index-g_t_0040code_007b_0040_007b_0040_007d_007d-_0028braces_0029_002c-statements_002c-grouping-1132"></a><a name="index-braces-_0028_0040code_007b_0040_007b_0040_007d_007d_0029_002c-statements_002c-grouping-1133"></a><a name="index-newlines_002c-separating-statements-in-actions-1134"></a><a name="index-g_t_0040code_007b_003b_007d-_0028semicolon_0029_002c-separating-statements-in-actions-1135"></a><a name="index-semicolon-_0028_0040code_007b_003b_007d_0029_002c-separating-statements-in-actions-1136"></a>All the control statements start with special keywords, such as <code>if</code>
and <code>while</code>, to distinguish them from simple expressions. 
Many control statements contain other statements.  For example, the
<code>if</code> statement contains another statement that may or may not be
executed.  The contained statement is called the <dfn>body</dfn>. 
To include more than one statement in the body, group them into a
single <dfn>compound statement</dfn> with curly braces, separating them with
newlines or semicolons.

<ul class="menu">
<li><a accesskey="1" href="#If-Statement">If Statement</a>:                 Conditionally execute some <samp><span class="command">awk</span></samp>
                                statements. 
<li><a accesskey="2" href="#While-Statement">While Statement</a>:              Loop until some condition is satisfied. 
<li><a accesskey="3" href="#Do-Statement">Do Statement</a>:                 Do specified action while looping until some
                                condition is satisfied. 
<li><a accesskey="4" href="#For-Statement">For Statement</a>:                Another looping statement, that provides
                                initialization and increment clauses. 
<li><a accesskey="5" href="#Switch-Statement">Switch Statement</a>:             Switch/case evaluation for conditional
                                execution of statements based on a value. 
<li><a accesskey="6" href="#Break-Statement">Break Statement</a>:              Immediately exit the innermost enclosing loop. 
<li><a accesskey="7" href="#Continue-Statement">Continue Statement</a>:           Skip to the end of the innermost enclosing
                                loop. 
<li><a accesskey="8" href="#Next-Statement">Next Statement</a>:               Stop processing the current input record. 
<li><a accesskey="9" href="#Nextfile-Statement">Nextfile Statement</a>:           Stop processing the current file. 
<li><a href="#Exit-Statement">Exit Statement</a>:               Stop execution of <samp><span class="command">awk</span></samp>. 
</ul>

<div class="node">
<a name="If-Statement"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#While-Statement">While Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Statements">Statements</a>

</div>

<h4 class="subsection">7.4.1 The <code>if</code>-<code>else</code> Statement</h4>

<p><a name="index-g_t_0040code_007bif_007d-statement-1137"></a>The <code>if</code>-<code>else</code> statement is <samp><span class="command">awk</span></samp>'s decision-making
statement.  It looks like this:

<pre class="example">     if (<var>condition</var>) <var>then-body</var> <span class="roman">[</span>else <var>else-body</var><span class="roman">]</span>
</pre>
   <p class="noindent">The <var>condition</var> is an expression that controls what the rest of the
statement does.  If the <var>condition</var> is true, <var>then-body</var> is
executed; otherwise, <var>else-body</var> is executed. 
The <code>else</code> part of the statement is
optional.  The condition is considered false if its value is zero or
the null string; otherwise, the condition is true. 
Refer to the following:

<pre class="example">     if (x % 2 == 0)
         print "x is even"
     else
         print "x is odd"
</pre>
   <p>In this example, if the expression &lsquo;<samp><span class="samp">x % 2 == 0</span></samp>&rsquo; is true (that is,
if the value of <code>x</code> is evenly divisible by two), then the first
<code>print</code> statement is executed; otherwise, the second <code>print</code>
statement is executed. 
If the <code>else</code> keyword appears on the same line as <var>then-body</var> and
<var>then-body</var> is not a compound statement (i.e., not surrounded by
curly braces), then a semicolon must separate <var>then-body</var> from
the <code>else</code>. 
To illustrate this, the previous example can be rewritten as:

<pre class="example">     if (x % 2 == 0) print "x is even"; else
             print "x is odd"
</pre>
   <p class="noindent">If the &lsquo;<samp><span class="samp">;</span></samp>&rsquo; is left out, <samp><span class="command">awk</span></samp> can't interpret the statement and
it produces a syntax error.  Don't actually write programs this way,
because a human reader might fail to see the <code>else</code> if it is not
the first thing on its line.

<div class="node">
<a name="While-Statement"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Do-Statement">Do Statement</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#If-Statement">If Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Statements">Statements</a>

</div>

<h4 class="subsection">7.4.2 The <code>while</code> Statement</h4>

<p><a name="index-g_t_0040code_007bwhile_007d-statement-1138"></a><a name="index-loops-1139"></a><a name="index-loops_002c-See-Also-_0040code_007bwhile_007d-statement-1140"></a>
In programming, a <dfn>loop</dfn> is a part of a program that can
be executed two or more times in succession. 
The <code>while</code> statement is the simplest looping statement in
<samp><span class="command">awk</span></samp>.  It repeatedly executes a statement as long as a condition is
true.  For example:

<pre class="example">     while (<var>condition</var>)
       <var>body</var>
</pre>
   <p><a name="index-body_002c-in-loops-1141"></a><var>body</var> is a statement called the <dfn>body</dfn> of the loop,
and <var>condition</var> is an expression that controls how long the loop
keeps running. 
The first thing the <code>while</code> statement does is test the <var>condition</var>. 
If the <var>condition</var> is true, it executes the statement <var>body</var>. 
After <var>body</var> has been executed,
<var>condition</var> is tested again, and if it is still true, <var>body</var> is
executed again.  This process repeats until the <var>condition</var> is no longer
true.  If the <var>condition</var> is initially false, the body of the loop is
never executed and <samp><span class="command">awk</span></samp> continues with the statement following
the loop. 
This example prints the first three fields of each record, one per line:

<pre class="example">     awk '{
            i = 1
            while (i &lt;= 3) {
                print $i
                i++
            }
     }' inventory-shipped
</pre>
   <p class="noindent">The body of this loop is a compound statement enclosed in braces,
containing two statements. 
The loop works in the following manner: first, the value of <code>i</code> is set to one. 
Then, the <code>while</code> statement tests whether <code>i</code> is less than or equal to
three.  This is true when <code>i</code> equals one, so the <code>i</code>-th
field is printed.  Then the &lsquo;<samp><span class="samp">i++</span></samp>&rsquo; increments the value of <code>i</code>
and the loop repeats.  The loop terminates when <code>i</code> reaches four.

   <p>A newline is not required between the condition and the
body; however using one makes the program clearer unless the body is a
compound statement or else is very simple.  The newline after the open-brace
that begins the compound statement is not required either, but the
program is harder to read without it.

<div class="node">
<a name="Do-Statement"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#For-Statement">For Statement</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#While-Statement">While Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Statements">Statements</a>

</div>

<h4 class="subsection">7.4.3 The <code>do</code>-<code>while</code> Statement</h4>

<p><a name="index-g_t_0040code_007bdo_007d_002d_0040code_007bwhile_007d-statement-1142"></a>
The <code>do</code> loop is a variation of the <code>while</code> looping statement. 
The <code>do</code> loop executes the <var>body</var> once and then repeats the
<var>body</var> as long as the <var>condition</var> is true.  It looks like this:

<pre class="example">     do
       <var>body</var>
     while (<var>condition</var>)
</pre>
   <p>Even if the <var>condition</var> is false at the start, the <var>body</var> is
executed at least once (and only once, unless executing <var>body</var>
makes <var>condition</var> true).  Contrast this with the corresponding
<code>while</code> statement:

<pre class="example">     while (<var>condition</var>)
       <var>body</var>
</pre>
   <p class="noindent">This statement does not execute <var>body</var> even once if the <var>condition</var>
is false to begin with. 
The following is an example of a <code>do</code> statement:

<pre class="example">     {
            i = 1
            do {
               print $0
               i++
            } while (i &lt;= 10)
     }
</pre>
   <p class="noindent">This program prints each input record 10 times.  However, it isn't a very
realistic example, since in this case an ordinary <code>while</code> would do
just as well.  This situation reflects actual experience; only
occasionally is there a real use for a <code>do</code> statement.

<div class="node">
<a name="For-Statement"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Switch-Statement">Switch Statement</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Do-Statement">Do Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Statements">Statements</a>

</div>

<h4 class="subsection">7.4.4 The <code>for</code> Statement</h4>

<p><a name="index-g_t_0040code_007bfor_007d-statement-1143"></a>
The <code>for</code> statement makes it more convenient to count iterations of a
loop.  The general form of the <code>for</code> statement looks like this:

<pre class="example">     for (<var>initialization</var>; <var>condition</var>; <var>increment</var>)
       <var>body</var>
</pre>
   <p class="noindent">The <var>initialization</var>, <var>condition</var>, and <var>increment</var> parts are
arbitrary <samp><span class="command">awk</span></samp> expressions, and <var>body</var> stands for any
<samp><span class="command">awk</span></samp> statement.

   <p>The <code>for</code> statement starts by executing <var>initialization</var>. 
Then, as long
as the <var>condition</var> is true, it repeatedly executes <var>body</var> and then
<var>increment</var>.  Typically, <var>initialization</var> sets a variable to
either zero or one, <var>increment</var> adds one to it, and <var>condition</var>
compares it against the desired number of iterations. 
For example:

<pre class="example">     awk '{
            for (i = 1; i &lt;= 3; i++)
               print $i
     }' inventory-shipped
</pre>
   <p class="noindent">This prints the first three fields of each input record, with one field per
line.

   <p>It isn't possible to
set more than one variable in the
<var>initialization</var> part without using a multiple assignment statement
such as &lsquo;<samp><span class="samp">x = y = 0</span></samp>&rsquo;. This makes sense only if all the initial values
are equal.  (But it is possible to initialize additional variables by writing
their assignments as separate statements preceding the <code>for</code> loop.)

<!-- @cindex comma operator, not supported -->
   <p>The same is true of the <var>increment</var> part. Incrementing additional
variables requires separate statements at the end of the loop. 
The C compound expression, using C's comma operator, is useful in
this context but it is not supported in <samp><span class="command">awk</span></samp>.

   <p>Most often, <var>increment</var> is an increment expression, as in the previous
example.  But this is not required; it can be any expression
whatsoever.  For example, the following statement prints all the powers of two
between 1 and 100:

<pre class="example">     for (i = 1; i &lt;= 100; i *= 2)
       print i
</pre>
   <p>If there is nothing to be done, any of the three expressions in the
parentheses following the <code>for</code> keyword may be omitted.  Thus,
&lsquo;<samp><span class="samp">for&nbsp;(;&nbsp;x&nbsp;&gt;&nbsp;0;)</span></samp>&rsquo;<!-- /@w --> is equivalent to &lsquo;<samp><span class="samp">while&nbsp;(x&nbsp;&gt;&nbsp;0)</span></samp>&rsquo;<!-- /@w -->.  If the
<var>condition</var> is omitted, it is treated as true, effectively
yielding an <dfn>infinite loop</dfn> (i.e., a loop that never terminates).

   <p>In most cases, a <code>for</code> loop is an abbreviation for a <code>while</code>
loop, as shown here:

<pre class="example">     <var>initialization</var>
     while (<var>condition</var>) {
       <var>body</var>
       <var>increment</var>
     }
</pre>
   <p><a name="index-loops_002c-_0040code_007bcontinue_007d-statements-and-1144"></a>The only exception is when the <code>continue</code> statement
(see <a href="#Continue-Statement">Continue Statement</a>) is used
inside the loop. Changing a <code>for</code> statement to a <code>while</code>
statement in this way can change the effect of the <code>continue</code>
statement inside the loop.

   <p>The <samp><span class="command">awk</span></samp> language has a <code>for</code> statement in addition to a
<code>while</code> statement because a <code>for</code> loop is often both less work to
type and more natural to think of.  Counting the number of iterations is
very common in loops.  It can be easier to think of this counting as part
of looping rather than as something to do inside the loop.

   <p><a name="index-g_t_0040code_007bin_007d-operator-1145"></a>There is an alternate version of the <code>for</code> loop, for iterating over
all the indices of an array:

<pre class="example">     for (i in array)
         <var>do something with</var> array[i]
</pre>
   <p class="noindent">See <a href="#Scanning-an-Array">Scanning an Array</a>,
for more information on this version of the <code>for</code> loop.

<div class="node">
<a name="Switch-Statement"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Break-Statement">Break Statement</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#For-Statement">For Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Statements">Statements</a>

</div>

<h4 class="subsection">7.4.5 The <code>switch</code> Statement</h4>

<p><a name="index-g_t_0040code_007bswitch_007d-statement-1146"></a><a name="index-g_t_0040code_007bcase_007d-keyword-1147"></a><a name="index-g_t_0040code_007bdefault_007d-keyword-1148"></a>
The <code>switch</code> statement allows the evaluation of an expression and
the execution of statements based on a <code>case</code> match. Case statements
are checked for a match in the order they are defined.  If no suitable
<code>case</code> is found, the <code>default</code> section is executed, if supplied.

   <p>Each <code>case</code> contains a single constant, be it numeric, string, or
regexp.  The <code>switch</code> expression is evaluated, and then each
<code>case</code>'s constant is compared against the result in turn. The type of constant
determines the comparison: numeric or string do the usual comparisons. 
A regexp constant does a regular expression match against the string
value of the original expression.  The general form of the <code>switch</code>
statement looks like this:

<pre class="example">     switch (<var>expression</var>) {
     case <var>value or regular expression</var>:
         <var>case-body</var>
     default:
         <var>default-body</var>
     }
</pre>
   <p>Control flow in
the <code>switch</code> statement works as it does in C. Once a match to a given
case is made, the case statement bodies execute until a <code>break</code>,
<code>continue</code>, <code>next</code>, <code>nextfile</code>  or <code>exit</code> is encountered,
or the end of the <code>switch</code> statement itself. For example:

<pre class="example">     switch (NR * 2 + 1) {
     case 3:
     case "11":
         print NR - 1
         break
     
     case /2[[:digit:]]+/:
         print NR
     
     default:
         print NR + 1
     
     case -1:
         print NR * -1
     }
</pre>
   <p>Note that if none of the statements specified above halt execution
of a matched <code>case</code> statement, execution falls through to the
next <code>case</code> until execution halts. In the above example, for
any case value starting with &lsquo;<samp><span class="samp">2</span></samp>&rsquo; followed by one or more digits,
the <code>print</code> statement is executed and then falls through into the
<code>default</code> section, executing its <code>print</code> statement. In turn,
the &minus;1 case will also be executed since the <code>default</code> does
not halt execution.

   <p>This <code>switch</code> statement is a <samp><span class="command">gawk</span></samp> extension. 
If <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>),
it is not available.

<div class="node">
<a name="Break-Statement"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Continue-Statement">Continue Statement</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Switch-Statement">Switch Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Statements">Statements</a>

</div>

<h4 class="subsection">7.4.6 The <code>break</code> Statement</h4>

<p><a name="index-g_t_0040code_007bbreak_007d-statement-1149"></a><a name="index-loops_002c-exiting-1150"></a>
The <code>break</code> statement jumps out of the innermost <code>for</code>,
<code>while</code>, or <code>do</code> loop that encloses it.  The following example
finds the smallest divisor of any integer, and also identifies prime
numbers:

<pre class="example">     # find smallest divisor of num
     {
        num = $1
        for (div = 2; div * div &lt;= num; div++) {
          if (num % div == 0)
            break
        }
        if (num % div == 0)
          printf "Smallest divisor of %d is %d\n", num, div
        else
          printf "%d is prime\n", num
     }
</pre>
   <p>When the remainder is zero in the first <code>if</code> statement, <samp><span class="command">awk</span></samp>
immediately <dfn>breaks out</dfn> of the containing <code>for</code> loop.  This means
that <samp><span class="command">awk</span></samp> proceeds immediately to the statement following the loop
and continues processing.  (This is very different from the <code>exit</code>
statement, which stops the entire <samp><span class="command">awk</span></samp> program. 
See <a href="#Exit-Statement">Exit Statement</a>.)

   <p>The following program illustrates how the <var>condition</var> of a <code>for</code>
or <code>while</code> statement could be replaced with a <code>break</code> inside
an <code>if</code>:

<pre class="example">     # find smallest divisor of num
     {
       num = $1
       for (div = 2; ; div++) {
         if (num % div == 0) {
           printf "Smallest divisor of %d is %d\n", num, div
           break
         }
         if (div * div &gt; num) {
           printf "%d is prime\n", num
           break
         }
       }
     }
</pre>
   <p>The <code>break</code> statement is also used to break out of the
<code>switch</code> statement. 
This is discussed in <a href="#Switch-Statement">Switch Statement</a>.

<!-- @cindex @code{break}, outside of loops -->
<!-- @cindex historical features -->
<!-- @cindex @command{awk} language, POSIX version -->
   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bbreak_007d-statement-and-1151"></a><a name="index-dark-corner_002c-_0040code_007bbreak_007d-statement-1152"></a><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bbreak_007d-statement-in-1153"></a>The <code>break</code> statement has no meaning when
used outside the body of a loop or <code>switch</code>. 
However, although it was never documented,
historical implementations of <samp><span class="command">awk</span></samp> treated the <code>break</code>
statement outside of a loop as if it were a <code>next</code> statement
(see <a href="#Next-Statement">Next Statement</a>). 
(d.c.) 
Recent versions of Brian Kernighan's <samp><span class="command">awk</span></samp> no longer allow this usage,
nor does <samp><span class="command">gawk</span></samp>.

<div class="node">
<a name="Continue-Statement"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Next-Statement">Next Statement</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Break-Statement">Break Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Statements">Statements</a>

</div>

<h4 class="subsection">7.4.7 The <code>continue</code> Statement</h4>

<p><a name="index-g_t_0040code_007bcontinue_007d-statement-1154"></a>Similar to <code>break</code>, the <code>continue</code> statement is used only inside
<code>for</code>, <code>while</code>, and <code>do</code> loops.  It skips
over the rest of the loop body, causing the next cycle around the loop
to begin immediately.  Contrast this with <code>break</code>, which jumps out
of the loop altogether.

   <p>The <code>continue</code> statement in a <code>for</code> loop directs <samp><span class="command">awk</span></samp> to
skip the rest of the body of the loop and resume execution with the
increment-expression of the <code>for</code> statement.  The following program
illustrates this fact:

<pre class="example">     BEGIN {
          for (x = 0; x &lt;= 20; x++) {
              if (x == 5)
                  continue
              printf "%d ", x
          }
          print ""
     }
</pre>
   <p class="noindent">This program prints all the numbers from 0 to 20&mdash;except for 5, for
which the <code>printf</code> is skipped.  Because the increment &lsquo;<samp><span class="samp">x++</span></samp>&rsquo;
is not skipped, <code>x</code> does not remain stuck at 5.  Contrast the
<code>for</code> loop from the previous example with the following <code>while</code> loop:

<pre class="example">     BEGIN {
          x = 0
          while (x &lt;= 20) {
              if (x == 5)
                  continue
              printf "%d ", x
              x++
          }
          print ""
     }
</pre>
   <p class="noindent">This program loops forever once <code>x</code> reaches 5.

<!-- @cindex @code{continue}, outside of loops -->
<!-- @cindex historical features -->
<!-- @cindex @command{awk} language, POSIX version -->
   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bcontinue_007d-statement-and-1155"></a><a name="index-dark-corner_002c-_0040code_007bcontinue_007d-statement-1156"></a><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bcontinue_007d-statement-in-1157"></a>The <code>continue</code> statement has no special meaning with respect to the
<code>switch</code> statement, nor does it have any meaning when used outside the
body of a loop.  Historical versions of <samp><span class="command">awk</span></samp> treated a <code>continue</code>
statement outside a loop the same way they treated a <code>break</code>
statement outside a loop: as if it were a <code>next</code>
statement
(see <a href="#Next-Statement">Next Statement</a>). 
(d.c.) 
Recent versions of Brian Kernighan's <samp><span class="command">awk</span></samp> no longer work this way, nor
does <samp><span class="command">gawk</span></samp>.

<div class="node">
<a name="Next-Statement"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Nextfile-Statement">Nextfile Statement</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Continue-Statement">Continue Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Statements">Statements</a>

</div>

<h4 class="subsection">7.4.8 The <code>next</code> Statement</h4>

<p><a name="index-g_t_0040code_007bnext_007d-statement-1158"></a>
The <code>next</code> statement forces <samp><span class="command">awk</span></samp> to immediately stop processing
the current record and go on to the next record.  This means that no
further rules are executed for the current record, and the rest of the
current rule's action isn't executed.

   <p>Contrast this with the effect of the <code>getline</code> function
(see <a href="#Getline">Getline</a>).  That also causes
<samp><span class="command">awk</span></samp> to read the next record immediately, but it does not alter the
flow of control in any way (i.e., the rest of the current action executes
with a new input record).

   <p><a name="index-g_t_0040command_007bawk_007d-programs_002c-execution-of-1159"></a>At the highest level, <samp><span class="command">awk</span></samp> program execution is a loop that reads
an input record and then tests each rule's pattern against it.  If you
think of this loop as a <code>for</code> statement whose body contains the
rules, then the <code>next</code> statement is analogous to a <code>continue</code>
statement. It skips to the end of the body of this implicit loop and
executes the increment (which reads another record).

   <p>For example, suppose an <samp><span class="command">awk</span></samp> program works only on records
with four fields, and it shouldn't fail when given bad input.  To avoid
complicating the rest of the program, write a &ldquo;weed out&rdquo; rule near
the beginning, in the following manner:

<pre class="example">     NF != 4 {
       err = sprintf("%s:%d: skipped: NF != 4\n", FILENAME, FNR)
       print err &gt; "/dev/stderr"
       next
     }
</pre>
   <p class="noindent">Because of the <code>next</code> statement,
the program's subsequent rules won't see the bad record.  The error
message is redirected to the standard error output stream, as error
messages should be. 
For more detail see
<a href="#Special-Files">Special Files</a>.

   <p>If the <code>next</code> statement causes the end of the input to be reached,
then the code in any <code>END</code> rules is executed. 
See <a href="#BEGIN_002fEND">BEGIN/END</a>.

   <p>The <code>next</code> statement is not allowed inside <code>BEGINFILE</code> and
<code>ENDFILE</code> rules. See <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a>.

<!-- @cindex @command{awk} language, POSIX version -->
<!-- @cindex @code{next}, inside a user-defined function -->
   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1160"></a><a name="index-g_t_0040code_007bEND_007d-pattern_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1161"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1162"></a><a name="index-g_t_0040code_007bnext_007d-statement_002c-user_002ddefined-functions-and-1163"></a><a name="index-functions_002c-user_002ddefined_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1164"></a>According to the POSIX standard, the behavior is undefined if
the <code>next</code> statement is used in a <code>BEGIN</code> or <code>END</code> rule. 
<samp><span class="command">gawk</span></samp> treats it as a syntax error. 
Although POSIX permits it,
some other <samp><span class="command">awk</span></samp> implementations don't allow the <code>next</code>
statement inside function bodies
(see <a href="#User_002ddefined">User-defined</a>). 
Just as with any other <code>next</code> statement, a <code>next</code> statement inside a
function body reads the next record and starts processing it with the
first rule in the program.

<div class="node">
<a name="Nextfile-Statement"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Exit-Statement">Exit Statement</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Next-Statement">Next Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Statements">Statements</a>

</div>

<h4 class="subsection">7.4.9 The <code>nextfile</code> Statement</h4>

<p><a name="index-g_t_0040code_007bnextfile_007d-statement-1165"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-1166"></a>
<a name="index-common-extensions_002c-_0040code_007bnextfile_007d-statement-1167"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007bnextfile_007d-statement-1168"></a>The <code>nextfile</code> statement
is similar to the <code>next</code> statement. 
However, instead of abandoning processing of the current record, the
<code>nextfile</code> statement instructs <samp><span class="command">awk</span></samp> to stop processing the
current data file.

   <p>Upon execution of the <code>nextfile</code> statement,
<code>FILENAME</code> is
updated to the name of the next data file listed on the command line,
<code>FNR</code> is reset to one,
and processing
starts over with the first rule in the program. 
If the <code>nextfile</code> statement causes the end of the input to be reached,
then the code in any <code>END</code> rules is executed. An exception to this is
when <code>nextfile</code> is invoked during execution of any statement in an
<code>END</code> rule; In this case, it causes the program to stop immediately. See <a href="#BEGIN_002fEND">BEGIN/END</a>.

   <p>The <code>nextfile</code> statement is useful when there are many data files
to process but it isn't necessary to process every record in every file. 
Without <code>nextfile</code>,
in order to move on to the next data file, a program
would have to continue scanning the unwanted records.  The <code>nextfile</code>
statement accomplishes this much more efficiently.

   <p>In <samp><span class="command">gawk</span></samp>, execution of <code>nextfile</code> causes additional things
to happen:
any <code>ENDFILE</code> rules are executed except in the case as
mentioned below,
<code>ARGIND</code> is incremented,
and
any <code>BEGINFILE</code> rules are executed
(<code>ARGIND</code> hasn't been introduced yet. See <a href="#Built_002din-Variables">Built-in Variables</a>.)

   <p>With <samp><span class="command">gawk</span></samp>, <code>nextfile</code> is useful inside a <code>BEGINFILE</code>
rule to skip over a file that would otherwise cause <samp><span class="command">gawk</span></samp>
to exit with a fatal error. In this case, <code>ENDFILE</code> rules are not
executed. See <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a>.

   <p>While one might think that &lsquo;<samp><span class="samp">close(FILENAME)</span></samp>&rsquo; would accomplish
the same as <code>nextfile</code>, this isn't true.  <code>close()</code> is
reserved for closing files, pipes, and coprocesses that are
opened with redirections.  It is not related to the main processing that
<samp><span class="command">awk</span></samp> does with the files listed in <code>ARGV</code>.

   <blockquote>
<b>NOTE:</b> For many years, <code>nextfile</code> was a
<samp><span class="command">gawk</span></samp> extension. As of September, 2012, it was accepted for
inclusion into the POSIX standard. 
See <a href="http://austingroupbugs.net/view.php?id=607">the Austin Group website</a>. 
</blockquote>

   <p><a name="index-functions_002c-user_002ddefined_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1169"></a><a name="index-g_t_0040code_007bnextfile_007d-statement_002c-user_002ddefined-functions-and-1170"></a>The current version of the Brian Kernighan's <samp><span class="command">awk</span></samp> (see <a href="#Other-Versions">Other Versions</a>) also supports <code>nextfile</code>.  However, it doesn't allow the
<code>nextfile</code> statement inside function bodies (see <a href="#User_002ddefined">User-defined</a>). 
<samp><span class="command">gawk</span></samp> does; a <code>nextfile</code> inside a function body reads the
next record and starts processing it with the first rule in the program,
just as any other <code>nextfile</code> statement.

<div class="node">
<a name="Exit-Statement"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Nextfile-Statement">Nextfile Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Statements">Statements</a>

</div>

<h4 class="subsection">7.4.10 The <code>exit</code> Statement</h4>

<p><a name="index-g_t_0040code_007bexit_007d-statement-1171"></a>The <code>exit</code> statement causes <samp><span class="command">awk</span></samp> to immediately stop
executing the current rule and to stop processing input; any remaining input
is ignored.  The <code>exit</code> statement is written as follows:

<pre class="example">     exit <span class="roman">[</span><var>return code</var><span class="roman">]</span>
</pre>
   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bexit_007d-statement-and-1172"></a><a name="index-g_t_0040code_007bEND_007d-pattern_002c-_0040code_007bexit_007d-statement-and-1173"></a>When an <code>exit</code> statement is executed from a <code>BEGIN</code> rule, the
program stops processing everything immediately.  No input records are
read.  However, if an <code>END</code> rule is present,
as part of executing the <code>exit</code> statement,
the <code>END</code> rule is executed
(see <a href="#BEGIN_002fEND">BEGIN/END</a>). 
If <code>exit</code> is used in the body of an <code>END</code> rule, it causes
the program to stop immediately.

   <p>An <code>exit</code> statement that is not part of a <code>BEGIN</code> or <code>END</code>
rule stops the execution of any further automatic rules for the current
record, skips reading any remaining input records, and executes the
<code>END</code> rule if there is one. 
Any <code>ENDFILE</code> rules are also skipped; they are not executed.

   <p>In such a case,
if you don't want the <code>END</code> rule to do its job, set a variable
to nonzero before the <code>exit</code> statement and check that variable in
the <code>END</code> rule. 
See <a href="#Assert-Function">Assert Function</a>,
for an example that does this.

   <p><a name="index-dark-corner_002c-_0040code_007bexit_007d-statement-1174"></a>If an argument is supplied to <code>exit</code>, its value is used as the exit
status code for the <samp><span class="command">awk</span></samp> process.  If no argument is supplied,
<code>exit</code> causes <samp><span class="command">awk</span></samp> to return a &ldquo;success&rdquo; status. 
In the case where an argument
is supplied to a first <code>exit</code> statement, and then <code>exit</code> is
called a second time from an <code>END</code> rule with no argument,
<samp><span class="command">awk</span></samp> uses the previously supplied exit value. 
(d.c.) 
See <a href="#Exit-Status">Exit Status</a>, for more information.

   <p><a name="index-programming-conventions_002c-_0040code_007bexit_007d-statement-1175"></a>For example, suppose an error condition occurs that is difficult or
impossible to handle.  Conventionally, programs report this by
exiting with a nonzero status.  An <samp><span class="command">awk</span></samp> program can do this
using an <code>exit</code> statement with a nonzero argument, as shown
in the following example:

<pre class="example">     BEGIN {
            if (("date" | getline date_now) &lt;= 0) {
              print "Can't get system date" &gt; "/dev/stderr"
              exit 1
            }
            print "current date is", date_now
            close("date")
     }
</pre>
   <blockquote>
<b>NOTE:</b> For full portability, exit values should be between zero and 126, inclusive. 
Negative values, and values of 127 or greater, may not produce consistent
results across different operating systems. 
</blockquote>

<!-- ENDOFRANGE csta -->
<!-- ENDOFRANGE acs -->
<!-- ENDOFRANGE accs -->
<div class="node">
<a name="Built-in-Variables"></a>
<a name="Built_002din-Variables"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Statements">Statements</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Patterns-and-Actions">Patterns and Actions</a>

</div>

<h3 class="section">7.5 Built-in Variables</h3>

<!-- STARTOFRANGE bvar -->
<p><a name="index-built_002din-variables-1176"></a><!-- STARTOFRANGE varb -->
<a name="index-variables_002c-built_002din-1177"></a>
Most <samp><span class="command">awk</span></samp> variables are available to use for your own
purposes; they never change unless your program assigns values to
them, and they never affect anything unless your program examines them. 
However, a few variables in <samp><span class="command">awk</span></samp> have special built-in meanings. 
<samp><span class="command">awk</span></samp> examines some of these automatically, so that they enable you
to tell <samp><span class="command">awk</span></samp> how to do certain things.  Others are set
automatically by <samp><span class="command">awk</span></samp>, so that they carry information from the
internal workings of <samp><span class="command">awk</span></samp> to your program.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-built_002din-variables-and-1178"></a>This section documents all the built-in variables of
<samp><span class="command">gawk</span></samp>, most of which are also documented in the chapters
describing their areas of activity.

<ul class="menu">
<li><a accesskey="1" href="#User_002dmodified">User-modified</a>:                Built-in variables that you change to control
                                <samp><span class="command">awk</span></samp>. 
<li><a accesskey="2" href="#Auto_002dset">Auto-set</a>:                     Built-in variables where <samp><span class="command">awk</span></samp> gives
                                you information. 
<li><a accesskey="3" href="#ARGC-and-ARGV">ARGC and ARGV</a>:                Ways to use <code>ARGC</code> and <code>ARGV</code>. 
</ul>

<div class="node">
<a name="User-modified"></a>
<a name="User_002dmodified"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Auto_002dset">Auto-set</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din-Variables">Built-in Variables</a>

</div>

<h4 class="subsection">7.5.1 Built-in Variables That Control <samp><span class="command">awk</span></samp></h4>

<!-- STARTOFRANGE bvaru -->
<p><a name="index-built_002din-variables_002c-user_002dmodifiable-1179"></a><!-- STARTOFRANGE nmbv -->
<a name="index-user_002dmodifiable-variables-1180"></a>
The following is an alphabetical list of variables that you can change to
control how <samp><span class="command">awk</span></samp> does certain things. The variables that are
specific to <samp><span class="command">gawk</span></samp> are marked with a pound sign&nbsp;(&lsquo;<samp><span class="samp">#</span></samp>&rsquo;).<!-- /@w -->

     
<a name="index-g_t_0040code_007bBINMODE_007d-variable-1181"></a>
<a name="index-binary-input_002foutput-1182"></a>
<a name="index-input_002foutput_002c-binary-1183"></a>
<dl><dt><code>BINMODE #</code><dd>On non-POSIX systems, this variable specifies use of binary mode for all I/O. 
Numeric values of one, two, or three specify that input files, output files, or
all files, respectively, should use binary I/O. 
A numeric value less than zero is treated as zero, and a numeric value greater than
three is treated as three. 
Alternatively,
string values of <code>"r"</code> or <code>"w"</code> specify that input files and
output files, respectively, should use binary I/O. 
A string value of <code>"rw"</code> or <code>"wr"</code> indicates that all
files should use binary I/O. 
Any other string value is treated the same as <code>"rw"</code>,
but causes <samp><span class="command">gawk</span></samp>
to generate a warning message. 
<code>BINMODE</code> is described in more detail in
<a href="#PC-Using">PC Using</a>.

     <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bBINMODE_007d-variable-1184"></a>This variable is a <samp><span class="command">gawk</span></samp> extension. 
In other <samp><span class="command">awk</span></samp> implementations
(except <samp><span class="command">mawk</span></samp>,
see <a href="#Other-Versions">Other Versions</a>),
or if <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>),
it is not special.

     <p><a name="index-g_t_0040code_007bCONVFMT_007d-variable-1185"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bCONVFMT_007d-variable-and-1186"></a><a name="index-numbers_002c-converting_002c-to-strings-1187"></a><a name="index-strings_002c-converting_002c-numbers-to-1188"></a><br><dt><code>CONVFMT</code><dd>This string controls conversion of numbers to
strings (see <a href="#Conversion">Conversion</a>). 
It works by being passed, in effect, as the first argument to the
<code>sprintf()</code> function
(see <a href="#String-Functions">String Functions</a>). 
Its default value is <code>"%.6g"</code>. 
<code>CONVFMT</code> was introduced by the POSIX standard.

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bFIELDWIDTHS_007d-variable-in-1189"></a><a name="index-g_t_0040code_007bFIELDWIDTHS_007d-variable-1190"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bFIELDWIDTHS_007d-variable-1191"></a><a name="index-field-separators_002c-_0040code_007bFIELDWIDTHS_007d-variable-and-1192"></a><a name="index-separators_002c-field_002c-_0040code_007bFIELDWIDTHS_007d-variable-and-1193"></a><br><dt><code>FIELDWIDTHS #</code><dd>This is a space-separated list of columns that tells <samp><span class="command">gawk</span></samp>
how to split input with fixed columnar boundaries. 
Assigning a value to <code>FIELDWIDTHS</code>
overrides the use of <code>FS</code> and <code>FPAT</code> for field splitting. 
See <a href="#Constant-Size">Constant Size</a>, for more information.

     <p>If <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>), then <code>FIELDWIDTHS</code>
has no special meaning, and field-splitting operations occur based
exclusively on the value of <code>FS</code>.

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bFPAT_007d-variable-in-1194"></a><a name="index-g_t_0040code_007bFPAT_007d-variable-1195"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bFPAT_007d-variable-1196"></a><a name="index-field-separators_002c-_0040code_007bFPAT_007d-variable-and-1197"></a><a name="index-separators_002c-field_002c-_0040code_007bFPAT_007d-variable-and-1198"></a><br><dt><code>FPAT #</code><dd>This is a regular expression (as a string) that tells <samp><span class="command">gawk</span></samp>
to create the fields based on text that matches the regular expression. 
Assigning a value to <code>FPAT</code>
overrides the use of <code>FS</code> and <code>FIELDWIDTHS</code> for field splitting. 
See <a href="#Splitting-By-Content">Splitting By Content</a>, for more information.

     <p>If <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>), then <code>FPAT</code>
has no special meaning, and field-splitting operations occur based
exclusively on the value of <code>FS</code>.

     <p><a name="index-g_t_0040code_007bFS_007d-variable-1199"></a><a name="index-separators_002c-field-1200"></a><a name="index-field-separators-1201"></a><br><dt><code>FS</code><dd>This is the input field separator
(see <a href="#Field-Separators">Field Separators</a>). 
The value is a single-character string or a multi-character regular
expression that matches the separations between fields in an input
record.  If the value is the null string (<code>""</code>), then each
character in the record becomes a separate field. 
(This behavior is a <samp><span class="command">gawk</span></samp> extension. POSIX <samp><span class="command">awk</span></samp> does not
specify the behavior when <code>FS</code> is the null string. 
Nonetheless, some other versions of <samp><span class="command">awk</span></samp> also treat
<code>""</code> specially.)

     <p><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bFS_007d-variable-and-1202"></a>The default value is <code>"&nbsp;"</code><!-- /@w -->, a string consisting of a single
space.  As a special exception, this value means that any
sequence of spaces, TABs, and/or newlines is a single separator.<a rel="footnote" href="#fn-35" name="fnd-35"><sup>35</sup></a>  It also causes
spaces, TABs, and newlines at the beginning and end of a record to be ignored.

     <p>You can set the value of <code>FS</code> on the command line using the
<samp><span class="option">-F</span></samp> option:

     <pre class="example">          awk -F, '<var>program</var>' <var>input-files</var>
</pre>
     <p><a name="index-g_t_0040command_007bgawk_007d_002c-field-separators-and-1203"></a>If <samp><span class="command">gawk</span></samp> is using <code>FIELDWIDTHS</code> or <code>FPAT</code>
for field splitting,
assigning a value to <code>FS</code> causes <samp><span class="command">gawk</span></samp> to return to
the normal, <code>FS</code>-based field splitting. An easy way to do this
is to simply say &lsquo;<samp><span class="samp">FS = FS</span></samp>&rsquo;, perhaps with an explanatory comment.

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-in-1204"></a><a name="index-g_t_0040code_007bIGNORECASE_007d-variable-1205"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-1206"></a><a name="index-case-sensitivity_002c-string-comparisons-and-1207"></a><a name="index-case-sensitivity_002c-regexps-and-1208"></a><a name="index-regular-expressions_002c-case-sensitivity-1209"></a><br><dt><code>IGNORECASE #</code><dd>If <code>IGNORECASE</code> is nonzero or non-null, then all string comparisons
and all regular expression matching are case independent.  Thus, regexp
matching with &lsquo;<samp><span class="samp">~</span></samp>&rsquo; and &lsquo;<samp><span class="samp">!~</span></samp>&rsquo;, as well as the <code>gensub()</code>,
<code>gsub()</code>, <code>index()</code>, <code>match()</code>, <code>patsplit()</code>,
<code>split()</code>, and <code>sub()</code>
functions, record termination with <code>RS</code>, and field splitting with
<code>FS</code> and <code>FPAT</code>, all ignore case when doing their particular regexp operations. 
However, the value of <code>IGNORECASE</code> does <em>not</em> affect array subscripting
and it does not affect field splitting when using a single-character
field separator. 
See <a href="#Case_002dsensitivity">Case-sensitivity</a>.

     <p>If <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>),
then <code>IGNORECASE</code> has no special meaning.  Thus, string
and regexp operations are always case-sensitive.

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bLINT_007d-variable-in-1210"></a><a name="index-g_t_0040code_007bLINT_007d-variable-1211"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bLINT_007d-variable-1212"></a><a name="index-lint-checking-1213"></a><br><dt><code>LINT #</code><dd>When this variable is true (nonzero or non-null), <samp><span class="command">gawk</span></samp>
behaves as if the <samp><span class="option">--lint</span></samp> command-line option is in effect. 
(see <a href="#Options">Options</a>). 
With a value of <code>"fatal"</code>, lint warnings become fatal errors. 
With a value of <code>"invalid"</code>, only warnings about things that are
actually invalid are issued. (This is not fully implemented yet.) 
Any other true value prints nonfatal warnings. 
Assigning a false value to <code>LINT</code> turns off the lint warnings.

     <p>This variable is a <samp><span class="command">gawk</span></samp> extension.  It is not special
in other <samp><span class="command">awk</span></samp> implementations.  Unlike the other special variables,
changing <code>LINT</code> does affect the production of lint warnings,
even if <samp><span class="command">gawk</span></samp> is in compatibility mode.  Much as
the <samp><span class="option">--lint</span></samp> and <samp><span class="option">--traditional</span></samp> options independently
control different aspects of <samp><span class="command">gawk</span></samp>'s behavior, the control
of lint warnings during program execution is independent of the flavor
of <samp><span class="command">awk</span></samp> being executed.

     <p><a name="index-g_t_0040code_007bOFMT_007d-variable-1214"></a><a name="index-numbers_002c-converting_002c-to-strings-1215"></a><a name="index-strings_002c-converting_002c-numbers-to-1216"></a><br><dt><code>OFMT</code><dd>This string controls conversion of numbers to
strings (see <a href="#Conversion">Conversion</a>) for
printing with the <code>print</code> statement.  It works by being passed
as the first argument to the <code>sprintf()</code> function
(see <a href="#String-Functions">String Functions</a>). 
Its default value is <code>"%.6g"</code>.  Earlier versions of <samp><span class="command">awk</span></samp>
also used <code>OFMT</code> to specify the format for converting numbers to
strings in general expressions; this is now done by <code>CONVFMT</code>.

     <p><a name="index-g_t_0040code_007bsprintf_0028_0029_007d-function_002c-_0040code_007bOFMT_007d-variable-and-1217"></a><a name="index-g_t_0040code_007bprint_007d-statement_002c-_0040code_007bOFMT_007d-variable-and-1218"></a><a name="index-g_t_0040code_007bOFS_007d-variable-1219"></a><a name="index-separators_002c-field-1220"></a><a name="index-field-separators-1221"></a><br><dt><code>OFS</code><dd>This is the output field separator (see <a href="#Output-Separators">Output Separators</a>).  It is
output between the fields printed by a <code>print</code> statement.  Its
default value is <code>"&nbsp;"</code><!-- /@w -->, a string consisting of a single space.

     <p><a name="index-g_t_0040code_007bORS_007d-variable-1222"></a><br><dt><code>ORS</code><dd>This is the output record separator.  It is output at the end of every
<code>print</code> statement.  Its default value is <code>"\n"</code>, the newline
character.  (See <a href="#Output-Separators">Output Separators</a>.)

     <p><a name="index-g_t_0040code_007bRS_007d-variable-1223"></a><a name="index-separators_002c-for-records-1224"></a><a name="index-record-separators-1225"></a><br><dt><code>RS</code><dd>This is <samp><span class="command">awk</span></samp>'s input record separator.  Its default value is a string
containing a single newline character, which means that an input record
consists of a single line of text. 
It can also be the null string, in which case records are separated by
runs of blank lines. 
If it is a regexp, records are separated by
matches of the regexp in the input text. 
(See <a href="#Records">Records</a>.)

     <p>The ability for <code>RS</code> to be a regular expression
is a <samp><span class="command">gawk</span></samp> extension. 
In most other <samp><span class="command">awk</span></samp> implementations,
or if <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>),
just the first character of <code>RS</code>'s value is used.

     <p><a name="index-g_t_0040code_007bSUBSEP_007d-variable-1226"></a><a name="index-separators_002c-subscript-1227"></a><a name="index-subscript-separators-1228"></a><br><dt><code>SUBSEP</code><dd>This is the subscript separator.  It has the default value of
<code>"\034"</code> and is used to separate the parts of the indices of a
multidimensional array.  Thus, the expression <code>foo["A",&nbsp;"B"]<!-- /@w --></code>
really accesses <code>foo["A\034B"]</code>
(see <a href="#Multi_002ddimensional">Multi-dimensional</a>).

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bTEXTDOMAIN_007d-variable-in-1229"></a><a name="index-g_t_0040code_007bTEXTDOMAIN_007d-variable-1230"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bTEXTDOMAIN_007d-variable-1231"></a><a name="index-internationalization_002c-localization-1232"></a><br><dt><code>TEXTDOMAIN #</code><dd>This variable is used for internationalization of programs at the
<samp><span class="command">awk</span></samp> level.  It sets the default text domain for specially
marked string constants in the source text, as well as for the
<code>dcgettext()</code>, <code>dcngettext()</code> and <code>bindtextdomain()</code> functions
(see <a href="#Internationalization">Internationalization</a>). 
The default value of <code>TEXTDOMAIN</code> is <code>"messages"</code>.

     <p>This variable is a <samp><span class="command">gawk</span></samp> extension. 
In other <samp><span class="command">awk</span></samp> implementations,
or if <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>),
it is not special. 
</dl>
   <!-- ENDOFRANGE bvar -->
<!-- ENDOFRANGE varb -->
<!-- ENDOFRANGE bvaru -->
<!-- ENDOFRANGE nmbv -->

<div class="node">
<a name="Auto-set"></a>
<a name="Auto_002dset"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#ARGC-and-ARGV">ARGC and ARGV</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#User_002dmodified">User-modified</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din-Variables">Built-in Variables</a>

</div>

<h4 class="subsection">7.5.2 Built-in Variables That Convey Information</h4>

<!-- STARTOFRANGE bvconi -->
<p><a name="index-built_002din-variables_002c-conveying-information-1233"></a><!-- STARTOFRANGE vbconi -->
<a name="index-variables_002c-built_002din_002c-conveying-information-1234"></a>The following is an alphabetical list of variables that <samp><span class="command">awk</span></samp>
sets automatically on certain occasions in order to provide
information to your program.  The variables that are specific to
<samp><span class="command">gawk</span></samp> are marked with a pound sign&nbsp;(&lsquo;<samp><span class="samp">#</span></samp>&rsquo;).<!-- /@w -->

     
<a name="index-g_t_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables-1235"></a>
<a name="index-arguments_002c-command_002dline-1236"></a>
<a name="index-command-line_002c-arguments-1237"></a>
<dl><dt><code>ARGC</code><span class="roman">,</span><code> ARGV</code><dd>The command-line arguments available to <samp><span class="command">awk</span></samp> programs are stored in
an array called <code>ARGV</code>.  <code>ARGC</code> is the number of command-line
arguments present.  See <a href="#Other-Arguments">Other Arguments</a>. 
Unlike most <samp><span class="command">awk</span></samp> arrays,
<code>ARGV</code> is indexed from 0 to <code>ARGC</code> &minus; 1. 
In the following example:

     <pre class="example">          $ <kbd>awk 'BEGIN {</kbd>
          &gt;         <kbd>for (i = 0; i &lt; ARGC; i++)</kbd>
          &gt;             <kbd>print ARGV[i]</kbd>
          &gt;      <kbd>}' inventory-shipped BBS-list</kbd>
          -| awk
          -| inventory-shipped
          -| BBS-list
</pre>
     <p class="noindent"><code>ARGV[0]</code> contains &lsquo;<samp><span class="samp">awk</span></samp>&rsquo;, <code>ARGV[1]</code>
contains &lsquo;<samp><span class="samp">inventory-shipped</span></samp>&rsquo;, and <code>ARGV[2]</code> contains
&lsquo;<samp><span class="samp">BBS-list</span></samp>&rsquo;.  The value of <code>ARGC</code> is three, one more than the
index of the last element in <code>ARGV</code>, because the elements are numbered
from zero.

     <p><a name="index-programming-conventions_002c-_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables-1238"></a>The names <code>ARGC</code> and <code>ARGV</code>, as well as the convention of indexing
the array from 0 to <code>ARGC</code> &minus; 1, are derived from the C language's
method of accessing command-line arguments.

     <p><a name="index-dark-corner_002c-value-of-_0040code_007bARGV_005b0_005d_007d-1239"></a>The value of <code>ARGV[0]</code> can vary from system to system. 
Also, you should note that the program text is <em>not</em> included in
<code>ARGV</code>, nor are any of <samp><span class="command">awk</span></samp>'s command-line options. 
See <a href="#ARGC-and-ARGV">ARGC and ARGV</a>, for information
about how <samp><span class="command">awk</span></samp> uses these variables. 
(d.c.)

     <p><a name="index-g_t_0040code_007bARGIND_007d-variable-1240"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bARGIND_007d-variable-1241"></a><br><dt><code>ARGIND #</code><dd>The index in <code>ARGV</code> of the current file being processed. 
Every time <samp><span class="command">gawk</span></samp> opens a new data file for processing, it sets
<code>ARGIND</code> to the index in <code>ARGV</code> of the file name. 
When <samp><span class="command">gawk</span></samp> is processing the input files,
&lsquo;<samp><span class="samp">FILENAME == ARGV[ARGIND]</span></samp>&rsquo; is always true.

     <p><a name="index-files_002c-processing_0040comma_007b_007d-_0040code_007bARGIND_007d-variable-and-1242"></a>This variable is useful in file processing; it allows you to tell how far
along you are in the list of data files as well as to distinguish between
successive instances of the same file name on the command line.

     <p><a name="index-g_t_0040value_007bFN_007ds_002c-distinguishing-1243"></a>While you can change the value of <code>ARGIND</code> within your <samp><span class="command">awk</span></samp>
program, <samp><span class="command">gawk</span></samp> automatically sets it to a new value when the
next file is opened.

     <p>This variable is a <samp><span class="command">gawk</span></samp> extension. 
In other <samp><span class="command">awk</span></samp> implementations,
or if <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>),
it is not special.

     <p><a name="index-g_t_0040code_007bENVIRON_007d-array-1244"></a><a name="index-environment-variables-1245"></a><br><dt><code>ENVIRON</code><dd>An associative array containing the values of the environment.  The array
indices are the environment variable names; the elements are the values of
the particular environment variables.  For example,
<code>ENVIRON["HOME"]</code> might be <samp><span class="file">/home/arnold</span></samp>.  Changing this array
does not affect the environment passed on to any programs that
<samp><span class="command">awk</span></samp> may spawn via redirection or the <code>system()</code> function. 
<!-- (In a future version of @command{gawk}, it may do so.) -->

     <p>Some operating systems may not have environment variables. 
On such systems, the <code>ENVIRON</code> array is empty (except for
<code>ENVIRON["AWKPATH"]</code><!-- /@w -->,
see <a href="#AWKPATH-Variable">AWKPATH Variable</a>).

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-in-1246"></a><a name="index-g_t_0040code_007bERRNO_007d-variable-1247"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-1248"></a><a name="index-error-handling_002c-_0040code_007bERRNO_007d-variable-and-1249"></a><br><dt><code>ERRNO #</code><dd>If a system error occurs during a redirection for <code>getline</code>,
during a read for <code>getline</code>, or during a <code>close()</code> operation,
then <code>ERRNO</code> contains a string describing the error.

     <p>In addition, <samp><span class="command">gawk</span></samp> clears <code>ERRNO</code>
before opening each command-line input file. This enables checking if
the file is readable inside a <code>BEGINFILE</code> pattern (see <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a>).

     <p>Otherwise,
<code>ERRNO</code> works similarly to the C variable <code>errno</code>. 
Except for the case just mentioned,
<samp><span class="command">gawk</span></samp> <em>never</em> clears it (sets it
to zero or <code>""</code>).  Thus, you should only expect its value
to be meaningful when an I/O operation returns a failure
value, such as <code>getline</code> returning &minus;1. 
You are, of course, free to clear it yourself before doing an
I/O operation.

     <p>This variable is a <samp><span class="command">gawk</span></samp> extension. 
In other <samp><span class="command">awk</span></samp> implementations,
or if <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>),
it is not special.

     <p><a name="index-g_t_0040code_007bFILENAME_007d-variable-1250"></a><a name="index-dark-corner_002c-_0040code_007bFILENAME_007d-variable-1251"></a><br><dt><code>FILENAME</code><dd>The name of the file that <samp><span class="command">awk</span></samp> is currently reading. 
When no data files are listed on the command line, <samp><span class="command">awk</span></samp> reads
from the standard input and <code>FILENAME</code> is set to <code>"-"</code>. 
<code>FILENAME</code> is changed each time a new file is read
(see <a href="#Reading-Files">Reading Files</a>). 
Inside a <code>BEGIN</code> rule, the value of <code>FILENAME</code> is
<code>""</code>, since there are no input files being processed
yet.<a rel="footnote" href="#fn-36" name="fnd-36"><sup>36</sup></a>
(d.c.) 
Note, though, that using <code>getline</code>
(see <a href="#Getline">Getline</a>)
inside a <code>BEGIN</code> rule can give
<code>FILENAME</code> a value.

     <p><a name="index-g_t_0040code_007bFNR_007d-variable-1252"></a><br><dt><code>FNR</code><dd>The current record number in the current file.  <code>FNR</code> is
incremented each time a new record is read
(see <a href="#Records">Records</a>).  It is reinitialized
to zero each time a new input file is started.

     <p><a name="index-g_t_0040code_007bNF_007d-variable-1253"></a><br><dt><code>NF</code><dd>The number of fields in the current input record. 
<code>NF</code> is set each time a new record is read, when a new field is
created or when <code>$0</code> changes (see <a href="#Fields">Fields</a>).

     <p>Unlike most of the variables described in this
section,
assigning a value to <code>NF</code> has the potential to affect
<samp><span class="command">awk</span></samp>'s internal workings.  In particular, assignments
to <code>NF</code> can be used to create or remove fields from the
current record. See <a href="#Changing-Fields">Changing Fields</a>.

     <p><a name="index-g_t_0040code_007bNR_007d-variable-1254"></a><br><dt><code>NR</code><dd>The number of input records <samp><span class="command">awk</span></samp> has processed since
the beginning of the program's execution
(see <a href="#Records">Records</a>). 
<code>NR</code> is incremented each time a new record is read.

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bPROCINFO_007d-array-in-1255"></a><a name="index-g_t_0040code_007bPROCINFO_007d-array-1256"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bPROCINFO_007d-array-1257"></a><br><dt><code>PROCINFO #</code><dd>The elements of this array provide access to information about the
running <samp><span class="command">awk</span></samp> program. 
The following elements (listed alphabetically)
are guaranteed to be available:

          <dl>
<dt><code>PROCINFO["egid"]</code><dd>The value of the <code>getegid()</code> system call.

          <br><dt><code>PROCINFO["euid"]</code><dd>The value of the <code>geteuid()</code> system call.

          <br><dt><code>PROCINFO["FS"]</code><dd>This is
<code>"FS"</code> if field splitting with <code>FS</code> is in effect,
<code>"FIELDWIDTHS"</code> if field splitting with <code>FIELDWIDTHS</code> is in effect,
or <code>"FPAT"</code> if field matching with <code>FPAT</code> is in effect.

          <br><dt><code>PROCINFO["gid"]</code><dd>The value of the <code>getgid()</code> system call.

          <br><dt><code>PROCINFO["pgrpid"]</code><dd>The process group ID of the current process.

          <br><dt><code>PROCINFO["pid"]</code><dd>The process ID of the current process.

          <br><dt><code>PROCINFO["ppid"]</code><dd>The parent process ID of the current process.

          <br><dt><code>PROCINFO["sorted_in"]</code><dd>If this element exists in <code>PROCINFO</code>, its value controls the
order in which array indices will be processed by
&lsquo;<samp><span class="samp">for (index in array) ...</span></samp>&rsquo; loops. 
Since this is an advanced feature, we defer the
full description until later; see
<a href="#Scanning-an-Array">Scanning an Array</a>.

          <br><dt><code>PROCINFO["strftime"]</code><dd>The default time format string for <code>strftime()</code>. 
Assigning a new value to this element changes the default. 
See <a href="#Time-Functions">Time Functions</a>.

          <br><dt><code>PROCINFO["uid"]</code><dd>The value of the <code>getuid()</code> system call.

          <br><dt><code>PROCINFO["version"]</code><dd>The version of <samp><span class="command">gawk</span></samp>. 
</dl>

     <p>On some systems, there may be elements in the array, <code>"group1"</code>
through <code>"group</code><var>N</var><code>"</code> for some <var>N</var>. <var>N</var> is the number of
supplementary groups that the process has.  Use the <code>in</code> operator
to test for these elements
(see <a href="#Reference-to-Elements">Reference to Elements</a>).

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bPROCINFO_007d-array-in-1258"></a><a name="index-g_t_0040code_007bPROCINFO_007d-array-1259"></a>The <code>PROCINFO</code> array is also used to cause coprocesses
to communicate over pseudo-ttys instead of through two-way pipes;
this is discussed further in <a href="#Two_002dway-I_002fO">Two-way I/O</a>.

     <p>This array is a <samp><span class="command">gawk</span></samp> extension. 
In other <samp><span class="command">awk</span></samp> implementations,
or if <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>),
it is not special.

     <p><a name="index-g_t_0040code_007bRLENGTH_007d-variable-1260"></a><br><dt><code>RLENGTH</code><dd>The length of the substring matched by the
<code>match()</code> function
(see <a href="#String-Functions">String Functions</a>). 
<code>RLENGTH</code> is set by invoking the <code>match()</code> function.  Its value
is the length of the matched string, or &minus;1 if no match is found.

     <p><a name="index-g_t_0040code_007bRSTART_007d-variable-1261"></a><br><dt><code>RSTART</code><dd>The start-index in characters of the substring that is matched by the
<code>match()</code> function
(see <a href="#String-Functions">String Functions</a>). 
<code>RSTART</code> is set by invoking the <code>match()</code> function.  Its value
is the position of the string where the matched substring starts, or zero
if no match was found.

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bRT_007d-variable-in-1262"></a><a name="index-g_t_0040code_007bRT_007d-variable-1263"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bRT_007d-variable-1264"></a><br><dt><code>RT #</code><dd>This is set each time a record is read. It contains the input text
that matched the text denoted by <code>RS</code>, the record separator.

     <p>This variable is a <samp><span class="command">gawk</span></samp> extension. 
In other <samp><span class="command">awk</span></samp> implementations,
or if <samp><span class="command">gawk</span></samp> is in compatibility mode
(see <a href="#Options">Options</a>),
it is not special. 
</dl>
   <!-- ENDOFRANGE bvconi -->
<!-- ENDOFRANGE vbconi -->

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Changing <code>NR</code> and <code>FNR</code></h4>

<p><a name="index-g_t_0040code_007bNR_007d-variable_002c-changing-1265"></a><a name="index-g_t_0040code_007bFNR_007d-variable_002c-changing-1266"></a><a name="index-advanced-features_002c-_0040code_007bFNR_007d_002f_0040code_007bNR_007d-variables-1267"></a><a name="index-dark-corner_002c-_0040code_007bFNR_007d_002f_0040code_007bNR_007d-variables-1268"></a><samp><span class="command">awk</span></samp> increments <code>NR</code> and <code>FNR</code>
each time it reads a record, instead of setting them to the absolute
value of the number of records read.  This means that a program can
change these variables and their new values are incremented for
each record. 
(d.c.) 
The following example shows this:

<pre class="example">     $ <kbd>echo '1</kbd>
     &gt; <kbd>2</kbd>
     &gt; <kbd>3</kbd>
     &gt; <kbd>4' | awk 'NR == 2 { NR = 17 }</kbd>
     &gt; <kbd>{ print NR }'</kbd>
     -| 1
     -| 17
     -| 18
     -| 19
</pre>
   <p class="noindent">Before <code>FNR</code> was added to the <samp><span class="command">awk</span></samp> language
(see <a href="#V7_002fSVR3_002e1">V7/SVR3.1</a>),
many <samp><span class="command">awk</span></samp> programs used this feature to track the number of
records in a file by resetting <code>NR</code> to zero when <code>FILENAME</code>
changed.

<div class="node">
<a name="ARGC-and-ARGV"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Auto_002dset">Auto-set</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din-Variables">Built-in Variables</a>

</div>

<h4 class="subsection">7.5.3 Using <code>ARGC</code> and <code>ARGV</code></h4>

<p><a name="index-g_t_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables-1269"></a><a name="index-arguments_002c-command_002dline-1270"></a><a name="index-command-line_002c-arguments-1271"></a>
<a href="#Auto_002dset">Auto-set</a>,
presented the following program describing the information contained in <code>ARGC</code>
and <code>ARGV</code>:

<pre class="example">     $ <kbd>awk 'BEGIN {</kbd>
     &gt;        <kbd>for (i = 0; i &lt; ARGC; i++)</kbd>
     &gt;            <kbd>print ARGV[i]</kbd>
     &gt;      <kbd>}' inventory-shipped BBS-list</kbd>
     -| awk
     -| inventory-shipped
     -| BBS-list
</pre>
   <p class="noindent">In this example, <code>ARGV[0]</code> contains &lsquo;<samp><span class="samp">awk</span></samp>&rsquo;, <code>ARGV[1]</code>
contains &lsquo;<samp><span class="samp">inventory-shipped</span></samp>&rsquo;, and <code>ARGV[2]</code> contains
&lsquo;<samp><span class="samp">BBS-list</span></samp>&rsquo;. 
Notice that the <samp><span class="command">awk</span></samp> program is not entered in <code>ARGV</code>.  The
other command-line options, with their arguments, are also not
entered.  This includes variable assignments done with the <samp><span class="option">-v</span></samp>
option (see <a href="#Options">Options</a>). 
Normal variable assignments on the command line <em>are</em>
treated as arguments and do show up in the <code>ARGV</code> array. 
Given the following program in a file named <samp><span class="file">showargs.awk</span></samp>:

<pre class="example">     BEGIN {
         printf "A=%d, B=%d\n", A, B
         for (i = 0; i &lt; ARGC; i++)
             printf "\tARGV[%d] = %s\n", i, ARGV[i]
     }
     END   { printf "A=%d, B=%d\n", A, B }
</pre>
   <p class="noindent">Running it produces the following:

<pre class="example">     $ <kbd>awk -v A=1 -f showargs.awk B=2 /dev/null</kbd>
     -| A=1, B=0
     -|        ARGV[0] = awk
     -|        ARGV[1] = B=2
     -|        ARGV[2] = /dev/null
     -| A=1, B=2
</pre>
   <p>A program can alter <code>ARGC</code> and the elements of <code>ARGV</code>. 
Each time <samp><span class="command">awk</span></samp> reaches the end of an input file, it uses the next
element of <code>ARGV</code> as the name of the next input file.  By storing a
different string there, a program can change which files are read. 
Use <code>"-"</code> to represent the standard input.  Storing
additional elements and incrementing <code>ARGC</code> causes
additional files to be read.

   <p>If the value of <code>ARGC</code> is decreased, that eliminates input files
from the end of the list.  By recording the old value of <code>ARGC</code>
elsewhere, a program can treat the eliminated arguments as
something other than file names.

   <p>To eliminate a file from the middle of the list, store the null string
(<code>""</code>) into <code>ARGV</code> in place of the file's name.  As a
special feature, <samp><span class="command">awk</span></samp> ignores file names that have been
replaced with the null string. 
Another option is to
use the <code>delete</code> statement to remove elements from
<code>ARGV</code> (see <a href="#Delete">Delete</a>).

   <p>All of these actions are typically done in the <code>BEGIN</code> rule,
before actual processing of the input begins. 
See <a href="#Split-Program">Split Program</a>, and see
<a href="#Tee-Program">Tee Program</a>, for examples
of each way of removing elements from <code>ARGV</code>. 
The following fragment processes <code>ARGV</code> in order to examine, and
then remove, command-line options:

<pre class="example">     BEGIN {
         for (i = 1; i &lt; ARGC; i++) {
             if (ARGV[i] == "-v")
                 verbose = 1
             else if (ARGV[i] == "-q")
                 debug = 1
             else if (ARGV[i] ~ /^-./) {
                 e = sprintf("%s: unrecognized option -- %c",
                         ARGV[0], substr(ARGV[i], 2, 1))
                 print e &gt; "/dev/stderr"
             } else
                 break
             delete ARGV[i]
         }
     }
</pre>
   <p>To actually get the options into the <samp><span class="command">awk</span></samp> program,
end the <samp><span class="command">awk</span></samp> options with <samp><span class="option">--</span></samp> and then supply
the <samp><span class="command">awk</span></samp> program's options, in the following manner:

<pre class="example">     awk -f myprog -- -v -q file1 file2 ...
</pre>
   <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables-1272"></a>This is not necessary in <samp><span class="command">gawk</span></samp>. Unless <samp><span class="option">--posix</span></samp> has
been specified, <samp><span class="command">gawk</span></samp> silently puts any unrecognized options
into <code>ARGV</code> for the <samp><span class="command">awk</span></samp> program to deal with.  As soon
as it sees an unknown option, <samp><span class="command">gawk</span></samp> stops looking for other
options that it might otherwise recognize.  The previous example with
<samp><span class="command">gawk</span></samp> would be:

<pre class="example">     gawk -f myprog -q -v file1 file2 ...
</pre>
   <p class="noindent">Because <samp><span class="option">-q</span></samp> is not a valid <samp><span class="command">gawk</span></samp> option,
it and the following <samp><span class="option">-v</span></samp>
are passed on to the <samp><span class="command">awk</span></samp> program. 
(See <a href="#Getopt-Function">Getopt Function</a>, for an <samp><span class="command">awk</span></samp> library function
that parses command-line options.)

<div class="node">
<a name="Arrays"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Functions">Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Patterns-and-Actions">Patterns and Actions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">8 Arrays in <samp><span class="command">awk</span></samp></h2>

<!-- STARTOFRANGE arrs -->
<p><a name="index-arrays-1273"></a>
An <dfn>array</dfn> is a table of values called <dfn>elements</dfn>.  The
elements of an array are distinguished by their <dfn>indices</dfn>.  Indices
may be either numbers or strings.

   <p>This chapter describes how arrays work in <samp><span class="command">awk</span></samp>,
how to use array elements, how to scan through every element in an array,
and how to remove array elements. 
It also describes how <samp><span class="command">awk</span></samp> simulates multidimensional
arrays, as well as some of the less obvious points about array usage. 
The chapter moves on to discuss <samp><span class="command">gawk</span></samp>'s facility
for sorting arrays, and ends with a brief description of <samp><span class="command">gawk</span></samp>'s
ability to support true multidimensional arrays.

   <p><a name="index-variables_002c-names-of-1274"></a><a name="index-functions_002c-names-of-1275"></a><a name="index-arrays_002c-names-of-1276"></a><a name="index-names_002c-arrays_002fvariables-1277"></a><a name="index-namespace-issues-1278"></a><samp><span class="command">awk</span></samp> maintains a single set
of names that may be used for naming variables, arrays, and functions
(see <a href="#User_002ddefined">User-defined</a>). 
Thus, you cannot have a variable and an array with the same name in the
same <samp><span class="command">awk</span></samp> program.

<ul class="menu">
<li><a accesskey="1" href="#Array-Basics">Array Basics</a>:                 The basics of arrays. 
<li><a accesskey="2" href="#Delete">Delete</a>:                       The <code>delete</code> statement removes an element
                                from an array. 
<li><a accesskey="3" href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a>:     How to use numbers as subscripts in
                                <samp><span class="command">awk</span></samp>. 
<li><a accesskey="4" href="#Uninitialized-Subscripts">Uninitialized Subscripts</a>:     Using Uninitialized variables as subscripts. 
<li><a accesskey="5" href="#Multi_002ddimensional">Multi-dimensional</a>:            Emulating multidimensional arrays in
                                <samp><span class="command">awk</span></samp>. 
<li><a accesskey="6" href="#Arrays-of-Arrays">Arrays of Arrays</a>:             True multidimensional arrays. 
</ul>

<div class="node">
<a name="Array-Basics"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Delete">Delete</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Arrays">Arrays</a>

</div>

<h3 class="section">8.1 The Basics of Arrays</h3>

<p>This section presents the basics: working with elements
in arrays one at a time, and traversing all of the elements in
an array.

<ul class="menu">
<li><a accesskey="1" href="#Array-Intro">Array Intro</a>:                  Introduction to Arrays
<li><a accesskey="2" href="#Reference-to-Elements">Reference to Elements</a>:        How to examine one element of an array. 
<li><a accesskey="3" href="#Assigning-Elements">Assigning Elements</a>:           How to change an element of an array. 
<li><a accesskey="4" href="#Array-Example">Array Example</a>:                Basic Example of an Array
<li><a accesskey="5" href="#Scanning-an-Array">Scanning an Array</a>:            A variation of the <code>for</code> statement. It
                                loops through the indices of an array's
                                existing elements. 
<li><a accesskey="6" href="#Controlling-Scanning">Controlling Scanning</a>:         Controlling the order in which arrays are
                                scanned. 
</ul>

<div class="node">
<a name="Array-Intro"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Reference-to-Elements">Reference to Elements</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Array-Basics">Array Basics</a>

</div>

<h4 class="subsection">8.1.1 Introduction to Arrays</h4>

<p><a name="index-Wall_002c-Larry-1279"></a><blockquote>
<i>Doing linear scans over an associative array is like trying to club someone
to death with a loaded Uzi.</i><br>
Larry Wall
</blockquote>

   <p>The <samp><span class="command">awk</span></samp> language provides one-dimensional arrays
for storing groups of related strings or numbers. 
Every <samp><span class="command">awk</span></samp> array must have a name.  Array names have the same
syntax as variable names; any valid variable name would also be a valid
array name.  But one name cannot be used in both ways (as an array and
as a variable) in the same <samp><span class="command">awk</span></samp> program.

   <p>Arrays in <samp><span class="command">awk</span></samp> superficially resemble arrays in other programming
languages, but there are fundamental differences.  In <samp><span class="command">awk</span></samp>, it
isn't necessary to specify the size of an array before starting to use it. 
Additionally, any number or string in <samp><span class="command">awk</span></samp>, not just consecutive integers,
may be used as an array index.

   <p>In most other languages, arrays must be <dfn>declared</dfn> before use,
including a specification of
how many elements or components they contain.  In such languages, the
declaration causes a contiguous block of memory to be allocated for that
many elements.  Usually, an index in the array must be a positive integer. 
For example, the index zero specifies the first element in the array, which is
actually stored at the beginning of the block of memory.  Index one
specifies the second element, which is stored in memory right after the
first element, and so on.  It is impossible to add more elements to the
array, because it has room only for as many elements as given in
the declaration. 
(Some languages allow arbitrary starting and ending
indices&mdash;e.g., &lsquo;<samp><span class="samp">15 .. 27</span></samp>&rsquo;&mdash;but the size of the array is still fixed when
the array is declared.)

   <p>A contiguous array of four elements might look like the following example,
conceptually, if the element values are 8, <code>"foo"</code>,
<code>""</code>, and 30:

<!-- @strong{FIXME: NEXT ED:} Use real images here -->
<pre class="example">     +---------+---------+--------+---------+
     |    8    |  "foo"  |   ""   |    30   |    <span class="roman">Value</span>
     +---------+---------+--------+---------+
          0         1         2         3        <span class="roman">Index</span>
</pre>
   <p class="noindent">Only the values are stored; the indices are implicit from the order of
the values. Here, 8 is the value at index zero, because 8 appears in the
position with zero elements before it.

<!-- STARTOFRANGE arrin -->
   <p><a name="index-arrays_002c-indexing-1280"></a><!-- STARTOFRANGE inarr -->
<a name="index-indexing-arrays-1281"></a><a name="index-associative-arrays-1282"></a><a name="index-arrays_002c-associative-1283"></a>Arrays in <samp><span class="command">awk</span></samp> are different&mdash;they are <dfn>associative</dfn>.  This means
that each array is a collection of pairs: an index and its corresponding
array element value:

<pre class="example">     <span class="roman">Index</span> 3     <span class="roman">Value</span> 30
     <span class="roman">Index</span> 1     <span class="roman">Value</span> "foo"
     <span class="roman">Index</span> 0     <span class="roman">Value</span> 8
     <span class="roman">Index</span> 2     <span class="roman">Value</span> ""
</pre>
   <p class="noindent">The pairs are shown in jumbled order because their order is irrelevant.

   <p>One advantage of associative arrays is that new pairs can be added
at any time.  For example, suppose a tenth element is added to the array
whose value is <code>"number&nbsp;ten"</code><!-- /@w -->.  The result is:

<pre class="example">     <span class="roman">Index</span> 10    <span class="roman">Value</span> "number ten"
     <span class="roman">Index</span> 3     <span class="roman">Value</span> 30
     <span class="roman">Index</span> 1     <span class="roman">Value</span> "foo"
     <span class="roman">Index</span> 0     <span class="roman">Value</span> 8
     <span class="roman">Index</span> 2     <span class="roman">Value</span> ""
</pre>
   <p class="noindent"><a name="index-sparse-arrays-1284"></a><a name="index-arrays_002c-sparse-1285"></a>Now the array is <dfn>sparse</dfn>, which just means some indices are missing. 
It has elements 0&ndash;3 and 10, but doesn't have elements 4, 5, 6, 7, 8, or 9.

   <p>Another consequence of associative arrays is that the indices don't
have to be positive integers.  Any number, or even a string, can be
an index.  For example, the following is an array that translates words from
English to French:

<pre class="example">     <span class="roman">Index</span> "dog" <span class="roman">Value</span> "chien"
     <span class="roman">Index</span> "cat" <span class="roman">Value</span> "chat"
     <span class="roman">Index</span> "one" <span class="roman">Value</span> "un"
     <span class="roman">Index</span> 1     <span class="roman">Value</span> "un"
</pre>
   <p class="noindent">Here we decided to translate the number one in both spelled-out and
numeric form&mdash;thus illustrating that a single array can have both
numbers and strings as indices. 
In fact, array subscripts are always strings; this is discussed
in more detail in
<a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a>. 
Here, the number <code>1</code> isn't double-quoted, since <samp><span class="command">awk</span></samp>
automatically converts it to a string.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-in-1286"></a><a name="index-g_t_0040code_007bIGNORECASE_007d-variable-1287"></a><a name="index-case-sensitivity_002c-array-indices-and-1288"></a><a name="index-arrays_002c-_0040code_007bIGNORECASE_007d-variable-and-1289"></a><a name="index-g_t_0040code_007bIGNORECASE_007d-variable_002c-array-subscripts-and-1290"></a>The value of <code>IGNORECASE</code> has no effect upon array subscripting. 
The identical string value used to store an array element must be used
to retrieve it. 
When <samp><span class="command">awk</span></samp> creates an array (e.g., with the <code>split()</code>
built-in function),
that array's indices are consecutive integers starting at one. 
(See <a href="#String-Functions">String Functions</a>.)

   <p><samp><span class="command">awk</span></samp>'s arrays are efficient&mdash;the time to access an element
is independent of the number of elements in the array. 
<!-- ENDOFRANGE arrin -->
<!-- ENDOFRANGE inarr -->

<div class="node">
<a name="Reference-to-Elements"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Assigning-Elements">Assigning Elements</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Array-Intro">Array Intro</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Array-Basics">Array Basics</a>

</div>

<h4 class="subsection">8.1.2 Referring to an Array Element</h4>

<p><a name="index-arrays_002c-elements_002c-referencing-1291"></a><a name="index-elements-in-arrays-1292"></a>
The principal way to use an array is to refer to one of its elements. 
An array reference is an expression as follows:

<pre class="example">     <var>array</var>[<var>index-expression</var>]
</pre>
   <p class="noindent">Here, <var>array</var> is the name of an array.  The expression <var>index-expression</var> is
the index of the desired element of the array.

   <p>The value of the array reference is the current value of that array
element.  For example, <code>foo[4.3]</code> is an expression for the element
of array <code>foo</code> at index &lsquo;<samp><span class="samp">4.3</span></samp>&rsquo;.

   <p>A reference to an array element that has no recorded value yields a value of
<code>""</code>, the null string.  This includes elements
that have not been assigned any value as well as elements that have been
deleted (see <a href="#Delete">Delete</a>).

   <blockquote>
<b>NOTE:</b> A reference to an element that does not exist <em>automatically</em> creates
that array element, with the null string as its value.  (In some cases,
this is unfortunate, because it might waste memory inside <samp><span class="command">awk</span></samp>.)

   <p>Novice <samp><span class="command">awk</span></samp> programmers often make the mistake of checking if
an element exists by checking if the value is empty:

<pre class="example">     # Check if "foo" exists in a:         <i>Incorrect!</i>
     if (a["foo"] != "") ...
</pre>
   <p class="noindent">This is incorrect, since this will <em>create</em> <code>a["foo"]</code>
if it didn't exist before! 
</blockquote>

<!-- @cindex arrays, @code{in} operator and -->
   <p><a name="index-g_t_0040code_007bin_007d-operator_002c-arrays-and-1293"></a>To determine whether an element exists in an array at a certain index, use
the following expression:

<pre class="example">     <var>ind</var> in <var>array</var>
</pre>
   <p><a name="index-side-effects_002c-array-indexing-1294"></a>This expression tests whether the particular index <var>ind</var> exists,
without the side effect of creating that element if it is not present. 
The expression has the value one (true) if <var>array</var><code>[</code><var>ind</var><code>]</code>
exists and zero (false) if it does not exist. 
For example, this statement tests whether the array <code>frequencies</code>
contains the index &lsquo;<samp><span class="samp">2</span></samp>&rsquo;:

<pre class="example">     if (2 in frequencies)
         print "Subscript 2 is present."
</pre>
   <p>Note that this is <em>not</em> a test of whether the array
<code>frequencies</code> contains an element whose <em>value</em> is two. 
There is no way to do that except to scan all the elements.  Also, this
<em>does not</em> create <code>frequencies[2]</code>, while the following
(incorrect) alternative does:

<pre class="example">     if (frequencies[2] != "")
         print "Subscript 2 is present."
</pre>
   <div class="node">
<a name="Assigning-Elements"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Array-Example">Array Example</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Reference-to-Elements">Reference to Elements</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Array-Basics">Array Basics</a>

</div>

<h4 class="subsection">8.1.3 Assigning Array Elements</h4>

<p><a name="index-arrays_002c-elements_002c-assigning-1295"></a><a name="index-elements-in-arrays_002c-assigning-1296"></a>
Array elements can be assigned values just like
<samp><span class="command">awk</span></samp> variables:

<pre class="example">     <var>array</var>[<var>index-expression</var>] = <var>value</var>
</pre>
   <p class="noindent"><var>array</var> is the name of an array.  The expression
<var>index-expression</var> is the index of the element of the array that is
assigned a value.  The expression <var>value</var> is the value to
assign to that element of the array.

<div class="node">
<a name="Array-Example"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Scanning-an-Array">Scanning an Array</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Assigning-Elements">Assigning Elements</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Array-Basics">Array Basics</a>

</div>

<h4 class="subsection">8.1.4 Basic Array Example</h4>

<p>The following program takes a list of lines, each beginning with a line
number, and prints them out in order of line number.  The line numbers
are not in order when they are first read&mdash;instead they
are scrambled.  This program sorts the lines by making an array using
the line numbers as subscripts.  The program then prints out the lines
in sorted order of their numbers.  It is a very simple program and gets
confused upon encountering repeated numbers, gaps, or lines that don't
begin with a number:

<pre class="example">     <!-- file eg/misc/arraymax.awk -->
     {
       if ($1 &gt; max)
         max = $1
       arr[$1] = $0
     }
     
     END {
       for (x = 1; x &lt;= max; x++)
         print arr[x]
     }
     <!-- endfile -->
</pre>
   <p>The first rule keeps track of the largest line number seen so far;
it also stores each line into the array <code>arr</code>, at an index that
is the line's number. 
The second rule runs after all the input has been read, to print out
all the lines. 
When this program is run with the following input:

<pre class="example">     <!-- file eg/misc/arraymax.data -->
     5  I am the Five man
     2  Who are you?  The new number two!
     4  . . . And four on the floor
     1  Who is number one?
     3  I three you.
     <!-- endfile -->
</pre>
   <p class="noindent">Its output is:

<pre class="example">     1  Who is number one?
     2  Who are you?  The new number two!
     3  I three you.
     4  . . . And four on the floor
     5  I am the Five man
</pre>
   <p>If a line number is repeated, the last line with a given number overrides
the others. 
Gaps in the line numbers can be handled with an easy improvement to the
program's <code>END</code> rule, as follows:

<pre class="example">     END {
       for (x = 1; x &lt;= max; x++)
         if (x in arr)
           print arr[x]
     }
</pre>
   <div class="node">
<a name="Scanning-an-Array"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Controlling-Scanning">Controlling Scanning</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Array-Example">Array Example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Array-Basics">Array Basics</a>

</div>

<h4 class="subsection">8.1.5 Scanning All Elements of an Array</h4>

<p><a name="index-elements-in-arrays_002c-scanning-1297"></a><a name="index-arrays_002c-scanning-1298"></a>
In programs that use arrays, it is often necessary to use a loop that
executes once for each element of an array.  In other languages, where
arrays are contiguous and indices are limited to positive integers,
this is easy: all the valid indices can be found by counting from
the lowest index up to the highest.  This technique won't do the job
in <samp><span class="command">awk</span></samp>, because any number or string can be an array index. 
So <samp><span class="command">awk</span></samp> has a special kind of <code>for</code> statement for scanning
an array:

<pre class="example">     for (<var>var</var> in <var>array</var>)
       <var>body</var>
</pre>
   <p class="noindent"><a name="index-g_t_0040code_007bin_007d-operator_002c-arrays-and-1299"></a>This loop executes <var>body</var> once for each index in <var>array</var> that the
program has previously used, with the variable <var>var</var> set to that index.

   <p><a name="index-arrays_002c-_0040code_007bfor_007d-statement-and-1300"></a><a name="index-g_t_0040code_007bfor_007d-statement_002c-in-arrays-1301"></a>The following program uses this form of the <code>for</code> statement.  The
first rule scans the input records and notes which words appear (at
least once) in the input, by storing a one into the array <code>used</code> with
the word as index.  The second rule scans the elements of <code>used</code> to
find all the distinct words that appear in the input.  It prints each
word that is more than 10 characters long and also prints the number of
such words. 
See <a href="#String-Functions">String Functions</a>,
for more information on the built-in function <code>length()</code>.

<pre class="example">     # Record a 1 for each word that is used at least once
     {
         for (i = 1; i &lt;= NF; i++)
             used[$i] = 1
     }
     
     # Find number of distinct words more than 10 characters long
     END {
         for (x in used) {
             if (length(x) &gt; 10) {
                 ++num_long_words
                 print x
             }
         }
         print num_long_words, "words longer than 10 characters"
     }
</pre>
   <p class="noindent">See <a href="#Word-Sorting">Word Sorting</a>,
for a more detailed example of this type.

   <p><a name="index-arrays_002c-elements_002c-order-of-1302"></a><a name="index-elements-in-arrays_002c-order-of-1303"></a>The order in which elements of the array are accessed by this statement
is determined by the internal arrangement of the array elements within
<samp><span class="command">awk</span></samp> and normally cannot be controlled or changed.  This can lead to
problems if new elements are added to <var>array</var> by statements in
the loop body; it is not predictable whether the <code>for</code> loop will
reach them.  Similarly, changing <var>var</var> inside the loop may produce
strange results.  It is best to avoid such things.

<div class="node">
<a name="Controlling-Scanning"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Scanning-an-Array">Scanning an Array</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Array-Basics">Array Basics</a>

</div>

<h4 class="subsection">8.1.6 Using Predefined Array Scanning Orders</h4>

<p>By default, when a <code>for</code> loop traverses an array, the order
is undefined, meaning that the <samp><span class="command">awk</span></samp> implementation
determines the order in which the array is traversed. 
This order is usually based on the internal implementation of arrays
and will vary from one version of <samp><span class="command">awk</span></samp> to the next.

   <p>Often, though, you may wish to do something simple, such as
&ldquo;traverse the array by comparing the indices in ascending order,&rdquo;
or &ldquo;traverse the array by on comparing the values in descending order.&rdquo;
<samp><span class="command">gawk</span></samp> provides two mechanisms which give you this control.

     <ul>
<li>Set <code>PROCINFO["sorted_in"]</code> to one of a set of predefined values. 
We describe this now.

     <li>Set <code>PROCINFO["sorted_in"]</code> to the name of a user-defined function
to be used for comparison of array elements. This advanced feature
is described later, in <a href="#Array-Sorting">Array Sorting</a>. 
</ul>

   <p>The following special values for <code>PROCINFO["sorted_in"]</code> are available:

     <dl>
<dt><code>"@unsorted"</code><dd>Array elements are processed in arbitrary order, which is the default
<samp><span class="command">awk</span></samp> behavior.

     <br><dt><code>"@ind_str_asc"</code><dd>Order by indices compared as strings; this is the most basic sort. 
(Internally, array indices are always strings, so with &lsquo;<samp><span class="samp">a[2*5] = 1</span></samp>&rsquo;
the index is <code>"10"</code> rather than numeric 10.)

     <br><dt><code>"@ind_num_asc"</code><dd>Order by indices but force them to be treated as numbers in the process. 
Any index with a non-numeric value will end up positioned as if it were zero.

     <br><dt><code>"@val_type_asc"</code><dd>Order by element values rather than indices. 
Ordering is by the type assigned to the element
(see <a href="#Typing-and-Comparison">Typing and Comparison</a>). 
All numeric values come before all string values,
which in turn come before all subarrays. 
(Subarrays have not been described yet;
see <a href="#Arrays-of-Arrays">Arrays of Arrays</a>).

     <br><dt><code>"@val_str_asc"</code><dd>Order by element values rather than by indices.  Scalar values are
compared as strings.  Subarrays, if present, come out last.

     <br><dt><code>"@val_num_asc"</code><dd>Order by element values rather than by indices.  Scalar values are
compared as numbers.  Subarrays, if present, come out last. 
When numeric values are equal, the string values are used to provide
an ordering: this guarantees consistent results across different
versions of the C <code>qsort()</code> function,<a rel="footnote" href="#fn-37" name="fnd-37"><sup>37</sup></a> which <samp><span class="command">gawk</span></samp> uses internally
to perform the sorting.

     <br><dt><code>"@ind_str_desc"</code><dd>Reverse order from the most basic sort.

     <br><dt><code>"@ind_num_desc"</code><dd>Numeric indices ordered from high to low.

     <br><dt><code>"@val_type_desc"</code><dd>Element values, based on type, in descending order.

     <br><dt><code>"@val_str_desc"</code><dd>Element values, treated as strings, ordered from high to low. 
Subarrays, if present, come out first.

     <br><dt><code>"@val_num_desc"</code><dd>Element values, treated as numbers, ordered from high to low. 
Subarrays, if present, come out first. 
</dl>

   <p>The array traversal order is determined before the <code>for</code> loop
starts to run. Changing <code>PROCINFO["sorted_in"]</code> in the loop body
will not affect the loop.

   <p>For example:

<pre class="example">     $ <kbd>gawk 'BEGIN {</kbd>
     &gt; <kbd>   a[4] = 4</kbd>
     &gt; <kbd>   a[3] = 3</kbd>
     &gt; <kbd>   for (i in a)</kbd>
     &gt; <kbd>       print i, a[i]</kbd>
     &gt; <kbd>}'</kbd>
     -| 4 4
     -| 3 3
     $ <kbd>gawk 'BEGIN {</kbd>
     &gt; <kbd>   PROCINFO["sorted_in"] = "@ind_str_asc"</kbd>
     &gt; <kbd>   a[4] = 4</kbd>
     &gt; <kbd>   a[3] = 3</kbd>
     &gt; <kbd>   for (i in a)</kbd>
     &gt; <kbd>       print i, a[i]</kbd>
     &gt; <kbd>}'</kbd>
     -| 3 3
     -| 4 4
</pre>
   <p>When sorting an array by element values, if a value happens to be
a subarray then it is considered to be greater than any string or
numeric value, regardless of what the subarray itself contains,
and all subarrays are treated as being equal to each other.  Their
order relative to each other is determined by their index strings.

   <p>Here are some additional things to bear in mind about sorted
array traversal.

     <ul>
<li>The value of <code>PROCINFO["sorted_in"]</code> is global. That is, it affects
all array traversal <code>for</code> loops.  If you need to change it within your
own code, you should see if it's defined and save and restore the value:

     <pre class="example">          ...
          if ("sorted_in" in PROCINFO) {
              save_sorted = PROCINFO["sorted_in"]
              PROCINFO["sorted_in"] = "@val_str_desc" # or whatever
          }
          ...
          if (save_sorted)
              PROCINFO["sorted_in"] = save_sorted
</pre>
     <li>As mentioned, the default array traversal order is represented by
<code>"@unsorted"</code>.  You can also get the default behavior by assigning
the null string to <code>PROCINFO["sorted_in"]</code> or by just deleting the
<code>"sorted_in"</code> element from the <code>PROCINFO</code> array with
the <code>delete</code> statement. 
(The <code>delete</code> statement hasn't been described yet; see <a href="#Delete">Delete</a>.) 
</ul>

   <p>In addition, <samp><span class="command">gawk</span></samp> provides built-in functions for
sorting arrays; see <a href="#Array-Sorting-Functions">Array Sorting Functions</a>.

<div class="node">
<a name="Delete"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Array-Basics">Array Basics</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Arrays">Arrays</a>

</div>

<h3 class="section">8.2 The <code>delete</code> Statement</h3>

<p><a name="index-g_t_0040code_007bdelete_007d-statement-1304"></a><a name="index-deleting-elements-in-arrays-1305"></a><a name="index-arrays_002c-elements_002c-deleting-1306"></a><a name="index-elements-in-arrays_002c-deleting-1307"></a>
To remove an individual element of an array, use the <code>delete</code>
statement:

<pre class="example">     delete <var>array</var>[<var>index-expression</var>]
</pre>
   <p>Once an array element has been deleted, any value the element once
had is no longer available. It is as if the element had never
been referred to or been given a value. 
The following is an example of deleting elements in an array:

<pre class="example">     for (i in frequencies)
       delete frequencies[i]
</pre>
   <p class="noindent">This example removes all the elements from the array <code>frequencies</code>. 
Once an element is deleted, a subsequent <code>for</code> statement to scan the array
does not report that element and the <code>in</code> operator to check for
the presence of that element returns zero (i.e., false):

<pre class="example">     delete foo[4]
     if (4 in foo)
         print "This will never be printed"
</pre>
   <p><a name="index-null-strings_002c-array-elements-and-1308"></a>It is important to note that deleting an element is <em>not</em> the
same as assigning it a null value (the empty string, <code>""</code>). 
For example:

<pre class="example">     foo[4] = ""
     if (4 in foo)
       print "This is printed, even though foo[4] is empty"
</pre>
   <p><a name="index-lint-checking_002c-array-elements-1309"></a>It is not an error to delete an element that does not exist. 
However, if <samp><span class="option">--lint</span></samp> is provided on the command line
(see <a href="#Options">Options</a>),
<samp><span class="command">gawk</span></samp> issues a warning message when an element that
is not in the array is deleted.

   <p><a name="index-common-extensions_002c-_0040code_007bdelete_007d-to-delete-entire-arrays-1310"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007bdelete_007d-to-delete-entire-arrays-1311"></a><a name="index-arrays_002c-deleting-entire-contents-1312"></a><a name="index-deleting-entire-arrays-1313"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-array-elements_002c-deleting-1314"></a>All the elements of an array may be deleted with a single statement
by leaving off the subscript in the <code>delete</code> statement,
as follows:

<pre class="example">     delete <var>array</var>
</pre>
   <p>Using this version of the <code>delete</code> statement is about three times
more efficient than the equivalent loop that deletes each element one
at a time.

   <blockquote>
<b>NOTE:</b> For many years,
using <code>delete</code> without a subscript was a <samp><span class="command">gawk</span></samp> extension. 
As of September, 2012, it was accepted for
inclusion into the POSIX standard. See <a href="http://austingroupbugs.net/view.php?id=544">the Austin Group website</a>.  This form of the <code>delete</code> statement is also supported
by Brian Kernighan's <samp><span class="command">awk</span></samp> and <samp><span class="command">mawk</span></samp>, as well as
by a number of other implementations (see <a href="#Other-Versions">Other Versions</a>). 
</blockquote>

   <p><a name="index-portability_002c-deleting-array-elements-1315"></a><a name="index-Brennan_002c-Michael-1316"></a>The following statement provides a portable but nonobvious way to clear
out an array:<a rel="footnote" href="#fn-38" name="fnd-38"><sup>38</sup></a>

<pre class="example">     split("", array)
</pre>
   <p><a name="index-g_t_0040code_007bsplit_0028_0029_007d-function_002c-array-elements_0040comma_007b_007d-deleting-1317"></a>The <code>split()</code> function
(see <a href="#String-Functions">String Functions</a>)
clears out the target array first. This call asks it to split
apart the null string. Because there is no data to split out, the
function simply clears the array and then returns.

   <blockquote>
<b>CAUTION:</b> Deleting an array does not change its type; you cannot
delete an array and then use the array's name as a scalar
(i.e., a regular variable). For example, the following does not work:

<pre class="example">     a[1] = 3
     delete a
     a = 3
</pre>
   </blockquote>

<div class="node">
<a name="Numeric-Array-Subscripts"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Uninitialized-Subscripts">Uninitialized Subscripts</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Delete">Delete</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Arrays">Arrays</a>

</div>

<h3 class="section">8.3 Using Numbers to Subscript Arrays</h3>

<p><a name="index-numbers_002c-as-array-subscripts-1318"></a><a name="index-arrays_002c-subscripts-1319"></a><a name="index-subscripts-in-arrays_002c-numbers-as-1320"></a><a name="index-g_t_0040code_007bCONVFMT_007d-variable_002c-array-subscripts-and-1321"></a>An important aspect to remember about arrays is that <em>array subscripts
are always strings</em>.  When a numeric value is used as a subscript,
it is converted to a string value before being used for subscripting
(see <a href="#Conversion">Conversion</a>). 
This means that the value of the built-in variable <code>CONVFMT</code> can
affect how your program accesses elements of an array.  For example:

<pre class="example">     xyz = 12.153
     data[xyz] = 1
     CONVFMT = "%2.2f"
     if (xyz in data)
         printf "%s is in data\n", xyz
     else
         printf "%s is not in data\n", xyz
</pre>
   <p class="noindent">This prints &lsquo;<samp><span class="samp">12.15 is not in data</span></samp>&rsquo;.  The first statement gives
<code>xyz</code> a numeric value.  Assigning to
<code>data[xyz]</code> subscripts <code>data</code> with the string value <code>"12.153"</code>
(using the default conversion value of <code>CONVFMT</code>, <code>"%.6g"</code>). 
Thus, the array element <code>data["12.153"]</code> is assigned the value one. 
The program then changes
the value of <code>CONVFMT</code>.  The test &lsquo;<samp><span class="samp">(xyz in data)</span></samp>&rsquo; generates a new
string value from <code>xyz</code>&mdash;this time <code>"12.15"</code>&mdash;because the value of
<code>CONVFMT</code> only allows two significant digits.  This test fails,
since <code>"12.15"</code> is different from <code>"12.153"</code>.

   <p><a name="index-converting_002c-during-subscripting-1322"></a>According to the rules for conversions
(see <a href="#Conversion">Conversion</a>), integer
values are always converted to strings as integers, no matter what the
value of <code>CONVFMT</code> may happen to be.  So the usual case of
the following works:

<pre class="example">     for (i = 1; i &lt;= maxsub; i++)
         <i>do something with</i> array[i]
</pre>
   <p>The &ldquo;integer values always convert to strings as integers&rdquo; rule
has an additional consequence for array indexing. 
Octal and hexadecimal constants
(see <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>)
are converted internally into numbers, and their original form
is forgotten. 
This means, for example, that
<code>array[17]</code>,
<code>array[021]</code>,
and
<code>array[0x11]</code>
all refer to the same element!

   <p>As with many things in <samp><span class="command">awk</span></samp>, the majority of the time
things work as one would expect them to.  But it is useful to have a precise
knowledge of the actual rules since they can sometimes have a subtle
effect on your programs.

<div class="node">
<a name="Uninitialized-Subscripts"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Multi_002ddimensional">Multi-dimensional</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Arrays">Arrays</a>

</div>

<h3 class="section">8.4 Using Uninitialized Variables as Subscripts</h3>

<p><a name="index-variables_002c-uninitialized_0040comma_007b_007d-as-array-subscripts-1323"></a><a name="index-uninitialized-variables_002c-as-array-subscripts-1324"></a><a name="index-subscripts-in-arrays_002c-uninitialized-variables-as-1325"></a><a name="index-arrays_002c-subscripts_002c-uninitialized-variables-as-1326"></a>Suppose it's necessary to write a program
to print the input data in reverse order. 
A reasonable attempt to do so (with some test
data) might look like this:

<pre class="example">     $ <kbd>echo 'line 1</kbd>
     &gt; <kbd>line 2</kbd>
     &gt; <kbd>line 3' | awk '{ l[lines] = $0; ++lines }</kbd>
     &gt; <kbd>END {</kbd>
     &gt;     <kbd>for (i = lines-1; i &gt;= 0; --i)</kbd>
     &gt;        <kbd>print l[i]</kbd>
     &gt; <kbd>}'</kbd>
     -| line 3
     -| line 2
</pre>
   <p>Unfortunately, the very first line of input data did not come out in the
output!

   <p>Upon first glance, we would think that this program should have worked. 
The variable <code>lines</code>
is uninitialized, and uninitialized variables have the numeric value zero. 
So, <samp><span class="command">awk</span></samp> should have printed the value of <code>l[0]</code>.

   <p>The issue here is that subscripts for <samp><span class="command">awk</span></samp> arrays are <em>always</em>
strings. Uninitialized variables, when used as strings, have the
value <code>""</code>, not zero.  Thus, &lsquo;<samp><span class="samp">line 1</span></samp>&rsquo; ends up stored in
<code>l[""]</code>. 
The following version of the program works correctly:

<pre class="example">     { l[lines++] = $0 }
     END {
         for (i = lines - 1; i &gt;= 0; --i)
            print l[i]
     }
</pre>
   <p>Here, the &lsquo;<samp><span class="samp">++</span></samp>&rsquo; forces <code>lines</code> to be numeric, thus making
the &ldquo;old value&rdquo; numeric zero. This is then converted to <code>"0"</code>
as the array subscript.

   <p><a name="index-null-strings_002c-as-array-subscripts-1327"></a><a name="index-dark-corner_002c-array-subscripts-1328"></a><a name="index-lint-checking_002c-array-subscripts-1329"></a>Even though it is somewhat unusual, the null string
(<code>""</code>) is a valid array subscript. 
(d.c.) 
<samp><span class="command">gawk</span></samp> warns about the use of the null string as a subscript
if <samp><span class="option">--lint</span></samp> is provided
on the command line (see <a href="#Options">Options</a>).

<div class="node">
<a name="Multi-dimensional"></a>
<a name="Multi_002ddimensional"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Arrays-of-Arrays">Arrays of Arrays</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Uninitialized-Subscripts">Uninitialized Subscripts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Arrays">Arrays</a>

</div>

<h3 class="section">8.5 Multidimensional Arrays</h3>

<ul class="menu">
<li><a accesskey="1" href="#Multi_002dscanning">Multi-scanning</a>:               Scanning multidimensional arrays. 
</ul>

<p><a name="index-subscripts-in-arrays_002c-multidimensional-1330"></a><a name="index-arrays_002c-multidimensional-1331"></a>A multidimensional array is an array in which an element is identified
by a sequence of indices instead of a single index.  For example, a
two-dimensional array requires two indices.  The usual way (in most
languages, including <samp><span class="command">awk</span></samp>) to refer to an element of a
two-dimensional array named <code>grid</code> is with
<code>grid[</code><var>x</var><code>,</code><var>y</var><code>]</code>.

   <p><a name="index-g_t_0040code_007bSUBSEP_007d-variable_002c-multidimensional-arrays-1332"></a>Multidimensional arrays are supported in <samp><span class="command">awk</span></samp> through
concatenation of indices into one string. 
<samp><span class="command">awk</span></samp> converts the indices into strings
(see <a href="#Conversion">Conversion</a>) and
concatenates them together, with a separator between them.  This creates
a single string that describes the values of the separate indices.  The
combined string is used as a single index into an ordinary,
one-dimensional array.  The separator used is the value of the built-in
variable <code>SUBSEP</code>.

   <p>For example, suppose we evaluate the expression &lsquo;<samp><span class="samp">foo[5,12] = "value"</span></samp>&rsquo;
when the value of <code>SUBSEP</code> is <code>"@"</code>.  The numbers 5 and 12 are
converted to strings and
concatenated with an &lsquo;<samp><span class="samp">@</span></samp>&rsquo; between them, yielding <code>"5@12"</code>; thus,
the array element <code>foo["5@12"]</code> is set to <code>"value"</code>.

   <p>Once the element's value is stored, <samp><span class="command">awk</span></samp> has no record of whether
it was stored with a single index or a sequence of indices.  The two
expressions &lsquo;<samp><span class="samp">foo[5,12]</span></samp>&rsquo; and &lsquo;<samp><span class="samp">foo[5&nbsp;SUBSEP&nbsp;12]</span></samp>&rsquo;<!-- /@w --> are always
equivalent.

   <p>The default value of <code>SUBSEP</code> is the string <code>"\034"</code>,
which contains a nonprinting character that is unlikely to appear in an
<samp><span class="command">awk</span></samp> program or in most input data. 
The usefulness of choosing an unlikely character comes from the fact
that index values that contain a string matching <code>SUBSEP</code> can lead to
combined strings that are ambiguous.  Suppose that <code>SUBSEP</code> is
<code>"@"</code>; then &lsquo;<samp><span class="samp">foo["a@b",&nbsp;"c"]</span></samp>&rsquo;<!-- /@w --> and &lsquo;<samp><span class="samp">foo["a",&nbsp;"b@c"]</span></samp>&rsquo;<!-- /@w --> are indistinguishable because both are actually
stored as &lsquo;<samp><span class="samp">foo["a@b@c"]</span></samp>&rsquo;.

   <p>To test whether a particular index sequence exists in a
multidimensional array, use the same operator (<code>in</code>) that is
used for single dimensional arrays.  Write the whole sequence of indices
in parentheses, separated by commas, as the left operand:

<pre class="example">     (<var>subscript1</var>, <var>subscript2</var>, ...) in <var>array</var>
</pre>
   <p>The following example treats its input as a two-dimensional array of
fields; it rotates this array 90 degrees clockwise and prints the
result.  It assumes that all lines have the same number of
elements:

<pre class="example">     {
          if (max_nf &lt; NF)
               max_nf = NF
          max_nr = NR
          for (x = 1; x &lt;= NF; x++)
               vector[x, NR] = $x
     }
     
     END {
          for (x = 1; x &lt;= max_nf; x++) {
               for (y = max_nr; y &gt;= 1; --y)
                    printf("%s ", vector[x, y])
               printf("\n")
          }
     }
</pre>
   <p class="noindent">When given the input:

<pre class="example">     1 2 3 4 5 6
     2 3 4 5 6 1
     3 4 5 6 1 2
     4 5 6 1 2 3
</pre>
   <p class="noindent">the program produces the following output:

<pre class="example">     4 3 2 1
     5 4 3 2
     6 5 4 3
     1 6 5 4
     2 1 6 5
     3 2 1 6
</pre>
   <div class="node">
<a name="Multi-scanning"></a>
<a name="Multi_002dscanning"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#Multi_002ddimensional">Multi-dimensional</a>

</div>

<h4 class="subsection">8.5.1 Scanning Multidimensional Arrays</h4>

<p>There is no special <code>for</code> statement for scanning a
&ldquo;multidimensional&rdquo; array. There cannot be one, because, in truth,
<samp><span class="command">awk</span></samp> does not have
multidimensional arrays or elements&mdash;there is only a
multidimensional <em>way of accessing</em> an array.

   <p><a name="index-subscripts-in-arrays_002c-multidimensional_002c-scanning-1333"></a><a name="index-arrays_002c-multidimensional_002c-scanning-1334"></a>However, if your program has an array that is always accessed as
multidimensional, you can get the effect of scanning it by combining
the scanning <code>for</code> statement
(see <a href="#Scanning-an-Array">Scanning an Array</a>) with the
built-in <code>split()</code> function
(see <a href="#String-Functions">String Functions</a>). 
It works in the following manner:

<pre class="example">     for (combined in array) {
         split(combined, separate, SUBSEP)
         ...
     }
</pre>
   <p class="noindent">This sets the variable <code>combined</code> to
each concatenated combined index in the array, and splits it
into the individual indices by breaking it apart where the value of
<code>SUBSEP</code> appears.  The individual indices then become the elements of
the array <code>separate</code>.

   <p>Thus, if a value is previously stored in <code>array[1, "foo"]</code>, then
an element with index <code>"1\034foo"</code> exists in <code>array</code>.  (Recall
that the default value of <code>SUBSEP</code> is the character with code 034.) 
Sooner or later, the <code>for</code> statement finds that index and does an
iteration with the variable <code>combined</code> set to <code>"1\034foo"</code>. 
Then the <code>split()</code> function is called as follows:

<pre class="example">     split("1\034foo", separate, "\034")
</pre>
   <p class="noindent">The result is to set <code>separate[1]</code> to <code>"1"</code> and
<code>separate[2]</code> to <code>"foo"</code>.  Presto! The original sequence of
separate indices is recovered.

<div class="node">
<a name="Arrays-of-Arrays"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Multi_002ddimensional">Multi-dimensional</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Arrays">Arrays</a>

</div>

<h3 class="section">8.6 Arrays of Arrays</h3>

<p><samp><span class="command">gawk</span></samp> goes beyond standard <samp><span class="command">awk</span></samp>'s multidimensional
array access and provides true arrays of
arrays. Elements of a subarray are referred to by their own indices
enclosed in square brackets, just like the elements of the main array. 
For example, the following creates a two-element subarray at index &lsquo;<samp><span class="samp">1</span></samp>&rsquo;
of the main array <code>a</code>:

<pre class="example">     a[1][1] = 1
     a[1][2] = 2
</pre>
   <p>This simulates a true two-dimensional array. Each subarray element can
contain another subarray as a value, which in turn can hold other arrays
as well. In this way, you can create arrays of three or more dimensions. 
The indices can be any <samp><span class="command">awk</span></samp> expression, including scalars
separated by commas (that is, a regular <samp><span class="command">awk</span></samp> simulated
multidimensional subscript). So the following is valid in
<samp><span class="command">gawk</span></samp>:

<pre class="example">     a[1][3][1, "name"] = "barney"
</pre>
   <p>Each subarray and the main array can be of different length. In fact, the
elements of an array or its subarray do not all have to have the same
type. This means that the main array and any of its subarrays can be
non-rectangular, or jagged in structure. One can assign a scalar value to
the index &lsquo;<samp><span class="samp">4</span></samp>&rsquo; of the main array <code>a</code>:

<pre class="example">     a[4] = "An element in a jagged array"
</pre>
   <p>The terms <dfn>dimension</dfn>, <dfn>row</dfn> and <dfn>column</dfn> are
meaningless when applied
to such an array, but we will use &ldquo;dimension&rdquo; henceforth to imply the
maximum number of indices needed to refer to an existing element. The
type of any element that has already been assigned cannot be changed
by assigning a value of a different type. You have to first delete the
current element, which effectively makes <samp><span class="command">gawk</span></samp> forget about
the element at that index:

<pre class="example">     delete a[4]
     a[4][5][6][7] = "An element in a four-dimensional array"
</pre>
   <p class="noindent">This removes the scalar value from index &lsquo;<samp><span class="samp">4</span></samp>&rsquo; and then inserts a
subarray of subarray of subarray containing a scalar. You can also
delete an entire subarray or subarray of subarrays:

<pre class="example">     delete a[4][5]
     a[4][5] = "An element in subarray a[4]"
</pre>
   <p>But recall that you can not delete the main array <code>a</code> and then use it
as a scalar.

   <p>The built-in functions which take array arguments can also be used
with subarrays. For example, the following code fragment uses <code>length()</code>
(see <a href="#String-Functions">String Functions</a>)
to determine the number of elements in the main array <code>a</code> and
its subarrays:

<pre class="example">     print length(a), length(a[1]), length(a[1][3])
</pre>
   <p class="noindent">This results in the following output for our main array <code>a</code>:

<pre class="example">     2, 3, 1
</pre>
   <p class="noindent">The &lsquo;<samp><var>subscript</var><span class="samp"> in </span><var>array</var></samp>&rsquo; expression
(see <a href="#Reference-to-Elements">Reference to Elements</a>) works similarly for both
regular <samp><span class="command">awk</span></samp>-style
arrays and arrays of arrays. For example, the tests &lsquo;<samp><span class="samp">1 in a</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">3 in a[1]</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">(1, "name") in a[1][3]</span></samp>&rsquo; all evaluate to
one (true) for our array <code>a</code>.

   <p>The &lsquo;<samp><span class="samp">for (item in array)</span></samp>&rsquo; statement (see <a href="#Scanning-an-Array">Scanning an Array</a>)
can be nested to scan all the
elements of an array of arrays if it is rectangular in structure. In order
to print the contents (scalar values) of a two-dimensional array of arrays
(i.e., in which each first-level element is itself an
array, not necessarily of the same length)
you could use the following code:

<pre class="example">     for (i in array)
         for (j in array[i])
             print array[i][j]
</pre>
   <p>The <code>isarray()</code> function (see <a href="#Type-Functions">Type Functions</a>)
lets you test if an array element is itself an array:

<pre class="example">     for (i in array) {
         if (isarray(array[i]) {
             for (j in array[i]) {
                 print array[i][j]
             }
         }
     }
</pre>
   <p>If the structure of a jagged array of arrays is known in advance,
you can often devise workarounds using control statements. For example,
the following code prints the elements of our main array <code>a</code>:

<pre class="example">     for (i in a) {
         for (j in a[i]) {
             if (j == 3) {
                 for (k in a[i][j])
                     print a[i][j][k]
             } else
                 print a[i][j]
         }
     }
</pre>
   <p class="noindent">See <a href="#Walking-Arrays">Walking Arrays</a>, for a user-defined function that will &ldquo;walk&rdquo; an
arbitrarily-dimensioned array of arrays.

   <p>Recall that a reference to an uninitialized array element yields a value
of <code>""</code>, the null string. This has one important implication when you
intend to use a subarray as an argument to a function, as illustrated by
the following example:

<pre class="example">     $ <kbd>gawk 'BEGIN { split("a b c d", b[1]); print b[1][1] }'</kbd>
     error--&gt; gawk: cmd. line:1: fatal: split: second argument is not an array
</pre>
   <p>The way to work around this is to first force <code>b[1]</code> to be an array by
creating an arbitrary index:

<pre class="example">     $ <kbd>gawk 'BEGIN { b[1][1] = ""; split("a b c d", b[1]); print b[1][1] }'</kbd>
     -| a
</pre>
   <!-- ENDOFRANGE arrs -->
<div class="node">
<a name="Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Internationalization">Internationalization</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Arrays">Arrays</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">9 Functions</h2>

<!-- STARTOFRANGE funcbi -->
<p><a name="index-functions_002c-built_002din-1335"></a><!-- STARTOFRANGE bifunc -->
<a name="index-built_002din-functions-1336"></a>This chapter describes <samp><span class="command">awk</span></samp>'s built-in functions,
which fall into three categories: numeric, string, and I/O. 
<samp><span class="command">gawk</span></samp> provides additional groups of functions
to work with values that represent time, do
bit manipulation, sort arrays, and internationalize and localize programs.

   <p>Besides the built-in functions, <samp><span class="command">awk</span></samp> has provisions for
writing new functions that the rest of a program can use. 
The second half of this chapter describes these
<dfn>user-defined</dfn> functions.

<ul class="menu">
<li><a accesskey="1" href="#Built_002din">Built-in</a>:                     Summarizes the built-in functions. 
<li><a accesskey="2" href="#User_002ddefined">User-defined</a>:                 Describes User-defined functions in detail. 
<li><a accesskey="3" href="#Indirect-Calls">Indirect Calls</a>:               Choosing the function to call at runtime. 
</ul>

<div class="node">
<a name="Built-in"></a>
<a name="Built_002din"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#User_002ddefined">User-defined</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>

</div>

<h3 class="section">9.1 Built-in Functions</h3>

<p><dfn>Built-in</dfn> functions are always available for
your <samp><span class="command">awk</span></samp> program to call.  This section defines all
the built-in
functions in <samp><span class="command">awk</span></samp>; some of these are mentioned in other sections
but are summarized here for your convenience.

<ul class="menu">
<li><a accesskey="1" href="#Calling-Built_002din">Calling Built-in</a>:             How to call built-in functions. 
<li><a accesskey="2" href="#Numeric-Functions">Numeric Functions</a>:            Functions that work with numbers, including
                                <code>int()</code>, <code>sin()</code> and <code>rand()</code>. 
<li><a accesskey="3" href="#String-Functions">String Functions</a>:             Functions for string manipulation, such as
                                <code>split()</code>, <code>match()</code> and
                                <code>sprintf()</code>. 
<li><a accesskey="4" href="#I_002fO-Functions">I/O Functions</a>:                Functions for files and shell commands. 
<li><a accesskey="5" href="#Time-Functions">Time Functions</a>:               Functions for dealing with timestamps. 
<li><a accesskey="6" href="#Bitwise-Functions">Bitwise Functions</a>:            Functions for bitwise operations. 
<li><a accesskey="7" href="#Type-Functions">Type Functions</a>:               Functions for type information. 
<li><a accesskey="8" href="#I18N-Functions">I18N Functions</a>:               Functions for string translation. 
</ul>

<div class="node">
<a name="Calling-Built-in"></a>
<a name="Calling-Built_002din"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Numeric-Functions">Numeric Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din">Built-in</a>

</div>

<h4 class="subsection">9.1.1 Calling Built-in Functions</h4>

<p>To call one of <samp><span class="command">awk</span></samp>'s built-in functions, write the name of
the function followed
by arguments in parentheses.  For example, &lsquo;<samp><span class="samp">atan2(y + z, 1)</span></samp>&rsquo;
is a call to the function <code>atan2()</code> and has two arguments.

   <p><a name="index-programming-conventions_002c-functions_002c-calling-1337"></a><a name="index-whitespace_002c-functions_0040comma_007b_007d-calling-1338"></a>Whitespace is ignored between the built-in function name and the
open parenthesis, but nonetheless it is good practice to avoid using whitespace
there.  User-defined functions do not permit whitespace in this way, and
it is easier to avoid mistakes by following a simple
convention that always works&mdash;no whitespace after a function name.

   <p><a name="index-troubleshooting_002c-_0040command_007bgawk_007d_002c-fatal-errors_0040comma_007b_007d-function-arguments-1339"></a><a name="index-g_t_0040command_007bgawk_007d_002c-function-arguments-and-1340"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-function-arguments-_0028_0040command_007bgawk_007d_0029-1341"></a>Each built-in function accepts a certain number of arguments. 
In some cases, arguments can be omitted. The defaults for omitted
arguments vary from function to function and are described under the
individual functions.  In some <samp><span class="command">awk</span></samp> implementations, extra
arguments given to built-in functions are ignored.  However, in <samp><span class="command">gawk</span></samp>,
it is a fatal error to give extra arguments to a built-in function.

   <p>When a function is called, expressions that create the function's actual
parameters are evaluated completely before the call is performed. 
For example, in the following code fragment:

<pre class="example">     i = 4
     j = sqrt(i++)
</pre>
   <p><a name="index-evaluation-order_002c-functions-1342"></a><a name="index-functions_002c-built_002din_002c-evaluation-order-1343"></a><a name="index-built_002din-functions_002c-evaluation-order-1344"></a>the variable <code>i</code> is incremented to the value five before <code>sqrt()</code>
is called with a value of four for its actual parameter. 
The order of evaluation of the expressions used for the function's
parameters is undefined.  Thus, avoid writing programs that
assume that parameters are evaluated from left to right or from
right to left.  For example:

<pre class="example">     i = 5
     j = atan2(i++, i *= 2)
</pre>
   <p>If the order of evaluation is left to right, then <code>i</code> first becomes
6, and then 12, and <code>atan2()</code> is called with the two arguments 6
and 12.  But if the order of evaluation is right to left, <code>i</code>
first becomes 10, then 11, and <code>atan2()</code> is called with the
two arguments 11 and 10.

<div class="node">
<a name="Numeric-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#String-Functions">String Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Calling-Built_002din">Calling Built-in</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din">Built-in</a>

</div>

<h4 class="subsection">9.1.2 Numeric Functions</h4>

<p>The following list describes all of
the built-in functions that work with numbers. 
Optional parameters are enclosed in square brackets&nbsp;([&nbsp;]):<!-- /@w -->

     <dl>
<dt><code>atan2(</code><var>y</var><code>, </code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007batan2_0028_0029_007d-function-1345"></a>Return the arctangent of <var>y</var><code> / </code><var>x</var> in radians. 
You can use &lsquo;<samp><span class="samp">pi = atan2(0, -1)</span></samp>&rsquo; to retrieve the value of
pi.

     <br><dt><code>cos(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007bcos_0028_0029_007d-function-1346"></a>Return the cosine of <var>x</var>, with <var>x</var> in radians.

     <br><dt><code>exp(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007bexp_0028_0029_007d-function-1347"></a>Return the exponential of <var>x</var> (<code>e ^ </code><var>x</var>) or report
an error if <var>x</var> is out of range.  The range of values <var>x</var> can have
depends on your machine's floating-point representation.

     <br><dt><code>int(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007bint_0028_0029_007d-function-1348"></a>Return the nearest integer to <var>x</var>, located between <var>x</var> and zero and
truncated toward zero.

     <p>For example, <code>int(3)</code> is 3, <code>int(3.9)</code> is 3, <code>int(-3.9)</code>
is &minus;3, and <code>int(-3)</code> is &minus;3 as well.

     <br><dt><code>log(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007blog_0028_0029_007d-function-1349"></a>Return the natural logarithm of <var>x</var>, if <var>x</var> is positive;
otherwise, report an error.

     <br><dt><code>rand()</code><dd><a name="index-g_t_0040code_007brand_0028_0029_007d-function-1350"></a><a name="index-random-numbers_002c-_0040code_007brand_0028_0029_007d_002f_0040code_007bsrand_0028_0029_007d-functions-1351"></a>Return a random number.  The values of <code>rand()</code> are
uniformly distributed between zero and one. 
The value could be zero but is never one.<a rel="footnote" href="#fn-39" name="fnd-39"><sup>39</sup></a>

     <p>Often random integers are needed instead.  Following is a user-defined function
that can be used to obtain a random non-negative integer less than <var>n</var>:

     <pre class="example">          function randint(n) {
               return int(n * rand())
          }
</pre>
     <p class="noindent">The multiplication produces a random number greater than zero and less
than <code>n</code>.  Using <code>int()</code>, this result is made into
an integer between zero and <code>n</code> &minus; 1, inclusive.

     <p>The following example uses a similar function to produce random integers
between one and <var>n</var>.  This program prints a new random number for
each input record:

     <pre class="example">          # Function to roll a simulated die.
          function roll(n) { return 1 + int(rand() * n) }
          
          # Roll 3 six-sided dice and
          # print total number of points.
          {
                printf("%d points\n",
                       roll(6)+roll(6)+roll(6))
          }
</pre>
     <p><a name="index-numbers_002c-random-1352"></a><a name="index-random-numbers_002c-seed-of-1353"></a><blockquote>
<b>CAUTION:</b> In most <samp><span class="command">awk</span></samp> implementations, including <samp><span class="command">gawk</span></samp>,
<code>rand()</code> starts generating numbers from the same
starting number, or <dfn>seed</dfn>, each time you run <samp><span class="command">awk</span></samp>.<a rel="footnote" href="#fn-40" name="fnd-40"><sup>40</sup></a>  Thus,
a program generates the same results each time you run it. 
The numbers are random within one <samp><span class="command">awk</span></samp> run but predictable
from run to run.  This is convenient for debugging, but if you want
a program to do different things each time it is used, you must change
the seed to a value that is different in each run.  To do this,
use <code>srand()</code>. 
</blockquote>

     <br><dt><code>sin(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007bsin_0028_0029_007d-function-1354"></a>Return the sine of <var>x</var>, with <var>x</var> in radians.

     <br><dt><code>sqrt(</code><var>x</var><code>)</code><dd><a name="index-g_t_0040code_007bsqrt_0028_0029_007d-function-1355"></a>Return the positive square root of <var>x</var>. 
<samp><span class="command">gawk</span></samp> prints a warning message
if <var>x</var> is negative.  Thus, <code>sqrt(4)</code> is 2.

     <br><dt><code>srand(</code><span class="roman">[</span><var>x</var><span class="roman">]</span><code>)</code><dd><a name="index-g_t_0040code_007bsrand_0028_0029_007d-function-1356"></a>Set the starting point, or seed,
for generating random numbers to the value <var>x</var>.

     <p>Each seed value leads to a particular sequence of random
numbers.<a rel="footnote" href="#fn-41" name="fnd-41"><sup>41</sup></a>
Thus, if the seed is set to the same value a second time,
the same sequence of random numbers is produced again.

     <blockquote>
<b>CAUTION:</b> Different <samp><span class="command">awk</span></samp> implementations use different random-number
generators internally.  Don't expect the same <samp><span class="command">awk</span></samp> program
to produce the same series of random numbers when executed by
different versions of <samp><span class="command">awk</span></samp>. 
</blockquote>

     <p>If the argument <var>x</var> is omitted, as in &lsquo;<samp><span class="samp">srand()</span></samp>&rsquo;, then the current
date and time of day are used for a seed.  This is the way to get random
numbers that are truly unpredictable.

     <p>The return value of <code>srand()</code> is the previous seed.  This makes it
easy to keep track of the seeds in case you need to consistently reproduce
sequences of random numbers. 
</dl>

<div class="node">
<a name="String-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#I_002fO-Functions">I/O Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Numeric-Functions">Numeric Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din">Built-in</a>

</div>

<h4 class="subsection">9.1.3 String-Manipulation Functions</h4>

<p>The functions in this section look at or change the text of one or more
strings. 
<code>gawk</code> understands locales (see <a href="#Locales">Locales</a>), and does all string processing in terms of
<em>characters</em>, not <em>bytes</em>.  This distinction is particularly important
to understand for locales where one character
may be represented by multiple bytes.  Thus, for example, <code>length()</code>
returns the number of characters in a string, and not the number of bytes
used to represent those characters, Similarly, <code>index()</code> works with
character indices, and not byte indices.

   <p>In the following list, optional parameters are enclosed in square brackets&nbsp;([&nbsp;]).<!-- /@w -->
Several functions perform string substitution; the full discussion is
provided in the description of the <code>sub()</code> function, which comes
towards the end since the list is presented in alphabetic order. 
Those functions that are specific to <samp><span class="command">gawk</span></samp> are marked with a
pound sign&nbsp;(&lsquo;<samp><span class="samp">#</span></samp>&rsquo;):<!-- /@w -->

<ul class="menu">
<li><a accesskey="1" href="#Gory-Details">Gory Details</a>:                 More than you want to know about &lsquo;<samp><span class="samp">\</span></samp>&rsquo; and
                                &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; with <code>sub()</code>, <code>gsub()</code>, and
                                <code>gensub()</code>. 
</ul>

     <dl>
<dt><code>asort(</code><var>source</var> <span class="roman">[</span><code>, </code><var>dest</var> <span class="roman">[</span><code>, </code><var>how</var>  <span class="roman">]</span> <span class="roman">]</span><code>) #</code><dd><a name="index-arrays_002c-elements_002c-retrieving-number-of-1357"></a><a name="index-g_t_0040code_007basort_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1358"></a><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-in-1359"></a><a name="index-g_t_0040code_007bIGNORECASE_007d-variable-1360"></a>Return the number of elements in the array <var>source</var>. 
<samp><span class="command">gawk</span></samp> sorts the contents of <var>source</var>
and replaces the indices
of the sorted values of <var>source</var> with sequential
integers starting with one.  If the optional array <var>dest</var> is specified,
then <var>source</var> is duplicated into <var>dest</var>.  <var>dest</var> is then
sorted, leaving the indices of <var>source</var> unchanged.  The optional third
argument <var>how</var> is a string which controls the rule for comparing values,
and the sort direction.  A single space is required between the
comparison mode, &lsquo;<samp><span class="samp">string</span></samp>&rsquo; or &lsquo;<samp><span class="samp">number</span></samp>&rsquo;, and the direction specification,
&lsquo;<samp><span class="samp">ascending</span></samp>&rsquo; or &lsquo;<samp><span class="samp">descending</span></samp>&rsquo;.  You can omit direction and/or mode
in which case it will default to &lsquo;<samp><span class="samp">ascending</span></samp>&rsquo; and &lsquo;<samp><span class="samp">string</span></samp>&rsquo;, respectively. 
An empty string "" is the same as the default <code>"ascending string"</code>
for the value of <var>how</var>.  If the &lsquo;<samp><span class="samp">source</span></samp>&rsquo; array contains subarrays as values,
they will come out last(first) in the &lsquo;<samp><span class="samp">dest</span></samp>&rsquo; array for &lsquo;<samp><span class="samp">ascending</span></samp>&rsquo;(&lsquo;<samp><span class="samp">descending</span></samp>&rsquo;)
order specification.  The value of <code>IGNORECASE</code> affects the sorting. 
The third argument can also be a user-defined function name in which case
the value returned by the function is used to order the array elements
before constructing the result array. 
See <a href="#Array-Sorting-Functions">Array Sorting Functions</a>, for more information.

     <p>For example, if the contents of <code>a</code> are as follows:

     <pre class="example">          a["last"] = "de"
          a["first"] = "sac"
          a["middle"] = "cul"
</pre>
     <p class="noindent">A call to <code>asort()</code>:

     <pre class="example">          asort(a)
</pre>
     <p class="noindent">results in the following contents of <code>a</code>:

     <pre class="example">          a[1] = "cul"
          a[2] = "de"
          a[3] = "sac"
</pre>
     <p>In order to reverse the direction of the sorted results in the above example,
<code>asort()</code> can be called with three arguments as follows:

     <pre class="example">          asort(a, a, "descending")
</pre>
     <p>The <code>asort()</code> function is described in more detail in
<a href="#Array-Sorting-Functions">Array Sorting Functions</a>. 
<code>asort()</code> is a <samp><span class="command">gawk</span></samp> extension; it is not available
in compatibility mode (see <a href="#Options">Options</a>).

     <br><dt><code>asorti(</code><var>source</var> <span class="roman">[</span><code>, </code><var>dest</var> <span class="roman">[</span><code>, </code><var>how</var>  <span class="roman">]</span> <span class="roman">]</span><code>) #</code><dd><a name="index-g_t_0040code_007basorti_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1361"></a>Return the number of elements in the array <var>source</var>. 
It works similarly to <code>asort()</code>, however, the <em>indices</em>
are sorted, instead of the values. (Here too,
<code>IGNORECASE</code> affects the sorting.)

     <p>The <code>asorti()</code> function is described in more detail in
<a href="#Array-Sorting-Functions">Array Sorting Functions</a>. 
<code>asorti()</code> is a <samp><span class="command">gawk</span></samp> extension; it is not available
in compatibility mode (see <a href="#Options">Options</a>).

     <br><dt><code>gensub(</code><var>regexp</var><code>, </code><var>replacement</var><code>, </code><var>how</var> <span class="roman">[</span><code>, </code><var>target</var><span class="roman">]</span><code>) #</code><dd><a name="index-g_t_0040code_007bgensub_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1362"></a>Search the target string <var>target</var> for matches of the regular
expression <var>regexp</var>.  If <var>how</var> is a string beginning with
&lsquo;<samp><span class="samp">g</span></samp>&rsquo; or &lsquo;<samp><span class="samp">G</span></samp>&rsquo; (short for &ldquo;global&rdquo;), then replace all matches of <var>regexp</var> with
<var>replacement</var>.  Otherwise, <var>how</var> is treated as a number indicating
which match of <var>regexp</var> to replace. If no <var>target</var> is supplied,
use <code>$0</code>.  It returns the modified string as the result
of the function and the original target string is <em>not</em> changed.

     <p><code>gensub()</code> is a general substitution function.  It's purpose is
to provide more features than the standard <code>sub()</code> and <code>gsub()</code>
functions.

     <p><code>gensub()</code> provides an additional feature that is not available
in <code>sub()</code> or <code>gsub()</code>: the ability to specify components of a
regexp in the replacement text.  This is done by using parentheses in
the regexp to mark the components and then specifying &lsquo;<samp><span class="samp">\</span><var>N</var></samp>&rsquo;
in the replacement text, where <var>N</var> is a digit from 1 to 9. 
For example:

     <pre class="example">          $ <kbd>gawk '</kbd>
          &gt; <kbd>BEGIN {</kbd>
          &gt;      <kbd>a = "abc def"</kbd>
          &gt;      <kbd>b = gensub(/(.+) (.+)/, "\\2 \\1", "g", a)</kbd>
          &gt;      <kbd>print b</kbd>
          &gt; <kbd>}'</kbd>
          -| def abc
</pre>
     <p class="noindent">As with <code>sub()</code>, you must type two backslashes in order
to get one into the string. 
In the replacement text, the sequence &lsquo;<samp><span class="samp">\0</span></samp>&rsquo; represents the entire
matched text, as does the character &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;.

     <p>The following example shows how you can use the third argument to control
which match of the regexp should be changed:

     <pre class="example">          $ <kbd>echo a b c a b c |</kbd>
          &gt; <kbd>gawk '{ print gensub(/a/, "AA", 2) }'</kbd>
          -| a b c AA b c
</pre>
     <p>In this case, <code>$0</code> is the default target string. 
<code>gensub()</code> returns the new string as its result, which is
passed directly to <code>print</code> for printing.

     <!-- @cindex automatic warnings -->
     <!-- @cindex warnings, automatic -->
     <p>If the <var>how</var> argument is a string that does not begin with &lsquo;<samp><span class="samp">g</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">G</span></samp>&rsquo;, or if it is a number that is less than or equal to zero, only one
substitution is performed.  If <var>how</var> is zero, <samp><span class="command">gawk</span></samp> issues
a warning message.

     <p>If <var>regexp</var> does not match <var>target</var>, <code>gensub()</code>'s return value
is the original unchanged value of <var>target</var>.

     <p><code>gensub()</code> is a <samp><span class="command">gawk</span></samp> extension; it is not available
in compatibility mode (see <a href="#Options">Options</a>).

     <br><dt><code>gsub(</code><var>regexp</var><code>, </code><var>replacement</var> <span class="roman">[</span><code>, </code><var>target</var><span class="roman">]</span><code>)</code><dd><a name="index-g_t_0040code_007bgsub_0028_0029_007d-function-1363"></a>Search <var>target</var> for
<em>all</em> of the longest, leftmost, <em>nonoverlapping</em> matching
substrings it can find and replace them with <var>replacement</var>. 
The &lsquo;<samp><span class="samp">g</span></samp>&rsquo; in <code>gsub()</code> stands for
&ldquo;global,&rdquo; which means replace everywhere.  For example:

     <pre class="example">          { gsub(/Britain/, "United Kingdom"); print }
</pre>
     <p class="noindent">replaces all occurrences of the string &lsquo;<samp><span class="samp">Britain</span></samp>&rsquo; with &lsquo;<samp><span class="samp">United
Kingdom</span></samp>&rsquo; for all input records.

     <p>The <code>gsub()</code> function returns the number of substitutions made.  If
the variable to search and alter (<var>target</var>) is
omitted, then the entire input record (<code>$0</code>) is used. 
As in <code>sub()</code>, the characters &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; and &lsquo;<samp><span class="samp">\</span></samp>&rsquo; are special,
and the third argument must be assignable.

     <br><dt><code>index(</code><var>in</var><code>, </code><var>find</var><code>)</code><dd><a name="index-g_t_0040code_007bindex_0028_0029_007d-function-1364"></a><a name="index-searching-1365"></a>Search the string <var>in</var> for the first occurrence of the string
<var>find</var>, and return the position in characters where that occurrence
begins in the string <var>in</var>.  Consider the following example:

     <pre class="example">          $ <kbd>awk 'BEGIN { print index("peanut", "an") }'</kbd>
          -| 3
</pre>
     <p class="noindent">If <var>find</var> is not found, <code>index()</code> returns zero. 
(Remember that string indices in <samp><span class="command">awk</span></samp> start at one.)

     <br><dt><code>length(</code><span class="roman">[</span><var>string</var><span class="roman">]</span><code>)</code><dd><a name="index-g_t_0040code_007blength_0028_0029_007d-function-1366"></a>Return the number of characters in <var>string</var>.  If
<var>string</var> is a number, the length of the digit string representing
that number is returned.  For example, <code>length("abcde")</code> is five.  By
contrast, <code>length(15 * 35)</code> works out to three. In this example, 15 * 35 =
525, and 525 is then converted to the string <code>"525"</code>, which has
three characters.

     <p>If no argument is supplied, <code>length()</code> returns the length of <code>$0</code>.

     <!-- @cindex historical features -->
     <p><a name="index-portability_002c-_0040code_007blength_0028_0029_007d-function-1367"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-functions-and_002c-_0040code_007blength_0028_0029_007d-1368"></a><blockquote>
<b>NOTE:</b> In older versions of <samp><span class="command">awk</span></samp>, the <code>length()</code> function could
be called
without any parentheses.  Doing so is considered poor practice,
although the 2008 POSIX standard explicitly allows it, to
support historical practice.  For programs to be maximally portable,
always supply the parentheses. 
</blockquote>

     <p><a name="index-dark-corner_002c-_0040code_007blength_0028_0029_007d-function-1369"></a>If <code>length()</code> is called with a variable that has not been used,
<samp><span class="command">gawk</span></samp> forces the variable to be a scalar.  Other
implementations of <samp><span class="command">awk</span></samp> leave the variable without a type. 
(d.c.) 
Consider:

     <pre class="example">          $ <kbd>gawk 'BEGIN { print length(x) ; x[1] = 1 }'</kbd>
          -| 0
          error--&gt; gawk: fatal: attempt to use scalar `x' as array
          
          $ <kbd>nawk 'BEGIN { print length(x) ; x[1] = 1 }'</kbd>
          -| 0
</pre>
     <p class="noindent">If <samp><span class="option">--lint</span></samp> has
been specified on the command line, <samp><span class="command">gawk</span></samp> issues a
warning about this.

     <p><a name="index-common-extensions_002c-_0040code_007blength_0028_0029_007d-applied-to-an-array-1370"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007blength_0028_0029_007d-applied-to-an-array-1371"></a><a name="index-differences-between-_0040command_007bgawk_007d-and-_0040command_007bawk_007d-1372"></a>With <samp><span class="command">gawk</span></samp> and several other <samp><span class="command">awk</span></samp> implementations, when given an
array argument, the <code>length()</code> function returns the number of elements
in the array. (c.e.) 
This is less useful than it might seem at first, as the
array is not guaranteed to be indexed from one to the number of elements
in it. 
If <samp><span class="option">--lint</span></samp> is provided on the command line
(see <a href="#Options">Options</a>),
<samp><span class="command">gawk</span></samp> warns that passing an array argument is not portable. 
If <samp><span class="option">--posix</span></samp> is supplied, using an array argument is a fatal error
(see <a href="#Arrays">Arrays</a>).

     <br><dt><code>match(</code><var>string</var><code>, </code><var>regexp</var> <span class="roman">[</span><code>, </code><var>array</var><span class="roman">]</span><code>)</code><dd><a name="index-g_t_0040code_007bmatch_0028_0029_007d-function-1373"></a>Search <var>string</var> for the
longest, leftmost substring matched by the regular expression,
<var>regexp</var> and return the character position, or <dfn>index</dfn>,
at which that substring begins (one, if it starts at the beginning of
<var>string</var>).  If no match is found, return zero.

     <p>The <var>regexp</var> argument may be either a regexp constant
(<code>/.../</code>) or a string constant (<code>"..."</code>). 
In the latter case, the string is treated as a regexp to be matched. 
See <a href="#Computed-Regexps">Computed Regexps</a>, for a
discussion of the difference between the two forms, and the
implications for writing your program correctly.

     <p>The order of the first two arguments is backwards from most other string
functions that work with regular expressions, such as
<code>sub()</code> and <code>gsub()</code>.  It might help to remember that
for <code>match()</code>, the order is the same as for the &lsquo;<samp><span class="samp">~</span></samp>&rsquo; operator:
&lsquo;<samp><var>string</var><span class="samp"> ~ </span><var>regexp</var></samp>&rsquo;.

     <p><a name="index-g_t_0040code_007bRSTART_007d-variable_002c-_0040code_007bmatch_0028_0029_007d-function-and-1374"></a><a name="index-g_t_0040code_007bRLENGTH_007d-variable_002c-_0040code_007bmatch_0028_0029_007d-function-and-1375"></a><a name="index-g_t_0040code_007bmatch_0028_0029_007d-function_002c-_0040code_007bRSTART_007d_002f_0040code_007bRLENGTH_007d-variables-1376"></a>The <code>match()</code> function sets the built-in variable <code>RSTART</code> to
the index.  It also sets the built-in variable <code>RLENGTH</code> to the
length in characters of the matched substring.  If no match is found,
<code>RSTART</code> is set to zero, and <code>RLENGTH</code> to &minus;1.

     <p>For example:

     <pre class="example">          <!-- file eg/misc/findpat.awk -->
          {
                 if ($1 == "FIND")
                   regex = $2
                 else {
                   where = match($0, regex)
                   if (where != 0)
                     print "Match of", regex, "found at",
                               where, "in", $0
                 }
          }
          <!-- endfile -->
</pre>
     <p class="noindent">This program looks for lines that match the regular expression stored in
the variable <code>regex</code>.  This regular expression can be changed.  If the
first word on a line is &lsquo;<samp><span class="samp">FIND</span></samp>&rsquo;, <code>regex</code> is changed to be the
second word on that line.  Therefore, if given:

     <pre class="example">          <!-- file eg/misc/findpat.data -->
          FIND ru+n
          My program runs
          but not very quickly
          FIND Melvin
          JF+KM
          This line is property of Reality Engineering Co.
          Melvin was here.
          <!-- endfile -->
</pre>
     <p class="noindent"><samp><span class="command">awk</span></samp> prints:

     <pre class="example">          Match of ru+n found at 12 in My program runs
          Match of Melvin found at 1 in Melvin was here.
</pre>
     <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bmatch_0028_0029_007d-function-1377"></a>If <var>array</var> is present, it is cleared, and then the zeroth element
of <var>array</var> is set to the entire portion of <var>string</var>
matched by <var>regexp</var>.  If <var>regexp</var> contains parentheses,
the integer-indexed elements of <var>array</var> are set to contain the
portion of <var>string</var> matching the corresponding parenthesized
subexpression. 
For example:

     <pre class="example">          $ <kbd>echo foooobazbarrrrr |</kbd>
          &gt; <kbd>gawk '{ match($0, /(fo+).+(bar*)/, arr)</kbd>
          &gt;         <kbd>print arr[1], arr[2] }'</kbd>
          -| foooo barrrrr
</pre>
     <p>In addition,
multidimensional subscripts are available providing
the start index and length of each matched subexpression:

     <pre class="example">          $ <kbd>echo foooobazbarrrrr |</kbd>
          &gt; <kbd>gawk '{ match($0, /(fo+).+(bar*)/, arr)</kbd>
          &gt;           <kbd>print arr[1], arr[2]</kbd>
          &gt;           <kbd>print arr[1, "start"], arr[1, "length"]</kbd>
          &gt;           <kbd>print arr[2, "start"], arr[2, "length"]</kbd>
          &gt; <kbd>}'</kbd>
          -| foooo barrrrr
          -| 1 5
          -| 9 7
</pre>
     <p>There may not be subscripts for the start and index for every parenthesized
subexpression, since they may not all have matched text; thus they
should be tested for with the <code>in</code> operator
(see <a href="#Reference-to-Elements">Reference to Elements</a>).

     <p><a name="index-troubleshooting_002c-_0040code_007bmatch_0028_0029_007d-function-1378"></a>The <var>array</var> argument to <code>match()</code> is a
<samp><span class="command">gawk</span></samp> extension.  In compatibility mode
(see <a href="#Options">Options</a>),
using a third argument is a fatal error.

     <br><dt><code>patsplit(</code><var>string</var><code>, </code><var>array</var> <span class="roman">[</span><code>, </code><var>fieldpat</var> <span class="roman">[</span><code>, </code><var>seps</var> <span class="roman">]</span> <span class="roman">]</span><code>) #</code><dd><a name="index-g_t_0040code_007bpatsplit_0028_0029_007d-function-1379"></a>Divide
<var>string</var> into pieces defined by <var>fieldpat</var>
and store the pieces in <var>array</var> and the separator strings in the
<var>seps</var> array.  The first piece is stored in
<var>array</var><code>[1]</code>, the second piece in <var>array</var><code>[2]</code>, and so
forth.  The third argument, <var>fieldpat</var>, is
a regexp describing the fields in <var>string</var> (just as <code>FPAT</code> is
a regexp describing the fields in input records). 
It may be either a regexp constant or a string. 
If <var>fieldpat</var> is omitted, the value of <code>FPAT</code> is used. 
<code>patsplit()</code> returns the number of elements created. 
<var>seps</var><code>[</code><var>i</var><code>]</code> is
the separator string
between <var>array</var><code>[</code><var>i</var><code>]</code> and <var>array</var><code>[</code><var>i</var><code>+1]</code>. 
Any leading separator will be in <var>seps</var><code>[0]</code>.

     <p>The <code>patsplit()</code> function splits strings into pieces in a
manner similar to the way input lines are split into fields using <code>FPAT</code>
(see <a href="#Splitting-By-Content">Splitting By Content</a>.

     <p>Before splitting the string, <code>patsplit()</code> deletes any previously existing
elements in the arrays <var>array</var> and <var>seps</var>.

     <p><a name="index-troubleshooting_002c-_0040code_007bpatsplit_0028_0029_007d-function-1380"></a>The <code>patsplit()</code> function is a
<samp><span class="command">gawk</span></samp> extension.  In compatibility mode
(see <a href="#Options">Options</a>),
it is not available.

     <br><dt><code>split(</code><var>string</var><code>, </code><var>array</var> <span class="roman">[</span><code>, </code><var>fieldsep</var> <span class="roman">[</span><code>, </code><var>seps</var> <span class="roman">]</span> <span class="roman">]</span><code>)</code><dd><a name="index-g_t_0040code_007bsplit_0028_0029_007d-function-1381"></a>Divide <var>string</var> into pieces separated by <var>fieldsep</var>
and store the pieces in <var>array</var> and the separator strings in the
<var>seps</var> array.  The first piece is stored in
<var>array</var><code>[1]</code>, the second piece in <var>array</var><code>[2]</code>, and so
forth.  The string value of the third argument, <var>fieldsep</var>, is
a regexp describing where to split <var>string</var> (much as <code>FS</code> can
be a regexp describing where to split input records;
see <a href="#Regexp-Field-Splitting">Regexp Field Splitting</a>). 
If <var>fieldsep</var> is omitted, the value of <code>FS</code> is used. 
<code>split()</code> returns the number of elements created. 
<var>seps</var> is a <samp><span class="command">gawk</span></samp> extension with <var>seps</var><code>[</code><var>i</var><code>]</code>
being the separator string
between <var>array</var><code>[</code><var>i</var><code>]</code> and <var>array</var><code>[</code><var>i</var><code>+1]</code>. 
If <var>fieldsep</var> is a single
space then any leading whitespace goes into <var>seps</var><code>[0]</code> and
any trailing
whitespace goes into <var>seps</var><code>[</code><var>n</var><code>]</code> where <var>n</var> is the
return value of
<code>split()</code> (that is, the number of elements in <var>array</var>).

     <p>The <code>split()</code> function splits strings into pieces in a
manner similar to the way input lines are split into fields.  For example:

     <pre class="example">          split("cul-de-sac", a, "-", seps)
</pre>
     <p class="noindent"><a name="index-strings_002c-splitting-1382"></a>splits the string &lsquo;<samp><span class="samp">cul-de-sac</span></samp>&rsquo; into three fields using &lsquo;<samp><span class="samp">-</span></samp>&rsquo; as the
separator.  It sets the contents of the array <code>a</code> as follows:

     <pre class="example">          a[1] = "cul"
          a[2] = "de"
          a[3] = "sac"
</pre>
     <p>and sets the contents of the array <code>seps</code> as follows:

     <pre class="example">          seps[1] = "-"
          seps[2] = "-"
</pre>
     <p class="noindent">The value returned by this call to <code>split()</code> is three.

     <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bsplit_0028_0029_007d-function-1383"></a>As with input field-splitting, when the value of <var>fieldsep</var> is
<code>"&nbsp;"</code><!-- /@w -->, leading and trailing whitespace is ignored in values assigned to
the elements of
<var>array</var> but not in <var>seps</var>, and the elements
are separated by runs of whitespace. 
Also as with input field-splitting, if <var>fieldsep</var> is the null string, each
individual character in the string is split into its own array element. 
(c.e.)

     <p>Note, however, that <code>RS</code> has no effect on the way <code>split()</code>
works. Even though &lsquo;<samp><span class="samp">RS = ""</span></samp>&rsquo; causes newline to also be an input
field separator, this does not affect how <code>split()</code> splits strings.

     <p><a name="index-dark-corner_002c-_0040code_007bsplit_0028_0029_007d-function-1384"></a>Modern implementations of <samp><span class="command">awk</span></samp>, including <samp><span class="command">gawk</span></samp>, allow
the third argument to be a regexp constant (<code>/abc/</code>) as well as a
string. 
(d.c.) 
The POSIX standard allows this as well. 
See <a href="#Computed-Regexps">Computed Regexps</a>, for a
discussion of the difference between using a string constant or a regexp constant,
and the implications for writing your program correctly.

     <p>Before splitting the string, <code>split()</code> deletes any previously existing
elements in the arrays <var>array</var> and <var>seps</var>.

     <p>If <var>string</var> is null, the array has no elements. (So this is a portable
way to delete an entire array with one statement. 
See <a href="#Delete">Delete</a>.)

     <p>If <var>string</var> does not match <var>fieldsep</var> at all (but is not null),
<var>array</var> has one element only. The value of that element is the original
<var>string</var>.

     <br><dt><code>sprintf(</code><var>format</var><code>, </code><var>expression1</var><code>, ...)</code><dd><a name="index-g_t_0040code_007bsprintf_0028_0029_007d-function-1385"></a>Return (without printing) the string that <code>printf</code> would
have printed out with the same arguments
(see <a href="#Printf">Printf</a>). 
For example:

     <pre class="example">          pival = sprintf("pi = %.2f (approx.)", 22/7)
</pre>
     <p class="noindent">assigns the string &lsquo;<samp><span class="samp">pi&nbsp;=&nbsp;3.14&nbsp;(approx.)</span></samp>&rsquo;<!-- /@w --> to the variable <code>pival</code>.

     <p><a name="index-g_t_0040code_007bstrtonum_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1386"></a><br><dt><code>strtonum(</code><var>str</var><code>) #</code><dd>Examine <var>str</var> and return its numeric value.  If <var>str</var>
begins with a leading &lsquo;<samp><span class="samp">0</span></samp>&rsquo;, <code>strtonum()</code> assumes that <var>str</var>
is an octal number.  If <var>str</var> begins with a leading &lsquo;<samp><span class="samp">0x</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">0X</span></samp>&rsquo;, <code>strtonum()</code> assumes that <var>str</var> is a hexadecimal number. 
For example:

     <pre class="example">          $ <kbd>echo 0x11 |</kbd>
          &gt; <kbd>gawk '{ printf "%d\n", strtonum($1) }'</kbd>
          -| 17
</pre>
     <p>Using the <code>strtonum()</code> function is <em>not</em> the same as adding zero
to a string value; the automatic coercion of strings to numbers
works only for decimal data, not for octal or hexadecimal.<a rel="footnote" href="#fn-42" name="fnd-42"><sup>42</sup></a>

     <p>Note also that <code>strtonum()</code> uses the current locale's decimal point
for recognizing numbers (see <a href="#Locales">Locales</a>).

     <p><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bstrtonum_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1387"></a><code>strtonum()</code> is a <samp><span class="command">gawk</span></samp> extension; it is not available
in compatibility mode (see <a href="#Options">Options</a>).

     <br><dt><code>sub(</code><var>regexp</var><code>, </code><var>replacement</var> <span class="roman">[</span><code>, </code><var>target</var><span class="roman">]</span><code>)</code><dd><a name="index-g_t_0040code_007bsub_0028_0029_007d-function-1388"></a>Search <var>target</var>, which is treated as a string, for the
leftmost, longest substring matched by the regular expression <var>regexp</var>. 
Modify the entire string
by replacing the matched text with <var>replacement</var>. 
The modified string becomes the new value of <var>target</var>. 
Return the number of substitutions made (zero or one).

     <p>The <var>regexp</var> argument may be either a regexp constant
(<code>/.../</code>) or a string constant (<code>"..."</code>). 
In the latter case, the string is treated as a regexp to be matched. 
See <a href="#Computed-Regexps">Computed Regexps</a>, for a
discussion of the difference between the two forms, and the
implications for writing your program correctly.

     <p>This function is peculiar because <var>target</var> is not simply
used to compute a value, and not just any expression will do&mdash;it
must be a variable, field, or array element so that <code>sub()</code> can
store a modified value there.  If this argument is omitted, then the
default is to use and alter <code>$0</code>.<a rel="footnote" href="#fn-43" name="fnd-43"><sup>43</sup></a>
For example:

     <pre class="example">          str = "water, water, everywhere"
          sub(/at/, "ith", str)
</pre>
     <p class="noindent">sets <code>str</code> to &lsquo;<samp><span class="samp">wither,&nbsp;water,&nbsp;everywhere</span></samp>&rsquo;<!-- /@w -->, by replacing the
leftmost longest occurrence of &lsquo;<samp><span class="samp">at</span></samp>&rsquo; with &lsquo;<samp><span class="samp">ith</span></samp>&rsquo;.

     <p>If the special character &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; appears in <var>replacement</var>, it
stands for the precise substring that was matched by <var>regexp</var>.  (If
the regexp can match more than one string, then this precise substring
may vary.)  For example:

     <pre class="example">          { sub(/candidate/, "&amp; and his wife"); print }
</pre>
     <p class="noindent">changes the first occurrence of &lsquo;<samp><span class="samp">candidate</span></samp>&rsquo; to &lsquo;<samp><span class="samp">candidate
and his wife</span></samp>&rsquo; on each input line. 
Here is another example:

     <pre class="example">          $ <kbd>awk 'BEGIN {</kbd>
          &gt;         <kbd>str = "daabaaa"</kbd>
          &gt;         <kbd>sub(/a+/, "C&amp;C", str)</kbd>
          &gt;         <kbd>print str</kbd>
          &gt; <kbd>}'</kbd>
          -| dCaaCbaaa
</pre>
     <p class="noindent">This shows how &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; can represent a nonconstant string and also
illustrates the &ldquo;leftmost, longest&rdquo; rule in regexp matching
(see <a href="#Leftmost-Longest">Leftmost Longest</a>).

     <p>The effect of this special character (&lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;) can be turned off by putting a
backslash before it in the string.  As usual, to insert one backslash in
the string, you must write two backslashes.  Therefore, write &lsquo;<samp><span class="samp">\\&amp;</span></samp>&rsquo;
in a string constant to include a literal &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; in the replacement. 
For example, the following shows how to replace the first &lsquo;<samp><span class="samp">|</span></samp>&rsquo; on each line with
an &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;:

     <pre class="example">          { sub(/\|/, "\\&amp;"); print }
</pre>
     <p><a name="index-g_t_0040code_007bsub_0028_0029_007d-function_002c-arguments-of-1389"></a><a name="index-g_t_0040code_007bgsub_0028_0029_007d-function_002c-arguments-of-1390"></a>As mentioned, the third argument to <code>sub()</code> must
be a variable, field or array element. 
Some versions of <samp><span class="command">awk</span></samp> allow the third argument to
be an expression that is not an lvalue.  In such a case, <code>sub()</code>
still searches for the pattern and returns zero or one, but the result of
the substitution (if any) is thrown away because there is no place
to put it.  Such versions of <samp><span class="command">awk</span></samp> accept expressions
like the following:

     <pre class="example">          sub(/USA/, "United States", "the USA and Canada")
</pre>
     <p class="noindent"><a name="index-troubleshooting_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-1391"></a>For historical compatibility, <samp><span class="command">gawk</span></samp> accepts such erroneous code. 
However, using any other nonchangeable
object as the third parameter causes a fatal error and your program
will not run.

     <p>Finally, if the <var>regexp</var> is not a regexp constant, it is converted into a
string, and then the value of that string is treated as the regexp to match.

     <br><dt><code>substr(</code><var>string</var><code>, </code><var>start</var> <span class="roman">[</span><code>, </code><var>length</var><span class="roman">]</span><code>)</code><dd><a name="index-g_t_0040code_007bsubstr_0028_0029_007d-function-1392"></a>Return a <var>length</var>-character-long substring of <var>string</var>,
starting at character number <var>start</var>.  The first character of a
string is character number one.<a rel="footnote" href="#fn-44" name="fnd-44"><sup>44</sup></a>
For example, <code>substr("washington", 5, 3)</code> returns <code>"ing"</code>.

     <p>If <var>length</var> is not present, <code>substr()</code> returns the whole suffix of
<var>string</var> that begins at character number <var>start</var>.  For example,
<code>substr("washington", 5)</code> returns <code>"ington"</code>.  The whole
suffix is also returned
if <var>length</var> is greater than the number of characters remaining
in the string, counting from character <var>start</var>.

     <p>If <var>start</var> is less than one, <code>substr()</code> treats it as
if it was one. (POSIX doesn't specify what to do in this case:
Brian Kernighan's <samp><span class="command">awk</span></samp> acts this way, and therefore <samp><span class="command">gawk</span></samp>
does too.) 
If <var>start</var> is greater than the number of characters
in the string, <code>substr()</code> returns the null string. 
Similarly, if <var>length</var> is present but less than or equal to zero,
the null string is returned.

     <p><a name="index-troubleshooting_002c-_0040code_007bsubstr_0028_0029_007d-function-1393"></a>The string returned by <code>substr()</code> <em>cannot</em> be
assigned.  Thus, it is a mistake to attempt to change a portion of
a string, as shown in the following example:

     <pre class="example">          string = "abcdef"
          # try to get "abCDEf", won't work
          substr(string, 3, 3) = "CDE"
</pre>
     <p class="noindent">It is also a mistake to use <code>substr()</code> as the third argument
of <code>sub()</code> or <code>gsub()</code>:

     <pre class="example">          gsub(/xyz/, "pdq", substr($0, 5, 20))  # WRONG
</pre>
     <p><a name="index-portability_002c-_0040code_007bsubstr_0028_0029_007d-function-1394"></a>(Some commercial versions of <samp><span class="command">awk</span></samp> treat
<code>substr()</code> as assignable, but doing so is not portable.)

     <p>If you need to replace bits and pieces of a string, combine <code>substr()</code>
with string concatenation, in the following manner:

     <pre class="example">          string = "abcdef"
          ...
          string = substr(string, 1, 2) "CDE" substr(string, 6)
</pre>
     <p><a name="index-case-sensitivity_002c-converting-case-1395"></a><a name="index-converting_002c-case-1396"></a><br><dt><code>tolower(</code><var>string</var><code>)</code><dd><a name="index-g_t_0040code_007btolower_0028_0029_007d-function-1397"></a>Return a copy of <var>string</var>, with each uppercase character
in the string replaced with its corresponding lowercase character. 
Nonalphabetic characters are left unchanged.  For example,
<code>tolower("MiXeD cAsE 123")</code> returns <code>"mixed case 123"</code>.

     <br><dt><code>toupper(</code><var>string</var><code>)</code><dd><a name="index-g_t_0040code_007btoupper_0028_0029_007d-function-1398"></a>Return a copy of <var>string</var>, with each lowercase character
in the string replaced with its corresponding uppercase character. 
Nonalphabetic characters are left unchanged.  For example,
<code>toupper("MiXeD cAsE 123")</code> returns <code>"MIXED CASE 123"</code>. 
</dl>

<div class="node">
<a name="Gory-Details"></a>
<p><hr>
Up:&nbsp;<a rel="up" accesskey="u" href="#String-Functions">String Functions</a>

</div>

<h5 class="subsubsection">9.1.3.1 More About &lsquo;<samp><span class="samp">\</span></samp>&rsquo; and &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; with <code>sub()</code>, <code>gsub()</code>, and <code>gensub()</code></h5>

<p><a name="index-escape-processing_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bgensub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-1399"></a><a name="index-g_t_0040code_007bsub_0028_0029_007d-function_002c-escape-processing-1400"></a><a name="index-g_t_0040code_007bgsub_0028_0029_007d-function_002c-escape-processing-1401"></a><a name="index-g_t_0040code_007bgensub_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-escape-processing-1402"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bgensub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-and-1403"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bgensub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-and-1404"></a><a name="index-g_t_0040code_007b_0026_007d-_0028ampersand_0029_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bgensub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-and-1405"></a><a name="index-ampersand-_0028_0040code_007b_0026_007d_0029_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bgensub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-and-1406"></a>When using <code>sub()</code>, <code>gsub()</code>, or <code>gensub()</code>, and trying to get literal
backslashes and ampersands into the replacement text, you need to remember
that there are several levels of <dfn>escape processing</dfn> going on.

   <p>First, there is the <dfn>lexical</dfn> level, which is when <samp><span class="command">awk</span></samp> reads
your program
and builds an internal copy of it that can be executed. 
Then there is the runtime level, which is when <samp><span class="command">awk</span></samp> actually scans the
replacement string to determine what to generate.

   <p>At both levels, <samp><span class="command">awk</span></samp> looks for a defined set of characters that
can come after a backslash.  At the lexical level, it looks for the
escape sequences listed in <a href="#Escape-Sequences">Escape Sequences</a>. 
Thus, for every &lsquo;<samp><span class="samp">\</span></samp>&rsquo; that <samp><span class="command">awk</span></samp> processes at the runtime
level, you must type two backslashes at the lexical level. 
When a character that is not valid for an escape sequence follows the
&lsquo;<samp><span class="samp">\</span></samp>&rsquo;, Brian Kernighan's <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp> both simply remove the initial
&lsquo;<samp><span class="samp">\</span></samp>&rsquo; and put the next character into the string. Thus, for
example, <code>"a\qb"</code> is treated as <code>"aqb"</code>.

   <p>At the runtime level, the various functions handle sequences of
&lsquo;<samp><span class="samp">\</span></samp>&rsquo; and &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; differently.  The situation is (sadly) somewhat complex. 
Historically, the <code>sub()</code> and <code>gsub()</code> functions treated the two
character sequence &lsquo;<samp><span class="samp">\&amp;</span></samp>&rsquo; specially; this sequence was replaced in
the generated text with a single &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;.  Any other &lsquo;<samp><span class="samp">\</span></samp>&rsquo; within
the <var>replacement</var> string that did not precede an &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; was passed
through unchanged.  This is illustrated in <a href="#table_002dsub_002descapes">table-sub-escapes</a>.

<!-- Thank to Karl Berry for help with the TeX stuff. -->
   <div class="float">
<a name="table_002dsub_002descapes"></a>
<pre class="display">      You type         <code>sub()</code> sees          <code>sub()</code> generates
      &mdash;&mdash;&mdash;&ndash;         &mdash;&mdash;&mdash;&mdash;&ndash;          &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;
          <code>\&amp;</code>              <code>&amp;</code>            the matched text
         <code>\\&amp;</code>             <code>\&amp;</code>            a literal &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;
        <code>\\\&amp;</code>             <code>\&amp;</code>            a literal &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;
       <code>\\\\&amp;</code>            <code>\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\&amp;</span></samp>&rsquo;
      <code>\\\\\&amp;</code>            <code>\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\&amp;</span></samp>&rsquo;
     <code>\\\\\\&amp;</code>           <code>\\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\\&amp;</span></samp>&rsquo;
         <code>\\q</code>             <code>\q</code>            a literal &lsquo;<samp><span class="samp">\q</span></samp>&rsquo;
</pre>
   <p><strong class="float-caption">Table 9.1: Historical Escape Sequence Processing for <code>sub()</code> and <code>gsub()</code></strong></p></div>

<p class="noindent">This table shows both the lexical-level processing, where
an odd number of backslashes becomes an even number at the runtime level,
as well as the runtime processing done by <code>sub()</code>. 
(For the sake of simplicity, the rest of the following tables only show the
case of even numbers of backslashes entered at the lexical level.)

   <p>The problem with the historical approach is that there is no way to get
a literal &lsquo;<samp><span class="samp">\</span></samp>&rsquo; followed by the matched text.

<!-- @cindex @command{awk} language, POSIX version -->
   <p><a name="index-POSIX-_0040command_007bawk_007d_002c-functions-and_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-1407"></a>The 1992 POSIX standard attempted to fix this problem. That standard
says that <code>sub()</code> and <code>gsub()</code> look for either a &lsquo;<samp><span class="samp">\</span></samp>&rsquo; or an &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;
after the &lsquo;<samp><span class="samp">\</span></samp>&rsquo;. If either one follows a &lsquo;<samp><span class="samp">\</span></samp>&rsquo;, that character is
output literally.  The interpretation of &lsquo;<samp><span class="samp">\</span></samp>&rsquo; and &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo; then becomes
as shown in <a href="#table_002dsub_002dposix_002d92">table-sub-posix-92</a>.

   <div class="float">
<a name="table_002dsub_002dposix_002d92"></a>
<!-- thanks to Karl Berry for formatting this table -->
<pre class="display">      You type         <code>sub()</code> sees          <code>sub()</code> generates
      &mdash;&mdash;&mdash;&ndash;         &mdash;&mdash;&mdash;&mdash;&ndash;          &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;
           <code>&amp;</code>              <code>&amp;</code>            the matched text
         <code>\\&amp;</code>             <code>\&amp;</code>            a literal &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;
       <code>\\\\&amp;</code>            <code>\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\</span></samp>&rsquo;, then the matched text
     <code>\\\\\\&amp;</code>           <code>\\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\&amp;</span></samp>&rsquo;
</pre>
   <p><strong class="float-caption">Table 9.2: 1992 POSIX Rules for sub and gsub Escape Sequence Processing</strong></p></div>

<p class="noindent">This appears to solve the problem. 
Unfortunately, the phrasing of the standard is unusual. It
says, in effect, that &lsquo;<samp><span class="samp">\</span></samp>&rsquo; turns off the special meaning of any
following character, but for anything other than &lsquo;<samp><span class="samp">\</span></samp>&rsquo; and &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;,
such special meaning is undefined.  This wording leads to two problems:

     <ul>
<li>Backslashes must now be doubled in the <var>replacement</var> string, breaking
historical <samp><span class="command">awk</span></samp> programs.

     <li>To make sure that an <samp><span class="command">awk</span></samp> program is portable, <em>every</em> character
in the <var>replacement</var> string must be preceded with a
backslash.<a rel="footnote" href="#fn-45" name="fnd-45"><sup>45</sup></a>
<!-- I can say that, 'cause I was involved in making this change -->
</ul>

   <p>Because of the problems just listed,
in 1996, the <samp><span class="command">gawk</span></samp> maintainer submitted
proposed text for a revised standard that
reverts to rules that correspond more closely to the original existing
practice. The proposed rules have special cases that make it possible
to produce a &lsquo;<samp><span class="samp">\</span></samp>&rsquo; preceding the matched text. This is shown in
<a href="#table_002dsub_002dproposed">table-sub-proposed</a>.

   <div class="float">
<a name="table_002dsub_002dproposed"></a>
<pre class="display">      You type         <code>sub()</code> sees         <code>sub()</code> generates
      &mdash;&mdash;&mdash;&ndash;         &mdash;&mdash;&mdash;&mdash;&ndash;         &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;
     <code>\\\\\\&amp;</code>           <code>\\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\&amp;</span></samp>&rsquo;
       <code>\\\\&amp;</code>            <code>\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\</span></samp>&rsquo;, followed by the matched text
         <code>\\&amp;</code>             <code>\&amp;</code>            a literal &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;
         <code>\\q</code>             <code>\q</code>            a literal &lsquo;<samp><span class="samp">\q</span></samp>&rsquo;
        <code>\\\\</code>             <code>\\</code>            <code>\\</code>
</pre>
   <p><strong class="float-caption">Table 9.3: Proposed rules for sub and backslash</strong></p></div>

   <p>In a nutshell, at the runtime level, there are now three special sequences
of characters (&lsquo;<samp><span class="samp">\\\&amp;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">\\&amp;</span></samp>&rsquo; and &lsquo;<samp><span class="samp">\&amp;</span></samp>&rsquo;) whereas historically
there was only one.  However, as in the historical case, any &lsquo;<samp><span class="samp">\</span></samp>&rsquo; that
is not part of one of these three sequences is not special and appears
in the output literally.

   <p><samp><span class="command">gawk</span></samp> 3.0 and 3.1 follow these proposed POSIX rules for <code>sub()</code> and
<code>gsub()</code>. 
<!-- As much as we think it's a lousy idea. You win some, you lose some. Sigh. -->
The POSIX standard took much longer to be revised than was expected in 1996. 
The 2001 standard does not follow the above rules.  Instead, the rules
there are somewhat simpler.  The results are similar except for one case.

   <p>The POSIX rules state that &lsquo;<samp><span class="samp">\&amp;</span></samp>&rsquo; in the replacement string produces
a literal &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">\\</span></samp>&rsquo; produces a literal &lsquo;<samp><span class="samp">\</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">\</span></samp>&rsquo; followed
by anything else is not special; the &lsquo;<samp><span class="samp">\</span></samp>&rsquo; is placed straight into the output. 
These rules are presented in <a href="#table_002dposix_002dsub">table-posix-sub</a>.

   <div class="float">
<a name="table_002dposix_002dsub"></a>
<pre class="display">      You type         <code>sub()</code> sees         <code>sub()</code> generates
      &mdash;&mdash;&mdash;&ndash;         &mdash;&mdash;&mdash;&mdash;&ndash;         &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;
     <code>\\\\\\&amp;</code>           <code>\\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\&amp;</span></samp>&rsquo;
       <code>\\\\&amp;</code>            <code>\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\</span></samp>&rsquo;, followed by the matched text
         <code>\\&amp;</code>             <code>\&amp;</code>            a literal &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;
         <code>\\q</code>             <code>\q</code>            a literal &lsquo;<samp><span class="samp">\q</span></samp>&rsquo;
        <code>\\\\</code>             <code>\\</code>            <code>\</code>
</pre>
   <p><strong class="float-caption">Table 9.4: POSIX rules for <code>sub()</code> and <code>gsub()</code></strong></p></div>

   <p>The only case where the difference is noticeable is the last one: &lsquo;<samp><span class="samp">\\\\</span></samp>&rsquo;
is seen as &lsquo;<samp><span class="samp">\\</span></samp>&rsquo; and produces &lsquo;<samp><span class="samp">\</span></samp>&rsquo; instead of &lsquo;<samp><span class="samp">\\</span></samp>&rsquo;.

   <p>Starting with version 3.1.4, <samp><span class="command">gawk</span></samp> followed the POSIX rules
when <samp><span class="option">--posix</span></samp> is specified (see <a href="#Options">Options</a>). Otherwise,
it continued to follow the 1996 proposed rules, since
that had been its behavior for many years.

   <p>When version 4.0.0, was released, the <samp><span class="command">gawk</span></samp> maintainer
made the POSIX rules the default, breaking well over a decade's worth
of backwards compatibility.<a rel="footnote" href="#fn-46" name="fnd-46"><sup>46</sup></a> Needless to say, this was a bad idea,
and as of version 4.0.1, <samp><span class="command">gawk</span></samp> resumed its historical
behavior, and only follows the POSIX rules when <samp><span class="option">--posix</span></samp> is given.

   <p>The rules for <code>gensub()</code> are considerably simpler. At the runtime
level, whenever <samp><span class="command">gawk</span></samp> sees a &lsquo;<samp><span class="samp">\</span></samp>&rsquo;, if the following character
is a digit, then the text that matched the corresponding parenthesized
subexpression is placed in the generated output.  Otherwise,
no matter what character follows the &lsquo;<samp><span class="samp">\</span></samp>&rsquo;, it
appears in the generated text and the &lsquo;<samp><span class="samp">\</span></samp>&rsquo; does not,
as shown in <a href="#table_002dgensub_002descapes">table-gensub-escapes</a>.

   <div class="float">
<a name="table_002dgensub_002descapes"></a>
<pre class="display">       You type          <code>gensub()</code> sees         <code>gensub()</code> generates
       &mdash;&mdash;&mdash;&ndash;          &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;         &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;
           <code>&amp;</code>                    <code>&amp;</code>            the matched text
         <code>\\&amp;</code>                   <code>\&amp;</code>            a literal &lsquo;<samp><span class="samp">&amp;</span></samp>&rsquo;
        <code>\\\\</code>                   <code>\\</code>            a literal &lsquo;<samp><span class="samp">\</span></samp>&rsquo;
       <code>\\\\&amp;</code>                  <code>\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\</span></samp>&rsquo;, then the matched text
     <code>\\\\\\&amp;</code>                 <code>\\\&amp;</code>            a literal &lsquo;<samp><span class="samp">\&amp;</span></samp>&rsquo;
         <code>\\q</code>                   <code>\q</code>            a literal &lsquo;<samp><span class="samp">q</span></samp>&rsquo;
</pre>
   <p><strong class="float-caption">Table 9.5: Escape Sequence Processing for <code>gensub()</code></strong></p></div>

   <p>Because of the complexity of the lexical and runtime level processing
and the special cases for <code>sub()</code> and <code>gsub()</code>,
we recommend the use of <samp><span class="command">gawk</span></samp> and <code>gensub()</code> when you have
to do substitutions.

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Matching the Null String</h4>

<p><a name="index-advanced-features_002c-null-strings_0040comma_007b_007d-matching-1408"></a><a name="index-matching_002c-null-strings-1409"></a><a name="index-null-strings_002c-matching-1410"></a><a name="index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_007d-operator_002c-null-strings_0040comma_007b_007d-matching-1411"></a><a name="index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_007d-operator_002c-null-strings_0040comma_007b_007d-matching-1412"></a>
In <samp><span class="command">awk</span></samp>, the &lsquo;<samp><span class="samp">*</span></samp>&rsquo; operator can match the null string. 
This is particularly important for the <code>sub()</code>, <code>gsub()</code>,
and <code>gensub()</code> functions.  For example:

<pre class="example">     $ <kbd>echo abc | awk '{ gsub(/m*/, "X"); print }'</kbd>
     -| XaXbXcX
</pre>
   <p class="noindent">Although this makes a certain amount of sense, it can be surprising.

<div class="node">
<a name="I%2fO-Functions"></a>
<a name="I_002fO-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Time-Functions">Time Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#String-Functions">String Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din">Built-in</a>

</div>

<h4 class="subsection">9.1.4 Input/Output Functions</h4>

<p>The following functions relate to input/output (I/O). 
Optional parameters are enclosed in square brackets ([ ]):

     <dl>
<dt><code>close(</code><var>filename</var> <span class="roman">[</span><code>, </code><var>how</var><span class="roman">]</span><code>)</code><dd><a name="index-g_t_0040code_007bclose_0028_0029_007d-function-1413"></a><a name="index-files_002c-closing-1414"></a>Close the file <var>filename</var> for input or output. Alternatively, the
argument may be a shell command that was used for creating a coprocess, or
for redirecting to or from a pipe; then the coprocess or pipe is closed. 
See <a href="#Close-Files-And-Pipes">Close Files And Pipes</a>,
for more information.

     <p>When closing a coprocess, it is occasionally useful to first close
one end of the two-way pipe and then to close the other.  This is done
by providing a second argument to <code>close()</code>.  This second argument
should be one of the two string values <code>"to"</code> or <code>"from"</code>,
indicating which end of the pipe to close.  Case in the string does
not matter. 
See <a href="#Two_002dway-I_002fO">Two-way I/O</a>,
which discusses this feature in more detail and gives an example.

     <br><dt><code>fflush(</code><span class="roman">[</span><var>filename</var><span class="roman">]</span><code>)</code><dd><a name="index-g_t_0040code_007bfflush_0028_0029_007d-function-1415"></a><a name="index-common-extensions_002c-_0040code_007bfflush_0028_0029_007d-function-1416"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007bfflush_0028_0029_007d-function-1417"></a>Flush any buffered output associated with <var>filename</var>, which is either a
file opened for writing or a shell command for redirecting output to
a pipe or coprocess.

     <p><a name="index-portability_002c-_0040code_007bfflush_0028_0029_007d-function-and-1418"></a><a name="index-buffers_002c-flushing-1419"></a><a name="index-output_002c-buffering-1420"></a>Many utility programs <dfn>buffer</dfn> their output; i.e., they save information
to write to a disk file or the screen in memory until there is enough
for it to be worthwhile to send the data to the output device. 
This is often more efficient than writing
every little bit of information as soon as it is ready.  However, sometimes
it is necessary to force a program to <dfn>flush</dfn> its buffers; that is,
write the information to its destination, even if a buffer is not full. 
This is the purpose of the <code>fflush()</code> function&mdash;<samp><span class="command">gawk</span></samp> also
buffers its output and the <code>fflush()</code> function forces
<samp><span class="command">gawk</span></samp> to flush its buffers.

     <p><code>fflush()</code> was added to Brian Kernighan's
version of <samp><span class="command">awk</span></samp> in 1994. 
For over two decades, it was not part of the POSIX standard. 
As of December, 2012, it was accepted for
inclusion into the POSIX standard. 
See <a href="http://austingroupbugs.net/view.php?id=634">the Austin Group website</a>.

     <p>POSIX standardizes <code>fflush()</code> as follows: If there
is no argument, or if the argument is the null string (<code>""</code><!-- /@w -->),
then <samp><span class="command">awk</span></samp> flushes the buffers for <em>all</em> open output files
and pipes.

     <blockquote>
<b>NOTE:</b> Prior to version 4.0.2, <samp><span class="command">gawk</span></samp>
would flush only the standard output if there was no argument,
and flush all output files and pipes if the argument was the null
string. This was changed in order to be compatible with Brian
Kernighan's <samp><span class="command">awk</span></samp>, in the hope that standardizing this
feature in POSIX would then be easier (which indeed helped).

     <p>With <samp><span class="command">gawk</span></samp>,
you can use &lsquo;<samp><span class="samp">fflush("/dev/stdout")</span></samp>&rsquo; if you wish to flush
only the standard output. 
</blockquote>

     <!-- @cindex automatic warnings -->
     <!-- @cindex warnings, automatic -->
     <p><a name="index-troubleshooting_002c-_0040code_007bfflush_0028_0029_007d-function-1421"></a><code>fflush()</code> returns zero if the buffer is successfully flushed;
otherwise, it returns non-zero (<samp><span class="command">gawk</span></samp> returns &minus;1). 
In the case where all buffers are flushed, the return value is zero
only if all buffers were flushed successfully.  Otherwise, it is
&minus;1, and <samp><span class="command">gawk</span></samp> warns about the problem <var>filename</var>.

     <p><samp><span class="command">gawk</span></samp> also issues a warning message if you attempt to flush
a file or pipe that was opened for reading (such as with <code>getline</code>),
or if <var>filename</var> is not an open file, pipe, or coprocess. 
In such a case, <code>fflush()</code> returns &minus;1, as well.

     <br><dt><code>system(</code><var>command</var><code>)</code><dd><a name="index-g_t_0040code_007bsystem_0028_0029_007d-function-1422"></a><a name="index-interacting-with-other-programs-1423"></a>Execute the operating-system
command <var>command</var> and then return to the <samp><span class="command">awk</span></samp> program. 
Return <var>command</var>'s exit status.

     <p>For example, if the following fragment of code is put in your <samp><span class="command">awk</span></samp>
program:

     <pre class="example">          END {
               system("date | mail -s 'awk run done' root")
          }
</pre>
     <p class="noindent">the system administrator is sent mail when the <samp><span class="command">awk</span></samp> program
finishes processing input and begins its end-of-input processing.

     <p>Note that redirecting <code>print</code> or <code>printf</code> into a pipe is often
enough to accomplish your task.  If you need to run many commands, it
is more efficient to simply print them down a pipeline to the shell:

     <pre class="example">          while (<var>more stuff to do</var>)
              print <var>command</var> | "/bin/sh"
          close("/bin/sh")
</pre>
     <p class="noindent"><a name="index-troubleshooting_002c-_0040code_007bsystem_0028_0029_007d-function-1424"></a><a name="index-g_t_0040code_007b_002d_002dsandbox_007d-option_002c-disabling-_0040code_007bsystem_0028_0029_007d-function-1425"></a>However, if your <samp><span class="command">awk</span></samp>
program is interactive, <code>system()</code> is useful for running large
self-contained programs, such as a shell or an editor. 
Some operating systems cannot implement the <code>system()</code> function. 
<code>system()</code> causes a fatal error if it is not supported.

     <blockquote>
<b>NOTE:</b> When <samp><span class="option">--sandbox</span></samp> is specified, the <code>system()</code> function is disabled
(see <a href="#Options">Options</a>). 
</blockquote>

   </dl>

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Interactive Versus Noninteractive Buffering</h4>

<p><a name="index-advanced-features_002c-buffering-1426"></a><a name="index-buffering_002c-interactive-vs_002e_0040_003a-noninteractive-1427"></a>
As a side point, buffering issues can be even more confusing, depending
upon whether your program is <dfn>interactive</dfn>, i.e., communicating
with a user sitting at a keyboard.<a rel="footnote" href="#fn-47" name="fnd-47"><sup>47</sup></a>

<!-- Thanks to Walter.Mecky@dresdnerbank.de for this example, and for -->
<!-- motivating me to write this section. -->
   <p>Interactive programs generally <dfn>line buffer</dfn> their output; i.e., they
write out every line.  Noninteractive programs wait until they have
a full buffer, which may be many lines of output. 
Here is an example of the difference:

<pre class="example">     $ <kbd>awk '{ print $1 + $2 }'</kbd>
     <kbd>1 1</kbd>
     -| 2
     <kbd>2 3</kbd>
     -| 5
     <kbd>Ctrl-d</kbd>
</pre>
   <p class="noindent">Each line of output is printed immediately. Compare that behavior
with this example:

<pre class="example">     $ <kbd>awk '{ print $1 + $2 }' | cat</kbd>
     <kbd>1 1</kbd>
     <kbd>2 3</kbd>
     <kbd>Ctrl-d</kbd>
     -| 2
     -| 5
</pre>
   <p class="noindent">Here, no output is printed until after the <kbd>Ctrl-d</kbd> is typed, because
it is all buffered and sent down the pipe to <samp><span class="command">cat</span></samp> in one shot.

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: Controlling Output Buffering with <code>system()</code></h4>

<p><a name="index-advanced-features_002c-buffering-1428"></a><a name="index-buffers_002c-flushing-1429"></a><a name="index-buffering_002c-input_002foutput-1430"></a><a name="index-output_002c-buffering-1431"></a>
The <code>fflush()</code> function provides explicit control over output buffering for
individual files and pipes.  However, its use is not portable to many older
<samp><span class="command">awk</span></samp> implementations.  An alternative method to flush output
buffers is to call <code>system()</code> with a null string as its argument:

<pre class="example">     system("")   # flush output
</pre>
   <p class="noindent"><samp><span class="command">gawk</span></samp> treats this use of the <code>system()</code> function as a special
case and is smart enough not to run a shell (or other command
interpreter) with the empty command.  Therefore, with <samp><span class="command">gawk</span></samp>, this
idiom is not only useful, it is also efficient.  While this method should work
with other <samp><span class="command">awk</span></samp> implementations, it does not necessarily avoid
starting an unnecessary shell.  (Other implementations may only
flush the buffer associated with the standard output and not necessarily
all buffered output.)

   <p>If you think about what a programmer expects, it makes sense that
<code>system()</code> should flush any pending output.  The following program:

<pre class="example">     BEGIN {
          print "first print"
          system("echo system echo")
          print "second print"
     }
</pre>
   <p class="noindent">must print:

<pre class="example">     first print
     system echo
     second print
</pre>
   <p class="noindent">and not:

<pre class="example">     system echo
     first print
     second print
</pre>
   <p>If <samp><span class="command">awk</span></samp> did not flush its buffers before calling <code>system()</code>,
you would see the latter (undesirable) output.

<div class="node">
<a name="Time-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Bitwise-Functions">Bitwise Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#I_002fO-Functions">I/O Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din">Built-in</a>

</div>

<h4 class="subsection">9.1.5 Time Functions</h4>

<!-- STARTOFRANGE tst -->
<p><a name="index-timestamps-1432"></a><!-- STARTOFRANGE logftst -->
<a name="index-log-files_002c-timestamps-in-1433"></a><!-- STARTOFRANGE filogtst -->
<a name="index-files_002c-log_0040comma_007b_007d-timestamps-in-1434"></a><!-- STARTOFRANGE gawtst -->
<a name="index-g_t_0040command_007bgawk_007d_002c-timestamps-1435"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-timestamps-and-1436"></a><code>awk</code> programs are commonly used to process log files
containing timestamp information, indicating when a
particular log record was written.  Many programs log their timestamp
in the form returned by the <code>time()</code> system call, which is the
number of seconds since a particular epoch.  On POSIX-compliant systems,
it is the number of seconds since
1970-01-01 00:00:00 UTC, not counting leap seconds.<a rel="footnote" href="#fn-48" name="fnd-48"><sup>48</sup></a>
All known POSIX-compliant systems support timestamps from 0 through
2^31 - 1, which is sufficient to represent times through
2038-01-19 03:14:07 UTC.  Many systems support a wider range of timestamps,
including negative timestamps that represent times before the
epoch.

   <p><a name="index-g_t_0040command_007bdate_007d-utility_002c-GNU-1437"></a><a name="index-time_002c-retrieving-1438"></a>In order to make it easier to process such log files and to produce
useful reports, <samp><span class="command">gawk</span></samp> provides the following functions for
working with timestamps.  They are <samp><span class="command">gawk</span></samp> extensions; they are
not specified in the POSIX standard, nor are they in any other known
version of <samp><span class="command">awk</span></samp>.<a rel="footnote" href="#fn-49" name="fnd-49"><sup>49</sup></a>
Optional parameters are enclosed in square brackets ([ ]):

     <dl>
<dt><code>mktime(</code><var>datespec</var><code>)</code><dd><a name="index-g_t_0040code_007bmktime_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1439"></a>Turn <var>datespec</var> into a timestamp in the same form
as is returned by <code>systime()</code>.  It is similar to the function of the
same name in ISO C.  The argument, <var>datespec</var>, is a string of the form
<code>"</code><var>YYYY</var><code>&nbsp;</code><var>MM</var><code>&nbsp;</code><var>DD</var><code>&nbsp;</code><var>HH</var><code>&nbsp;</code><var>MM</var><code>&nbsp;</code><var>SS</var><code>&nbsp;[</code><var>DST</var><code>]"</code><!-- /@w -->. 
The string consists of six or seven numbers representing, respectively,
the full year including century, the month from 1 to 12, the day of the month
from 1 to 31, the hour of the day from 0 to 23, the minute from 0 to
59, the second from 0 to 60,<a rel="footnote" href="#fn-50" name="fnd-50"><sup>50</sup></a>
and an optional daylight-savings flag.

     <p>The values of these numbers need not be within the ranges specified;
for example, an hour of &minus;1 means 1 hour before midnight. 
The origin-zero Gregorian calendar is assumed, with year 0 preceding
year 1 and year &minus;1 preceding year 0. 
The time is assumed to be in the local timezone. 
If the daylight-savings flag is positive, the time is assumed to be
daylight savings time; if zero, the time is assumed to be standard
time; and if negative (the default), <code>mktime()</code> attempts to determine
whether daylight savings time is in effect for the specified time.

     <p>If <var>datespec</var> does not contain enough elements or if the resulting time
is out of range, <code>mktime()</code> returns &minus;1.

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bPROCINFO_007d-array-in-1440"></a><a name="index-g_t_0040code_007bPROCINFO_007d-array-1441"></a><br><dt><code>strftime(</code><span class="roman">[</span><var>format</var> <span class="roman">[</span><code>, </code><var>timestamp</var> <span class="roman">[</span><code>, </code><var>utc-flag</var><span class="roman">]]]</span><code>)</code><dd><!-- STARTOFRANGE strf -->
<a name="index-g_t_0040code_007bstrftime_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1442"></a>Format the time specified by <var>timestamp</var>
based on the contents of the <var>format</var> string and return the result. 
It is similar to the function of the same name in ISO C. 
If <var>utc-flag</var> is present and is either nonzero or non-null, the value
is formatted as UTC (Coordinated Universal Time, formerly GMT or Greenwich
Mean Time). Otherwise, the value is formatted for the local time zone. 
The <var>timestamp</var> is in the same format as the value returned by the
<code>systime()</code> function.  If no <var>timestamp</var> argument is supplied,
<samp><span class="command">gawk</span></samp> uses the current time of day as the timestamp. 
If no <var>format</var> argument is supplied, <code>strftime()</code> uses
the value of <code>PROCINFO["strftime"]</code> as the format string
(see <a href="#Built_002din-Variables">Built-in Variables</a>). 
The default string value is
<code>"%a&nbsp;%b&nbsp;%e&nbsp;%H:%M:%S&nbsp;%Z&nbsp;%Y"<!-- /@w --></code>.  This format string produces
output that is equivalent to that of the <samp><span class="command">date</span></samp> utility. 
You can assign a new value to <code>PROCINFO["strftime"]</code> to
change the default format.

     <br><dt><code>systime()</code><dd><a name="index-g_t_0040code_007bsystime_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1443"></a><a name="index-timestamps-1444"></a>Return the current time as the number of seconds since
the system epoch.  On POSIX systems, this is the number of seconds
since 1970-01-01 00:00:00 UTC, not counting leap seconds. 
It may be a different number on other systems. 
</dl>

   <p>The <code>systime()</code> function allows you to compare a timestamp from a
log file with the current time of day.  In particular, it is easy to
determine how long ago a particular record was logged.  It also allows
you to produce log records using the &ldquo;seconds since the epoch&rdquo; format.

   <p><a name="index-converting_002c-dates-to-timestamps-1445"></a><a name="index-dates_002c-converting-to-timestamps-1446"></a><a name="index-timestamps_002c-converting-dates-to-1447"></a>The <code>mktime()</code> function allows you to convert a textual representation
of a date and time into a timestamp.   This makes it easy to do before/after
comparisons of dates and times, particularly when dealing with date and
time data coming from an external source, such as a log file.

   <p>The <code>strftime()</code> function allows you to easily turn a timestamp
into human-readable information.  It is similar in nature to the <code>sprintf()</code>
function
(see <a href="#String-Functions">String Functions</a>),
in that it copies nonformat specification characters verbatim to the
returned string, while substituting date and time values for format
specifications in the <var>format</var> string.

   <p><a name="index-format-specifiers_002c-_0040code_007bstrftime_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1448"></a><code>strftime()</code> is guaranteed by the 1999 ISO C
standard<a rel="footnote" href="#fn-51" name="fnd-51"><sup>51</sup></a>
to support the following date format specifications:

     <dl>
<dt><code>%a</code><dd>The locale's abbreviated weekday name.

     <br><dt><code>%A</code><dd>The locale's full weekday name.

     <br><dt><code>%b</code><dd>The locale's abbreviated month name.

     <br><dt><code>%B</code><dd>The locale's full month name.

     <br><dt><code>%c</code><dd>The locale's &ldquo;appropriate&rdquo; date and time representation. 
(This is &lsquo;<samp><span class="samp">%A %B %d %T %Y</span></samp>&rsquo; in the <code>"C"</code> locale.)

     <br><dt><code>%C</code><dd>The century part of the current year. 
This is the year divided by 100 and truncated to the next
lower integer.

     <br><dt><code>%d</code><dd>The day of the month as a decimal number (01&ndash;31).

     <br><dt><code>%D</code><dd>Equivalent to specifying &lsquo;<samp><span class="samp">%m/%d/%y</span></samp>&rsquo;.

     <br><dt><code>%e</code><dd>The day of the month, padded with a space if it is only one digit.

     <br><dt><code>%F</code><dd>Equivalent to specifying &lsquo;<samp><span class="samp">%Y-%m-%d</span></samp>&rsquo;. 
This is the ISO 8601 date format.

     <br><dt><code>%g</code><dd>The year modulo 100 of the ISO 8601 week number, as a decimal number (00&ndash;99). 
For example, January 1, 1993 is in week 53 of 1992. Thus, the year
of its ISO 8601 week number is 1992, even though its year is 1993. 
Similarly, December 31, 1973 is in week 1 of 1974. Thus, the year
of its ISO week number is 1974, even though its year is 1973.

     <br><dt><code>%G</code><dd>The full year of the ISO week number, as a decimal number.

     <br><dt><code>%h</code><dd>Equivalent to &lsquo;<samp><span class="samp">%b</span></samp>&rsquo;.

     <br><dt><code>%H</code><dd>The hour (24-hour clock) as a decimal number (00&ndash;23).

     <br><dt><code>%I</code><dd>The hour (12-hour clock) as a decimal number (01&ndash;12).

     <br><dt><code>%j</code><dd>The day of the year as a decimal number (001&ndash;366).

     <br><dt><code>%m</code><dd>The month as a decimal number (01&ndash;12).

     <br><dt><code>%M</code><dd>The minute as a decimal number (00&ndash;59).

     <br><dt><code>%n</code><dd>A newline character (ASCII LF).

     <br><dt><code>%p</code><dd>The locale's equivalent of the AM/PM designations associated
with a 12-hour clock.

     <br><dt><code>%r</code><dd>The locale's 12-hour clock time. 
(This is &lsquo;<samp><span class="samp">%I:%M:%S %p</span></samp>&rsquo; in the <code>"C"</code> locale.)

     <br><dt><code>%R</code><dd>Equivalent to specifying &lsquo;<samp><span class="samp">%H:%M</span></samp>&rsquo;.

     <br><dt><code>%S</code><dd>The second as a decimal number (00&ndash;60).

     <br><dt><code>%t</code><dd>A TAB character.

     <br><dt><code>%T</code><dd>Equivalent to specifying &lsquo;<samp><span class="samp">%H:%M:%S</span></samp>&rsquo;.

     <br><dt><code>%u</code><dd>The weekday as a decimal number (1&ndash;7).  Monday is day one.

     <br><dt><code>%U</code><dd>The week number of the year (the first Sunday as the first day of week one)
as a decimal number (00&ndash;53).

     <!-- @cindex ISO 8601 -->
     <br><dt><code>%V</code><dd>The week number of the year (the first Monday as the first
day of week one) as a decimal number (01&ndash;53). 
The method for determining the week number is as specified by ISO 8601. 
(To wit: if the week containing January 1 has four or more days in the
new year, then it is week one; otherwise it is week 53 of the previous year
and the next week is week one.)

     <br><dt><code>%w</code><dd>The weekday as a decimal number (0&ndash;6).  Sunday is day zero.

     <br><dt><code>%W</code><dd>The week number of the year (the first Monday as the first day of week one)
as a decimal number (00&ndash;53).

     <br><dt><code>%x</code><dd>The locale's &ldquo;appropriate&rdquo; date representation. 
(This is &lsquo;<samp><span class="samp">%A %B %d %Y</span></samp>&rsquo; in the <code>"C"</code> locale.)

     <br><dt><code>%X</code><dd>The locale's &ldquo;appropriate&rdquo; time representation. 
(This is &lsquo;<samp><span class="samp">%T</span></samp>&rsquo; in the <code>"C"</code> locale.)

     <br><dt><code>%y</code><dd>The year modulo 100 as a decimal number (00&ndash;99).

     <br><dt><code>%Y</code><dd>The full year as a decimal number (e.g., 2011).

     <!-- @cindex RFC 822 -->
     <!-- @cindex RFC 1036 -->
     <br><dt><code>%z</code><dd>The timezone offset in a +HHMM format (e.g., the format necessary to
produce RFC 822/RFC 1036 date headers).

     <br><dt><code>%Z</code><dd>The time zone name or abbreviation; no characters if
no time zone is determinable.

     <br><dt><code>%Ec %EC %Ex %EX %Ey %EY %Od %Oe %OH</code><dt><code>%OI %Om %OM %OS %Ou %OU %OV %Ow %OW %Oy</code><dd>&ldquo;Alternate representations&rdquo; for the specifications
that use only the second letter (&lsquo;<samp><span class="samp">%c</span></samp>&rsquo;, &lsquo;<samp><span class="samp">%C</span></samp>&rsquo;,
and so on).<a rel="footnote" href="#fn-52" name="fnd-52"><sup>52</sup></a>
(These facilitate compliance with the POSIX <samp><span class="command">date</span></samp> utility.)

     <br><dt><code>%%</code><dd>A literal &lsquo;<samp><span class="samp">%</span></samp>&rsquo;. 
</dl>

   <p>If a conversion specifier is not one of the above, the behavior is
undefined.<a rel="footnote" href="#fn-53" name="fnd-53"><sup>53</sup></a>

<!-- @cindex locale, definition of -->
   <p>Informally, a <dfn>locale</dfn> is the geographic place in which a program
is meant to run.  For example, a common way to abbreviate the date
September 4, 2012 in the United States is &ldquo;9/4/12.&rdquo;
In many countries in Europe, however, it is abbreviated &ldquo;4.9.12.&rdquo;
Thus, the &lsquo;<samp><span class="samp">%x</span></samp>&rsquo; specification in a <code>"US"</code> locale might produce
&lsquo;<samp><span class="samp">9/4/12</span></samp>&rsquo;, while in a <code>"EUROPE"</code> locale, it might produce
&lsquo;<samp><span class="samp">4.9.12</span></samp>&rsquo;.  The ISO C standard defines a default <code>"C"</code>
locale, which is an environment that is typical of what many C programmers
are used to.

   <p>For systems that are not yet fully standards-compliant,
<samp><span class="command">gawk</span></samp> supplies a copy of
<code>strftime()</code> from the GNU C Library. 
It supports all of the just-listed format specifications. 
If that version is
used to compile <samp><span class="command">gawk</span></samp> (see <a href="#Installation">Installation</a>),
then the following additional format specifications are available:

     <dl>
<dt><code>%k</code><dd>The hour (24-hour clock) as a decimal number (0&ndash;23). 
Single-digit numbers are padded with a space.

     <br><dt><code>%l</code><dd>The hour (12-hour clock) as a decimal number (1&ndash;12). 
Single-digit numbers are padded with a space.

     <br><dt><code>%s</code><dd>The time as a decimal timestamp in seconds since the epoch.

   </dl>
   <!-- ENDOFRANGE strf -->

   <p>Additionally, the alternate representations are recognized but their
normal representations are used.

   <p><a name="index-g_t_0040code_007bdate_007d-utility_002c-POSIX-1449"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bdate_007d-utility-and-1450"></a>The following example is an <samp><span class="command">awk</span></samp> implementation of the POSIX
<samp><span class="command">date</span></samp> utility.  Normally, the <samp><span class="command">date</span></samp> utility prints the
current date and time of day in a well-known format.  However, if you
provide an argument to it that begins with a &lsquo;<samp><span class="samp">+</span></samp>&rsquo;, <samp><span class="command">date</span></samp>
copies nonformat specifier characters to the standard output and
interprets the current time according to the format specifiers in
the string.  For example:

<pre class="example">     $ date '+Today is %A, %B %d, %Y.'
     -| Today is Wednesday, March 30, 2011.
</pre>
   <p>Here is the <samp><span class="command">gawk</span></samp> version of the <samp><span class="command">date</span></samp> utility. 
It has a shell &ldquo;wrapper&rdquo; to handle the <samp><span class="option">-u</span></samp> option,
which requires that <samp><span class="command">date</span></samp> run as if the time zone
is set to UTC:

<pre class="example">     #! /bin/sh
     #
     # date --- approximate the POSIX 'date' command
     
     case $1 in
     -u)  TZ=UTC0     # use UTC
          export TZ
          shift ;;
     esac
     
     gawk 'BEGIN  {
         format = "%a %b %e %H:%M:%S %Z %Y"
         exitval = 0
     
         if (ARGC &gt; 2)
             exitval = 1
         else if (ARGC == 2) {
             format = ARGV[1]
             if (format ~ /^\+/)
                 format = substr(format, 2)   # remove leading +
         }
         print strftime(format)
         exit exitval
     }' "$@"
</pre>
   <!-- ENDOFRANGE tst -->
<!-- ENDOFRANGE logftst -->
<!-- ENDOFRANGE filogtst -->
<!-- ENDOFRANGE gawtst -->
<div class="node">
<a name="Bitwise-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Type-Functions">Type Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Time-Functions">Time Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din">Built-in</a>

</div>

<h4 class="subsection">9.1.6 Bit-Manipulation Functions</h4>

<!-- STARTOFRANGE bit -->
<p><a name="index-bitwise_002c-operations-1451"></a><!-- STARTOFRANGE and -->
<a name="index-AND-bitwise-operation-1452"></a><!-- STARTOFRANGE oro -->
<a name="index-OR-bitwise-operation-1453"></a><!-- STARTOFRANGE xor -->
<a name="index-XOR-bitwise-operation-1454"></a><!-- STARTOFRANGE opbit -->
<a name="index-operations_002c-bitwise-1455"></a><blockquote>
<i>I can explain it for you, but I can't understand it for you.</i><br>
Anonymous
</blockquote>

   <p>Many languages provide the ability to perform <dfn>bitwise</dfn> operations
on two integer numbers.  In other words, the operation is performed on
each successive pair of bits in the operands. 
Three common operations are bitwise AND, OR, and XOR. 
The operations are described in <a href="#table_002dbitwise_002dops">table-bitwise-ops</a>.

   <div class="float">
<a name="table_002dbitwise_002dops"></a>
<pre class="display">                     Bit Operator
               |  AND  |   OR  |  XOR
               |&mdash;+&mdash;+&mdash;+&mdash;+&mdash;+&mdash;
     Operands  | 0 | 1 | 0 | 1 | 0 | 1
     &mdash;&mdash;&mdash;&mdash;&ndash;+&mdash;+&mdash;+&mdash;+&mdash;+&mdash;+&mdash;
         0     | 0   0 | 0   1 | 0   1
         1     | 0   1 | 1   1 | 1   0
</pre>
   <p><strong class="float-caption">Table 9.6: Bitwise Operations</strong></p></div>

   <p><a name="index-bitwise_002c-complement-1456"></a><a name="index-complement_002c-bitwise-1457"></a>As you can see, the result of an AND operation is 1 only when <em>both</em>
bits are 1. 
The result of an OR operation is 1 if <em>either</em> bit is 1. 
The result of an XOR operation is 1 if either bit is 1,
but not both. 
The next operation is the <dfn>complement</dfn>; the complement of 1 is 0 and
the complement of 0 is 1. Thus, this operation &ldquo;flips&rdquo; all the bits
of a given value.

   <p><a name="index-bitwise_002c-shift-1458"></a><a name="index-left-shift_002c-bitwise-1459"></a><a name="index-right-shift_002c-bitwise-1460"></a><a name="index-shift_002c-bitwise-1461"></a>Finally, two other common operations are to shift the bits left or right. 
For example, if you have a bit string &lsquo;<samp><span class="samp">10111001</span></samp>&rsquo; and you shift it
right by three bits, you end up with &lsquo;<samp><span class="samp">00010111</span></samp>&rsquo;.<a rel="footnote" href="#fn-54" name="fnd-54"><sup>54</sup></a>
<!-- Purposely decided to use   0's   and   1's   here.  2/2001. -->
If you start over
again with &lsquo;<samp><span class="samp">10111001</span></samp>&rsquo; and shift it left by three bits, you end up
with &lsquo;<samp><span class="samp">11001000</span></samp>&rsquo;. 
<samp><span class="command">gawk</span></samp> provides built-in functions that implement the
bitwise operations just described. They are:

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-bitwise-operations-in-1462"></a>
     
<a name="index-g_t_0040code_007band_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1463"></a>
<dl><dt><code>and(</code><var>v1</var><code>, </code><var>v2</var><code>)</code><dd>Return the bitwise AND of the values provided by <var>v1</var> and <var>v2</var>.

     <p><a name="index-g_t_0040code_007bcompl_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1464"></a><br><dt><code>compl(</code><var>val</var><code>)</code><dd>Return the bitwise complement of <var>val</var>.

     <p><a name="index-g_t_0040code_007blshift_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1465"></a><br><dt><code>lshift(</code><var>val</var><code>, </code><var>count</var><code>)</code><dd>Return the value of <var>val</var>, shifted left by <var>count</var> bits.

     <p><a name="index-g_t_0040code_007bor_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1466"></a><br><dt><code>or(</code><var>v1</var><code>, </code><var>v2</var><code>)</code><dd>Return the bitwise OR of the values provided by <var>v1</var> and <var>v2</var>.

     <p><a name="index-g_t_0040code_007brshift_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1467"></a><br><dt><code>rshift(</code><var>val</var><code>, </code><var>count</var><code>)</code><dd>Return the value of <var>val</var>, shifted right by <var>count</var> bits.

     <p><a name="index-g_t_0040code_007bxor_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1468"></a><br><dt><code>xor(</code><var>v1</var><code>, </code><var>v2</var><code>)</code><dd>Return the bitwise XOR of the values provided by <var>v1</var> and <var>v2</var>. 
</dl>

   <p>For all of these functions, first the double precision floating-point value is
converted to the widest C unsigned integer type, then the bitwise operation is
performed.  If the result cannot be represented exactly as a C <code>double</code>,
leading nonzero bits are removed one by one until it can be represented
exactly.  The result is then converted back into a C <code>double</code>.  (If
you don't understand this paragraph, don't worry about it.)

   <p>Here is a user-defined function (see <a href="#User_002ddefined">User-defined</a>)
that illustrates the use of these functions:

   <p><a name="index-g_t_0040code_007bbits2str_0028_0029_007d-user_002ddefined-function-1469"></a><a name="index-g_t_0040code_007btestbits_002eawk_007d-program-1470"></a>
<pre class="example">     <!-- file eg/lib/bits2str.awk -->
     # bits2str --- turn a byte into readable 1's and 0's
     
     function bits2str(bits,        data, mask)
     {
         if (bits == 0)
             return "0"
     
         mask = 1
         for (; bits != 0; bits = rshift(bits, 1))
             data = (and(bits, mask) ? "1" : "0") data
     
         while ((length(data) % 8) != 0)
             data = "0" data
     
         return data
     }
     <!-- endfile -->
     
     <!-- this is a hack to make testbits.awk self-contained -->
     <!-- file eg/prog/testbits.awk -->
     BEGIN {
         printf "123 = %s\n", bits2str(123)
         printf "0123 = %s\n", bits2str(0123)
         printf "0x99 = %s\n", bits2str(0x99)
         comp = compl(0x99)
         printf "compl(0x99) = %#x = %s\n", comp, bits2str(comp)
         shift = lshift(0x99, 2)
         printf "lshift(0x99, 2) = %#x = %s\n", shift, bits2str(shift)
         shift = rshift(0x99, 2)
         printf "rshift(0x99, 2) = %#x = %s\n", shift, bits2str(shift)
     }
     <!-- endfile -->
</pre>
   <p class="noindent">This program produces the following output when run:

<pre class="example">     $ <kbd>gawk -f testbits.awk</kbd>
     -| 123 = 01111011
     -| 0123 = 01010011
     -| 0x99 = 10011001
     -| compl(0x99) = 0xffffff66 = 11111111111111111111111101100110
     -| lshift(0x99, 2) = 0x264 = 0000001001100100
     -| rshift(0x99, 2) = 0x26 = 00100110
</pre>
   <p><a name="index-converting_002c-strings-to-numbers-1471"></a><a name="index-strings_002c-converting-1472"></a><a name="index-numbers_002c-converting-1473"></a><a name="index-converting_002c-numbers-to-strings-1474"></a>The <code>bits2str()</code> function turns a binary number into a string. 
The number <code>1</code> represents a binary value where the rightmost bit
is set to 1.  Using this mask,
the function repeatedly checks the rightmost bit. 
ANDing the mask with the value indicates whether the
rightmost bit is 1 or not. If so, a <code>"1"</code> is concatenated onto the front
of the string. 
Otherwise, a <code>"0"</code> is added. 
The value is then shifted right by one bit and the loop continues
until there are no more 1 bits.

   <p>If the initial value is zero it returns a simple <code>"0"</code>. 
Otherwise, at the end, it pads the value with zeros to represent multiples
of 8-bit quantities. This is typical in modern computers.

   <p>The main code in the <code>BEGIN</code> rule shows the difference between the
decimal and octal values for the same numbers
(see <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>),
and then demonstrates the
results of the <code>compl()</code>, <code>lshift()</code>, and <code>rshift()</code> functions. 
<!-- ENDOFRANGE bit -->
<!-- ENDOFRANGE and -->
<!-- ENDOFRANGE oro -->
<!-- ENDOFRANGE xor -->
<!-- ENDOFRANGE opbit -->

<div class="node">
<a name="Type-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#I18N-Functions">I18N Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Bitwise-Functions">Bitwise Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din">Built-in</a>

</div>

<h4 class="subsection">9.1.7 Getting Type Information</h4>

<p><samp><span class="command">gawk</span></samp> provides a single function that lets you distinguish
an array from a scalar variable.  This is necessary for writing code
that traverses every element of a true multidimensional array
(see <a href="#Arrays-of-Arrays">Arrays of Arrays</a>).

     
<a name="index-g_t_0040code_007bisarray_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1475"></a>
<dl><dt><code>isarray(</code><var>x</var><code>)</code><dd>Return a true value if <var>x</var> is an array. Otherwise return false. 
</dl>

<div class="node">
<a name="I18N-Functions"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Type-Functions">Type Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Built_002din">Built-in</a>

</div>

<h4 class="subsection">9.1.8 String-Translation Functions</h4>

<p><a name="index-g_t_0040command_007bgawk_007d_002c-string_002dtranslation-functions-1476"></a><a name="index-functions_002c-string_002dtranslation-1477"></a><a name="index-internationalization-1478"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-internationalizing-1479"></a>
<samp><span class="command">gawk</span></samp> provides facilities for internationalizing <samp><span class="command">awk</span></samp> programs. 
These include the functions described in the following list. 
The descriptions here are purposely brief. 
See <a href="#Internationalization">Internationalization</a>,
for the full story. 
Optional parameters are enclosed in square brackets ([ ]):

     
<a name="index-g_t_0040code_007bbindtextdomain_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1480"></a>
<dl><dt><code>bindtextdomain(</code><var>directory</var> <span class="roman">[</span><code>, </code><var>domain</var><span class="roman">]</span><code>)</code><dd>Set the directory in which
<samp><span class="command">gawk</span></samp> will look for message translation files, in case they
will not or cannot be placed in the &ldquo;standard&rdquo; locations
(e.g., during testing). 
It returns the directory in which <var>domain</var> is &ldquo;bound.&rdquo;

     <p>The default <var>domain</var> is the value of <code>TEXTDOMAIN</code>. 
If <var>directory</var> is the null string (<code>""</code>), then
<code>bindtextdomain()</code> returns the current binding for the
given <var>domain</var>.

     <p><a name="index-g_t_0040code_007bdcgettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1481"></a><br><dt><code>dcgettext(</code><var>string</var> <span class="roman">[</span><code>, </code><var>domain</var> <span class="roman">[</span><code>, </code><var>category</var><span class="roman">]]</span><code>)</code><dd>Return the translation of <var>string</var> in
text domain <var>domain</var> for locale category <var>category</var>. 
The default value for <var>domain</var> is the current value of <code>TEXTDOMAIN</code>. 
The default value for <var>category</var> is <code>"LC_MESSAGES"</code>.

     <p><a name="index-g_t_0040code_007bdcngettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1482"></a><br><dt><code>dcngettext(</code><var>string1</var><code>, </code><var>string2</var><code>, </code><var>number</var> <span class="roman">[</span><code>, </code><var>domain</var> <span class="roman">[</span><code>, </code><var>category</var><span class="roman">]]</span><code>)</code><dd>Return the plural form used for <var>number</var> of the
translation of <var>string1</var> and <var>string2</var> in text domain
<var>domain</var> for locale category <var>category</var>. <var>string1</var> is the
English singular variant of a message, and <var>string2</var> the English plural
variant of the same message. 
The default value for <var>domain</var> is the current value of <code>TEXTDOMAIN</code>. 
The default value for <var>category</var> is <code>"LC_MESSAGES"</code>. 
</dl>
   <!-- ENDOFRANGE funcbi -->
<!-- ENDOFRANGE bifunc -->

<div class="node">
<a name="User-defined"></a>
<a name="User_002ddefined"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Indirect-Calls">Indirect Calls</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Built_002din">Built-in</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>

</div>

<h3 class="section">9.2 User-Defined Functions</h3>

<!-- STARTOFRANGE udfunc -->
<p><a name="index-user_002ddefined_002c-functions-1483"></a><!-- STARTOFRANGE funcud -->
<a name="index-functions_002c-user_002ddefined-1484"></a>Complicated <samp><span class="command">awk</span></samp> programs can often be simplified by defining
your own functions.  User-defined functions can be called just like
built-in ones (see <a href="#Function-Calls">Function Calls</a>), but it is up to you to define
them, i.e., to tell <samp><span class="command">awk</span></samp> what they should do.

<ul class="menu">
<li><a accesskey="1" href="#Definition-Syntax">Definition Syntax</a>:            How to write definitions and what they mean. 
<li><a accesskey="2" href="#Function-Example">Function Example</a>:             An example function definition and what it
                                does. 
<li><a accesskey="3" href="#Function-Caveats">Function Caveats</a>:             Things to watch out for. 
<li><a accesskey="4" href="#Return-Statement">Return Statement</a>:             Specifying the value a function returns. 
<li><a accesskey="5" href="#Dynamic-Typing">Dynamic Typing</a>:               How variable types can change at runtime. 
</ul>

<div class="node">
<a name="Definition-Syntax"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Function-Example">Function Example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#User_002ddefined">User-defined</a>

</div>

<h4 class="subsection">9.2.1 Function Definition Syntax</h4>

<!-- STARTOFRANGE fdef -->
<p><a name="index-functions_002c-defining-1485"></a>Definitions of functions can appear anywhere between the rules of an
<samp><span class="command">awk</span></samp> program.  Thus, the general form of an <samp><span class="command">awk</span></samp> program is
extended to include sequences of rules <em>and</em> user-defined function
definitions. 
There is no need to put the definition of a function
before all uses of the function.  This is because <samp><span class="command">awk</span></samp> reads the
entire program before starting to execute any of it.

   <p>The definition of a function named <var>name</var> looks like this:

<pre class="example">     function <var>name</var>(<span class="roman">[</span><var>parameter-list</var><span class="roman">]</span>)
     {
          <var>body-of-function</var>
     }
</pre>
   <p><a name="index-names_002c-functions-1486"></a><a name="index-functions_002c-names-of-1487"></a><a name="index-namespace-issues_002c-functions-1488"></a>Here, <var>name</var> is the name of the function to define.  A valid function
name is like a valid variable name: a sequence of letters, digits, and
underscores that doesn't start with a digit. 
Within a single <samp><span class="command">awk</span></samp> program, any particular name can only be
used as a variable, array, or function.

   <p><var>parameter-list</var> is an optional list of the function's arguments and local
variable names, separated by commas.  When the function is called,
the argument names are used to hold the argument values given in
the call.  The local variables are initialized to the empty string. 
A function cannot have two parameters with the same name, nor may it
have a parameter with the same name as the function itself.

   <p>In addition, according to the POSIX standard, function parameters cannot have the same
name as one of the special built-in variables
(see <a href="#Built_002din-Variables">Built-in Variables</a>.  Not all versions of <samp><span class="command">awk</span></samp>
enforce this restriction.

   <p>The <var>body-of-function</var> consists of <samp><span class="command">awk</span></samp> statements.  It is the
most important part of the definition, because it says what the function
should actually <em>do</em>.  The argument names exist to give the body a
way to talk about the arguments; local variables exist to give the body
places to keep temporary values.

   <p>Argument names are not distinguished syntactically from local variable
names. Instead, the number of arguments supplied when the function is
called determines how many argument variables there are.  Thus, if three
argument values are given, the first three names in <var>parameter-list</var>
are arguments and the rest are local variables.

   <p>It follows that if the number of arguments is not the same in all calls
to the function, some of the names in <var>parameter-list</var> may be
arguments on some occasions and local variables on others.  Another
way to think of this is that omitted arguments default to the
null string.

   <p><a name="index-programming-conventions_002c-functions_002c-writing-1489"></a>Usually when you write a function, you know how many names you intend to
use for arguments and how many you intend to use as local variables.  It is
conventional to place some extra space between the arguments and
the local variables, in order to document how your function is supposed to be used.

   <p><a name="index-variables_002c-shadowing-1490"></a>During execution of the function body, the arguments and local variable
values hide, or <dfn>shadow</dfn>, any variables of the same names used in the
rest of the program.  The shadowed variables are not accessible in the
function definition, because there is no way to name them while their
names have been taken away for the local variables.  All other variables
used in the <samp><span class="command">awk</span></samp> program can be referenced or set normally in the
function's body.

   <p>The arguments and local variables last only as long as the function body
is executing.  Once the body finishes, you can once again access the
variables that were shadowed while the function was running.

   <p><a name="index-recursive-functions-1491"></a><a name="index-functions_002c-recursive-1492"></a>The function body can contain expressions that call functions.  They
can even call this function, either directly or by way of another
function.  When this happens, we say the function is <dfn>recursive</dfn>. 
The act of a function calling itself is called <dfn>recursion</dfn>.

   <p>All the built-in functions return a value to their caller. 
User-defined functions can do also, using the <code>return</code> statement,
which is described in detail in <a href="#Return-Statement">Return Statement</a>. 
Many of the subsequent examples in this section use
the <code>return</code> statement.

   <p><a name="index-common-extensions_002c-_0040code_007bfunc_007d-keyword-1493"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007bfunc_007d-keyword-1494"></a><!-- @cindex @command{awk} language, POSIX version -->
<!-- @cindex POSIX @command{awk} -->
<a name="index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bfunction_007d-keyword-in-1495"></a>In many <samp><span class="command">awk</span></samp> implementations, including <samp><span class="command">gawk</span></samp>,
the keyword <code>function</code> may be
abbreviated <code>func</code>. (c.e.) 
However, POSIX only specifies the use of
the keyword <code>function</code>.  This actually has some practical implications. 
If <samp><span class="command">gawk</span></samp> is in POSIX-compatibility mode
(see <a href="#Options">Options</a>), then the following
statement does <em>not</em> define a function:

<pre class="example">     func foo() { a = sqrt($1) ; print a }
</pre>
   <p class="noindent">Instead it defines a rule that, for each record, concatenates the value
of the variable &lsquo;<samp><span class="samp">func</span></samp>&rsquo; with the return value of the function &lsquo;<samp><span class="samp">foo</span></samp>&rsquo;. 
If the resulting string is non-null, the action is executed. 
This is probably not what is desired.  (<samp><span class="command">awk</span></samp> accepts this input as
syntactically valid, because functions may be used before they are defined
in <samp><span class="command">awk</span></samp> programs.<a rel="footnote" href="#fn-55" name="fnd-55"><sup>55</sup></a>)

   <p><a name="index-portability_002c-functions_0040comma_007b_007d-defining-1496"></a>To ensure that your <samp><span class="command">awk</span></samp> programs are portable, always use the
keyword <code>function</code> when defining a function.

<div class="node">
<a name="Function-Example"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Function-Caveats">Function Caveats</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Definition-Syntax">Definition Syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#User_002ddefined">User-defined</a>

</div>

<h4 class="subsection">9.2.2 Function Definition Examples</h4>

<p>Here is an example of a user-defined function, called <code>myprint()</code>, that
takes a number and prints it in a specific format:

<pre class="example">     function myprint(num)
     {
          printf "%6.3g\n", num
     }
</pre>
   <p class="noindent">To illustrate, here is an <samp><span class="command">awk</span></samp> rule that uses our <code>myprint</code>
function:

<pre class="example">     $3 &gt; 0     { myprint($3) }
</pre>
   <p class="noindent">This program prints, in our special format, all the third fields that
contain a positive number in our input.  Therefore, when given the following input:

<pre class="example">      1.2   3.4    5.6   7.8
      9.10 11.12 -13.14 15.16
     17.18 19.20  21.22 23.24
</pre>
   <p class="noindent">this program, using our function to format the results, prints:

<pre class="example">        5.6
       21.2
</pre>
   <p>This function deletes all the elements in an array:

<pre class="example">     function delarray(a,    i)
     {
         for (i in a)
            delete a[i]
     }
</pre>
   <p>When working with arrays, it is often necessary to delete all the elements
in an array and start over with a new list of elements
(see <a href="#Delete">Delete</a>). 
Instead of having
to repeat this loop everywhere that you need to clear out
an array, your program can just call <code>delarray</code>. 
(This guarantees portability.  The use of &lsquo;<samp><span class="samp">delete </span><var>array</var></samp>&rsquo; to delete
the contents of an entire array is a nonstandard extension.)

   <p>The following is an example of a recursive function.  It takes a string
as an input parameter and returns the string in backwards order. 
Recursive functions must always have a test that stops the recursion. 
In this case, the recursion terminates when the starting position
is zero, i.e., when there are no more characters left in the string.

   <p><a name="index-g_t_0040code_007brev_0028_0029_007d-user_002ddefined-function-1497"></a>
<pre class="example">     function rev(str, start)
     {
         if (start == 0)
             return ""
     
         return (substr(str, start, 1) rev(str, start - 1))
     }
</pre>
   <p>If this function is in a file named <samp><span class="file">rev.awk</span></samp>, it can be tested
this way:

<pre class="example">     $ <kbd>echo "Don't Panic!" |</kbd>
     &gt; <kbd>gawk --source '{ print rev($0, length($0)) }' -f rev.awk</kbd>
     -| !cinaP t'noD
</pre>
   <p>The C <code>ctime()</code> function takes a timestamp and returns it in a string,
formatted in a well-known fashion. 
The following example uses the built-in <code>strftime()</code> function
(see <a href="#Time-Functions">Time Functions</a>)
to create an <samp><span class="command">awk</span></samp> version of <code>ctime()</code>:

   <p><a name="index-g_t_0040code_007bctime_0028_0029_007d-user_002ddefined-function-1498"></a>
<pre class="example">     <!-- file eg/lib/ctime.awk -->
     # ctime.awk
     #
     # awk version of C ctime(3) function
     
     function ctime(ts,    format)
     {
         format = "%a %b %e %H:%M:%S %Z %Y"
         if (ts == 0)
             ts = systime()       # use current time as default
         return strftime(format, ts)
     }
     <!-- endfile -->
</pre>
   <!-- ENDOFRANGE fdef -->
<div class="node">
<a name="Function-Caveats"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Return-Statement">Return Statement</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Function-Example">Function Example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#User_002ddefined">User-defined</a>

</div>

<h4 class="subsection">9.2.3 Calling User-Defined Functions</h4>

<!-- STARTOFRANGE fudc -->
<p>This section describes how to call a user-defined function.

<ul class="menu">
<li><a accesskey="1" href="#Calling-A-Function">Calling A Function</a>:           Don't use spaces. 
<li><a accesskey="2" href="#Variable-Scope">Variable Scope</a>:               Controlling variable scope. 
<li><a accesskey="3" href="#Pass-By-Value_002fReference">Pass By Value/Reference</a>:      Passing parameters. 
</ul>

<div class="node">
<a name="Calling-A-Function"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Variable-Scope">Variable Scope</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Function-Caveats">Function Caveats</a>

</div>

<h5 class="subsubsection">9.2.3.1 Writing A Function Call</h5>

<p><a name="index-functions_002c-user_002ddefined_002c-calling-1499"></a><dfn>Calling a function</dfn> means causing the function to run and do its job. 
A function call is an expression and its value is the value returned by
the function.

   <p>A function call consists of the function name followed by the arguments
in parentheses.  <samp><span class="command">awk</span></samp> expressions are what you write in the
call for the arguments.  Each time the call is executed, these
expressions are evaluated, and the values become the actual arguments.  For
example, here is a call to <code>foo()</code> with three arguments (the first
being a string concatenation):

<pre class="example">     foo(x y, "lose", 4 * z)
</pre>
   <blockquote>
<b>CAUTION:</b> Whitespace characters (spaces and TABs) are not allowed
between the function name and the open-parenthesis of the argument list. 
If you write whitespace by mistake, <samp><span class="command">awk</span></samp> might think that you mean
to concatenate a variable with an expression in parentheses.  However, it
notices that you used a function name and not a variable name, and reports
an error. 
</blockquote>

<div class="node">
<a name="Variable-Scope"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Pass-By-Value_002fReference">Pass By Value/Reference</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Calling-A-Function">Calling A Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Function-Caveats">Function Caveats</a>

</div>

<h5 class="subsubsection">9.2.3.2 Controlling Variable Scope</h5>

<p><a name="index-local-variables-1500"></a><a name="index-variables_002c-local-1501"></a>There is no way to make a variable local to a <code>{ ... }</code> block in
<samp><span class="command">awk</span></samp>, but you can make a variable local to a function. It is
good practice to do so whenever a variable is needed only in that
function.

   <p>To make a variable local to a function, simply declare the variable as
an argument after the actual function arguments
(see <a href="#Definition-Syntax">Definition Syntax</a>). 
Look at the following example where variable
<code>i</code> is a global variable used by both functions <code>foo()</code> and
<code>bar()</code>:

<pre class="example">     function bar()
     {
         for (i = 0; i &lt; 3; i++)
             print "bar's i=" i
     }
     
     function foo(j)
     {
         i = j + 1
         print "foo's i=" i
         bar()
         print "foo's i=" i
     }
     
     BEGIN {
           i = 10
           print "top's i=" i
           foo(0)
           print "top's i=" i
     }
</pre>
   <p>Running this script produces the following, because the <code>i</code> in
functions <code>foo()</code> and <code>bar()</code> and at the top level refer to the same
variable instance:

<pre class="example">     top's i=10
     foo's i=1
     bar's i=0
     bar's i=1
     bar's i=2
     foo's i=3
     top's i=3
</pre>
   <p>If you want <code>i</code> to be local to both <code>foo()</code> and <code>bar()</code> do as
follows (the extra-space before <code>i</code> is a coding convention to
indicate that <code>i</code> is a local variable, not an argument):

<pre class="example">     function bar(    i)
     {
         for (i = 0; i &lt; 3; i++)
             print "bar's i=" i
     }
     
     function foo(j,    i)
     {
         i = j + 1
         print "foo's i=" i
         bar()
         print "foo's i=" i
     }
     
     BEGIN {
           i = 10
           print "top's i=" i
           foo(0)
           print "top's i=" i
     }
</pre>
   <p>Running the corrected script produces the following:

<pre class="example">     top's i=10
     foo's i=1
     bar's i=0
     bar's i=1
     bar's i=2
     foo's i=1
     top's i=10
</pre>
   <div class="node">
<a name="Pass-By-Value%2fReference"></a>
<a name="Pass-By-Value_002fReference"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variable-Scope">Variable Scope</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Function-Caveats">Function Caveats</a>

</div>

<h5 class="subsubsection">9.2.3.3 Passing Function Arguments By Value Or By Reference</h5>

<p>In <samp><span class="command">awk</span></samp>, when you declare a function, there is no way to
declare explicitly whether the arguments are passed <dfn>by value</dfn> or
<dfn>by reference</dfn>.

   <p>Instead the passing convention is determined at runtime when
the function is called according to the following rule:

     <ul>
<li>If the argument is an array variable, then it is passed by reference,
<li>Otherwise the argument is passed by value. 
</ul>

   <p><a name="index-call-by-value-1502"></a>Passing an argument by value means that when a function is called, it
is given a <em>copy</em> of the value of this argument. 
The caller may use a variable as the expression for the argument, but
the called function does not know this&mdash;it only knows what value the
argument had.  For example, if you write the following code:

<pre class="example">     foo = "bar"
     z = myfunc(foo)
</pre>
   <p class="noindent">then you should not think of the argument to <code>myfunc()</code> as being
&ldquo;the variable <code>foo</code>.&rdquo;  Instead, think of the argument as the
string value <code>"bar"</code>. 
If the function <code>myfunc()</code> alters the values of its local variables,
this has no effect on any other variables.  Thus, if <code>myfunc()</code>
does this:

<pre class="example">     function myfunc(str)
     {
        print str
        str = "zzz"
        print str
     }
</pre>
   <p class="noindent">to change its first argument variable <code>str</code>, it does <em>not</em>
change the value of <code>foo</code> in the caller.  The role of <code>foo</code> in
calling <code>myfunc()</code> ended when its value (<code>"bar"</code>) was computed. 
If <code>str</code> also exists outside of <code>myfunc()</code>, the function body
cannot alter this outer value, because it is shadowed during the
execution of <code>myfunc()</code> and cannot be seen or changed from there.

   <p><a name="index-call-by-reference-1503"></a><a name="index-arrays_002c-as-parameters-to-functions-1504"></a><a name="index-functions_002c-arrays-as-parameters-to-1505"></a>However, when arrays are the parameters to functions, they are <em>not</em>
copied.  Instead, the array itself is made available for direct manipulation
by the function.  This is usually termed <dfn>call by reference</dfn>. 
Changes made to an array parameter inside the body of a function <em>are</em>
visible outside that function.

   <blockquote>
<b>NOTE:</b> Changing an array parameter inside a function
can be very dangerous if you do not watch what you are doing. 
For example:

<pre class="example">     function changeit(array, ind, nvalue)
     {
          array[ind] = nvalue
     }
     
     BEGIN {
         a[1] = 1; a[2] = 2; a[3] = 3
         changeit(a, 2, "two")
         printf "a[1] = %s, a[2] = %s, a[3] = %s\n",
                 a[1], a[2], a[3]
     }
</pre>
   <p class="noindent">prints &lsquo;<samp><span class="samp">a[1] = 1, a[2] = two, a[3] = 3</span></samp>&rsquo;, because
<code>changeit</code> stores <code>"two"</code> in the second element of <code>a</code>. 
</blockquote>

   <p><a name="index-undefined-functions-1506"></a><a name="index-functions_002c-undefined-1507"></a>Some <samp><span class="command">awk</span></samp> implementations allow you to call a function that
has not been defined. They only report a problem at runtime when the
program actually tries to call the function. For example:

<pre class="example">     BEGIN {
         if (0)
             foo()
         else
             bar()
     }
     function bar() { ... }
     # note that `foo' is not defined
</pre>
   <p class="noindent">Because the &lsquo;<samp><span class="samp">if</span></samp>&rsquo; statement will never be true, it is not really a
problem that <code>foo()</code> has not been defined.  Usually, though, it is a
problem if a program calls an undefined function.

   <p><a name="index-lint-checking_002c-undefined-functions-1508"></a>If <samp><span class="option">--lint</span></samp> is specified
(see <a href="#Options">Options</a>),
<samp><span class="command">gawk</span></samp> reports calls to undefined functions.

   <p><a name="index-portability_002c-_0040code_007bnext_007d-statement-in-user_002ddefined-functions-1509"></a>Some <samp><span class="command">awk</span></samp> implementations generate a runtime
error if you use the <code>next</code> statement
(see <a href="#Next-Statement">Next Statement</a>)
inside a user-defined function. 
<samp><span class="command">gawk</span></samp> does not have this limitation. 
<!-- ENDOFRANGE fudc -->

<div class="node">
<a name="Return-Statement"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Dynamic-Typing">Dynamic Typing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Function-Caveats">Function Caveats</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#User_002ddefined">User-defined</a>

</div>

<h4 class="subsection">9.2.4 The <code>return</code> Statement</h4>

<p><a name="index-g_t_0040code_007breturn_007d-statement_0040comma_007b_007d-user_002ddefined-functions-1510"></a>
As seen in several earlier examples,
the body of a user-defined function can contain a <code>return</code> statement. 
This statement returns control to the calling part of the <samp><span class="command">awk</span></samp> program.  It
can also be used to return a value for use in the rest of the <samp><span class="command">awk</span></samp>
program.  It looks like this:

<pre class="example">     return <span class="roman">[</span><var>expression</var><span class="roman">]</span>
</pre>
   <p>The <var>expression</var> part is optional. 
Due most likely to an oversight, POSIX does not define what the return
value is if you omit the <var>expression</var>.  Technically speaking, this
make the returned value undefined, and therefore, unpredictable. 
In practice, though, all versions of <samp><span class="command">awk</span></samp> simply return the
null string, which acts like zero if used in a numeric context.

   <p>A <code>return</code> statement with no value expression is assumed at the end of
every function definition.  So if control reaches the end of the function
body, then technically, the function returns an unpredictable value. 
In practice, it returns the empty string.  <samp><span class="command">awk</span></samp>
does <em>not</em> warn you if you use the return value of such a function.

   <p>Sometimes, you want to write a function for what it does, not for
what it returns.  Such a function corresponds to a <code>void</code> function
in C, C++ or Java, or to a <code>procedure</code> in Ada.  Thus, it may be appropriate to not
return any value; simply bear in mind that you should not be using the
return value of such a function.

   <p>The following is an example of a user-defined function that returns a value
for the largest number among the elements of an array:

<pre class="example">     function maxelt(vec,   i, ret)
     {
          for (i in vec) {
               if (ret == "" || vec[i] &gt; ret)
                    ret = vec[i]
          }
          return ret
     }
</pre>
   <p><a name="index-programming-conventions_002c-function-parameters-1511"></a>You call <code>maxelt()</code> with one argument, which is an array name.  The local
variables <code>i</code> and <code>ret</code> are not intended to be arguments;
while there is nothing to stop you from passing more than one argument
to <code>maxelt()</code>, the results would be strange.  The extra space before
<code>i</code> in the function parameter list indicates that <code>i</code> and
<code>ret</code> are local variables. 
You should follow this convention when defining functions.

   <p>The following program uses the <code>maxelt()</code> function.  It loads an
array, calls <code>maxelt()</code>, and then reports the maximum number in that
array:

<pre class="example">     function maxelt(vec,   i, ret)
     {
          for (i in vec) {
               if (ret == "" || vec[i] &gt; ret)
                    ret = vec[i]
          }
          return ret
     }
     
     # Load all fields of each record into nums.
     {
          for(i = 1; i &lt;= NF; i++)
               nums[NR, i] = $i
     }
     
     END {
          print maxelt(nums)
     }
</pre>
   <p>Given the following input:

<pre class="example">      1 5 23 8 16
     44 3 5 2 8 26
     256 291 1396 2962 100
     -6 467 998 1101
     99385 11 0 225
</pre>
   <p class="noindent">the program reports (predictably) that 99,385 is the largest value
in the array.

<div class="node">
<a name="Dynamic-Typing"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Return-Statement">Return Statement</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#User_002ddefined">User-defined</a>

</div>

<h4 class="subsection">9.2.5 Functions and Their Effects on Variable Typing</h4>

<p><samp><span class="command">awk</span></samp> is a very fluid language. 
It is possible that <samp><span class="command">awk</span></samp> can't tell if an identifier
represents a scalar variable or an array until runtime. 
Here is an annotated sample program:

<pre class="example">     function foo(a)
     {
         a[1] = 1   # parameter is an array
     }
     
     BEGIN {
         b = 1
         foo(b)  # invalid: fatal type mismatch
     
         foo(x)  # x uninitialized, becomes an array dynamically
         x = 1   # now not allowed, runtime error
     }
</pre>
   <p>Usually, such things aren't a big issue, but it's worth
being aware of them. 
<!-- ENDOFRANGE udfunc -->

<div class="node">
<a name="Indirect-Calls"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#User_002ddefined">User-defined</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Functions">Functions</a>

</div>

<h3 class="section">9.3 Indirect Function Calls</h3>

<p><a name="index-indirect-function-calls-1512"></a><a name="index-function-calls_002c-indirect-1513"></a><a name="index-function-pointers-1514"></a><a name="index-pointers-to-functions-1515"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-indirect-function-calls-1516"></a>
This section describes a <samp><span class="command">gawk</span></samp>-specific extension.

   <p>Often, you may wish to defer the choice of function to call until runtime. 
For example, you may have different kinds of records, each of which
should be processed differently.

   <p>Normally, you would have to use a series of <code>if</code>-<code>else</code>
statements to decide which function to call.  By using <dfn>indirect</dfn>
function calls, you can specify the name of the function to call as a
string variable, and then call the function.  Let's look at an example.

   <p>Suppose you have a file with your test scores for the classes you
are taking.  The first field is the class name. The following fields
are the functions to call to process the data, up to a &ldquo;marker&rdquo;
field &lsquo;<samp><span class="samp">data:</span></samp>&rsquo;.  Following the marker, to the end of the record,
are the various numeric test scores.

   <p>Here is the initial file; you wish to get the sum and the average of
your test scores:

<pre class="example">     <!-- file eg/data/class_data1 -->
     Biology_101 sum average data: 87.0 92.4 78.5 94.9
     Chemistry_305 sum average data: 75.2 98.3 94.7 88.2
     English_401 sum average data: 100.0 95.6 87.1 93.4
     <!-- endfile -->
</pre>
   <p>To process the data, you might write initially:

<pre class="example">     {
         class = $1
         for (i = 2; $i != "data:"; i++) {
             if ($i == "sum")
                 sum()   # processes the whole record
             else if ($i == "average")
                 average()
             ...           # and so on
         }
     }
</pre>
   <p class="noindent">This style of programming works, but can be awkward.  With <dfn>indirect</dfn>
function calls, you tell <samp><span class="command">gawk</span></samp> to use the <em>value</em> of a
variable as the name of the function to call.

   <p>The syntax is similar to that of a regular function call: an identifier
immediately followed by a left parenthesis, any arguments, and then
a closing right parenthesis, with the addition of a leading &lsquo;<samp><span class="samp">@</span></samp>&rsquo;
character:

<pre class="example">     the_func = "sum"
     result = @the_func()   # calls the `sum' function
</pre>
   <p>Here is a full program that processes the previously shown data,
using indirect function calls.

<pre class="example">     <!-- file eg/prog/indirectcall.awk -->
     # indirectcall.awk --- Demonstrate indirect function calls
     <!-- endfile -->
     
     <!-- file eg/prog/indirectcall.awk -->
     # average --- return the average of the values in fields $first - $last
     
     function average(first, last,   sum, i)
     {
         sum = 0;
         for (i = first; i &lt;= last; i++)
             sum += $i
     
         return sum / (last - first + 1)
     }
     
     # sum --- return the sum of the values in fields $first - $last
     
     function sum(first, last,   ret, i)
     {
         ret = 0;
         for (i = first; i &lt;= last; i++)
             ret += $i
     
         return ret
     }
     <!-- endfile -->
</pre>
   <p>These two functions expect to work on fields; thus the parameters
<code>first</code> and <code>last</code> indicate where in the fields to start and end. 
Otherwise they perform the expected computations and are not unusual.

<pre class="example">     <!-- file eg/prog/indirectcall.awk -->
     # For each record, print the class name and the requested statistics
     
     {
         class_name = $1
         gsub(/_/, " ", class_name)  # Replace _ with spaces
     
         # find start
         for (i = 1; i &lt;= NF; i++) {
             if ($i == "data:") {
                 start = i + 1
                 break
             }
         }
     
         printf("%s:\n", class_name)
         for (i = 2; $i != "data:"; i++) {
             the_function = $i
             printf("\t%s: &lt;%s&gt;\n", $i, @the_function(start, NF) "")
         }
         print ""
     }
     <!-- endfile -->
</pre>
   <p>This is the main processing for each record. It prints the class name (with
underscores replaced with spaces). It then finds the start of the actual data,
saving it in <code>start</code>. 
The last part of the code loops through each function name (from <code>$2</code> up to
the marker, &lsquo;<samp><span class="samp">data:</span></samp>&rsquo;), calling the function named by the field. The indirect
function call itself occurs as a parameter in the call to <code>printf</code>. 
(The <code>printf</code> format string uses &lsquo;<samp><span class="samp">%s</span></samp>&rsquo; as the format specifier so that we
can use functions that return strings, as well as numbers. Note that the result
from the indirect call is concatenated with the empty string, in order to force
it to be a string value.)

   <p>Here is the result of running the program:

<pre class="example">     $ <kbd>gawk -f indirectcall.awk class_data1</kbd>
     -| Biology 101:
     -|     sum: &lt;352.8&gt;
     -|     average: &lt;88.2&gt;
     -|
     -| Chemistry 305:
     -|     sum: &lt;356.4&gt;
     -|     average: &lt;89.1&gt;
     -|
     -| English 401:
     -|     sum: &lt;376.1&gt;
     -|     average: &lt;94.025&gt;
</pre>
   <p>The ability to use indirect function calls is more powerful than you may
think at first.  The C and C++ languages provide &ldquo;function pointers,&rdquo; which
are a mechanism for calling a function chosen at runtime.  One of the most
well-known uses of this ability is the C <code>qsort()</code> function, which sorts
an array using the famous &ldquo;quick sort&rdquo; algorithm
(see <a href="http://en.wikipedia.org/wiki/Quick_sort">the Wikipedia article</a>
for more information).  To use this function, you supply a pointer to a comparison
function.  This mechanism allows you to sort arbitrary data in an arbitrary
fashion.

   <p>We can do something similar using <samp><span class="command">gawk</span></samp>, like this:

<pre class="example">     <!-- file eg/lib/quicksort.awk -->
     # quicksort.awk --- Quicksort algorithm, with user-supplied
     #                   comparison function
     <!-- endfile -->
     <!-- file eg/lib/quicksort.awk -->
     # quicksort --- C.A.R. Hoare's quick sort algorithm. See Wikipedia
     #               or almost any algorithms or computer science text
     <!-- endfile -->
     <!-- file eg/lib/quicksort.awk -->
     
     function quicksort(data, left, right, less_than,    i, last)
     {
         if (left &gt;= right)  # do nothing if array contains fewer
             return          # than two elements
     
         quicksort_swap(data, left, int((left + right) / 2))
         last = left
         for (i = left + 1; i &lt;= right; i++)
             if (@less_than(data[i], data[left]))
                 quicksort_swap(data, ++last, i)
         quicksort_swap(data, left, last)
         quicksort(data, left, last - 1, less_than)
         quicksort(data, last + 1, right, less_than)
     }
     
     # quicksort_swap --- helper function for quicksort, should really be inline
     
     function quicksort_swap(data, i, j, temp)
     {
         temp = data[i]
         data[i] = data[j]
         data[j] = temp
     }
     <!-- endfile -->
</pre>
   <p>The <code>quicksort()</code> function receives the <code>data</code> array, the starting and ending
indices to sort (<code>left</code> and <code>right</code>), and the name of a function that
performs a &ldquo;less than&rdquo; comparison.  It then implements the quick sort algorithm.

   <p>To make use of the sorting function, we return to our previous example. The
first thing to do is write some comparison functions:

<pre class="example">     <!-- file eg/prog/indirectcall.awk -->
     # num_lt --- do a numeric less than comparison
     
     function num_lt(left, right)
     {
         return ((left + 0) &lt; (right + 0))
     }
     
     # num_ge --- do a numeric greater than or equal to comparison
     
     function num_ge(left, right)
     {
         return ((left + 0) &gt;= (right + 0))
     }
     <!-- endfile -->
</pre>
   <p>The <code>num_ge()</code> function is needed to perform a descending sort; when used
to perform a &ldquo;less than&rdquo; test, it actually does the opposite (greater than
or equal to), which yields data sorted in descending order.

   <p>Next comes a sorting function.  It is parameterized with the starting and
ending field numbers and the comparison function. It builds an array with
the data and calls <code>quicksort</code> appropriately, and then formats the
results as a single string:

<pre class="example">     <!-- file eg/prog/indirectcall.awk -->
     # do_sort --- sort the data according to `compare'
     #             and return it as a string
     
     function do_sort(first, last, compare,      data, i, retval)
     {
         delete data
         for (i = 1; first &lt;= last; first++) {
             data[i] = $first
             i++
         }
     
         quicksort(data, 1, i-1, compare)
     
         retval = data[1]
         for (i = 2; i in data; i++)
             retval = retval " " data[i]
     
         return retval
     }
     <!-- endfile -->
</pre>
   <p>Finally, the two sorting functions call <code>do_sort()</code>, passing in the
names of the two comparison functions:

<pre class="example">     <!-- file eg/prog/indirectcall.awk -->
     # sort --- sort the data in ascending order and return it as a string
     
     function sort(first, last)
     {
         return do_sort(first, last, "num_lt")
     }
     
     # rsort --- sort the data in descending order and return it as a string
     
     function rsort(first, last)
     {
         return do_sort(first, last, "num_ge")
     }
     <!-- endfile -->
</pre>
   <p>Here is an extended version of the data file:

<pre class="example">     <!-- file eg/data/class_data2 -->
     Biology_101 sum average sort rsort data: 87.0 92.4 78.5 94.9
     Chemistry_305 sum average sort rsort data: 75.2 98.3 94.7 88.2
     English_401 sum average sort rsort data: 100.0 95.6 87.1 93.4
     <!-- endfile -->
</pre>
   <p>Finally, here are the results when the enhanced program is run:

<pre class="example">     $ <kbd>gawk -f quicksort.awk -f indirectcall.awk class_data2</kbd>
     -| Biology 101:
     -|     sum: &lt;352.8&gt;
     -|     average: &lt;88.2&gt;
     -|     sort: &lt;78.5 87.0 92.4 94.9&gt;
     -|     rsort: &lt;94.9 92.4 87.0 78.5&gt;
     -|
     -| Chemistry 305:
     -|     sum: &lt;356.4&gt;
     -|     average: &lt;89.1&gt;
     -|     sort: &lt;75.2 88.2 94.7 98.3&gt;
     -|     rsort: &lt;98.3 94.7 88.2 75.2&gt;
     -|
     -| English 401:
     -|     sum: &lt;376.1&gt;
     -|     average: &lt;94.025&gt;
     -|     sort: &lt;87.1 93.4 95.6 100.0&gt;
     -|     rsort: &lt;100.0 95.6 93.4 87.1&gt;
</pre>
   <p>Remember that you must supply a leading &lsquo;<samp><span class="samp">@</span></samp>&rsquo; in front of an indirect function call.

   <p>Unfortunately, indirect function calls cannot be used with the built-in functions.  However,
you can generally write &ldquo;wrapper&rdquo; functions which call the built-in ones, and those can
be called indirectly. (Other than, perhaps, the mathematical functions, there is not a lot
of reason to try to call the built-in functions indirectly.)

   <p><samp><span class="command">gawk</span></samp> does its best to make indirect function calls efficient. 
For example, in the following case:

<pre class="example">     for (i = 1; i &lt;= n; i++)
         @the_func()
</pre>
   <p class="noindent"><code>gawk</code> will look up the actual function to call only once.

<!-- ENDOFRANGE funcud -->
<div class="node">
<a name="Internationalization"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Advanced-Features">Advanced Features</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Functions">Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">10 Internationalization with <samp><span class="command">gawk</span></samp></h2>

<p>Once upon a time, computer makers
wrote software that worked only in English. 
Eventually, hardware and software vendors noticed that if their
systems worked in the native languages of non-English-speaking
countries, they were able to sell more systems. 
As a result, internationalization and localization
of programs and software systems became a common practice.

<!-- STARTOFRANGE inloc -->
   <p><a name="index-internationalization_002c-localization-1517"></a><a name="index-g_t_0040command_007bgawk_007d_002c-internationalization-and_002c-See-internationalization-1518"></a><a name="index-internationalization_002c-localization_002c-_0040command_007bgawk_007d-and-1519"></a>For many years, the ability to provide internationalization
was largely restricted to programs written in C and C++. 
This chapter describes the underlying library <samp><span class="command">gawk</span></samp>
uses for internationalization, as well as how
<samp><span class="command">gawk</span></samp> makes internationalization
features available at the <samp><span class="command">awk</span></samp> program level. 
Having internationalization available at the <samp><span class="command">awk</span></samp> level
gives software developers additional flexibility&mdash;they are no
longer forced to write in C or C++ when internationalization is
a requirement.

<ul class="menu">
<li><a accesskey="1" href="#I18N-and-L10N">I18N and L10N</a>:                Internationalization and Localization. 
<li><a accesskey="2" href="#Explaining-gettext">Explaining gettext</a>:           How GNU <code>gettext</code> works. 
<li><a accesskey="3" href="#Programmer-i18n">Programmer i18n</a>:              Features for the programmer. 
<li><a accesskey="4" href="#Translator-i18n">Translator i18n</a>:              Features for the translator. 
<li><a accesskey="5" href="#I18N-Example">I18N Example</a>:                 A simple i18n example. 
<li><a accesskey="6" href="#Gawk-I18N">Gawk I18N</a>:                    <samp><span class="command">gawk</span></samp> is also internationalized. 
</ul>

<div class="node">
<a name="I18N-and-L10N"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Explaining-gettext">Explaining gettext</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internationalization">Internationalization</a>

</div>

<h3 class="section">10.1 Internationalization and Localization</h3>

<p><a name="index-internationalization-1520"></a><a name="index-localization_002c-See-internationalization_0040comma_007b_007d-localization-1521"></a><a name="index-localization-1522"></a><dfn>Internationalization</dfn> means writing (or modifying) a program once,
in such a way that it can use multiple languages without requiring
further source-code changes. 
<dfn>Localization</dfn> means providing the data necessary for an
internationalized program to work in a particular language. 
Most typically, these terms refer to features such as the language
used for printing error messages, the language used to read
responses, and information related to how numerical and
monetary values are printed and read.

<div class="node">
<a name="Explaining-gettext"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Programmer-i18n">Programmer i18n</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#I18N-and-L10N">I18N and L10N</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internationalization">Internationalization</a>

</div>

<h3 class="section">10.2 GNU <code>gettext</code></h3>

<p><a name="index-internationalizing-a-program-1523"></a><!-- STARTOFRANGE gettex -->
<a name="index-g_t_0040code_007bgettext_007d-library-1524"></a>The facilities in GNU <code>gettext</code> focus on messages; strings printed
by a program, either directly or via formatting with <code>printf</code> or
<code>sprintf()</code>.<a rel="footnote" href="#fn-56" name="fnd-56"><sup>56</sup></a>

   <p><a name="index-portability_002c-_0040code_007bgettext_007d-library-and-1525"></a>When using GNU <code>gettext</code>, each application has its own
<dfn>text domain</dfn>.  This is a unique name, such as &lsquo;<samp><span class="samp">kpilot</span></samp>&rsquo; or &lsquo;<samp><span class="samp">gawk</span></samp>&rsquo;,
that identifies the application. 
A complete application may have multiple components&mdash;programs written
in C or C++, as well as scripts written in <samp><span class="command">sh</span></samp> or <samp><span class="command">awk</span></samp>. 
All of the components use the same text domain.

   <p>To make the discussion concrete, assume we're writing an application
named <samp><span class="command">guide</span></samp>.  Internationalization consists of the
following steps, in this order:

     <ol type=1 start=1>
<li>The programmer goes
through the source for all of <samp><span class="command">guide</span></samp>'s components
and marks each string that is a candidate for translation. 
For example, <code>"`-F': option required"</code> is a good candidate for translation. 
A table with strings of option names is not (e.g., <samp><span class="command">gawk</span></samp>'s
<samp><span class="option">--profile</span></samp> option should remain the same, no matter what the local
language).

     <p><a name="index-g_t_0040code_007btextdomain_0028_0029_007d-function-_0028C-library_0029-1526"></a><li>The programmer indicates the application's text domain
(<code>"guide"</code>) to the <code>gettext</code> library,
by calling the <code>textdomain()</code> function.

     <p><a name="index-g_t_0040code_007b_002epot_007d-files-1527"></a><a name="index-files_002c-_0040code_007b_002epot_007d-1528"></a><a name="index-portable-object-template-files-1529"></a><a name="index-files_002c-portable-object-template-1530"></a><li>Messages from the application are extracted from the source code and
collected into a portable object template file (<samp><span class="file">guide.pot</span></samp>),
which lists the strings and their translations. 
The translations are initially empty. 
The original (usually English) messages serve as the key for
lookup of the translations.

     <p><a name="index-g_t_0040code_007b_002epo_007d-files-1531"></a><a name="index-files_002c-_0040code_007b_002epo_007d-1532"></a><a name="index-portable-object-files-1533"></a><a name="index-files_002c-portable-object-1534"></a><li>For each language with a translator, <samp><span class="file">guide.pot</span></samp>
is copied to a portable object file (<code>.po</code>)
and translations are created and shipped with the application. 
For example, there might be a <samp><span class="file">fr.po</span></samp> for a French translation.

     <p><a name="index-g_t_0040code_007b_002emo_007d-files-1535"></a><a name="index-files_002c-_0040code_007b_002emo_007d-1536"></a><a name="index-message-object-files-1537"></a><a name="index-files_002c-message-object-1538"></a><li>Each language's <samp><span class="file">.po</span></samp> file is converted into a binary
message object (<samp><span class="file">.mo</span></samp>) file. 
A message object file contains the original messages and their
translations in a binary format that allows fast lookup of translations
at runtime.

     <li>When <samp><span class="command">guide</span></samp> is built and installed, the binary translation files
are installed in a standard place.

     <p><a name="index-g_t_0040code_007bbindtextdomain_0028_0029_007d-function-_0028C-library_0029-1539"></a><li>For testing and development, it is possible to tell <code>gettext</code>
to use <samp><span class="file">.mo</span></samp> files in a different directory than the standard
one by using the <code>bindtextdomain()</code> function.

     <p><a name="index-g_t_0040code_007b_002emo_007d-files_002c-specifying-directory-of-1540"></a><a name="index-files_002c-_0040code_007b_002emo_007d_002c-specifying-directory-of-1541"></a><a name="index-message-object-files_002c-specifying-directory-of-1542"></a><a name="index-files_002c-message-object_002c-specifying-directory-of-1543"></a><li>At runtime, <samp><span class="command">guide</span></samp> looks up each string via a call
to <code>gettext()</code>.  The returned string is the translated string
if available, or the original string if not.

     <li>If necessary, it is possible to access messages from a different
text domain than the one belonging to the application, without
having to switch the application's default text domain back
and forth.
        </ol>

   <p><a name="index-g_t_0040code_007bgettext_0028_0029_007d-function-_0028C-library_0029-1544"></a>In C (or C++), the string marking and dynamic translation lookup
are accomplished by wrapping each string in a call to <code>gettext()</code>:

<pre class="example">     printf("%s", gettext("Don't Panic!\n"));
</pre>
   <p>The tools that extract messages from source code pull out all
strings enclosed in calls to <code>gettext()</code>.

   <p><a name="index-g_t_0040code_007b_005f_007d-_0028underscore_0029_002c-_0040code_007b_005f_007d-C-macro-1545"></a><a name="index-underscore-_0028_0040code_007b_005f_007d_0029_002c-_0040code_007b_005f_007d-C-macro-1546"></a>The GNU <code>gettext</code> developers, recognizing that typing
&lsquo;<samp><span class="samp">gettext(...)</span></samp>&rsquo; over and over again is both painful and ugly to look
at, use the macro &lsquo;<samp><span class="samp">_</span></samp>&rsquo; (an underscore) to make things easier:

<pre class="example">     /* In the standard header file: */
     #define _(str) gettext(str)
     
     /* In the program text: */
     printf("%s", _("Don't Panic!\n"));
</pre>
   <p><a name="index-internationalization_002c-localization_002c-locale-categories-1547"></a><a name="index-g_t_0040code_007bgettext_007d-library_002c-locale-categories-1548"></a><a name="index-locale-categories-1549"></a>This reduces the typing overhead to just three extra characters per string
and is considerably easier to read as well.

   <p>There are locale <dfn>categories</dfn>
for different types of locale-related information. 
The defined locale categories that <code>gettext</code> knows about are:

     
<a name="index-g_t_0040code_007bLC_005fMESSAGES_007d-locale-category-1550"></a>
<dl><dt><code>LC_MESSAGES</code><dd>Text messages.  This is the default category for <code>gettext</code>
operations, but it is possible to supply a different one explicitly,
if necessary.  (It is almost never necessary to supply a different category.)

     <p><a name="index-sorting-characters-in-different-languages-1551"></a><a name="index-g_t_0040code_007bLC_005fCOLLATE_007d-locale-category-1552"></a><br><dt><code>LC_COLLATE</code><dd>Text-collation information; i.e., how different characters
and/or groups of characters sort in a given language.

     <p><a name="index-g_t_0040code_007bLC_005fCTYPE_007d-locale-category-1553"></a><br><dt><code>LC_CTYPE</code><dd>Character-type information (alphabetic, digit, upper- or lowercase, and
so on). 
This information is accessed via the
POSIX character classes in regular expressions,
such as <code>/[[:alnum:]]/</code>
(see <a href="#Regexp-Operators">Regexp Operators</a>).

     <p><a name="index-monetary-information_002c-localization-1554"></a><a name="index-currency-symbols_002c-localization-1555"></a><a name="index-g_t_0040code_007bLC_005fMONETARY_007d-locale-category-1556"></a><br><dt><code>LC_MONETARY</code><dd>Monetary information, such as the currency symbol, and whether the
symbol goes before or after a number.

     <p><a name="index-g_t_0040code_007bLC_005fNUMERIC_007d-locale-category-1557"></a><br><dt><code>LC_NUMERIC</code><dd>Numeric information, such as which characters to use for the decimal
point and the thousands separator.<a rel="footnote" href="#fn-57" name="fnd-57"><sup>57</sup></a>

     <p><a name="index-g_t_0040code_007bLC_005fRESPONSE_007d-locale-category-1558"></a><br><dt><code>LC_RESPONSE</code><dd>Response information, such as how &ldquo;yes&rdquo; and &ldquo;no&rdquo; appear in the
local language, and possibly other information as well.

     <p><a name="index-time_002c-localization-and-1559"></a><a name="index-dates_002c-information-related-to_0040comma_007b_007d-localization-1560"></a><a name="index-g_t_0040code_007bLC_005fTIME_007d-locale-category-1561"></a><br><dt><code>LC_TIME</code><dd>Time- and date-related information, such as 12- or 24-hour clock, month printed
before or after the day in a date, local month abbreviations, and so on.

     <p><a name="index-g_t_0040code_007bLC_005fALL_007d-locale-category-1562"></a><br><dt><code>LC_ALL</code><dd>All of the above.  (Not too useful in the context of <code>gettext</code>.) 
</dl>
   <!-- ENDOFRANGE gettex -->

<div class="node">
<a name="Programmer-i18n"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Translator-i18n">Translator i18n</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Explaining-gettext">Explaining gettext</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internationalization">Internationalization</a>

</div>

<h3 class="section">10.3 Internationalizing <samp><span class="command">awk</span></samp> Programs</h3>

<!-- STARTOFRANGE inap -->
<p><a name="index-g_t_0040command_007bawk_007d-programs_002c-internationalizing-1563"></a>
<samp><span class="command">gawk</span></samp> provides the following variables and functions for
internationalization:

     
<a name="index-g_t_0040code_007bTEXTDOMAIN_007d-variable-1564"></a>
<dl><dt><code>TEXTDOMAIN</code><dd>This variable indicates the application's text domain. 
For compatibility with GNU <code>gettext</code>, the default
value is <code>"messages"</code>.

     <p><a name="index-internationalization_002c-localization_002c-marked-strings-1565"></a><a name="index-strings_002c-for-localization-1566"></a><br><dt><code>_"your message here"</code><dd>String constants marked with a leading underscore
are candidates for translation at runtime. 
String constants without a leading underscore are not translated.

     <p><a name="index-g_t_0040code_007bdcgettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1567"></a><br><dt><code>dcgettext(</code><var>string</var> <span class="roman">[</span><code>, </code><var>domain</var> <span class="roman">[</span><code>, </code><var>category</var><span class="roman">]]</span><code>)</code><dd>Return the translation of <var>string</var> in
text domain <var>domain</var> for locale category <var>category</var>. 
The default value for <var>domain</var> is the current value of <code>TEXTDOMAIN</code>. 
The default value for <var>category</var> is <code>"LC_MESSAGES"</code>.

     <p>If you supply a value for <var>category</var>, it must be a string equal to
one of the known locale categories described in
the previous section. 
You must also supply a text domain.  Use <code>TEXTDOMAIN</code> if
you want to use the current domain.

     <blockquote>
<b>CAUTION:</b> The order of arguments to the <samp><span class="command">awk</span></samp> version
of the <code>dcgettext()</code> function is purposely different from the order for
the C version.  The <samp><span class="command">awk</span></samp> version's order was
chosen to be simple and to allow for reasonable <samp><span class="command">awk</span></samp>-style
default arguments. 
</blockquote>

     <p><a name="index-g_t_0040code_007bdcngettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1568"></a><br><dt><code>dcngettext(</code><var>string1</var><code>, </code><var>string2</var><code>, </code><var>number</var> <span class="roman">[</span><code>, </code><var>domain</var> <span class="roman">[</span><code>, </code><var>category</var><span class="roman">]]</span><code>)</code><dd>Return the plural form used for <var>number</var> of the
translation of <var>string1</var> and <var>string2</var> in text domain
<var>domain</var> for locale category <var>category</var>. <var>string1</var> is the
English singular variant of a message, and <var>string2</var> the English plural
variant of the same message. 
The default value for <var>domain</var> is the current value of <code>TEXTDOMAIN</code>. 
The default value for <var>category</var> is <code>"LC_MESSAGES"</code>.

     <p>The same remarks about argument order as for the <code>dcgettext()</code> function apply.

     <p><a name="index-g_t_0040code_007b_002emo_007d-files_002c-specifying-directory-of-1569"></a><a name="index-files_002c-_0040code_007b_002emo_007d_002c-specifying-directory-of-1570"></a><a name="index-message-object-files_002c-specifying-directory-of-1571"></a><a name="index-files_002c-message-object_002c-specifying-directory-of-1572"></a><a name="index-g_t_0040code_007bbindtextdomain_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1573"></a><br><dt><code>bindtextdomain(</code><var>directory</var> <span class="roman">[</span><code>, </code><var>domain</var><span class="roman">]</span><code>)</code><dd>Change the directory in which
<code>gettext</code> looks for <samp><span class="file">.mo</span></samp> files, in case they
will not or cannot be placed in the standard locations
(e.g., during testing). 
Return the directory in which <var>domain</var> is &ldquo;bound.&rdquo;

     <p>The default <var>domain</var> is the value of <code>TEXTDOMAIN</code>. 
If <var>directory</var> is the null string (<code>""</code>), then
<code>bindtextdomain()</code> returns the current binding for the
given <var>domain</var>. 
</dl>

   <p>To use these facilities in your <samp><span class="command">awk</span></samp> program, follow the steps
outlined in
the previous section,
like so:

     <ol type=1 start=1>
<a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bTEXTDOMAIN_007d-variable-and-1574"></a><a name="index-g_t_0040code_007bTEXTDOMAIN_007d-variable_002c-_0040code_007bBEGIN_007d-pattern-and-1575"></a><li>Set the variable <code>TEXTDOMAIN</code> to the text domain of
your program.  This is best done in a <code>BEGIN</code> rule
(see <a href="#BEGIN_002fEND">BEGIN/END</a>),
or it can also be done via the <samp><span class="option">-v</span></samp> command-line
option (see <a href="#Options">Options</a>):

     <pre class="example">          BEGIN {
              TEXTDOMAIN = "guide"
              ...
          }
</pre>
     <p><a name="index-g_t_0040code_007b_005f_007d-_0028underscore_0029_002c-translatable-string-1576"></a><a name="index-underscore-_0028_0040code_007b_005f_007d_0029_002c-translatable-string-1577"></a><li>Mark all translatable strings with a leading underscore (&lsquo;<samp><span class="samp">_</span></samp>&rsquo;)
character.  It <em>must</em> be adjacent to the opening
quote of the string.  For example:

     <pre class="example">          print _"hello, world"
          x = _"you goofed"
          printf(_"Number of users is %d\n", nusers)
</pre>
     <li>If you are creating strings dynamically, you can
still translate them, using the <code>dcgettext()</code>
built-in function:

     <pre class="example">          message = nusers " users logged in"
          message = dcgettext(message, "adminprog")
          print message
</pre>
     <p>Here, the call to <code>dcgettext()</code> supplies a different
text domain (<code>"adminprog"</code>) in which to find the
message, but it uses the default <code>"LC_MESSAGES"</code> category.

     <p><a name="index-g_t_0040code_007bLC_005fMESSAGES_007d-locale-category_002c-_0040code_007bbindtextdomain_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1578"></a><li>During development, you might want to put the <samp><span class="file">.mo</span></samp>
file in a private directory for testing.  This is done
with the <code>bindtextdomain()</code> built-in function:

     <pre class="example">          BEGIN {
             TEXTDOMAIN = "guide"   # our text domain
             if (Testing) {
                 # where to find our files
                 bindtextdomain("testdir")
                 # joe is in charge of adminprog
                 bindtextdomain("../joe/testdir", "adminprog")
             }
             ...
          }
</pre>
        </ol>

   <p>See <a href="#I18N-Example">I18N Example</a>,
for an example program showing the steps to create
and use translations from <samp><span class="command">awk</span></samp>.

<div class="node">
<a name="Translator-i18n"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#I18N-Example">I18N Example</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Programmer-i18n">Programmer i18n</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internationalization">Internationalization</a>

</div>

<h3 class="section">10.4 Translating <samp><span class="command">awk</span></samp> Programs</h3>

<p><a name="index-g_t_0040code_007b_002epo_007d-files-1579"></a><a name="index-files_002c-_0040code_007b_002epo_007d-1580"></a><a name="index-portable-object-files-1581"></a><a name="index-files_002c-portable-object-1582"></a>Once a program's translatable strings have been marked, they must
be extracted to create the initial <samp><span class="file">.po</span></samp> file. 
As part of translation, it is often helpful to rearrange the order
in which arguments to <code>printf</code> are output.

   <p><samp><span class="command">gawk</span></samp>'s <samp><span class="option">--gen-pot</span></samp> command-line option extracts
the messages and is discussed next. 
After that, <code>printf</code>'s ability to
rearrange the order for <code>printf</code> arguments at runtime
is covered.

<ul class="menu">
<li><a accesskey="1" href="#String-Extraction">String Extraction</a>:            Extracting marked strings. 
<li><a accesskey="2" href="#Printf-Ordering">Printf Ordering</a>:              Rearranging <code>printf</code> arguments. 
<li><a accesskey="3" href="#I18N-Portability">I18N Portability</a>:             <samp><span class="command">awk</span></samp>-level portability issues. 
</ul>

<div class="node">
<a name="String-Extraction"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Printf-Ordering">Printf Ordering</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Translator-i18n">Translator i18n</a>

</div>

<h4 class="subsection">10.4.1 Extracting Marked Strings</h4>

<p><a name="index-strings_002c-extracting-1583"></a><a name="index-marked-strings_0040comma_007b_007d-extracting-1584"></a><a name="index-g_t_0040code_007b_002d_002dgen_002dpot_007d-option-1585"></a><a name="index-command_002dline-options_002c-string-extraction-1586"></a><a name="index-string-extraction-_0028internationalization_0029-1587"></a><a name="index-marked-string-extraction-_0028internationalization_0029-1588"></a><a name="index-extraction_002c-of-marked-strings-_0028internationalization_0029-1589"></a>
<a name="index-g_t_0040code_007b_002d_002dgen_002dpot_007d-option-1590"></a>Once your <samp><span class="command">awk</span></samp> program is working, and all the strings have
been marked and you've set (and perhaps bound) the text domain,
it is time to produce translations. 
First, use the <samp><span class="option">--gen-pot</span></samp> command-line option to create
the initial <samp><span class="file">.pot</span></samp> file:

<pre class="example">     $ <kbd>gawk --gen-pot -f guide.awk &gt; guide.pot</kbd>
</pre>
   <p><a name="index-g_t_0040code_007bxgettext_007d-utility-1591"></a>When run with <samp><span class="option">--gen-pot</span></samp>, <samp><span class="command">gawk</span></samp> does not execute your
program.  Instead, it parses it as usual and prints all marked strings
to standard output in the format of a GNU <code>gettext</code> Portable Object
file.  Also included in the output are any constant strings that
appear as the first argument to <code>dcgettext()</code> or as the first and
second argument to <code>dcngettext()</code>.<a rel="footnote" href="#fn-58" name="fnd-58"><sup>58</sup></a>
See <a href="#I18N-Example">I18N Example</a>,
for the full list of steps to go through to create and test
translations for <samp><span class="command">guide</span></samp>.

<div class="node">
<a name="Printf-Ordering"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#I18N-Portability">I18N Portability</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#String-Extraction">String Extraction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Translator-i18n">Translator i18n</a>

</div>

<h4 class="subsection">10.4.2 Rearranging <code>printf</code> Arguments</h4>

<p><a name="index-g_t_0040code_007bprintf_007d-statement_002c-positional-specifiers-1592"></a><a name="index-positional-specifiers_002c-_0040code_007bprintf_007d-statement-1593"></a>Format strings for <code>printf</code> and <code>sprintf()</code>
(see <a href="#Printf">Printf</a>)
present a special problem for translation. 
Consider the following:<a rel="footnote" href="#fn-59" name="fnd-59"><sup>59</sup></a>

<!-- line broken here only for smallbook format -->
<pre class="example">     printf(_"String `%s' has %d characters\n",
               string, length(string)))
</pre>
   <p>A possible German translation for this might be:

<pre class="example">     "%d Zeichen lang ist die Zeichenkette `%s'\n"
</pre>
   <p>The problem should be obvious: the order of the format
specifications is different from the original! 
Even though <code>gettext()</code> can return the translated string
at runtime,
it cannot change the argument order in the call to <code>printf</code>.

   <p>To solve this problem, <code>printf</code> format specifiers may have
an additional optional element, which we call a <dfn>positional specifier</dfn>. 
For example:

<pre class="example">     "%2$d Zeichen lang ist die Zeichenkette `%1$s'\n"
</pre>
   <p>Here, the positional specifier consists of an integer count, which indicates which
argument to use, and a &lsquo;<samp><span class="samp">$</span></samp>&rsquo;. Counts are one-based, and the
format string itself is <em>not</em> included.  Thus, in the following
example, &lsquo;<samp><span class="samp">string</span></samp>&rsquo; is the first argument and &lsquo;<samp><span class="samp">length(string)</span></samp>&rsquo; is the second:

<pre class="example">     $ <kbd>gawk 'BEGIN {</kbd>
     &gt;     <kbd>string = "Dont Panic"</kbd>
     &gt;     <kbd>printf _"%2$d characters live in \"%1$s\"\n",</kbd>
     &gt;                         <kbd>string, length(string)</kbd>
     &gt; <kbd>}'</kbd>
     -| 10 characters live in "Dont Panic"
</pre>
   <p>If present, positional specifiers come first in the format specification,
before the flags, the field width, and/or the precision.

   <p>Positional specifiers can be used with the dynamic field width and
precision capability:

<pre class="example">     $ <kbd>gawk 'BEGIN {</kbd>
     &gt;    <kbd>printf("%*.*s\n", 10, 20, "hello")</kbd>
     &gt;    <kbd>printf("%3$*2$.*1$s\n", 20, 10, "hello")</kbd>
     &gt; <kbd>}'</kbd>
     -|      hello
     -|      hello
</pre>
   <blockquote>
<b>NOTE:</b> When using &lsquo;<samp><span class="samp">*</span></samp>&rsquo; with a positional specifier, the &lsquo;<samp><span class="samp">*</span></samp>&rsquo;
comes first, then the integer position, and then the &lsquo;<samp><span class="samp">$</span></samp>&rsquo;. 
This is somewhat counterintuitive. 
</blockquote>

   <p><a name="index-g_t_0040code_007bprintf_007d-statement_002c-positional-specifiers_002c-mixing-with-regular-formats-1594"></a><a name="index-positional-specifiers_002c-_0040code_007bprintf_007d-statement_002c-mixing-with-regular-formats-1595"></a><a name="index-format-specifiers_002c-mixing-regular-with-positional-specifiers-1596"></a><samp><span class="command">gawk</span></samp> does not allow you to mix regular format specifiers
and those with positional specifiers in the same string:

<pre class="example">     $ <kbd>gawk 'BEGIN { printf _"%d %3$s\n", 1, 2, "hi" }'</kbd>
     error--&gt; gawk: cmd. line:1: fatal: must use `count$' on all formats or none
</pre>
   <blockquote>
<b>NOTE:</b> There are some pathological cases that <samp><span class="command">gawk</span></samp> may fail to
diagnose.  In such cases, the output may not be what you expect. 
It's still a bad idea to try mixing them, even if <samp><span class="command">gawk</span></samp>
doesn't detect it. 
</blockquote>

   <p>Although positional specifiers can be used directly in <samp><span class="command">awk</span></samp> programs,
their primary purpose is to help in producing correct translations of
format strings into languages different from the one in which the program
is first written.

<div class="node">
<a name="I18N-Portability"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Printf-Ordering">Printf Ordering</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Translator-i18n">Translator i18n</a>

</div>

<h4 class="subsection">10.4.3 <samp><span class="command">awk</span></samp> Portability Issues</h4>

<p><a name="index-portability_002c-internationalization-and-1597"></a><a name="index-internationalization_002c-localization_002c-portability-and-1598"></a><samp><span class="command">gawk</span></samp>'s internationalization features were purposely chosen to
have as little impact as possible on the portability of <samp><span class="command">awk</span></samp>
programs that use them to other versions of <samp><span class="command">awk</span></samp>. 
Consider this program:

<pre class="example">     BEGIN {
         TEXTDOMAIN = "guide"
         if (Test_Guide)   # set with -v
             bindtextdomain("/test/guide/messages")
         print _"don't panic!"
     }
</pre>
   <p class="noindent">As written, it won't work on other versions of <samp><span class="command">awk</span></samp>. 
However, it is actually almost portable, requiring very little
change:

     
<a name="index-g_t_0040code_007bTEXTDOMAIN_007d-variable_002c-portability-and-1599"></a>
<ul><li>Assignments to <code>TEXTDOMAIN</code> won't have any effect,
since <code>TEXTDOMAIN</code> is not special in other <samp><span class="command">awk</span></samp> implementations.

     <li>Non-GNU versions of <samp><span class="command">awk</span></samp> treat marked strings
as the concatenation of a variable named <code>_</code> with the string
following it.<a rel="footnote" href="#fn-60" name="fnd-60"><sup>60</sup></a> Typically, the variable <code>_</code> has
the null string (<code>""</code>) as its value, leaving the original string constant as
the result.

     <li>By defining &ldquo;dummy&rdquo; functions to replace <code>dcgettext()</code>, <code>dcngettext()</code>
and <code>bindtextdomain()</code>, the <samp><span class="command">awk</span></samp> program can be made to run, but
all the messages are output in the original language. 
For example:

     <p><a name="index-g_t_0040code_007bbindtextdomain_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-portability-and-1600"></a><a name="index-g_t_0040code_007bdcgettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-portability-and-1601"></a><a name="index-g_t_0040code_007bdcngettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-portability-and-1602"></a>
     <pre class="example">          <!-- file eg/lib/libintl.awk -->
          function bindtextdomain(dir, domain)
          {
              return dir
          }
          
          function dcgettext(string, domain, category)
          {
              return string
          }
          
          function dcngettext(string1, string2, number, domain, category)
          {
              return (number == 1 ? string1 : string2)
          }
          <!-- endfile -->
</pre>
     <li>The use of positional specifications in <code>printf</code> or
<code>sprintf()</code> is <em>not</em> portable. 
To support <code>gettext()</code> at the C level, many systems' C versions of
<code>sprintf()</code> do support positional specifiers.  But it works only if
enough arguments are supplied in the function call.  Many versions of
<samp><span class="command">awk</span></samp> pass <code>printf</code> formats and arguments unchanged to the
underlying C library version of <code>sprintf()</code>, but only one format and
argument at a time.  What happens if a positional specification is
used is anybody's guess. 
However, since the positional specifications are primarily for use in
<em>translated</em> format strings, and since non-GNU <samp><span class="command">awk</span></samp>s never
retrieve the translated string, this should not be a problem in practice. 
</ul>
   <!-- ENDOFRANGE inap -->

<div class="node">
<a name="I18N-Example"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Gawk-I18N">Gawk I18N</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Translator-i18n">Translator i18n</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internationalization">Internationalization</a>

</div>

<h3 class="section">10.5 A Simple Internationalization Example</h3>

<p>Now let's look at a step-by-step example of how to internationalize and
localize a simple <samp><span class="command">awk</span></samp> program, using <samp><span class="file">guide.awk</span></samp> as our
original source:

<pre class="example">     <!-- file eg/prog/guide.awk -->
     BEGIN {
         TEXTDOMAIN = "guide"
         bindtextdomain(".")  # for testing
         print _"Don't Panic"
         print _"The Answer Is", 42
         print "Pardon me, Zaphod who?"
     }
     <!-- endfile -->
</pre>
   <p class="noindent">Run &lsquo;<samp><span class="samp">gawk --gen-pot</span></samp>&rsquo; to create the <samp><span class="file">.pot</span></samp> file:

<pre class="example">     $ <kbd>gawk --gen-pot -f guide.awk &gt; guide.pot</kbd>
</pre>
   <p class="noindent">This produces:

<pre class="example">     <!-- file eg/data/guide.po -->
     #: guide.awk:4
     msgid "Don't Panic"
     msgstr ""
     
     #: guide.awk:5
     msgid "The Answer Is"
     msgstr ""
     
     <!-- endfile -->
</pre>
   <p>This original portable object template file is saved and reused for each language
into which the application is translated.  The <code>msgid</code>
is the original string and the <code>msgstr</code> is the translation.

   <blockquote>
<b>NOTE:</b> Strings not marked with a leading underscore do not
appear in the <samp><span class="file">guide.pot</span></samp> file. 
</blockquote>

   <p>Next, the messages must be translated. 
Here is a translation to a hypothetical dialect of English,
called &ldquo;Mellow&rdquo;:<a rel="footnote" href="#fn-61" name="fnd-61"><sup>61</sup></a>

<pre class="example">     $ cp guide.pot guide-mellow.po
     <var>Add translations to</var> guide-mellow.po ...
</pre>
   <p class="noindent">Following are the translations:

<pre class="example">     <!-- file eg/data/guide-mellow.po -->
     #: guide.awk:4
     msgid "Don't Panic"
     msgstr "Hey man, relax!"
     
     #: guide.awk:5
     msgid "The Answer Is"
     msgstr "Like, the scoop is"
     
     <!-- endfile -->
</pre>
   <p><a name="index-Linux-1603"></a><a name="index-GNU_002fLinux-1604"></a>The next step is to make the directory to hold the binary message object
file and then to create the <samp><span class="file">guide.mo</span></samp> file. 
The directory layout shown here is standard for GNU <code>gettext</code> on
GNU/Linux systems.  Other versions of <code>gettext</code> may use a different
layout:

<pre class="example">     $ <kbd>mkdir en_US en_US/LC_MESSAGES</kbd>
</pre>
   <p><a name="index-g_t_0040code_007b_002epo_007d-files_002c-converting-to-_0040code_007b_002emo_007d-1605"></a><a name="index-files_002c-_0040code_007b_002epo_007d_002c-converting-to-_0040code_007b_002emo_007d-1606"></a><a name="index-g_t_0040code_007b_002emo_007d-files_002c-converting-from-_0040code_007b_002epo_007d-1607"></a><a name="index-files_002c-_0040code_007b_002emo_007d_002c-converting-from-_0040code_007b_002epo_007d-1608"></a><a name="index-portable-object-files_002c-converting-to-message-object-files-1609"></a><a name="index-files_002c-portable-object_002c-converting-to-message-object-files-1610"></a><a name="index-message-object-files_002c-converting-from-portable-object-files-1611"></a><a name="index-files_002c-message-object_002c-converting-from-portable-object-files-1612"></a><a name="index-g_t_0040command_007bmsgfmt_007d-utility-1613"></a>The <samp><span class="command">msgfmt</span></samp> utility does the conversion from human-readable
<samp><span class="file">.po</span></samp> file to machine-readable <samp><span class="file">.mo</span></samp> file. 
By default, <samp><span class="command">msgfmt</span></samp> creates a file named <samp><span class="file">messages</span></samp>. 
This file must be renamed and placed in the proper directory so that
<samp><span class="command">gawk</span></samp> can find it:

<pre class="example">     $ <kbd>msgfmt guide-mellow.po</kbd>
     $ <kbd>mv messages en_US/LC_MESSAGES/guide.mo</kbd>
</pre>
   <p>Finally, we run the program to test it:

<pre class="example">     $ <kbd>gawk -f guide.awk</kbd>
     -| Hey man, relax!
     -| Like, the scoop is 42
     -| Pardon me, Zaphod who?
</pre>
   <p>If the three replacement functions for <code>dcgettext()</code>, <code>dcngettext()</code>
and <code>bindtextdomain()</code>
(see <a href="#I18N-Portability">I18N Portability</a>)
are in a file named <samp><span class="file">libintl.awk</span></samp>,
then we can run <samp><span class="file">guide.awk</span></samp> unchanged as follows:

<pre class="example">     $ <kbd>gawk --posix -f guide.awk -f libintl.awk</kbd>
     -| Don't Panic
     -| The Answer Is 42
     -| Pardon me, Zaphod who?
</pre>
   <div class="node">
<a name="Gawk-I18N"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#I18N-Example">I18N Example</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Internationalization">Internationalization</a>

</div>

<h3 class="section">10.6 <samp><span class="command">gawk</span></samp> Can Speak Your Language</h3>

<p><samp><span class="command">gawk</span></samp> itself has been internationalized
using the GNU <code>gettext</code> package. 
(GNU <code>gettext</code> is described in
complete detail in
<cite>GNU gettext tools</cite>.) 
As of this writing, the latest version of GNU <code>gettext</code> is
<a href="ftp://ftp.gnu.org/gnu/gettext/gettext-0.18.1.tar.gz">version 0.18.1</a>.

   <p>If a translation of <samp><span class="command">gawk</span></samp>'s messages exists,
then <samp><span class="command">gawk</span></samp> produces usage messages, warnings,
and fatal errors in the local language. 
<!-- ENDOFRANGE inloc -->

<div class="node">
<a name="Advanced-Features"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Library-Functions">Library Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Internationalization">Internationalization</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">11 Advanced Features of <samp><span class="command">gawk</span></samp></h2>

<p><a name="index-advanced-features_002c-network-connections_002c-See-Also-networks_002c-connections-1614"></a><!-- STARTOFRANGE gawadv -->
<a name="index-g_t_0040command_007bgawk_007d_002c-features_002c-advanced-1615"></a><!-- STARTOFRANGE advgaw -->
<a name="index-advanced-features_002c-_0040command_007bgawk_007d-1616"></a><blockquote>
<i>Write documentation as if whoever reads it is
a violent psychopath who knows where you live.</i><br>
Steve English, as quoted by Peter Langston
</blockquote>

   <p>This chapter discusses advanced features in <samp><span class="command">gawk</span></samp>. 
It's a bit of a &ldquo;grab bag&rdquo; of items that are otherwise unrelated
to each other. 
First, a command-line option allows <samp><span class="command">gawk</span></samp> to recognize
nondecimal numbers in input data, not just in <samp><span class="command">awk</span></samp>
programs. 
Then, <samp><span class="command">gawk</span></samp>'s special features for sorting arrays are presented. 
Next, two-way I/O, discussed briefly in earlier parts of this
Web page, is described in full detail, along with the basics
of TCP/IP networking.  Finally, <samp><span class="command">gawk</span></samp>
can <dfn>profile</dfn> an <samp><span class="command">awk</span></samp> program, making it possible to tune
it for performance.

   <p><a href="#Dynamic-Extensions">Dynamic Extensions</a>,
discusses the ability to dynamically add new built-in functions to
<samp><span class="command">gawk</span></samp>.  As this feature is still immature and likely to change,
its description is relegated to an appendix.

<ul class="menu">
<li><a accesskey="1" href="#Nondecimal-Data">Nondecimal Data</a>:              Allowing nondecimal input data. 
<li><a accesskey="2" href="#Array-Sorting">Array Sorting</a>:                Facilities for controlling array traversal and
                                sorting arrays. 
<li><a accesskey="3" href="#Two_002dway-I_002fO">Two-way I/O</a>:                  Two-way communications with another process. 
<li><a accesskey="4" href="#TCP_002fIP-Networking">TCP/IP Networking</a>:            Using <samp><span class="command">gawk</span></samp> for network programming. 
<li><a accesskey="5" href="#Profiling">Profiling</a>:                    Profiling your <samp><span class="command">awk</span></samp> programs. 
</ul>

<div class="node">
<a name="Nondecimal-Data"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Array-Sorting">Array Sorting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Advanced-Features">Advanced Features</a>

</div>

<h3 class="section">11.1 Allowing Nondecimal Input Data</h3>

<p><a name="index-g_t_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option-1617"></a><a name="index-advanced-features_002c-_0040command_007bgawk_007d_002c-nondecimal-input-data-1618"></a><a name="index-input_002c-data_0040comma_007b_007d-nondecimal-1619"></a><a name="index-constants_002c-nondecimal-1620"></a>
If you run <samp><span class="command">gawk</span></samp> with the <samp><span class="option">--non-decimal-data</span></samp> option,
you can have nondecimal constants in your input data:

<!-- line break here for small book format -->
<pre class="example">     $ <kbd>echo 0123 123 0x123 |</kbd>
     &gt; <kbd>gawk --non-decimal-data '{ printf "%d, %d, %d\n",</kbd>
     &gt;                                         <kbd>$1, $2, $3 }'</kbd>
     -| 83, 123, 291
</pre>
   <p>For this feature to work, write your program so that
<samp><span class="command">gawk</span></samp> treats your data as numeric:

<pre class="example">     $ <kbd>echo 0123 123 0x123 | gawk '{ print $1, $2, $3 }'</kbd>
     -| 0123 123 0x123
</pre>
   <p class="noindent">The <code>print</code> statement treats its expressions as strings. 
Although the fields can act as numbers when necessary,
they are still strings, so <code>print</code> does not try to treat them
numerically.  You may need to add zero to a field to force it to
be treated as a number.  For example:

<pre class="example">     $ <kbd>echo 0123 123 0x123 | gawk --non-decimal-data '</kbd>
     &gt; <kbd>{ print $1, $2, $3</kbd>
     &gt;   <kbd>print $1 + 0, $2 + 0, $3 + 0 }'</kbd>
     -| 0123 123 0x123
     -| 83 123 291
</pre>
   <p>Because it is common to have decimal data with leading zeros, and because
using this facility could lead to surprising results, the default is to leave it
disabled.  If you want it, you must explicitly request it.

   <p><a name="index-programming-conventions_002c-_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option-1621"></a><a name="index-g_t_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option_002c-_0040code_007bstrtonum_0028_0029_007d-function-and-1622"></a><a name="index-g_t_0040code_007bstrtonum_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option-and-1623"></a><blockquote>
<b>CAUTION:</b> <em>Use of this option is not recommended.</em>
It can break old programs very badly. 
Instead, use the <code>strtonum()</code> function to convert your data
(see <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>). 
This makes your programs easier to write and easier to read, and
leads to less surprising results. 
</blockquote>

<div class="node">
<a name="Array-Sorting"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Two_002dway-I_002fO">Two-way I/O</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Nondecimal-Data">Nondecimal Data</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Advanced-Features">Advanced Features</a>

</div>

<h3 class="section">11.2 Controlling Array Traversal and Array Sorting</h3>

<p><samp><span class="command">gawk</span></samp> lets you control the order in which a &lsquo;<samp><span class="samp">for (i in array)</span></samp>&rsquo;
loop traverses an array.

   <p>In addition, two built-in functions, <code>asort()</code> and <code>asorti()</code>,
let you sort arrays based on the array values and indices, respectively. 
These two functions also provide control over the sorting criteria used
to order the elements during sorting.

<ul class="menu">
<li><a accesskey="1" href="#Controlling-Array-Traversal">Controlling Array Traversal</a>:  How to use PROCINFO["sorted_in"]. 
<li><a accesskey="2" href="#Array-Sorting-Functions">Array Sorting Functions</a>:      How to use <code>asort()</code> and <code>asorti()</code>. 
</ul>

<div class="node">
<a name="Controlling-Array-Traversal"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Array-Sorting-Functions">Array Sorting Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Array-Sorting">Array Sorting</a>

</div>

<h4 class="subsection">11.2.1 Controlling Array Traversal</h4>

<p>By default, the order in which a &lsquo;<samp><span class="samp">for (i in array)</span></samp>&rsquo; loop
scans an array is not defined; it is generally based upon
the internal implementation of arrays inside <samp><span class="command">awk</span></samp>.

   <p>Often, though, it is desirable to be able to loop over the elements
in a particular order that you, the programmer, choose.  <samp><span class="command">gawk</span></samp>
lets you do this.

   <p><a href="#Controlling-Scanning">Controlling Scanning</a>, describes how you can assign special,
pre-defined values to <code>PROCINFO["sorted_in"]</code> in order to
control the order in which <samp><span class="command">gawk</span></samp> will traverse an array
during a <code>for</code> loop.

   <p>In addition, the value of <code>PROCINFO["sorted_in"]</code> can be a function name. 
This lets you traverse an array based on any custom criterion. 
The array elements are ordered according to the return value of this
function.  The comparison function should be defined with at least
four arguments:

<pre class="example">     function comp_func(i1, v1, i2, v2)
     {
         <var>compare elements 1 and 2 in some fashion</var>
         <var>return &lt; 0; 0; or &gt; 0</var>
     }
</pre>
   <p>Here, <var>i1</var> and <var>i2</var> are the indices, and <var>v1</var> and <var>v2</var>
are the corresponding values of the two elements being compared. 
Either <var>v1</var> or <var>v2</var>, or both, can be arrays if the array being
traversed contains subarrays as values. 
(See <a href="#Arrays-of-Arrays">Arrays of Arrays</a>, for more information about subarrays.) 
The three possible return values are interpreted as follows:

     <dl>
<dt><code>comp_func(i1, v1, i2, v2) &lt; 0</code><dd>Index <var>i1</var> comes before index <var>i2</var> during loop traversal.

     <br><dt><code>comp_func(i1, v1, i2, v2) == 0</code><dd>Indices <var>i1</var> and <var>i2</var>
come together but the relative order with respect to each other is undefined.

     <br><dt><code>comp_func(i1, v1, i2, v2) &gt; 0</code><dd>Index <var>i1</var> comes after index <var>i2</var> during loop traversal. 
</dl>

   <p>Our first comparison function can be used to scan an array in
numerical order of the indices:

<pre class="example">     function cmp_num_idx(i1, v1, i2, v2)
     {
          # numerical index comparison, ascending order
          return (i1 - i2)
     }
</pre>
   <p>Our second function traverses an array based on the string order of
the element values rather than by indices:

<pre class="example">     function cmp_str_val(i1, v1, i2, v2)
     {
         # string value comparison, ascending order
         v1 = v1 ""
         v2 = v2 ""
         if (v1 &lt; v2)
             return -1
         return (v1 != v2)
     }
</pre>
   <p>The third
comparison function makes all numbers, and numeric strings without
any leading or trailing spaces, come out first during loop traversal:

<pre class="example">     function cmp_num_str_val(i1, v1, i2, v2,   n1, n2)
     {
          # numbers before string value comparison, ascending order
          n1 = v1 + 0
          n2 = v2 + 0
          if (n1 == v1)
              return (n2 == v2) ? (n1 - n2) : -1
          else if (n2 == v2)
              return 1
          return (v1 &lt; v2) ? -1 : (v1 != v2)
     }
</pre>
   <p>Here is a main program to demonstrate how <samp><span class="command">gawk</span></samp>
behaves using each of the previous functions:

<pre class="example">     BEGIN {
         data["one"] = 10
         data["two"] = 20
         data[10] = "one"
         data[100] = 100
         data[20] = "two"
     
         f[1] = "cmp_num_idx"
         f[2] = "cmp_str_val"
         f[3] = "cmp_num_str_val"
         for (i = 1; i &lt;= 3; i++) {
             printf("Sort function: %s\n", f[i])
             PROCINFO["sorted_in"] = f[i]
             for (j in data)
                 printf("\tdata[%s] = %s\n", j, data[j])
             print ""
         }
     }
</pre>
   <p>Here are the results when the program is run:

<pre class="example">     $ <kbd>gawk -f compdemo.awk</kbd>
     -| Sort function: cmp_num_idx      <i>Sort by numeric index</i>
     -|     data[two] = 20
     -|     data[one] = 10              <i>Both strings are numerically zero</i>
     -|     data[10] = one
     -|     data[20] = two
     -|     data[100] = 100
     -|
     -| Sort function: cmp_str_val      <i>Sort by element values as strings</i>
     -|     data[one] = 10
     -|     data[100] = 100             <i>String 100 is less than string 20</i>
     -|     data[two] = 20
     -|     data[10] = one
     -|     data[20] = two
     -|
     -| Sort function: cmp_num_str_val  <i>Sort all numeric values before all strings</i>
     -|     data[one] = 10
     -|     data[two] = 20
     -|     data[100] = 100
     -|     data[10] = one
     -|     data[20] = two
</pre>
   <p>Consider sorting the entries of a GNU/Linux system password file
according to login name.  The following program sorts records
by a specific field position and can be used for this purpose:

<pre class="example">     # sort.awk --- simple program to sort by field position
     # field position is specified by the global variable POS
     
     function cmp_field(i1, v1, i2, v2)
     {
         # comparison by value, as string, and ascending order
         return v1[POS] &lt; v2[POS] ? -1 : (v1[POS] != v2[POS])
     }
     
     {
         for (i = 1; i &lt;= NF; i++)
             a[NR][i] = $i
     }
     
     END {
         PROCINFO["sorted_in"] = "cmp_field"
         if (POS &lt; 1 || POS &gt; NF)
             POS = 1
         for (i in a) {
             for (j = 1; j &lt;= NF; j++)
                 printf("%s%c", a[i][j], j &lt; NF ? ":" : "")
             print ""
         }
     }
</pre>
   <p>The first field in each entry of the password file is the user's login name,
and the fields are separated by colons. 
Each record defines a subarray,
with each field as an element in the subarray. 
Running the program produces the
following output:

<pre class="example">     $ <kbd>gawk -vPOS=1 -F: -f sort.awk /etc/passwd</kbd>
     -| adm:x:3:4:adm:/var/adm:/sbin/nologin
     -| apache:x:48:48:Apache:/var/www:/sbin/nologin
     -| avahi:x:70:70:Avahi daemon:/:/sbin/nologin
     ...
</pre>
   <p>The comparison should normally always return the same value when given a
specific pair of array elements as its arguments.  If inconsistent
results are returned then the order is undefined.  This behavior can be
exploited to introduce random order into otherwise seemingly
ordered data:

<pre class="example">     function cmp_randomize(i1, v1, i2, v2)
     {
         # random order
         return (2 - 4 * rand())
     }
</pre>
   <p>As mentioned above, the order of the indices is arbitrary if two
elements compare equal.  This is usually not a problem, but letting
the tied elements come out in arbitrary order can be an issue, especially
when comparing item values.  The partial ordering of the equal elements
may change during the next loop traversal, if other elements are added or
removed from the array.  One way to resolve ties when comparing elements
with otherwise equal values is to include the indices in the comparison
rules.  Note that doing this may make the loop traversal less efficient,
so consider it only if necessary.  The following comparison functions
force a deterministic order, and are based on the fact that the
indices of two elements are never equal:

<pre class="example">     function cmp_numeric(i1, v1, i2, v2)
     {
         # numerical value (and index) comparison, descending order
         return (v1 != v2) ? (v2 - v1) : (i2 - i1)
     }
     
     function cmp_string(i1, v1, i2, v2)
     {
         # string value (and index) comparison, descending order
         v1 = v1 i1
         v2 = v2 i2
         return (v1 &gt; v2) ? -1 : (v1 != v2)
     }
</pre>
   <!-- Avoid using the term ``stable'' when describing the unpredictable behavior -->
<!-- if two items compare equal.  Usually, the goal of a "stable algorithm" -->
<!-- is to maintain the original order of the items, which is a meaningless -->
<!-- concept for a list constructed from a hash. -->
   <p>A custom comparison function can often simplify ordered loop
traversal, and the sky is really the limit when it comes to
designing such a function.

   <p>When string comparisons are made during a sort, either for element
values where one or both aren't numbers, or for element indices
handled as strings, the value of <code>IGNORECASE</code>
(see <a href="#Built_002din-Variables">Built-in Variables</a>) controls whether
the comparisons treat corresponding uppercase and lowercase letters as
equivalent or distinct.

   <p>Another point to keep in mind is that in the case of subarrays
the element values can themselves be arrays; a production comparison
function should use the <code>isarray()</code> function
(see <a href="#Type-Functions">Type Functions</a>),
to check for this, and choose a defined sorting order for subarrays.

   <p>All sorting based on <code>PROCINFO["sorted_in"]</code>
is disabled in POSIX mode,
since the <code>PROCINFO</code> array is not special in that case.

   <p>As a side note, sorting the array indices before traversing
the array has been reported to add 15% to 20% overhead to the
execution time of <samp><span class="command">awk</span></samp> programs. For this reason,
sorted array traversal is not the default.

<!-- The @command{gawk} -->
<!-- maintainers believe that only the people who wish to use a -->
<!-- feature should have to pay for it. -->
<div class="node">
<a name="Array-Sorting-Functions"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Controlling-Array-Traversal">Controlling Array Traversal</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Array-Sorting">Array Sorting</a>

</div>

<h4 class="subsection">11.2.2 Sorting Array Values and Indices with <samp><span class="command">gawk</span></samp></h4>

<p><a name="index-arrays_002c-sorting-1624"></a><a name="index-g_t_0040code_007basort_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1625"></a><a name="index-g_t_0040code_007basort_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-arrays_0040comma_007b_007d-sorting-1626"></a><a name="index-sort-function_002c-arrays_002c-sorting-1627"></a>In most <samp><span class="command">awk</span></samp> implementations, sorting an array requires
writing a <code>sort()</code> function. 
While this can be educational for exploring different sorting algorithms,
usually that's not the point of the program. 
<samp><span class="command">gawk</span></samp> provides the built-in <code>asort()</code>
and <code>asorti()</code> functions
(see <a href="#String-Functions">String Functions</a>)
for sorting arrays.  For example:

<pre class="example">     <var>populate the array</var> data
     n = asort(data)
     for (i = 1; i &lt;= n; i++)
         <var>do something with</var> data[i]
</pre>
   <p>After the call to <code>asort()</code>, the array <code>data</code> is indexed from 1
to some number <var>n</var>, the total number of elements in <code>data</code>. 
(This count is <code>asort()</code>'s return value.) 
<code>data[1]</code> &lt;= <code>data[2]</code> &lt;= <code>data[3]</code>, and so on. 
The comparison is based on the type of the elements
(see <a href="#Typing-and-Comparison">Typing and Comparison</a>). 
All numeric values come before all string values,
which in turn come before all subarrays.

   <p><a name="index-side-effects_002c-_0040code_007basort_0028_0029_007d-function-1628"></a>An important side effect of calling <code>asort()</code> is that
<em>the array's original indices are irrevocably lost</em>. 
As this isn't always desirable, <code>asort()</code> accepts a
second argument:

<pre class="example">     <var>populate the array</var> source
     n = asort(source, dest)
     for (i = 1; i &lt;= n; i++)
         <var>do something with</var> dest[i]
</pre>
   <p>In this case, <samp><span class="command">gawk</span></samp> copies the <code>source</code> array into the
<code>dest</code> array and then sorts <code>dest</code>, destroying its indices. 
However, the <code>source</code> array is not affected.

   <p><code>asort()</code> accepts a third string argument to control comparison of
array elements.  As with <code>PROCINFO["sorted_in"]</code>, this argument
may be one of the predefined names that <samp><span class="command">gawk</span></samp> provides
(see <a href="#Controlling-Scanning">Controlling Scanning</a>), or the name of a user-defined function
(see <a href="#Controlling-Array-Traversal">Controlling Array Traversal</a>).

   <blockquote>
<b>NOTE:</b> In all cases, the sorted element values consist of the original
array's element values.  The ability to control comparison merely
affects the way in which they are sorted. 
</blockquote>

   <p>Often, what's needed is to sort on the values of the <em>indices</em>
instead of the values of the elements. 
To do that, use the
<code>asorti()</code> function.  The interface is identical to that of
<code>asort()</code>, except that the index values are used for sorting, and
become the values of the result array:

<pre class="example">     { source[$0] = some_func($0) }
     
     END {
         n = asorti(source, dest)
         for (i = 1; i &lt;= n; i++) {
             <i>Work with sorted indices directly:</i>
             <var>do something with</var> dest[i]
             ...
             <i>Access original array via sorted indices:</i>
             <var>do something with</var> source[dest[i]]
         }
     }
</pre>
   <p>Similar to <code>asort()</code>,
in all cases, the sorted element values consist of the original
array's indices.  The ability to control comparison merely
affects the way in which they are sorted.

   <p>Sorting the array by replacing the indices provides maximal flexibility. 
To traverse the elements in decreasing order, use a loop that goes from
<var>n</var> down to 1, either over the elements or over the indices.<a rel="footnote" href="#fn-62" name="fnd-62"><sup>62</sup></a>

   <p><a name="index-reference-counting_002c-sorting-arrays-1629"></a>Copying array indices and elements isn't expensive in terms of memory. 
Internally, <samp><span class="command">gawk</span></samp> maintains <dfn>reference counts</dfn> to data. 
For example, when <code>asort()</code> copies the first array to the second one,
there is only one copy of the original array elements' data, even though
both arrays use the values.

<!-- Document It And Call It A Feature. Sigh. -->
   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-in-1630"></a><a name="index-g_t_0040code_007bIGNORECASE_007d-variable-1631"></a><a name="index-arrays_002c-sorting_002c-_0040code_007bIGNORECASE_007d-variable-and-1632"></a><a name="index-g_t_0040code_007bIGNORECASE_007d-variable_002c-array-sorting-and-1633"></a>Because <code>IGNORECASE</code> affects string comparisons, the value
of <code>IGNORECASE</code> also affects sorting for both <code>asort()</code> and <code>asorti()</code>. 
Note also that the locale's sorting order does <em>not</em>
come into play; comparisons are based on character values only.<a rel="footnote" href="#fn-63" name="fnd-63"><sup>63</sup></a>
Caveat Emptor.

<div class="node">
<a name="Two-way-I%2fO"></a>
<a name="Two_002dway-I_002fO"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#TCP_002fIP-Networking">TCP/IP Networking</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Array-Sorting">Array Sorting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Advanced-Features">Advanced Features</a>

</div>

<h3 class="section">11.3 Two-Way Communications with Another Process</h3>

<p><a name="index-Brennan_002c-Michael-1634"></a><a name="index-programmers_002c-attractiveness-of-1635"></a>
<pre class="smallexample">     <!-- Path: cssun.mathcs.emory.edu!gatech!newsxfer3.itd.umich.edu!news-peer.sprintlink.net!news-sea-19.sprintlink.net!news-in-west.sprintlink.net!news.sprintlink.net!Sprint!204.94.52.5!news.whidbey.com!brennan -->
     From: brennan@whidbey.com (Mike Brennan)
     Newsgroups: comp.lang.awk
     Subject: Re: Learn the SECRET to Attract Women Easily
     Date: 4 Aug 1997 17:34:46 GMT
     <!-- Organization: WhidbeyNet -->
     <!-- Lines: 12 -->
     Message-ID: &lt;5s53rm$eca@news.whidbey.com&gt;
     <!-- References: <5s20dn$2e1@chronicle.concentric.net> -->
     <!-- Reply-To: brennan@whidbey.com -->
     <!-- NNTP-Posting-Host: asn202.whidbey.com -->
     <!-- X-Newsreader: slrn (0.9.4.1 UNIX) -->
     <!-- Xref: cssun.mathcs.emory.edu comp.lang.awk:5403 -->
     
     On 3 Aug 1997 13:17:43 GMT, Want More Dates???
     &lt;tracy78@kilgrona.com&gt; wrote:
     &gt;Learn the SECRET to Attract Women Easily
     &gt;
     &gt;The SCENT(tm)  Pheromone Sex Attractant For Men to Attract Women
     
     The scent of awk programmers is a lot more attractive to women than
     the scent of perl programmers.
     --
     Mike Brennan
     <!-- brennan@@whidbey.com -->
</pre>
   <p><a name="index-advanced-features_002c-_0040command_007bgawk_007d_002c-processes_0040comma_007b_007d-communicating-with-1636"></a><a name="index-processes_002c-two_002dway-communications-with-1637"></a>It is often useful to be able to
send data to a separate program for
processing and then read the result.  This can always be
done with temporary files:

<pre class="example">     # Write the data for processing
     tempfile = ("mydata." PROCINFO["pid"])
     while (<var>not done with data</var>)
         print <var>data</var> | ("subprogram &gt; " tempfile)
     close("subprogram &gt; " tempfile)
     
     # Read the results, remove tempfile when done
     while ((getline newdata &lt; tempfile) &gt; 0)
         <var>process</var> newdata <var>appropriately</var>
     close(tempfile)
     system("rm " tempfile)
</pre>
   <p class="noindent">This works, but not elegantly.  Among other things, it requires that
the program be run in a directory that cannot be shared among users;
for example, <samp><span class="file">/tmp</span></samp> will not do, as another user might happen
to be using a temporary file with the same name.

   <p><a name="index-coprocesses-1638"></a><a name="index-input_002foutput_002c-two_002dway-1639"></a><a name="index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-1640"></a><a name="index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-1641"></a><a name="index-g_t_0040command_007bcsh_007d-utility_002c-_0040code_007b_007c_0026_007d-operator_002c-comparison-with-1642"></a>However, with <samp><span class="command">gawk</span></samp>, it is possible to
open a <em>two-way</em> pipe to another process.  The second process is
termed a <dfn>coprocess</dfn>, since it runs in parallel with <samp><span class="command">gawk</span></samp>. 
The two-way connection is created using the &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operator
(borrowed from the Korn shell, <samp><span class="command">ksh</span></samp>):<a rel="footnote" href="#fn-64" name="fnd-64"><sup>64</sup></a>

<pre class="example">     do {
         print <var>data</var> |&amp; "subprogram"
         "subprogram" |&amp; getline results
     } while (<var>data left to process</var>)
     close("subprogram")
</pre>
   <p>The first time an I/O operation is executed using the &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo;
operator, <samp><span class="command">gawk</span></samp> creates a two-way pipeline to a child process
that runs the other program.  Output created with <code>print</code>
or <code>printf</code> is written to the program's standard input, and
output from the program's standard output can be read by the <samp><span class="command">gawk</span></samp>
program using <code>getline</code>. 
As is the case with processes started by &lsquo;<samp><span class="samp">|</span></samp>&rsquo;, the subprogram
can be any program, or pipeline of programs, that can be started by
the shell.

   <p>There are some cautionary items to be aware of:

     <ul>
<li>As the code inside <samp><span class="command">gawk</span></samp> currently stands, the coprocess's
standard error goes to the same place that the parent <samp><span class="command">gawk</span></samp>'s
standard error goes. It is not possible to read the child's
standard error separately.

     <p><a name="index-deadlocks-1643"></a><a name="index-buffering_002c-input_002foutput-1644"></a><a name="index-g_t_0040code_007bgetline_007d-command_002c-deadlock-and-1645"></a><li>I/O buffering may be a problem.  <samp><span class="command">gawk</span></samp> automatically
flushes all output down the pipe to the coprocess. 
However, if the coprocess does not flush its output,
<samp><span class="command">gawk</span></samp> may hang when doing a <code>getline</code> in order to read
the coprocess's results.  This could lead to a situation
known as <dfn>deadlock</dfn>, where each process is waiting for the
other one to do something. 
</ul>

   <p><a name="index-g_t_0040code_007bclose_0028_0029_007d-function_002c-two_002dway-pipes-and-1646"></a>It is possible to close just one end of the two-way pipe to
a coprocess, by supplying a second argument to the <code>close()</code>
function of either <code>"to"</code> or <code>"from"</code>
(see <a href="#Close-Files-And-Pipes">Close Files And Pipes</a>). 
These strings tell <samp><span class="command">gawk</span></samp> to close the end of the pipe
that sends data to the coprocess or the end that reads from it,
respectively.

   <p><a name="index-g_t_0040command_007bsort_007d-utility_002c-coprocesses-and-1647"></a>This is particularly necessary in order to use
the system <samp><span class="command">sort</span></samp> utility as part of a coprocess;
<samp><span class="command">sort</span></samp> must read <em>all</em> of its input
data before it can produce any output. 
The <samp><span class="command">sort</span></samp> program does not receive an end-of-file indication
until <samp><span class="command">gawk</span></samp> closes the write end of the pipe.

   <p>When you have finished writing data to the <samp><span class="command">sort</span></samp>
utility, you can close the <code>"to"</code> end of the pipe, and
then start reading sorted data via <code>getline</code>. 
For example:

<pre class="example">     BEGIN {
         command = "LC_ALL=C sort"
         n = split("abcdefghijklmnopqrstuvwxyz", a, "")
     
         for (i = n; i &gt; 0; i--)
             print a[i] |&amp; command
         close(command, "to")
     
         while ((command |&amp; getline line) &gt; 0)
             print "got", line
         close(command)
     }
</pre>
   <p>This program writes the letters of the alphabet in reverse order, one
per line, down the two-way pipe to <samp><span class="command">sort</span></samp>.  It then closes the
write end of the pipe, so that <samp><span class="command">sort</span></samp> receives an end-of-file
indication.  This causes <samp><span class="command">sort</span></samp> to sort the data and write the
sorted data back to the <samp><span class="command">gawk</span></samp> program.  Once all of the data
has been read, <samp><span class="command">gawk</span></samp> terminates the coprocess and exits.

   <p>As a side note, the assignment &lsquo;<samp><span class="samp">LC_ALL=C</span></samp>&rsquo; in the <samp><span class="command">sort</span></samp>
command ensures traditional Unix (ASCII) sorting from <samp><span class="command">sort</span></samp>.

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bPROCINFO_007d-array-in-1648"></a><a name="index-g_t_0040code_007bPROCINFO_007d-array-1649"></a>You may also use pseudo-ttys (ptys) for
two-way communication instead of pipes, if your system supports them. 
This is done on a per-command basis, by setting a special element
in the <code>PROCINFO</code> array
(see <a href="#Auto_002dset">Auto-set</a>),
like so:

<pre class="example">     command = "sort -nr"           # command, save in convenience variable
     PROCINFO[command, "pty"] = 1   # update PROCINFO
     print ... |&amp; command       # start two-way pipe
     ...
</pre>
   <p class="noindent">Using ptys avoids the buffer deadlock issues described earlier, at some
loss in performance.  If your system does not have ptys, or if all the
system's ptys are in use, <samp><span class="command">gawk</span></samp> automatically falls back to
using regular pipes.

<div class="node">
<a name="TCP%2fIP-Networking"></a>
<a name="TCP_002fIP-Networking"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Profiling">Profiling</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Two_002dway-I_002fO">Two-way I/O</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Advanced-Features">Advanced Features</a>

</div>

<h3 class="section">11.4 Using <samp><span class="command">gawk</span></samp> for Network Programming</h3>

<p><a name="index-advanced-features_002c-_0040command_007bgawk_007d_002c-network-programming-1650"></a><a name="index-networks_002c-programming-1651"></a><!-- STARTOFRANGE tcpip -->
<a name="index-TCP_002fIP-1652"></a><a name="index-g_t_0040code_007b_002finet_002f_0040dots_007b_007d_007d-special-files-_0028_0040command_007bgawk_007d_0029-1653"></a><a name="index-files_002c-_0040code_007b_002finet_002f_0040dots_007b_007d_007d-_0028_0040command_007bgawk_007d_0029-1654"></a><a name="index-g_t_0040code_007b_002finet4_002f_0040dots_007b_007d_007d-special-files-_0028_0040command_007bgawk_007d_0029-1655"></a><a name="index-files_002c-_0040code_007b_002finet4_002f_0040dots_007b_007d_007d-_0028_0040command_007bgawk_007d_0029-1656"></a><a name="index-g_t_0040code_007b_002finet6_002f_0040dots_007b_007d_007d-special-files-_0028_0040command_007bgawk_007d_0029-1657"></a><a name="index-files_002c-_0040code_007b_002finet6_002f_0040dots_007b_007d_007d-_0028_0040command_007bgawk_007d_0029-1658"></a><a name="index-g_t_0040code_007bEMISTERED_007d-1659"></a><blockquote>
<code>EMISTERED</code>:<br>
    <i>A host is a host from coast to coast,<br>
    and no-one can talk to host that's close,<br>
    unless the host that isn't close<br>
    is busy hung or dead.</i>
</blockquote>

   <p>In addition to being able to open a two-way pipeline to a coprocess
on the same system
(see <a href="#Two_002dway-I_002fO">Two-way I/O</a>),
it is possible to make a two-way connection to
another process on another system across an IP network connection.

   <p>You can think of this as just a <em>very long</em> two-way pipeline to
a coprocess. 
The way <samp><span class="command">gawk</span></samp> decides that you want to use TCP/IP networking is
by recognizing special file names that begin with one of &lsquo;<samp><span class="samp">/inet/</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">/inet4/</span></samp>&rsquo; or &lsquo;<samp><span class="samp">/inet6</span></samp>&rsquo;.

   <p>The full syntax of the special file name is
<samp><span class="file">/</span><var>net-type</var><span class="file">/</span><var>protocol</var><span class="file">/</span><var>local-port</var><span class="file">/</span><var>remote-host</var><span class="file">/</span><var>remote-port</var></samp>. 
The components are:

     <dl>
<dt><var>net-type</var><dd>Specifies the kind of Internet connection to make. 
Use &lsquo;<samp><span class="samp">/inet4/</span></samp>&rsquo; to force IPv4, and
&lsquo;<samp><span class="samp">/inet6/</span></samp>&rsquo; to force IPv6. 
Plain &lsquo;<samp><span class="samp">/inet/</span></samp>&rsquo; (which used to be the only option) uses
the system default, most likely IPv4.

     <br><dt><var>protocol</var><dd>The protocol to use over IP.  This must be either &lsquo;<samp><span class="samp">tcp</span></samp>&rsquo;, or
&lsquo;<samp><span class="samp">udp</span></samp>&rsquo;, for a TCP or UDP IP connection,
respectively.  The use of TCP is recommended for most applications.

     <br><dt><var>local-port</var><dd><a name="index-g_t_0040code_007bgetaddrinfo_0028_0029_007d-function-_0028C-library_0029-1660"></a>The local TCP or UDP port number to use.  Use a port number of &lsquo;<samp><span class="samp">0</span></samp>&rsquo;
when you want the system to pick a port. This is what you should do
when writing a TCP or UDP client. 
You may also use a well-known service name, such as &lsquo;<samp><span class="samp">smtp</span></samp>&rsquo;
or &lsquo;<samp><span class="samp">http</span></samp>&rsquo;, in which case <samp><span class="command">gawk</span></samp> attempts to determine
the predefined port number using the C <code>getaddrinfo()</code> function.

     <br><dt><var>remote-host</var><dd>The IP address or fully-qualified domain name of the Internet
host to which you want to connect.

     <br><dt><var>remote-port</var><dd>The TCP or UDP port number to use on the given <var>remote-host</var>. 
Again, use &lsquo;<samp><span class="samp">0</span></samp>&rsquo; if you don't care, or else a well-known
service name. 
</dl>

   <p><a name="index-g_t_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-in-1661"></a><a name="index-g_t_0040code_007bERRNO_007d-variable-1662"></a><blockquote>
<b>NOTE:</b> Failure in opening a two-way socket will result in a non-fatal error
being returned to the calling code. The value of <code>ERRNO</code> indicates
the error (see <a href="#Auto_002dset">Auto-set</a>). 
</blockquote>

   <p>Consider the following very simple example:

<pre class="example">     BEGIN {
       Service = "/inet/tcp/0/localhost/daytime"
       Service |&amp; getline
       print $0
       close(Service)
     }
</pre>
   <p>This program reads the current date and time from the local system's
TCP &lsquo;<samp><span class="samp">daytime</span></samp>&rsquo; server. 
It then prints the results and closes the connection.

   <p>Because this topic is extensive, the use of <samp><span class="command">gawk</span></samp> for
TCP/IP programming is documented separately. 
See <cite>TCP/IP Internetworking with </cite><samp><span class="command">gawk</span></samp>,
which comes as part of the <samp><span class="command">gawk</span></samp> distribution,
for a much more complete introduction and discussion, as well as
extensive examples.

<!-- ENDOFRANGE tcpip -->
<div class="node">
<a name="Profiling"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#TCP_002fIP-Networking">TCP/IP Networking</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Advanced-Features">Advanced Features</a>

</div>

<h3 class="section">11.5 Profiling Your <samp><span class="command">awk</span></samp> Programs</h3>

<!-- STARTOFRANGE awkp -->
<p><a name="index-g_t_0040command_007bawk_007d-programs_002c-profiling-1663"></a><!-- STARTOFRANGE proawk -->
<a name="index-profiling-_0040command_007bawk_007d-programs-1664"></a><!-- STARTOFRANGE pgawk -->
<a name="index-g_t_0040command_007bpgawk_007d-program-1665"></a><a name="index-profiling-_0040command_007bgawk_007d_002c-See-_0040command_007bpgawk_007d-program-1666"></a>
You may produce execution
traces of your <samp><span class="command">awk</span></samp> programs. 
This is done with a specially compiled version of <samp><span class="command">gawk</span></samp>,
called <samp><span class="command">pgawk</span></samp> (&ldquo;profiling <samp><span class="command">gawk</span></samp>&rdquo;).

   <p><a name="index-g_t_0040code_007bawkprof_002eout_007d-file-1667"></a><a name="index-files_002c-_0040code_007bawkprof_002eout_007d-1668"></a><a name="index-g_t_0040command_007bpgawk_007d-program_002c-_0040code_007bawkprof_002eout_007d-file-1669"></a><samp><span class="command">pgawk</span></samp> is identical in every way to <samp><span class="command">gawk</span></samp>, except that when
it has finished running, it creates a profile of your program in a file
named <samp><span class="file">awkprof.out</span></samp>. 
Because it is profiling, it also executes up to 45% slower than
<samp><span class="command">gawk</span></samp> normally does.

   <p><a name="index-g_t_0040code_007b_002d_002dprofile_007d-option-1670"></a>As shown in the following example,
the <samp><span class="option">--profile</span></samp> option can be used to change the name of the file
where <samp><span class="command">pgawk</span></samp> will write the profile:

<pre class="example">     pgawk --profile=myprog.prof -f myprog.awk data1 data2
</pre>
   <p class="noindent">In the above example, <samp><span class="command">pgawk</span></samp> places the profile in
<samp><span class="file">myprog.prof</span></samp> instead of in <samp><span class="file">awkprof.out</span></samp>.

   <p>Here is a sample
session showing a simple <samp><span class="command">awk</span></samp> program, its input data, and the
results from running <samp><span class="command">pgawk</span></samp>.  First, the <samp><span class="command">awk</span></samp> program:

<pre class="example">     BEGIN { print "First BEGIN rule" }
     
     END { print "First END rule" }
     
     /foo/ {
         print "matched /foo/, gosh"
         for (i = 1; i &lt;= 3; i++)
             sing()
     }
     
     {
         if (/foo/)
             print "if is true"
         else
             print "else is true"
     }
     
     BEGIN { print "Second BEGIN rule" }
     
     END { print "Second END rule" }
     
     function sing(    dummy)
     {
         print "I gotta be me!"
     }
</pre>
   <p>Following is the input data:

<pre class="example">     foo
     bar
     baz
     foo
     junk
</pre>
   <p>Here is the <samp><span class="file">awkprof.out</span></samp> that results from running <samp><span class="command">pgawk</span></samp>
on this program and data (this example also illustrates that <samp><span class="command">awk</span></samp>
programmers sometimes have to work late):

   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040command_007bpgawk_007d-program-1671"></a><a name="index-g_t_0040code_007bEND_007d-pattern_002c-_0040command_007bpgawk_007d-program-1672"></a>
<pre class="example">             # gawk profile, created Sun Aug 13 00:00:15 2000
     
             # BEGIN block(s)
     
             BEGIN {
          1          print "First BEGIN rule"
          1          print "Second BEGIN rule"
             }
     
             # Rule(s)
     
          5  /foo/   { # 2
          2          print "matched /foo/, gosh"
          6          for (i = 1; i &lt;= 3; i++) {
          6                  sing()
                     }
             }
     
          5  {
          5          if (/foo/) { # 2
          2                  print "if is true"
          3          } else {
          3                  print "else is true"
                     }
             }
     
             # END block(s)
     
             END {
          1          print "First END rule"
          1          print "Second END rule"
             }
     
             # Functions, listed alphabetically
     
          6  function sing(dummy)
             {
          6          print "I gotta be me!"
             }
</pre>
   <p>This example illustrates many of the basic features of profiling output. 
They are as follows:

     <ul>
<li>The program is printed in the order <code>BEGIN</code> rule,
<code>BEGINFILE</code> rule,
pattern/action rules,
<code>ENDFILE</code> rule, <code>END</code> rule and functions, listed
alphabetically. 
Multiple <code>BEGIN</code> and <code>END</code> rules are merged together,
as are multiple <code>BEGINFILE</code> and <code>ENDFILE</code> rules.

     <p><a name="index-patterns_002c-counts-1673"></a><li>Pattern-action rules have two counts. 
The first count, to the left of the rule, shows how many times
the rule's pattern was <em>tested</em>. 
The second count, to the right of the rule's opening left brace
in a comment,
shows how many times the rule's action was <em>executed</em>. 
The difference between the two indicates how many times the rule's
pattern evaluated to false.

     <li>Similarly,
the count for an <code>if</code>-<code>else</code> statement shows how many times
the condition was tested. 
To the right of the opening left brace for the <code>if</code>'s body
is a count showing how many times the condition was true. 
The count for the <code>else</code>
indicates how many times the test failed.

     <p><a name="index-loops_002c-count-for-header-1674"></a><li>The count for a loop header (such as <code>for</code>
or <code>while</code>) shows how many times the loop test was executed. 
(Because of this, you can't just look at the count on the first
statement in a rule to determine how many times the rule was executed. 
If the first statement is a loop, the count is misleading.)

     <p><a name="index-functions_002c-user_002ddefined_002c-counts-1675"></a><a name="index-user_002ddefined_002c-functions_002c-counts-1676"></a><li>For user-defined functions, the count next to the <code>function</code>
keyword indicates how many times the function was called. 
The counts next to the statements in the body show how many times
those statements were executed.

     <p><a name="index-g_t_0040code_007b_0040_007b_0040_007d_007d-_0028braces_0029_002c-_0040command_007bpgawk_007d-program-1677"></a><a name="index-braces-_0028_0040code_007b_0040_007b_0040_007d_007d_0029_002c-_0040command_007bpgawk_007d-program-1678"></a><li>The layout uses &ldquo;K&amp;R&rdquo; style with TABs. 
Braces are used everywhere, even when
the body of an <code>if</code>, <code>else</code>, or loop is only a single statement.

     <p><a name="index-g_t_0040code_007b_0028_0029_007d-_0028parentheses_0029_002c-_0040command_007bpgawk_007d-program-1679"></a><a name="index-parentheses-_0040code_007b_0028_0029_007d_002c-_0040command_007bpgawk_007d-program-1680"></a><li>Parentheses are used only where needed, as indicated by the structure
of the program and the precedence rules. 
<!-- extra verbiage here satisfies the copyeditor. ugh. -->
For example, &lsquo;<samp><span class="samp">(3 + 5) * 4</span></samp>&rsquo; means add three plus five, then multiply
the total by four.  However, &lsquo;<samp><span class="samp">3 + 5 * 4</span></samp>&rsquo; has no parentheses, and
means &lsquo;<samp><span class="samp">3 + (5 * 4)</span></samp>&rsquo;.

     <li>Parentheses are used around the arguments to <code>print</code>
and <code>printf</code> only when
the <code>print</code> or <code>printf</code> statement is followed by a redirection. 
Similarly, if
the target of a redirection isn't a scalar, it gets parenthesized.

     <li><samp><span class="command">pgawk</span></samp> supplies leading comments in
front of the <code>BEGIN</code> and <code>END</code> rules,
the pattern/action rules, and the functions.

   </ul>

   <p>The profiled version of your program may not look exactly like what you
typed when you wrote it.  This is because <samp><span class="command">pgawk</span></samp> creates the
profiled version by &ldquo;pretty printing&rdquo; its internal representation of
the program.  The advantage to this is that <samp><span class="command">pgawk</span></samp> can produce
a standard representation.  The disadvantage is that all source-code
comments are lost, as are the distinctions among multiple <code>BEGIN</code>,
<code>END</code>, <code>BEGINFILE</code>, and <code>ENDFILE</code> rules.  Also, things such as:

<pre class="example">     /foo/
</pre>
   <p class="noindent">come out as:

<pre class="example">     /foo/   {
         print $0
     }
</pre>
   <p class="noindent">which is correct, but possibly surprising.

   <p><a name="index-profiling-_0040command_007bawk_007d-programs_002c-dynamically-1681"></a><a name="index-g_t_0040command_007bpgawk_007d-program_002c-dynamic-profiling-1682"></a>Besides creating profiles when a program has completed,
<samp><span class="command">pgawk</span></samp> can produce a profile while it is running. 
This is useful if your <samp><span class="command">awk</span></samp> program goes into an
infinite loop and you want to see what has been executed. 
To use this feature, run <samp><span class="command">pgawk</span></samp> in the background:

<pre class="example">     $ <kbd>pgawk -f myprog &amp;</kbd>
     [1] 13992
</pre>
   <p><a name="index-g_t_0040command_007bkill_007d-command_0040comma_007b_007d-dynamic-profiling-1683"></a><a name="index-g_t_0040code_007bUSR1_007d-signal-1684"></a><a name="index-g_t_0040code_007bSIGUSR1_007d-signal-1685"></a><a name="index-signals_002c-_0040code_007bUSR1_007d_002f_0040code_007bSIGUSR1_007d-1686"></a>The shell prints a job number and process ID number; in this case, 13992. 
Use the <samp><span class="command">kill</span></samp> command to send the <code>USR1</code> signal
to <samp><span class="command">pgawk</span></samp>:

<pre class="example">     $ <kbd>kill -USR1 13992</kbd>
</pre>
   <p class="noindent">As usual, the profiled version of the program is written to
<samp><span class="file">awkprof.out</span></samp>, or to a different file if you use the <samp><span class="option">--profile</span></samp>
option.

   <p>Along with the regular profile, as shown earlier, the profile
includes a trace of any active functions:

<pre class="example">     # Function Call Stack:
     
     #   3. baz
     #   2. bar
     #   1. foo
     # -- main --
</pre>
   <p>You may send <samp><span class="command">pgawk</span></samp> the <code>USR1</code> signal as many times as you like. 
Each time, the profile and function call trace are appended to the output
profile file.

   <p><a name="index-g_t_0040code_007bHUP_007d-signal-1687"></a><a name="index-g_t_0040code_007bSIGHUP_007d-signal-1688"></a><a name="index-signals_002c-_0040code_007bHUP_007d_002f_0040code_007bSIGHUP_007d-1689"></a>If you use the <code>HUP</code> signal instead of the <code>USR1</code> signal,
<samp><span class="command">pgawk</span></samp> produces the profile and the function call trace and then exits.

   <p><a name="index-g_t_0040code_007bINT_007d-signal-_0028MS_002dWindows_0029-1690"></a><a name="index-g_t_0040code_007bSIGINT_007d-signal-_0028MS_002dWindows_0029-1691"></a><a name="index-signals_002c-_0040code_007bINT_007d_002f_0040code_007bSIGINT_007d-_0028MS_002dWindows_0029-1692"></a><a name="index-g_t_0040code_007bQUIT_007d-signal-_0028MS_002dWindows_0029-1693"></a><a name="index-g_t_0040code_007bSIGQUIT_007d-signal-_0028MS_002dWindows_0029-1694"></a><a name="index-signals_002c-_0040code_007bQUIT_007d_002f_0040code_007bSIGQUIT_007d-_0028MS_002dWindows_0029-1695"></a>When <samp><span class="command">pgawk</span></samp> runs on MS-Windows systems, it uses the
<code>INT</code> and <code>QUIT</code> signals for producing the profile and, in
the case of the <code>INT</code> signal, <samp><span class="command">pgawk</span></samp> exits.  This is
because these systems don't support the <samp><span class="command">kill</span></samp> command, so the
only signals you can deliver to a program are those generated by the
keyboard.  The <code>INT</code> signal is generated by the
<kbd>Ctrl-&lt;C&gt;</kbd> or <kbd>Ctrl-&lt;BREAK&gt;</kbd> key, while the
<code>QUIT</code> signal is generated by the <kbd>Ctrl-&lt;\&gt;</kbd> key.

   <p>Finally, regular <samp><span class="command">gawk</span></samp> also accepts the <samp><span class="option">--profile</span></samp> option. 
When called this way, <samp><span class="command">gawk</span></samp> &ldquo;pretty prints&rdquo; the program into
<samp><span class="file">awkprof.out</span></samp>, without any execution counts. 
<!-- ENDOFRANGE advgaw -->
<!-- ENDOFRANGE gawadv -->
<!-- ENDOFRANGE pgawk -->
<!-- ENDOFRANGE awkp -->
<!-- ENDOFRANGE proawk -->

<div class="node">
<a name="Library-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Sample-Programs">Sample Programs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Advanced-Features">Advanced Features</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">12 A Library of <samp><span class="command">awk</span></samp> Functions</h2>

<!-- STARTOFRANGE libf -->
<p><a name="index-libraries-of-_0040command_007bawk_007d-functions-1696"></a><!-- STARTOFRANGE flib -->
<a name="index-functions_002c-library-1697"></a><!-- STARTOFRANGE fudlib -->
<a name="index-functions_002c-user_002ddefined_002c-library-of-1698"></a>
<a href="#User_002ddefined">User-defined</a>, describes how to write
your own <samp><span class="command">awk</span></samp> functions.  Writing functions is important, because
it allows you to encapsulate algorithms and program tasks in a single
place.  It simplifies programming, making program development more
manageable, and making programs more readable.

   <p>One valuable way to learn a new programming language is to <em>read</em>
programs in that language.  To that end, this chapter
and <a href="#Sample-Programs">Sample Programs</a>,
provide a good-sized body of code for you to read,
and hopefully, to learn from.

<!-- 2e: USE TEXINFO-2 FUNCTION DEFINITION STUFF!!!!!!!!!!!!! -->
   <p>This chapter presents a library of useful <samp><span class="command">awk</span></samp> functions. 
Many of the sample programs presented later in this Web page
use these functions. 
The functions are presented here in a progression from simple to complex.

   <p><a name="index-Texinfo-1699"></a><a href="#Extract-Program">Extract Program</a>,
presents a program that you can use to extract the source code for
these example library functions and programs from the Texinfo source
for this Web page. 
(This has already been done as part of the <samp><span class="command">gawk</span></samp> distribution.)

   <p>If you have written one or more useful, general-purpose <samp><span class="command">awk</span></samp> functions
and would like to contribute them to the <samp><span class="command">awk</span></samp> user community, see
<a href="#How-To-Contribute">How To Contribute</a>, for more information.

   <p><a name="index-portability_002c-example-programs-1700"></a>The programs in this chapter and in
<a href="#Sample-Programs">Sample Programs</a>,
freely use features that are <samp><span class="command">gawk</span></samp>-specific. 
Rewriting these programs for different implementations of <samp><span class="command">awk</span></samp>
is pretty straightforward.

     <ul>
<li>Diagnostic error messages are sent to <samp><span class="file">/dev/stderr</span></samp>. 
Use &lsquo;<samp><span class="samp">| "cat 1&gt;&amp;2"</span></samp>&rsquo; instead of &lsquo;<samp><span class="samp">&gt; "/dev/stderr"</span></samp>&rsquo; if your system
does not have a <samp><span class="file">/dev/stderr</span></samp>, or if you cannot use <samp><span class="command">gawk</span></samp>.

     <li>A number of programs use <code>nextfile</code>
(see <a href="#Nextfile-Statement">Nextfile Statement</a>)
to skip any remaining input in the input file.

     <li><!-- 12/2000: Thanks to Nelson Beebe for pointing out the output issue. -->
<a name="index-case-sensitivity_002c-example-programs-1701"></a><a name="index-g_t_0040code_007bIGNORECASE_007d-variable_002c-in-example-programs-1702"></a>Finally, some of the programs choose to ignore upper- and lowercase
distinctions in their input. They do so by assigning one to <code>IGNORECASE</code>. 
You can achieve almost the same effect<a rel="footnote" href="#fn-65" name="fnd-65"><sup>65</sup></a> by adding the following rule to the
beginning of the program:

     <pre class="example">          # ignore case
          { $0 = tolower($0) }
</pre>
     <p class="noindent">Also, verify that all regexp and string constants used in
comparisons use only lowercase letters. 
</ul>

<ul class="menu">
<li><a accesskey="1" href="#Library-Names">Library Names</a>:                How to best name private global variables in
                                library functions. 
<li><a accesskey="2" href="#General-Functions">General Functions</a>:            Functions that are of general use. 
<li><a accesskey="3" href="#Data-File-Management">Data File Management</a>:         Functions for managing command-line data
                                files. 
<li><a accesskey="4" href="#Getopt-Function">Getopt Function</a>:              A function for processing command-line
                                arguments. 
<li><a accesskey="5" href="#Passwd-Functions">Passwd Functions</a>:             Functions for getting user information. 
<li><a accesskey="6" href="#Group-Functions">Group Functions</a>:              Functions for getting group information. 
<li><a accesskey="7" href="#Walking-Arrays">Walking Arrays</a>:               A function to walk arrays of arrays. 
</ul>

<div class="node">
<a name="Library-Names"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#General-Functions">General Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Library-Functions">Library Functions</a>

</div>

<h3 class="section">12.1 Naming Library Function Global Variables</h3>

<p><a name="index-names_002c-arrays_002fvariables-1703"></a><a name="index-names_002c-functions-1704"></a><a name="index-namespace-issues-1705"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-documenting-1706"></a><a name="index-documentation_002c-of-_0040command_007bawk_007d-programs-1707"></a>Due to the way the <samp><span class="command">awk</span></samp> language evolved, variables are either
<dfn>global</dfn> (usable by the entire program) or <dfn>local</dfn> (usable just by
a specific function).  There is no intermediate state analogous to
<code>static</code> variables in C.

   <p><a name="index-variables_002c-global_002c-for-library-functions-1708"></a><a name="index-private-variables-1709"></a><a name="index-variables_002c-private-1710"></a>Library functions often need to have global variables that they can use to
preserve state information between calls to the function&mdash;for example,
<code>getopt()</code>'s variable <code>_opti</code>
(see <a href="#Getopt-Function">Getopt Function</a>). 
Such variables are called <dfn>private</dfn>, since the only functions that need to
use them are the ones in the library.

   <p>When writing a library function, you should try to choose names for your
private variables that will not conflict with any variables used by
either another library function or a user's main program.  For example, a
name like <code>i</code> or <code>j</code> is not a good choice, because user programs
often use variable names like these for their own purposes.

   <p><a name="index-programming-conventions_002c-private-variable-names-1711"></a>The example programs shown in this chapter all start the names of their
private variables with an underscore (&lsquo;<samp><span class="samp">_</span></samp>&rsquo;).  Users generally don't use
leading underscores in their variable names, so this convention immediately
decreases the chances that the variable name will be accidentally shared
with the user's program.

   <p><a name="index-g_t_0040code_007b_005f_007d-_0028underscore_0029_002c-in-names-of-private-variables-1712"></a><a name="index-underscore-_0028_0040code_007b_005f_007d_0029_002c-in-names-of-private-variables-1713"></a>In addition, several of the library functions use a prefix that helps
indicate what function or set of functions use the variables&mdash;for example,
<code>_pw_byname</code> in the user database routines
(see <a href="#Passwd-Functions">Passwd Functions</a>). 
This convention is recommended, since it even further decreases the
chance of inadvertent conflict among variable names.  Note that this
convention is used equally well for variable names and for private
function names.<a rel="footnote" href="#fn-66" name="fnd-66"><sup>66</sup></a>

   <p>As a final note on variable naming, if a function makes global variables
available for use by a main program, it is a good convention to start that
variable's name with a capital letter&mdash;for
example, <code>getopt()</code>'s <code>Opterr</code> and <code>Optind</code> variables
(see <a href="#Getopt-Function">Getopt Function</a>). 
The leading capital letter indicates that it is global, while the fact that
the variable name is not all capital letters indicates that the variable is
not one of <samp><span class="command">awk</span></samp>'s built-in variables, such as <code>FS</code>.

   <p><a name="index-g_t_0040code_007b_002d_002ddump_002dvariables_007d-option-1714"></a>It is also important that <em>all</em> variables in library
functions that do not need to save state are, in fact, declared
local.<a rel="footnote" href="#fn-67" name="fnd-67"><sup>67</sup></a> If this is not done, the variable
could accidentally be used in the user's program, leading to bugs that
are very difficult to track down:

<pre class="example">     function lib_func(x, y,    l1, l2)
     {
         ...
         <var>use variable</var> some_var   # some_var should be local
         ...                     # but is not by oversight
     }
</pre>
   <p><a name="index-arrays_002c-associative_002c-library-functions-and-1715"></a><a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-associative-arrays-and-1716"></a><a name="index-functions_002c-library_002c-associative-arrays-and-1717"></a><a name="index-Tcl-1718"></a>A different convention, common in the Tcl community, is to use a single
associative array to hold the values needed by the library function(s), or
&ldquo;package.&rdquo;  This significantly decreases the number of actual global names
in use.  For example, the functions described in
<a href="#Passwd-Functions">Passwd Functions</a>,
might have used array elements <code>PW_data["inited"]<!-- /@w --></code>, <code>PW_data["total"]<!-- /@w --></code>,
<code>PW_data["count"]<!-- /@w --></code>, and <code>PW_data["awklib"]<!-- /@w --></code>, instead of
<code>_pw_inited<!-- /@w --></code>, <code>_pw_awklib<!-- /@w --></code>, <code>_pw_total<!-- /@w --></code>,
and <code>_pw_count<!-- /@w --></code>.

   <p>The conventions presented in this section are exactly
that: conventions. You are not required to write your programs this
way&mdash;we merely recommend that you do so.

<div class="node">
<a name="General-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Data-File-Management">Data File Management</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Library-Names">Library Names</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Library-Functions">Library Functions</a>

</div>

<h3 class="section">12.2 General Programming</h3>

<p>This section presents a number of functions that are of general
programming use.

<ul class="menu">
<li><a accesskey="1" href="#Strtonum-Function">Strtonum Function</a>:            A replacement for the built-in
                                <code>strtonum()</code> function. 
<li><a accesskey="2" href="#Assert-Function">Assert Function</a>:              A function for assertions in <samp><span class="command">awk</span></samp>
                                programs. 
<li><a accesskey="3" href="#Round-Function">Round Function</a>:               A function for rounding if <code>sprintf()</code>
                                does not do it correctly. 
<li><a accesskey="4" href="#Cliff-Random-Function">Cliff Random Function</a>:        The Cliff Random Number Generator. 
<li><a accesskey="5" href="#Ordinal-Functions">Ordinal Functions</a>:            Functions for using characters as numbers and
                                vice versa. 
<li><a accesskey="6" href="#Join-Function">Join Function</a>:                A function to join an array into a string. 
<li><a accesskey="7" href="#Gettimeofday-Function">Gettimeofday Function</a>:        A function to get formatted times. 
</ul>

<div class="node">
<a name="Strtonum-Function"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Assert-Function">Assert Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-Functions">General Functions</a>

</div>

<h4 class="subsection">12.2.1 Converting Strings To Numbers</h4>

<p>The <code>strtonum()</code> function (see <a href="#String-Functions">String Functions</a>)
is a <samp><span class="command">gawk</span></samp> extension.  The following function
provides an implementation for other versions of <samp><span class="command">awk</span></samp>:

<pre class="example">     <!-- file eg/lib/strtonum.awk -->
     # mystrtonum --- convert string to number
     
     <!-- endfile -->
     <!-- file eg/lib/strtonum.awk -->
     function mystrtonum(str,        ret, chars, n, i, k, c)
     {
         if (str ~ /^0[0-7]*$/) {
             # octal
             n = length(str)
             ret = 0
             for (i = 1; i &lt;= n; i++) {
                 c = substr(str, i, 1)
                 if ((k = index("01234567", c)) &gt; 0)
                     k-- # adjust for 1-basing in awk
     
                 ret = ret * 8 + k
             }
         } else if (str ~ /^0[xX][[:xdigit:]]+/) {
             # hexadecimal
             str = substr(str, 3)    # lop off leading 0x
             n = length(str)
             ret = 0
             for (i = 1; i &lt;= n; i++) {
                 c = substr(str, i, 1)
                 c = tolower(c)
                 if ((k = index("0123456789", c)) &gt; 0)
                     k-- # adjust for 1-basing in awk
                 else if ((k = index("abcdef", c)) &gt; 0)
                     k += 9
     
                 ret = ret * 16 + k
             }
         } else if (str ~ \
       /^[-+]?([0-9]+([.][0-9]*([Ee][0-9]+)?)?|([.][0-9]+([Ee][-+]?[0-9]+)?))$/) {
             # decimal number, possibly floating point
             ret = str + 0
         } else
             ret = "NOT-A-NUMBER"
     
         return ret
     }
     
     # BEGIN {     # gawk test harness
     #     a[1] = "25"
     #     a[2] = ".31"
     #     a[3] = "0123"
     #     a[4] = "0xdeadBEEF"
     #     a[5] = "123.45"
     #     a[6] = "1.e3"
     #     a[7] = "1.32"
     #     a[7] = "1.32E2"
     #
     #     for (i = 1; i in a; i++)
     #         print a[i], strtonum(a[i]), mystrtonum(a[i])
     # }
     <!-- endfile -->
</pre>
   <p>The function first looks for C-style octal numbers (base 8). 
If the input string matches a regular expression describing octal
numbers, then <code>mystrtonum()</code> loops through each character in the
string.  It sets <code>k</code> to the index in <code>"01234567"</code> of the current
octal digit.  Since the return value is one-based, the &lsquo;<samp><span class="samp">k--</span></samp>&rsquo;
adjusts <code>k</code> so it can be used in computing the return value.

   <p>Similar logic applies to the code that checks for and converts a
hexadecimal value, which starts with &lsquo;<samp><span class="samp">0x</span></samp>&rsquo; or &lsquo;<samp><span class="samp">0X</span></samp>&rsquo;. 
The use of <code>tolower()</code> simplifies the computation for finding
the correct numeric value for each hexadecimal digit.

   <p>Finally, if the string matches the (rather complicated) regexp for a
regular decimal integer or floating-point number, the computation
&lsquo;<samp><span class="samp">ret = str + 0</span></samp>&rsquo; lets <samp><span class="command">awk</span></samp> convert the value to a
number.

   <p>A commented-out test program is included, so that the function can
be tested with <samp><span class="command">gawk</span></samp> and the results compared to the built-in
<code>strtonum()</code> function.

<div class="node">
<a name="Assert-Function"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Round-Function">Round Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Strtonum-Function">Strtonum Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-Functions">General Functions</a>

</div>

<h4 class="subsection">12.2.2 Assertions</h4>

<!-- STARTOFRANGE asse -->
<p><a name="index-assertions-1719"></a><!-- STARTOFRANGE assef -->
<a name="index-g_t_0040code_007bassert_0028_0029_007d-function-_0028C-library_0029-1720"></a><!-- STARTOFRANGE libfass -->
<a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-assertions-1721"></a><!-- STARTOFRANGE flibass -->
<a name="index-functions_002c-library_002c-assertions-1722"></a><a name="index-g_t_0040command_007bawk_007d-programs_002c-lengthy_002c-assertions-1723"></a>When writing large programs, it is often useful to know
that a condition or set of conditions is true.  Before proceeding with a
particular computation, you make a statement about what you believe to be
the case.  Such a statement is known as an
<dfn>assertion</dfn>.  The C language provides an <code>&lt;assert.h&gt;</code> header file
and corresponding <code>assert()</code> macro that the programmer can use to make
assertions.  If an assertion fails, the <code>assert()</code> macro arranges to
print a diagnostic message describing the condition that should have
been true but was not, and then it kills the program.  In C, using
<code>assert()</code> looks this:

<pre class="example">     #include &lt;assert.h&gt;
     
     int myfunc(int a, double b)
     {
          assert(a &lt;= 5 &amp;&amp; b &gt;= 17.1);
          ...
     }
</pre>
   <p>If the assertion fails, the program prints a message similar to this:

<pre class="example">     prog.c:5: assertion failed: a &lt;= 5 &amp;&amp; b &gt;= 17.1
</pre>
   <p><a name="index-g_t_0040code_007bassert_0028_0029_007d-user_002ddefined-function-1724"></a>The C language makes it possible to turn the condition into a string for use
in printing the diagnostic message.  This is not possible in <samp><span class="command">awk</span></samp>, so
this <code>assert()</code> function also requires a string version of the condition
that is being tested. 
Following is the function:

<pre class="example">     <!-- file eg/lib/assert.awk -->
     # assert --- assert that a condition is true. Otherwise exit.
     
     <!-- endfile -->
     <!-- file eg/lib/assert.awk -->
     function assert(condition, string)
     {
         if (! condition) {
             printf("%s:%d: assertion failed: %s\n",
                 FILENAME, FNR, string) &gt; "/dev/stderr"
             _assert_exit = 1
             exit 1
         }
     }
     
     END {
         if (_assert_exit)
             exit 1
     }
     <!-- endfile -->
</pre>
   <p>The <code>assert()</code> function tests the <code>condition</code> parameter. If it
is false, it prints a message to standard error, using the <code>string</code>
parameter to describe the failed condition.  It then sets the variable
<code>_assert_exit</code> to one and executes the <code>exit</code> statement. 
The <code>exit</code> statement jumps to the <code>END</code> rule. If the <code>END</code>
rules finds <code>_assert_exit</code> to be true, it exits immediately.

   <p>The purpose of the test in the <code>END</code> rule is to
keep any other <code>END</code> rules from running.  When an assertion fails, the
program should exit immediately. 
If no assertions fail, then <code>_assert_exit</code> is still
false when the <code>END</code> rule is run normally, and the rest of the
program's <code>END</code> rules execute. 
For all of this to work correctly, <samp><span class="file">assert.awk</span></samp> must be the
first source file read by <samp><span class="command">awk</span></samp>. 
The function can be used in a program in the following way:

<pre class="example">     function myfunc(a, b)
     {
          assert(a &lt;= 5 &amp;&amp; b &gt;= 17.1, "a &lt;= 5 &amp;&amp; b &gt;= 17.1")
          ...
     }
</pre>
   <p class="noindent">If the assertion fails, you see a message similar to the following:

<pre class="example">     mydata:1357: assertion failed: a &lt;= 5 &amp;&amp; b &gt;= 17.1
</pre>
   <p><a name="index-g_t_0040code_007bEND_007d-pattern_002c-_0040code_007bassert_0028_0029_007d-user_002ddefined-function-and-1725"></a>There is a small problem with this version of <code>assert()</code>. 
An <code>END</code> rule is automatically added
to the program calling <code>assert()</code>.  Normally, if a program consists
of just a <code>BEGIN</code> rule, the input files and/or standard input are
not read. However, now that the program has an <code>END</code> rule, <samp><span class="command">awk</span></samp>
attempts to read the input data files or standard input
(see <a href="#Using-BEGIN_002fEND">Using BEGIN/END</a>),
most likely causing the program to hang as it waits for input.

   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bassert_0028_0029_007d-user_002ddefined-function-and-1726"></a>There is a simple workaround to this:
make sure that such a <code>BEGIN</code> rule always ends
with an <code>exit</code> statement. 
<!-- ENDOFRANGE asse -->
<!-- ENDOFRANGE assef -->
<!-- ENDOFRANGE flibass -->
<!-- ENDOFRANGE libfass -->

<div class="node">
<a name="Round-Function"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Cliff-Random-Function">Cliff Random Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Assert-Function">Assert Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-Functions">General Functions</a>

</div>

<h4 class="subsection">12.2.3 Rounding Numbers</h4>

<p><a name="index-rounding-numbers-1727"></a><a name="index-numbers_002c-rounding-1728"></a><a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-rounding-numbers-1729"></a><a name="index-functions_002c-library_002c-rounding-numbers-1730"></a><a name="index-g_t_0040code_007bprint_007d-statement_002c-_0040code_007bsprintf_0028_0029_007d-function-and-1731"></a><a name="index-g_t_0040code_007bprintf_007d-statement_002c-_0040code_007bsprintf_0028_0029_007d-function-and-1732"></a><a name="index-g_t_0040code_007bsprintf_0028_0029_007d-function_002c-_0040code_007bprint_007d_002f_0040code_007bprintf_007d-statements-and-1733"></a>The way <code>printf</code> and <code>sprintf()</code>
(see <a href="#Printf">Printf</a>)
perform rounding often depends upon the system's C <code>sprintf()</code>
subroutine.  On many machines, <code>sprintf()</code> rounding is &ldquo;unbiased,&rdquo;
which means it doesn't always round a trailing &lsquo;<samp><span class="samp">.5</span></samp>&rsquo; up, contrary
to naive expectations.  In unbiased rounding, &lsquo;<samp><span class="samp">.5</span></samp>&rsquo; rounds to even,
rather than always up, so 1.5 rounds to 2 but 4.5 rounds to 4.  This means
that if you are using a format that does rounding (e.g., <code>"%.0f"</code>),
you should check what your system does.  The following function does
traditional rounding; it might be useful if your <samp><span class="command">awk</span></samp>'s <code>printf</code>
does unbiased rounding:

   <p><a name="index-g_t_0040code_007bround_0028_0029_007d-user_002ddefined-function-1734"></a>
<pre class="example">     <!-- file eg/lib/round.awk -->
     # round.awk --- do normal rounding
     <!-- endfile -->
     <!-- file eg/lib/round.awk -->
     
     function round(x,   ival, aval, fraction)
     {
        ival = int(x)    # integer part, int() truncates
     
        # see if fractional part
        if (ival == x)   # no fraction
           return ival   # ensure no decimals
     
        if (x &lt; 0) {
           aval = -x     # absolute value
           ival = int(aval)
           fraction = aval - ival
           if (fraction &gt;= .5)
              return int(x) - 1   # -2.5 --&gt; -3
           else
              return int(x)       # -2.3 --&gt; -2
        } else {
           fraction = x - ival
           if (fraction &gt;= .5)
              return ival + 1
           else
              return ival
        }
     }
     <!-- endfile -->
     <!-- don't include test harness in the file that gets installed -->
     
     # test harness
     { print $0, round($0) }
</pre>
   <div class="node">
<a name="Cliff-Random-Function"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Ordinal-Functions">Ordinal Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Round-Function">Round Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-Functions">General Functions</a>

</div>

<h4 class="subsection">12.2.4 The Cliff Random Number Generator</h4>

<p><a name="index-random-numbers_002c-Cliff-1735"></a><a name="index-Cliff-random-numbers-1736"></a><a name="index-numbers_002c-Cliff-random-1737"></a><a name="index-functions_002c-library_002c-Cliff-random-numbers-1738"></a>
The
<a href="http://mathworld.wolfram.com/CliffRandomNumberGenerator.html">Cliff random number generator</a>
is a very simple random number generator that &ldquo;passes the noise sphere test
for randomness by showing no structure.&rdquo;
It is easily programmed, in less than 10 lines of <samp><span class="command">awk</span></samp> code:

   <p><a name="index-g_t_0040code_007bcliff_005frand_0028_0029_007d-user_002ddefined-function-1739"></a>
<pre class="example">     <!-- file eg/lib/cliff_rand.awk -->
     # cliff_rand.awk --- generate Cliff random numbers
     <!-- endfile -->
     <!-- file eg/lib/cliff_rand.awk -->
     
     BEGIN { _cliff_seed = 0.1 }
     
     function cliff_rand()
     {
         _cliff_seed = (100 * log(_cliff_seed)) % 1
         if (_cliff_seed &lt; 0)
             _cliff_seed = - _cliff_seed
         return _cliff_seed
     }
     <!-- endfile -->
</pre>
   <p>This algorithm requires an initial &ldquo;seed&rdquo; of 0.1.  Each new value
uses the current seed as input for the calculation. 
If the built-in <code>rand()</code> function
(see <a href="#Numeric-Functions">Numeric Functions</a>)
isn't random enough, you might try using this function instead.

<div class="node">
<a name="Ordinal-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Join-Function">Join Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Cliff-Random-Function">Cliff Random Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-Functions">General Functions</a>

</div>

<h4 class="subsection">12.2.5 Translating Between Characters and Numbers</h4>

<p><a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-character-values-as-numbers-1740"></a><a name="index-functions_002c-library_002c-character-values-as-numbers-1741"></a><a name="index-characters_002c-values-of-as-numbers-1742"></a><a name="index-numbers_002c-as-values-of-characters-1743"></a>One commercial implementation of <samp><span class="command">awk</span></samp> supplies a built-in function,
<code>ord()</code>, which takes a character and returns the numeric value for that
character in the machine's character set.  If the string passed to
<code>ord()</code> has more than one character, only the first one is used.

   <p>The inverse of this function is <code>chr()</code> (from the function of the same
name in Pascal), which takes a number and returns the corresponding character. 
Both functions are written very nicely in <samp><span class="command">awk</span></samp>; there is no real
reason to build them into the <samp><span class="command">awk</span></samp> interpreter:

   <p><a name="index-g_t_0040code_007bord_0028_0029_007d-user_002ddefined-function-1744"></a><a name="index-g_t_0040code_007bchr_0028_0029_007d-user_002ddefined-function-1745"></a>
<pre class="example">     <!-- file eg/lib/ord.awk -->
     # ord.awk --- do ord and chr
     
     # Global identifiers:
     #    _ord_:        numerical values indexed by characters
     #    _ord_init:    function to initialize _ord_
     <!-- endfile -->
     <!-- file eg/lib/ord.awk -->
     
     BEGIN    { _ord_init() }
     
     function _ord_init(    low, high, i, t)
     {
         low = sprintf("%c", 7) # BEL is ascii 7
         if (low == "\a") {    # regular ascii
             low = 0
             high = 127
         } else if (sprintf("%c", 128 + 7) == "\a") {
             # ascii, mark parity
             low = 128
             high = 255
         } else {        # ebcdic(!)
             low = 0
             high = 255
         }
     
         for (i = low; i &lt;= high; i++) {
             t = sprintf("%c", i)
             _ord_[t] = i
         }
     }
     <!-- endfile -->
</pre>
   <p><a name="index-character-sets-_0028machine-character-encodings_0029-1746"></a><a name="index-ASCII-1747"></a><a name="index-EBCDIC-1748"></a><a name="index-mark-parity-1749"></a>Some explanation of the numbers used by <code>chr</code> is worthwhile. 
The most prominent character set in use today is ASCII.<a rel="footnote" href="#fn-68" name="fnd-68"><sup>68</sup></a>
Although an
8-bit byte can hold 256 distinct values (from 0 to 255), ASCII only
defines characters that use the values from 0 to 127.<a rel="footnote" href="#fn-69" name="fnd-69"><sup>69</sup></a>
In the now distant past,
at least one minicomputer manufacturer
<!-- Pr1me, blech -->
used ASCII, but with mark parity, meaning that the leftmost bit in the byte
is always 1.  This means that on those systems, characters
have numeric values from 128 to 255. 
Finally, large mainframe systems use the EBCDIC character set, which
uses all 256 values. 
While there are other character sets in use on some older systems,
they are not really worth worrying about:

<pre class="example">     <!-- file eg/lib/ord.awk -->
     function ord(str,    c)
     {
         # only first character is of interest
         c = substr(str, 1, 1)
         return _ord_[c]
     }
     
     function chr(c)
     {
         # force c to be numeric by adding 0
         return sprintf("%c", c + 0)
     }
     <!-- endfile -->
     
     #### test code ####
     # BEGIN    \
     # {
     #    for (;;) {
     #        printf("enter a character: ")
     #        if (getline var &lt;= 0)
     #            break
     #        printf("ord(%s) = %d\n", var, ord(var))
     #    }
     # }
     <!-- endfile -->
</pre>
   <p>An obvious improvement to these functions is to move the code for the
<code>_ord_init<!-- /@w --></code> function into the body of the <code>BEGIN</code> rule.  It was
written this way initially for ease of development. 
There is a &ldquo;test program&rdquo; in a <code>BEGIN</code> rule, to test the
function.  It is commented out for production use.

<div class="node">
<a name="Join-Function"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Gettimeofday-Function">Gettimeofday Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Ordinal-Functions">Ordinal Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-Functions">General Functions</a>

</div>

<h4 class="subsection">12.2.6 Merging an Array into a String</h4>

<p><a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-merging-arrays-into-strings-1750"></a><a name="index-functions_002c-library_002c-merging-arrays-into-strings-1751"></a><a name="index-strings_002c-merging-arrays-into-1752"></a><a name="index-arrays_002c-merging-into-strings-1753"></a>When doing string processing, it is often useful to be able to join
all the strings in an array into one long string.  The following function,
<code>join()</code>, accomplishes this task.  It is used later in several of
the application programs
(see <a href="#Sample-Programs">Sample Programs</a>).

   <p>Good function design is important; this function needs to be general but it
should also have a reasonable default behavior.  It is called with an array
as well as the beginning and ending indices of the elements in the array to be
merged.  This assumes that the array indices are numeric&mdash;a reasonable
assumption since the array was likely created with <code>split()</code>
(see <a href="#String-Functions">String Functions</a>):

   <p><a name="index-g_t_0040code_007bjoin_0028_0029_007d-user_002ddefined-function-1754"></a>
<pre class="example">     <!-- file eg/lib/join.awk -->
     # join.awk --- join an array into a string
     <!-- endfile -->
     <!-- file eg/lib/join.awk -->
     
     function join(array, start, end, sep,    result, i)
     {
         if (sep == "")
            sep = " "
         else if (sep == SUBSEP) # magic value
            sep = ""
         result = array[start]
         for (i = start + 1; i &lt;= end; i++)
             result = result sep array[i]
         return result
     }
     <!-- endfile -->
</pre>
   <p>An optional additional argument is the separator to use when joining the
strings back together.  If the caller supplies a nonempty value,
<code>join()</code> uses it; if it is not supplied, it has a null
value.  In this case, <code>join()</code> uses a single space as a default
separator for the strings.  If the value is equal to <code>SUBSEP</code>,
then <code>join()</code> joins the strings with no separator between them. 
<code>SUBSEP</code> serves as a &ldquo;magic&rdquo; value to indicate that there should
be no separation between the component strings.<a rel="footnote" href="#fn-70" name="fnd-70"><sup>70</sup></a>

<div class="node">
<a name="Gettimeofday-Function"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Join-Function">Join Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#General-Functions">General Functions</a>

</div>

<h4 class="subsection">12.2.7 Managing the Time of Day</h4>

<p><a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-managing_002c-time-1755"></a><a name="index-functions_002c-library_002c-managing-time-1756"></a><a name="index-timestamps_002c-formatted-1757"></a><a name="index-time_002c-managing-1758"></a>The <code>systime()</code> and <code>strftime()</code> functions described in
<a href="#Time-Functions">Time Functions</a>,
provide the minimum functionality necessary for dealing with the time of day
in human readable form.  While <code>strftime()</code> is extensive, the control
formats are not necessarily easy to remember or intuitively obvious when
reading a program.

   <p>The following function, <code>gettimeofday()</code>, populates a user-supplied array
with preformatted time information.  It returns a string with the current
time formatted in the same way as the <samp><span class="command">date</span></samp> utility:

   <p><a name="index-g_t_0040code_007bgettimeofday_0028_0029_007d-user_002ddefined-function-1759"></a>
<pre class="example">     <!-- file eg/lib/gettime.awk -->
     # gettimeofday.awk --- get the time of day in a usable format
     <!-- endfile -->
     <!-- file eg/lib/gettime.awk -->
     
     # Returns a string in the format of output of date(1)
     # Populates the array argument time with individual values:
     #    time["second"]       -- seconds (0 - 59)
     #    time["minute"]       -- minutes (0 - 59)
     #    time["hour"]         -- hours (0 - 23)
     #    time["althour"]      -- hours (0 - 12)
     #    time["monthday"]     -- day of month (1 - 31)
     #    time["month"]        -- month of year (1 - 12)
     #    time["monthname"]    -- name of the month
     #    time["shortmonth"]   -- short name of the month
     #    time["year"]         -- year modulo 100 (0 - 99)
     #    time["fullyear"]     -- full year
     #    time["weekday"]      -- day of week (Sunday = 0)
     #    time["altweekday"]   -- day of week (Monday = 0)
     #    time["dayname"]      -- name of weekday
     #    time["shortdayname"] -- short name of weekday
     #    time["yearday"]      -- day of year (0 - 365)
     #    time["timezone"]     -- abbreviation of timezone name
     #    time["ampm"]         -- AM or PM designation
     #    time["weeknum"]      -- week number, Sunday first day
     #    time["altweeknum"]   -- week number, Monday first day
     
     function gettimeofday(time,    ret, now, i)
     {
         # get time once, avoids unnecessary system calls
         now = systime()
     
         # return date(1)-style output
         ret = strftime("%a %b %e %H:%M:%S %Z %Y", now)
     
         # clear out target array
         delete time
     
         # fill in values, force numeric values to be
         # numeric by adding 0
         time["second"]       = strftime("%S", now) + 0
         time["minute"]       = strftime("%M", now) + 0
         time["hour"]         = strftime("%H", now) + 0
         time["althour"]      = strftime("%I", now) + 0
         time["monthday"]     = strftime("%d", now) + 0
         time["month"]        = strftime("%m", now) + 0
         time["monthname"]    = strftime("%B", now)
         time["shortmonth"]   = strftime("%b", now)
         time["year"]         = strftime("%y", now) + 0
         time["fullyear"]     = strftime("%Y", now) + 0
         time["weekday"]      = strftime("%w", now) + 0
         time["altweekday"]   = strftime("%u", now) + 0
         time["dayname"]      = strftime("%A", now)
         time["shortdayname"] = strftime("%a", now)
         time["yearday"]      = strftime("%j", now) + 0
         time["timezone"]     = strftime("%Z", now)
         time["ampm"]         = strftime("%p", now)
         time["weeknum"]      = strftime("%U", now) + 0
         time["altweeknum"]   = strftime("%W", now) + 0
     
         return ret
     }
     <!-- endfile -->
</pre>
   <p>The string indices are easier to use and read than the various formats
required by <code>strftime()</code>.  The <code>alarm</code> program presented in
<a href="#Alarm-Program">Alarm Program</a>,
uses this function. 
A more general design for the <code>gettimeofday()</code> function would have
allowed the user to supply an optional timestamp value to use instead
of the current time.

<div class="node">
<a name="Data-File-Management"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Getopt-Function">Getopt Function</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#General-Functions">General Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Library-Functions">Library Functions</a>

</div>

<h3 class="section">12.3 Data File Management</h3>

<!-- STARTOFRANGE dataf -->
<p><a name="index-files_002c-managing-1760"></a><!-- STARTOFRANGE libfdataf -->
<a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-managing_002c-_0040value_007bDF_007ds-1761"></a><!-- STARTOFRANGE flibdataf -->
<a name="index-functions_002c-library_002c-managing-_0040value_007bDF_007ds-1762"></a>This section presents functions that are useful for managing
command-line data files.

<ul class="menu">
<li><a accesskey="1" href="#Filetrans-Function">Filetrans Function</a>:           A function for handling data file transitions. 
<li><a accesskey="2" href="#Rewind-Function">Rewind Function</a>:              A function for rereading the current file. 
<li><a accesskey="3" href="#File-Checking">File Checking</a>:                Checking that data files are readable. 
<li><a accesskey="4" href="#Empty-Files">Empty Files</a>:                  Checking for zero-length files. 
<li><a accesskey="5" href="#Ignoring-Assigns">Ignoring Assigns</a>:             Treating assignments as file names. 
</ul>

<div class="node">
<a name="Filetrans-Function"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Rewind-Function">Rewind Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Data-File-Management">Data File Management</a>

</div>

<h4 class="subsection">12.3.1 Noting Data File Boundaries</h4>

<p><a name="index-files_002c-managing_002c-_0040value_007bDF_007d-boundaries-1763"></a><a name="index-files_002c-initialization-and-cleanup-1764"></a>The <code>BEGIN</code> and <code>END</code> rules are each executed exactly once at
the beginning and end of your <samp><span class="command">awk</span></samp> program, respectively
(see <a href="#BEGIN_002fEND">BEGIN/END</a>). 
We (the <samp><span class="command">gawk</span></samp> authors) once had a user who mistakenly thought that the
<code>BEGIN</code> rule is executed at the beginning of each data file and the
<code>END</code> rule is executed at the end of each data file.

   <p>When informed
that this was not the case, the user requested that we add new special
patterns to <samp><span class="command">gawk</span></samp>, named <code>BEGIN_FILE</code> and <code>END_FILE</code>, that
would have the desired behavior.  He even supplied us the code to do so.

   <p>Adding these special patterns to <samp><span class="command">gawk</span></samp> wasn't necessary;
the job can be done cleanly in <samp><span class="command">awk</span></samp> itself, as illustrated
by the following library program. 
It arranges to call two user-supplied functions, <code>beginfile()</code> and
<code>endfile()</code>, at the beginning and end of each data file. 
Besides solving the problem in only nine(!) lines of code, it does so
<em>portably</em>; this works with any implementation of <samp><span class="command">awk</span></samp>:

<pre class="example">     # transfile.awk
     #
     # Give the user a hook for filename transitions
     #
     # The user must supply functions beginfile() and endfile()
     # that each take the name of the file being started or
     # finished, respectively.
     <!-- # -->
     <!-- # Arnold Robbins, arnold@@skeeve.com, Public Domain -->
     <!-- # January 1992 -->
     
     FILENAME != _oldfilename \
     {
         if (_oldfilename != "")
             endfile(_oldfilename)
         _oldfilename = FILENAME
         beginfile(FILENAME)
     }
     
     END   { endfile(FILENAME) }
</pre>
   <p>This file must be loaded before the user's &ldquo;main&rdquo; program, so that the
rule it supplies is executed first.

   <p>This rule relies on <samp><span class="command">awk</span></samp>'s <code>FILENAME</code> variable that
automatically changes for each new data file.  The current file name is
saved in a private variable, <code>_oldfilename</code>.  If <code>FILENAME</code> does
not equal <code>_oldfilename</code>, then a new data file is being processed and
it is necessary to call <code>endfile()</code> for the old file.  Because
<code>endfile()</code> should only be called if a file has been processed, the
program first checks to make sure that <code>_oldfilename</code> is not the null
string.  The program then assigns the current file name to
<code>_oldfilename</code> and calls <code>beginfile()</code> for the file. 
Because, like all <samp><span class="command">awk</span></samp> variables, <code>_oldfilename</code> is
initialized to the null string, this rule executes correctly even for the
first data file.

   <p>The program also supplies an <code>END</code> rule to do the final processing for
the last file.  Because this <code>END</code> rule comes before any <code>END</code> rules
supplied in the &ldquo;main&rdquo; program, <code>endfile()</code> is called first.  Once
again the value of multiple <code>BEGIN</code> and <code>END</code> rules should be clear.

   <p><a name="index-g_t_0040code_007bbeginfile_0028_0029_007d-user_002ddefined-function-1765"></a><a name="index-g_t_0040code_007bendfile_0028_0029_007d-user_002ddefined-function-1766"></a>If the same data file occurs twice in a row on the command line, then
<code>endfile()</code> and <code>beginfile()</code> are not executed at the end of the
first pass and at the beginning of the second pass. 
The following version solves the problem:

<pre class="example">     <!-- file eg/lib/ftrans.awk -->
     # ftrans.awk --- handle data file transitions
     #
     # user supplies beginfile() and endfile() functions
     <!-- endfile -->
     <!-- file eg/lib/ftrans.awk -->
     
     FNR == 1 {
         if (_filename_ != "")
             endfile(_filename_)
         _filename_ = FILENAME
         beginfile(FILENAME)
     }
     
     END  { endfile(_filename_) }
     <!-- endfile -->
</pre>
   <p><a href="#Wc-Program">Wc Program</a>,
shows how this library function can be used and
how it simplifies writing the main program.

<!-- fakenode - for prepinfo -->
<h4 class="subheading">Advanced Notes: So Why Does <samp><span class="command">gawk</span></samp> have <code>BEGINFILE</code> and <code>ENDFILE</code>?</h4>

<p>You are probably wondering, if <code>beginfile()</code> and <code>endfile()</code>
functions can do the job, why does <samp><span class="command">gawk</span></samp> have
<code>BEGINFILE</code> and <code>ENDFILE</code> patterns (see <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a>)?

   <p>Good question.  Normally, if <samp><span class="command">awk</span></samp> cannot open a file, this
causes an immediate fatal error.  In this case, there is no way for a
user-defined function to deal with the problem, since the mechanism for
calling it relies on the file being open and at the first record.  Thus,
the main reason for <code>BEGINFILE</code> is to give you a &ldquo;hook&rdquo; to catch
files that cannot be processed.  <code>ENDFILE</code> exists for symmetry,
and because it provides an easy way to do per-file cleanup processing.

<div class="node">
<a name="Rewind-Function"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#File-Checking">File Checking</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Filetrans-Function">Filetrans Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Data-File-Management">Data File Management</a>

</div>

<h4 class="subsection">12.3.2 Rereading the Current File</h4>

<p><a name="index-files_002c-reading-1767"></a>Another request for a new built-in function was for a <code>rewind()</code>
function that would make it possible to reread the current file. 
The requesting user didn't want to have to use <code>getline</code>
(see <a href="#Getline">Getline</a>)
inside a loop.

   <p>However, as long as you are not in the <code>END</code> rule, it is
quite easy to arrange to immediately close the current input file
and then start over with it from the top. 
For lack of a better name, we'll call it <code>rewind()</code>:

   <p><a name="index-g_t_0040code_007brewind_0028_0029_007d-user_002ddefined-function-1768"></a>
<pre class="example">     <!-- file eg/lib/rewind.awk -->
     # rewind.awk --- rewind the current file and start over
     <!-- endfile -->
     <!-- file eg/lib/rewind.awk -->
     
     function rewind(    i)
     {
         # shift remaining arguments up
         for (i = ARGC; i &gt; ARGIND; i--)
             ARGV[i] = ARGV[i-1]
     
         # make sure gawk knows to keep going
         ARGC++
     
         # make current file next to get done
         ARGV[ARGIND+1] = FILENAME
     
         # do it
         nextfile
     }
     <!-- endfile -->
</pre>
   <p>This code relies on the <code>ARGIND</code> variable
(see <a href="#Auto_002dset">Auto-set</a>),
which is specific to <samp><span class="command">gawk</span></samp>. 
If you are not using
<samp><span class="command">gawk</span></samp>, you can use ideas presented in
the previous section
to either update <code>ARGIND</code> on your own
or modify this code as appropriate.

   <p>The <code>rewind()</code> function also relies on the <code>nextfile</code> keyword
(see <a href="#Nextfile-Statement">Nextfile Statement</a>).

<div class="node">
<a name="File-Checking"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Empty-Files">Empty Files</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Rewind-Function">Rewind Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Data-File-Management">Data File Management</a>

</div>

<h4 class="subsection">12.3.3 Checking for Readable Data Files</h4>

<p><a name="index-troubleshooting_002c-readable-_0040value_007bDF_007ds-1769"></a><a name="index-readable-_0040value_007bDF_007ds_0040comma_007b_007d-checking-1770"></a><a name="index-files_002c-skipping-1771"></a>Normally, if you give <samp><span class="command">awk</span></samp> a data file that isn't readable,
it stops with a fatal error.  There are times when you
might want to just ignore such files and keep going.  You can
do this by prepending the following program to your <samp><span class="command">awk</span></samp>
program:

   <p><a name="index-g_t_0040code_007breadable_002eawk_007d-program-1772"></a>
<pre class="example">     <!-- file eg/lib/readable.awk -->
     # readable.awk --- library file to skip over unreadable files
     <!-- endfile -->
     <!-- file eg/lib/readable.awk -->
     
     BEGIN {
         for (i = 1; i &lt; ARGC; i++) {
             if (ARGV[i] ~ /^[[:alpha:]_][[:alnum:]_]*=.*/ \
                 || ARGV[i] == "-" || ARGV[i] == "/dev/stdin")
                 continue    # assignment or standard input
             else if ((getline junk &lt; ARGV[i]) &lt; 0) # unreadable
                 delete ARGV[i]
             else
                 close(ARGV[i])
         }
     }
     <!-- endfile -->
</pre>
   <p><a name="index-troubleshooting_002c-_0040code_007bgetline_007d-function-1773"></a>This works, because the <code>getline</code> won't be fatal. 
Removing the element from <code>ARGV</code> with <code>delete</code>
skips the file (since it's no longer in the list). 
See also <a href="#ARGC-and-ARGV">ARGC and ARGV</a>.

<div class="node">
<a name="Empty-Files"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Ignoring-Assigns">Ignoring Assigns</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#File-Checking">File Checking</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Data-File-Management">Data File Management</a>

</div>

<h4 class="subsection">12.3.4 Checking For Zero-length Files</h4>

<p>All known <samp><span class="command">awk</span></samp> implementations silently skip over zero-length files. 
This is a by-product of <samp><span class="command">awk</span></samp>'s implicit
read-a-record-and-match-against-the-rules loop: when <samp><span class="command">awk</span></samp>
tries to read a record from an empty file, it immediately receives an
end of file indication, closes the file, and proceeds on to the next
command-line data file, <em>without</em> executing any user-level
<samp><span class="command">awk</span></samp> program code.

   <p>Using <samp><span class="command">gawk</span></samp>'s <code>ARGIND</code> variable
(see <a href="#Built_002din-Variables">Built-in Variables</a>), it is possible to detect when an empty
data file has been skipped.  Similar to the library file presented
in <a href="#Filetrans-Function">Filetrans Function</a>, the following library file calls a function named
<code>zerofile()</code> that the user must provide.  The arguments passed are
the file name and the position in <code>ARGV</code> where it was found:

   <p><a name="index-g_t_0040code_007bzerofile_002eawk_007d-program-1774"></a>
<pre class="example">     <!-- file eg/lib/zerofile.awk -->
     # zerofile.awk --- library file to process empty input files
     <!-- endfile -->
     <!-- file eg/lib/zerofile.awk -->
     
     BEGIN { Argind = 0 }
     
     ARGIND &gt; Argind + 1 {
         for (Argind++; Argind &lt; ARGIND; Argind++)
             zerofile(ARGV[Argind], Argind)
     }
     
     ARGIND != Argind { Argind = ARGIND }
     
     END {
         if (ARGIND &gt; Argind)
             for (Argind++; Argind &lt;= ARGIND; Argind++)
                 zerofile(ARGV[Argind], Argind)
     }
     <!-- endfile -->
</pre>
   <p>The user-level variable <code>Argind</code> allows the <samp><span class="command">awk</span></samp> program
to track its progress through <code>ARGV</code>.  Whenever the program detects
that <code>ARGIND</code> is greater than &lsquo;<samp><span class="samp">Argind + 1</span></samp>&rsquo;, it means that one or
more empty files were skipped.  The action then calls <code>zerofile()</code> for
each such file, incrementing <code>Argind</code> along the way.

   <p>The &lsquo;<samp><span class="samp">Argind != ARGIND</span></samp>&rsquo; rule simply keeps <code>Argind</code> up to date
in the normal case.

   <p>Finally, the <code>END</code> rule catches the case of any empty files at
the end of the command-line arguments.  Note that the test in the
condition of the <code>for</code> loop uses the &lsquo;<samp><span class="samp">&lt;=</span></samp>&rsquo; operator,
not &lsquo;<samp><span class="samp">&lt;</span></samp>&rsquo;.

   <p>As an exercise, you might consider whether this same problem can
be solved without relying on <samp><span class="command">gawk</span></samp>'s <code>ARGIND</code> variable.

   <p>As a second exercise, revise this code to handle the case where
an intervening value in <code>ARGV</code> is a variable assignment.

<div class="node">
<a name="Ignoring-Assigns"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Empty-Files">Empty Files</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Data-File-Management">Data File Management</a>

</div>

<h4 class="subsection">12.3.5 Treating Assignments as File Names</h4>

<p><a name="index-assignments-as-filenames-1775"></a><a name="index-filenames_002c-assignments-as-1776"></a>Occasionally, you might not want <samp><span class="command">awk</span></samp> to process command-line
variable assignments
(see <a href="#Assignment-Options">Assignment Options</a>). 
In particular, if you have a file name that contain an &lsquo;<samp><span class="samp">=</span></samp>&rsquo; character,
<samp><span class="command">awk</span></samp> treats the file name as an assignment, and does not process it.

   <p>Some users have suggested an additional command-line option for <samp><span class="command">gawk</span></samp>
to disable command-line assignments.  However, some simple programming with
a library file does the trick:

   <p><a name="index-g_t_0040code_007bnoassign_002eawk_007d-program-1777"></a>
<pre class="example">     <!-- file eg/lib/noassign.awk -->
     # noassign.awk --- library file to avoid the need for a
     # special option that disables command-line assignments
     <!-- endfile -->
     <!-- file eg/lib/noassign.awk -->
     
     function disable_assigns(argc, argv,    i)
     {
         for (i = 1; i &lt; argc; i++)
             if (argv[i] ~ /^[[:alpha:]_][[:alnum:]_]*=.*/)
                 argv[i] = ("./" argv[i])
     }
     
     BEGIN {
         if (No_command_assign)
             disable_assigns(ARGC, ARGV)
     }
     <!-- endfile -->
</pre>
   <p>You then run your program this way:

<pre class="example">     awk -v No_command_assign=1 -f noassign.awk -f yourprog.awk *
</pre>
   <p>The function works by looping through the arguments. 
It prepends &lsquo;<samp><span class="samp">./</span></samp>&rsquo; to
any argument that matches the form
of a variable assignment, turning that argument into a file name.

   <p>The use of <code>No_command_assign</code> allows you to disable command-line
assignments at invocation time, by giving the variable a true value. 
When not set, it is initially zero (i.e., false), so the command-line arguments
are left alone. 
<!-- ENDOFRANGE dataf -->
<!-- ENDOFRANGE flibdataf -->
<!-- ENDOFRANGE libfdataf -->

<div class="node">
<a name="Getopt-Function"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Passwd-Functions">Passwd Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Data-File-Management">Data File Management</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Library-Functions">Library Functions</a>

</div>

<h3 class="section">12.4 Processing Command-Line Options</h3>

<!-- STARTOFRANGE libfclo -->
<p><a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-command_002dline-options-1778"></a><!-- STARTOFRANGE flibclo -->
<a name="index-functions_002c-library_002c-command_002dline-options-1779"></a><!-- STARTOFRANGE clop -->
<a name="index-command_002dline-options_002c-processing-1780"></a><!-- STARTOFRANGE oclp -->
<a name="index-options_002c-command_002dline_002c-processing-1781"></a><!-- STARTOFRANGE clibf -->
<a name="index-functions_002c-library_002c-C-library-1782"></a><a name="index-arguments_002c-processing-1783"></a>Most utilities on POSIX compatible systems take options on
the command line that can be used to change the way a program behaves. 
<samp><span class="command">awk</span></samp> is an example of such a program
(see <a href="#Options">Options</a>). 
Often, options take <dfn>arguments</dfn>; i.e., data that the program needs to
correctly obey the command-line option.  For example, <samp><span class="command">awk</span></samp>'s
<samp><span class="option">-F</span></samp> option requires a string to use as the field separator. 
The first occurrence on the command line of either <samp><span class="option">--</span></samp> or a
string that does not begin with &lsquo;<samp><span class="samp">-</span></samp>&rsquo; ends the options.

   <p><a name="index-g_t_0040code_007bgetopt_0028_0029_007d-function-_0028C-library_0029-1784"></a>Modern Unix systems provide a C function named <code>getopt()</code> for processing
command-line arguments.  The programmer provides a string describing the
one-letter options. If an option requires an argument, it is followed in the
string with a colon.  <code>getopt()</code> is also passed the
count and values of the command-line arguments and is called in a loop. 
<code>getopt()</code> processes the command-line arguments for option letters. 
Each time around the loop, it returns a single character representing the
next option letter that it finds, or &lsquo;<samp><span class="samp">?</span></samp>&rsquo; if it finds an invalid option. 
When it returns &minus;1, there are no options left on the command line.

   <p>When using <code>getopt()</code>, options that do not take arguments can be
grouped together.  Furthermore, options that take arguments require that the
argument be present.  The argument can immediately follow the option letter,
or it can be a separate command-line argument.

   <p>Given a hypothetical program that takes
three command-line options, <samp><span class="option">-a</span></samp>, <samp><span class="option">-b</span></samp>, and <samp><span class="option">-c</span></samp>, where
<samp><span class="option">-b</span></samp> requires an argument, all of the following are valid ways of
invoking the program:

<pre class="example">     prog -a -b foo -c data1 data2 data3
     prog -ac -bfoo -- data1 data2 data3
     prog -acbfoo data1 data2 data3
</pre>
   <p>Notice that when the argument is grouped with its option, the rest of
the argument is considered to be the option's argument. 
In this example, <samp><span class="option">-acbfoo</span></samp> indicates that all of the
<samp><span class="option">-a</span></samp>, <samp><span class="option">-b</span></samp>, and <samp><span class="option">-c</span></samp> options were supplied,
and that &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; is the argument to the <samp><span class="option">-b</span></samp> option.

   <p><code>getopt()</code> provides four external variables that the programmer can use:

     <dl>
<dt><code>optind</code><dd>The index in the argument value array (<code>argv</code>) where the first
nonoption command-line argument can be found.

     <br><dt><code>optarg</code><dd>The string value of the argument to an option.

     <br><dt><code>opterr</code><dd>Usually <code>getopt()</code> prints an error message when it finds an invalid
option.  Setting <code>opterr</code> to zero disables this feature.  (An
application might want to print its own error message.)

     <br><dt><code>optopt</code><dd>The letter representing the command-line option. 
<!-- While not usually documented, most versions supply this variable. -->
</dl>

   <p>The following C fragment shows how <code>getopt()</code> might process command-line
arguments for <samp><span class="command">awk</span></samp>:

<pre class="example">     int
     main(int argc, char *argv[])
     {
         ...
         /* print our own message */
         opterr = 0;
         while ((c = getopt(argc, argv, "v:f:F:W:")) != -1) {
             switch (c) {
             case 'f':    /* file */
                 ...
                 break;
             case 'F':    /* field separator */
                 ...
                 break;
             case 'v':    /* variable assignment */
                 ...
                 break;
             case 'W':    /* extension */
                 ...
                 break;
             case '?':
             default:
                 usage();
                 break;
             }
         }
         ...
     }
</pre>
   <p>As a side point, <samp><span class="command">gawk</span></samp> actually uses the GNU <code>getopt_long()</code>
function to process both normal and GNU-style long options
(see <a href="#Options">Options</a>).

   <p>The abstraction provided by <code>getopt()</code> is very useful and is quite
handy in <samp><span class="command">awk</span></samp> programs as well.  Following is an <samp><span class="command">awk</span></samp>
version of <code>getopt()</code>.  This function highlights one of the
greatest weaknesses in <samp><span class="command">awk</span></samp>, which is that it is very poor at
manipulating single characters.  Repeated calls to <code>substr()</code> are
necessary for accessing individual characters
(see <a href="#String-Functions">String Functions</a>).<a rel="footnote" href="#fn-71" name="fnd-71"><sup>71</sup></a>
<!-- FIXME: could use split(str, a, "") to do it more easily. -->

   <p>The discussion that follows walks through the code a bit at a time:

   <p><a name="index-g_t_0040code_007bgetopt_0028_0029_007d-user_002ddefined-function-1785"></a>
<pre class="example">     <!-- file eg/lib/getopt.awk -->
     # getopt.awk --- Do C library getopt(3) function in awk
     <!-- endfile -->
     <!-- file eg/lib/getopt.awk -->
     
     # External variables:
     #    Optind -- index in ARGV of first nonoption argument
     #    Optarg -- string value of argument to current option
     #    Opterr -- if nonzero, print our own diagnostic
     #    Optopt -- current option letter
     
     # Returns:
     #    -1     at end of options
     #    "?"    for unrecognized option
     #    &lt;c&gt;    a character representing the current option
     
     # Private Data:
     #    _opti  -- index in multi-flag option, e.g., -abc
     <!-- endfile -->
</pre>
   <p>The function starts out with comments presenting
a list of the global variables it uses,
what the return values are, what they mean, and any global variables that
are &ldquo;private&rdquo; to this library function.  Such documentation is essential
for any program, and particularly for library functions.

   <p>The <code>getopt()</code> function first checks that it was indeed called with
a string of options (the <code>options</code> parameter).  If <code>options</code>
has a zero length, <code>getopt()</code> immediately returns &minus;1:

   <p><a name="index-g_t_0040code_007bgetopt_0028_0029_007d-user_002ddefined-function-1786"></a>
<pre class="example">     <!-- file eg/lib/getopt.awk -->
     function getopt(argc, argv, options,    thisopt, i)
     {
         if (length(options) == 0)    # no options given
             return -1
     
         if (argv[Optind] == "--") {  # all done
             Optind++
             _opti = 0
             return -1
         } else if (argv[Optind] !~ /^-[^:[:space:]]/) {
             _opti = 0
             return -1
         }
     <!-- endfile -->
</pre>
   <p>The next thing to check for is the end of the options.  A <samp><span class="option">--</span></samp>
ends the command-line options, as does any command-line argument that
does not begin with a &lsquo;<samp><span class="samp">-</span></samp>&rsquo;.  <code>Optind</code> is used to step through
the array of command-line arguments; it retains its value across calls
to <code>getopt()</code>, because it is a global variable.

   <p>The regular expression that is used, <code>/^-[^:[:space:]/<!-- /@w --></code>,
checks for a &lsquo;<samp><span class="samp">-</span></samp>&rsquo; followed by anything
that is not whitespace and not a colon. 
If the current command-line argument does not match this pattern,
it is not an option, and it ends option processing. Continuing on:

<pre class="example">     <!-- file eg/lib/getopt.awk -->
         if (_opti == 0)
             _opti = 2
         thisopt = substr(argv[Optind], _opti, 1)
         Optopt = thisopt
         i = index(options, thisopt)
         if (i == 0) {
             if (Opterr)
                 printf("%c -- invalid option\n",
                                       thisopt) &gt; "/dev/stderr"
             if (_opti &gt;= length(argv[Optind])) {
                 Optind++
                 _opti = 0
             } else
                 _opti++
             return "?"
         }
     <!-- endfile -->
</pre>
   <p>The <code>_opti</code> variable tracks the position in the current command-line
argument (<code>argv[Optind]</code>).  If multiple options are
grouped together with one &lsquo;<samp><span class="samp">-</span></samp>&rsquo; (e.g., <samp><span class="option">-abx</span></samp>), it is necessary
to return them to the user one at a time.

   <p>If <code>_opti</code> is equal to zero, it is set to two, which is the index in
the string of the next character to look at (we skip the &lsquo;<samp><span class="samp">-</span></samp>&rsquo;, which
is at position one).  The variable <code>thisopt</code> holds the character,
obtained with <code>substr()</code>.  It is saved in <code>Optopt</code> for the main
program to use.

   <p>If <code>thisopt</code> is not in the <code>options</code> string, then it is an
invalid option.  If <code>Opterr</code> is nonzero, <code>getopt()</code> prints an error
message on the standard error that is similar to the message from the C
version of <code>getopt()</code>.

   <p>Because the option is invalid, it is necessary to skip it and move on to the
next option character.  If <code>_opti</code> is greater than or equal to the
length of the current command-line argument, it is necessary to move on
to the next argument, so <code>Optind</code> is incremented and <code>_opti</code> is reset
to zero. Otherwise, <code>Optind</code> is left alone and <code>_opti</code> is merely
incremented.

   <p>In any case, because the option is invalid, <code>getopt()</code> returns <code>"?"</code>. 
The main program can examine <code>Optopt</code> if it needs to know what the
invalid option letter actually is. Continuing on:

<pre class="example">     <!-- file eg/lib/getopt.awk -->
         if (substr(options, i + 1, 1) == ":") {
             # get option argument
             if (length(substr(argv[Optind], _opti + 1)) &gt; 0)
                 Optarg = substr(argv[Optind], _opti + 1)
             else
                 Optarg = argv[++Optind]
             _opti = 0
         } else
             Optarg = ""
     <!-- endfile -->
</pre>
   <p>If the option requires an argument, the option letter is followed by a colon
in the <code>options</code> string.  If there are remaining characters in the
current command-line argument (<code>argv[Optind]</code>), then the rest of that
string is assigned to <code>Optarg</code>.  Otherwise, the next command-line
argument is used (&lsquo;<samp><span class="samp">-xFOO</span></samp>&rsquo; versus &lsquo;<samp><span class="samp">-x&nbsp;FOO<!-- /@w --></span></samp>&rsquo;). In either case,
<code>_opti</code> is reset to zero, because there are no more characters left to
examine in the current command-line argument. Continuing:

<pre class="example">     <!-- file eg/lib/getopt.awk -->
         if (_opti == 0 || _opti &gt;= length(argv[Optind])) {
             Optind++
             _opti = 0
         } else
             _opti++
         return thisopt
     }
     <!-- endfile -->
</pre>
   <p>Finally, if <code>_opti</code> is either zero or greater than the length of the
current command-line argument, it means this element in <code>argv</code> is
through being processed, so <code>Optind</code> is incremented to point to the
next element in <code>argv</code>.  If neither condition is true, then only
<code>_opti</code> is incremented, so that the next option letter can be processed
on the next call to <code>getopt()</code>.

   <p>The <code>BEGIN</code> rule initializes both <code>Opterr</code> and <code>Optind</code> to one. 
<code>Opterr</code> is set to one, since the default behavior is for <code>getopt()</code>
to print a diagnostic message upon seeing an invalid option.  <code>Optind</code>
is set to one, since there's no reason to look at the program name, which is
in <code>ARGV[0]</code>:

<pre class="example">     <!-- file eg/lib/getopt.awk -->
     BEGIN {
         Opterr = 1    # default is to diagnose
         Optind = 1    # skip ARGV[0]
     
         # test program
         if (_getopt_test) {
             while ((_go_c = getopt(ARGC, ARGV, "ab:cd")) != -1)
                 printf("c = &lt;%c&gt;, optarg = &lt;%s&gt;\n",
                                            _go_c, Optarg)
             printf("non-option arguments:\n")
             for (; Optind &lt; ARGC; Optind++)
                 printf("\tARGV[%d] = &lt;%s&gt;\n",
                                         Optind, ARGV[Optind])
         }
     }
     <!-- endfile -->
</pre>
   <p>The rest of the <code>BEGIN</code> rule is a simple test program.  Here is the
result of two sample runs of the test program:

<pre class="example">     $ <kbd>awk -f getopt.awk -v _getopt_test=1 -- -a -cbARG bax -x</kbd>
     -| c = &lt;a&gt;, optarg = &lt;&gt;
     -| c = &lt;c&gt;, optarg = &lt;&gt;
     -| c = &lt;b&gt;, optarg = &lt;ARG&gt;
     -| non-option arguments:
     -|         ARGV[3] = &lt;bax&gt;
     -|         ARGV[4] = &lt;-x&gt;
     
     $ <kbd>awk -f getopt.awk -v _getopt_test=1 -- -a -x -- xyz abc</kbd>
     -| c = &lt;a&gt;, optarg = &lt;&gt;
     error--&gt; x -- invalid option
     -| c = &lt;?&gt;, optarg = &lt;&gt;
     -| non-option arguments:
     -|         ARGV[4] = &lt;xyz&gt;
     -|         ARGV[5] = &lt;abc&gt;
</pre>
   <p>In both runs,
the first <samp><span class="option">--</span></samp> terminates the arguments to <samp><span class="command">awk</span></samp>, so that it does
not try to interpret the <samp><span class="option">-a</span></samp>, etc., as its own options.

   <blockquote>
<b>NOTE:</b> After <code>getopt()</code> is through, it is the responsibility of the user level
code to
clear out all the elements of <code>ARGV</code> from 1 to <code>Optind</code>,
so that <samp><span class="command">awk</span></samp> does not try to process the command-line options
as file names. 
</blockquote>

   <p>Several of the sample programs presented in
<a href="#Sample-Programs">Sample Programs</a>,
use <code>getopt()</code> to process their arguments. 
<!-- ENDOFRANGE libfclo -->
<!-- ENDOFRANGE flibclo -->
<!-- ENDOFRANGE clop -->
<!-- ENDOFRANGE oclp -->

<div class="node">
<a name="Passwd-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Group-Functions">Group Functions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getopt-Function">Getopt Function</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Library-Functions">Library Functions</a>

</div>

<h3 class="section">12.5 Reading the User Database</h3>

<!-- STARTOFRANGE libfudata -->
<p><a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-user-database_002c-reading-1787"></a><!-- STARTOFRANGE flibudata -->
<a name="index-functions_002c-library_002c-user-database_002c-reading-1788"></a><!-- STARTOFRANGE udatar -->
<a name="index-user-database_0040comma_007b_007d-reading-1789"></a><!-- STARTOFRANGE dataur -->
<a name="index-database_002c-users_0040comma_007b_007d-reading-1790"></a><a name="index-g_t_0040code_007bPROCINFO_007d-array-1791"></a>The <code>PROCINFO</code> array
(see <a href="#Built_002din-Variables">Built-in Variables</a>)
provides access to the current user's real and effective user and group ID
numbers, and if available, the user's supplementary group set. 
However, because these are numbers, they do not provide very useful
information to the average user.  There needs to be some way to find the
user information associated with the user and group ID numbers.  This
section presents a suite of functions for retrieving information from the
user database.  See <a href="#Group-Functions">Group Functions</a>,
for a similar suite that retrieves information from the group database.

   <p><a name="index-g_t_0040code_007bgetpwent_0028_0029_007d-function-_0028C-library_0029-1792"></a><a name="index-g_t_0040code_007bgetpwent_0028_0029_007d-user_002ddefined-function-1793"></a><a name="index-users_002c-information-about_002c-retrieving-1794"></a><a name="index-login-information-1795"></a><a name="index-account-information-1796"></a><a name="index-password-file-1797"></a><a name="index-files_002c-password-1798"></a>The POSIX standard does not define the file where user information is
kept.  Instead, it provides the <code>&lt;pwd.h&gt;</code> header file
and several C language subroutines for obtaining user information. 
The primary function is <code>getpwent()</code>, for &ldquo;get password entry.&rdquo;
The &ldquo;password&rdquo; comes from the original user database file,
<samp><span class="file">/etc/passwd</span></samp>, which stores user information, along with the
encrypted passwords (hence the name).

   <p><a name="index-g_t_0040command_007bpwcat_007d-program-1799"></a>While an <samp><span class="command">awk</span></samp> program could simply read <samp><span class="file">/etc/passwd</span></samp>
directly, this file may not contain complete information about the
system's set of users.<a rel="footnote" href="#fn-72" name="fnd-72"><sup>72</sup></a> To be sure you are able to
produce a readable and complete version of the user database, it is necessary
to write a small C program that calls <code>getpwent()</code>.  <code>getpwent()</code>
is defined as returning a pointer to a <code>struct passwd</code>.  Each time it
is called, it returns the next entry in the database.  When there are
no more entries, it returns <code>NULL</code>, the null pointer.  When this
happens, the C program should call <code>endpwent()</code> to close the database. 
Following is <samp><span class="command">pwcat</span></samp>, a C program that &ldquo;cats&rdquo; the password database:

<!-- Use old style function header for portability to old systems (SunOS, HP/UX). -->
<pre class="example">     <!-- file eg/lib/pwcat.c -->
     /*
      * pwcat.c
      *
      * Generate a printable version of the password database
      */
     <!-- endfile -->
     <!-- file eg/lib/pwcat.c -->
     #include &lt;stdio.h&gt;
     #include &lt;pwd.h&gt;
     
     <!-- endfile -->
     <!-- file eg/lib/pwcat.c -->
     int
     main(int argc, char **argv)
     {
         struct passwd *p;
     
         while ((p = getpwent()) != NULL)
     <!-- endfile -->
     <!-- file eg/lib/pwcat.c -->
             printf("%s:%s:%ld:%ld:%s:%s:%s\n",
                 p-&gt;pw_name, p-&gt;pw_passwd, (long) p-&gt;pw_uid,
                 (long) p-&gt;pw_gid, p-&gt;pw_gecos, p-&gt;pw_dir, p-&gt;pw_shell);
     <!-- endfile -->
     <!-- file eg/lib/pwcat.c -->
     
         endpwent();
         return 0;
     }
     <!-- endfile -->
</pre>
   <p>If you don't understand C, don't worry about it. 
The output from <samp><span class="command">pwcat</span></samp> is the user database, in the traditional
<samp><span class="file">/etc/passwd</span></samp> format of colon-separated fields.  The fields are:

     <dl>
<dt>Login name<dd>The user's login name.

     <br><dt>Encrypted password<dd>The user's encrypted password.  This may not be available on some systems.

     <br><dt>User-ID<dd>The user's numeric user ID number. 
(On some systems it's a C <code>long</code>, and not an <code>int</code>.  Thus
we cast it to <code>long</code> for all cases.)

     <br><dt>Group-ID<dd>The user's numeric group ID number. 
(Similar comments about <code>long</code> vs. <code>int</code> apply here.)

     <br><dt>Full name<dd>The user's full name, and perhaps other information associated with the
user.

     <br><dt>Home directory<dd>The user's login (or &ldquo;home&rdquo;) directory (familiar to shell programmers as
<code>$HOME</code>).

     <br><dt>Login shell<dd>The program that is run when the user logs in.  This is usually a
shell, such as Bash. 
</dl>

   <p>A few lines representative of <samp><span class="command">pwcat</span></samp>'s output are as follows:

   <p><a name="index-Jacobs_002c-Andrew-1800"></a><a name="index-Robbins_002c-Arnold-1801"></a><a name="index-Robbins_002c-Miriam-1802"></a>
<pre class="example">     $ <kbd>pwcat</kbd>
     -| root:3Ov02d5VaUPB6:0:1:Operator:/:/bin/sh
     -| nobody:*:65534:65534::/:
     -| daemon:*:1:1::/:
     -| sys:*:2:2::/:/bin/csh
     -| bin:*:3:3::/bin:
     -| arnold:xyzzy:2076:10:Arnold Robbins:/home/arnold:/bin/sh
     -| miriam:yxaay:112:10:Miriam Robbins:/home/miriam:/bin/sh
     -| andy:abcca2:113:10:Andy Jacobs:/home/andy:/bin/sh
     ...
</pre>
   <p>With that introduction, following is a group of functions for getting user
information.  There are several functions here, corresponding to the C
functions of the same names:

   <p><a name="index-g_t_0040code_007b_005fpw_005finit_0028_0029_007d-user_002ddefined-function-1803"></a>
<pre class="example">     <!-- file eg/lib/passwdawk.in -->
     # passwd.awk --- access password file information
     <!-- endfile -->
     <!-- file eg/lib/passwdawk.in -->
     
     BEGIN {
         # tailor this to suit your system
         _pw_awklib = "/usr/local/libexec/awk/"
     }
     
     function _pw_init(    oldfs, oldrs, olddol0, pwcat, using_fw, using_fpat)
     {
         if (_pw_inited)
             return
     
         oldfs = FS
         oldrs = RS
         olddol0 = $0
         using_fw = (PROCINFO["FS"] == "FIELDWIDTHS")
         using_fpat = (PROCINFO["FS"] == "FPAT")
         FS = ":"
         RS = "\n"
     
         pwcat = _pw_awklib "pwcat"
         while ((pwcat | getline) &gt; 0) {
             _pw_byname[$1] = $0
             _pw_byuid[$3] = $0
             _pw_bycount[++_pw_total] = $0
         }
         close(pwcat)
         _pw_count = 0
         _pw_inited = 1
         FS = oldfs
         if (using_fw)
             FIELDWIDTHS = FIELDWIDTHS
         else if (using_fpat)
             FPAT = FPAT
         RS = oldrs
         $0 = olddol0
     }
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bpwcat_007d-program-1804"></a>The <code>BEGIN</code> rule sets a private variable to the directory where
<samp><span class="command">pwcat</span></samp> is stored.  Because it is used to help out an <samp><span class="command">awk</span></samp> library
routine, we have chosen to put it in <samp><span class="file">/usr/local/libexec/awk</span></samp>;
however, you might want it to be in a different directory on your system.

   <p>The function <code>_pw_init()</code> keeps three copies of the user information
in three associative arrays.  The arrays are indexed by username
(<code>_pw_byname</code>), by user ID number (<code>_pw_byuid</code>), and by order of
occurrence (<code>_pw_bycount</code>). 
The variable <code>_pw_inited</code> is used for efficiency, since <code>_pw_init()</code>
needs to be called only once.

   <p><a name="index-g_t_0040code_007bgetline_007d-command_002c-_0040code_007b_005fpw_005finit_0028_0029_007d-function-1805"></a>Because this function uses <code>getline</code> to read information from
<samp><span class="command">pwcat</span></samp>, it first saves the values of <code>FS</code>, <code>RS</code>, and <code>$0</code>. 
It notes in the variable <code>using_fw</code> whether field splitting
with <code>FIELDWIDTHS</code> is in effect or not. 
Doing so is necessary, since these functions could be called
from anywhere within a user's program, and the user may have his
or her
own way of splitting records and fields.

   <p><a name="index-g_t_0040code_007bPROCINFO_007d-array-1806"></a>The <code>using_fw</code> variable checks <code>PROCINFO["FS"]</code>, which
is <code>"FIELDWIDTHS"</code> if field splitting is being done with
<code>FIELDWIDTHS</code>.  This makes it possible to restore the correct
field-splitting mechanism later.  The test can only be true for
<samp><span class="command">gawk</span></samp>.  It is false if using <code>FS</code> or <code>FPAT</code>,
or on some other <samp><span class="command">awk</span></samp> implementation.

   <p>The code that checks for using <code>FPAT</code>, using <code>using_fpat</code>
and <code>PROCINFO["FS"]</code> is similar.

   <p>The main part of the function uses a loop to read database lines, split
the line into fields, and then store the line into each array as necessary. 
When the loop is done, <code>_pw_init()<!-- /@w --></code> cleans up by closing the pipeline,
setting <code>_pw_inited<!-- /@w --></code> to one, and restoring <code>FS</code>
(and <code>FIELDWIDTHS</code> or <code>FPAT</code>
if necessary), <code>RS</code>, and <code>$0</code>. 
The use of <code>_pw_count<!-- /@w --></code> is explained shortly.

   <p><a name="index-g_t_0040code_007bgetpwnam_0028_0029_007d-function-_0028C-library_0029-1807"></a>The <code>getpwnam()</code> function takes a username as a string argument. If that
user is in the database, it returns the appropriate line. Otherwise, it
relies on the array reference to a nonexistent
element to create the element with the null string as its value:

   <p><a name="index-g_t_0040code_007bgetpwnam_0028_0029_007d-user_002ddefined-function-1808"></a>
<pre class="example">     <!-- file eg/lib/passwdawk.in -->
     function getpwnam(name)
     {
         _pw_init()
         return _pw_byname[name]
     }
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040code_007bgetpwuid_0028_0029_007d-function-_0028C-library_0029-1809"></a>Similarly,
the <code>getpwuid</code> function takes a user ID number argument. If that
user number is in the database, it returns the appropriate line. Otherwise, it
returns the null string:

   <p><a name="index-g_t_0040code_007bgetpwuid_0028_0029_007d-user_002ddefined-function-1810"></a>
<pre class="example">     <!-- file eg/lib/passwdawk.in -->
     function getpwuid(uid)
     {
         _pw_init()
         return _pw_byuid[uid]
     }
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040code_007bgetpwent_0028_0029_007d-function-_0028C-library_0029-1811"></a>The <code>getpwent()</code> function simply steps through the database, one entry at
a time.  It uses <code>_pw_count</code> to track its current position in the
<code>_pw_bycount</code> array:

   <p><a name="index-g_t_0040code_007bgetpwent_0028_0029_007d-user_002ddefined-function-1812"></a>
<pre class="example">     <!-- file eg/lib/passwdawk.in -->
     function getpwent()
     {
         _pw_init()
         if (_pw_count &lt; _pw_total)
             return _pw_bycount[++_pw_count]
         return ""
     }
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040code_007bendpwent_0028_0029_007d-function-_0028C-library_0029-1813"></a>The <code>endpwent()<!-- /@w --></code> function resets <code>_pw_count<!-- /@w --></code> to zero, so that
subsequent calls to <code>getpwent()</code> start over again:

   <p><a name="index-g_t_0040code_007bendpwent_0028_0029_007d-user_002ddefined-function-1814"></a>
<pre class="example">     <!-- file eg/lib/passwdawk.in -->
     function endpwent()
     {
         _pw_count = 0
     }
     <!-- endfile -->
</pre>
   <p>A conscious design decision in this suite is that each subroutine calls
<code>_pw_init()<!-- /@w --></code> to initialize the database arrays. 
The overhead of running
a separate process to generate the user database, and the I/O to scan it,
are only incurred if the user's main program actually calls one of these
functions.  If this library file is loaded along with a user's program, but
none of the routines are ever called, then there is no extra runtime overhead. 
(The alternative is move the body of <code>_pw_init()<!-- /@w --></code> into a
<code>BEGIN</code> rule, which always runs <samp><span class="command">pwcat</span></samp>.  This simplifies the
code but runs an extra process that may never be needed.)

   <p>In turn, calling <code>_pw_init()</code> is not too expensive, because the
<code>_pw_inited</code> variable keeps the program from reading the data more than
once.  If you are worried about squeezing every last cycle out of your
<samp><span class="command">awk</span></samp> program, the check of <code>_pw_inited</code> could be moved out of
<code>_pw_init()</code> and duplicated in all the other functions.  In practice,
this is not necessary, since most <samp><span class="command">awk</span></samp> programs are I/O-bound,
and such a change would clutter up the code.

   <p>The <samp><span class="command">id</span></samp> program in <a href="#Id-Program">Id Program</a>,
uses these functions. 
<!-- ENDOFRANGE libfudata -->
<!-- ENDOFRANGE flibudata -->
<!-- ENDOFRANGE udatar -->
<!-- ENDOFRANGE dataur -->

<div class="node">
<a name="Group-Functions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Walking-Arrays">Walking Arrays</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Passwd-Functions">Passwd Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Library-Functions">Library Functions</a>

</div>

<h3 class="section">12.6 Reading the Group Database</h3>

<!-- STARTOFRANGE libfgdata -->
<p><a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-group-database_002c-reading-1815"></a><!-- STARTOFRANGE flibgdata -->
<a name="index-functions_002c-library_002c-group-database_002c-reading-1816"></a><!-- STARTOFRANGE gdatar -->
<a name="index-group-database_002c-reading-1817"></a><!-- STARTOFRANGE datagr -->
<a name="index-database_002c-group_002c-reading-1818"></a><a name="index-g_t_0040code_007bPROCINFO_007d-array-1819"></a><a name="index-g_t_0040code_007bgetgrent_0028_0029_007d-function-_0028C-library_0029-1820"></a><a name="index-g_t_0040code_007bgetgrent_0028_0029_007d-user_002ddefined-function-1821"></a><a name="index-groups_0040comma_007b_007d-information-about-1822"></a><a name="index-account-information-1823"></a><a name="index-group-file-1824"></a><a name="index-files_002c-group-1825"></a>Much of the discussion presented in
<a href="#Passwd-Functions">Passwd Functions</a>,
applies to the group database as well.  Although there has traditionally
been a well-known file (<samp><span class="file">/etc/group</span></samp>) in a well-known format, the POSIX
standard only provides a set of C library routines
(<code>&lt;grp.h&gt;</code> and <code>getgrent()</code>)
for accessing the information. 
Even though this file may exist, it may not have
complete information.  Therefore, as with the user database, it is necessary
to have a small C program that generates the group database as its output. 
<samp><span class="command">grcat</span></samp>, a C program that &ldquo;cats&rdquo; the group database,
is as follows:

   <p><a name="index-g_t_0040command_007bgrcat_007d-program-1826"></a>
<pre class="example">     <!-- file eg/lib/grcat.c -->
     /*
      * grcat.c
      *
      * Generate a printable version of the group database
      */
     <!-- endfile -->
     <!-- file eg/lib/grcat.c -->
     #include &lt;stdio.h&gt;
     #include &lt;grp.h&gt;
     
     int
     main(int argc, char **argv)
     {
         struct group *g;
         int i;
     
         while ((g = getgrent()) != NULL) {
     <!-- endfile -->
     <!-- file eg/lib/grcat.c -->
             printf("%s:%s:%ld:", g-&gt;gr_name, g-&gt;gr_passwd,
                                          (long) g-&gt;gr_gid);
     <!-- endfile -->
     <!-- file eg/lib/grcat.c -->
             for (i = 0; g-&gt;gr_mem[i] != NULL; i++) {
                 printf("%s", g-&gt;gr_mem[i]);
                 if (g-&gt;gr_mem[i+1] != NULL)
                     putchar(',');
             }
             putchar('\n');
         }
         endgrent();
         return 0;
     }
     <!-- endfile -->
</pre>
   <p>Each line in the group database represents one group.  The fields are
separated with colons and represent the following information:

     <dl>
<dt>Group Name<dd>The group's name.

     <br><dt>Group Password<dd>The group's encrypted password. In practice, this field is never used;
it is usually empty or set to &lsquo;<samp><span class="samp">*</span></samp>&rsquo;.

     <br><dt>Group ID Number<dd>The group's numeric group ID number;
this number must be unique within the file. 
(On some systems it's a C <code>long</code>, and not an <code>int</code>.  Thus
we cast it to <code>long</code> for all cases.)

     <br><dt>Group Member List<dd>A comma-separated list of user names.  These users are members of the group. 
Modern Unix systems allow users to be members of several groups
simultaneously.  If your system does, then there are elements
<code>"group1"</code> through <code>"group</code><var>N</var><code>"</code> in <code>PROCINFO</code>
for those group ID numbers. 
(Note that <code>PROCINFO</code> is a <samp><span class="command">gawk</span></samp> extension;
see <a href="#Built_002din-Variables">Built-in Variables</a>.) 
</dl>

   <p>Here is what running <samp><span class="command">grcat</span></samp> might produce:

<pre class="example">     $ <kbd>grcat</kbd>
     -| wheel:*:0:arnold
     -| nogroup:*:65534:
     -| daemon:*:1:
     -| kmem:*:2:
     -| staff:*:10:arnold,miriam,andy
     -| other:*:20:
     ...
</pre>
   <p>Here are the functions for obtaining information from the group database. 
There are several, modeled after the C library functions of the same names:

   <p><a name="index-g_t_0040code_007bgetline_007d-command_002c-_0040code_007b_005fgr_005finit_0028_0029_007d-user_002ddefined-function-1827"></a><a name="index-g_t_0040code_007b_005fgr_005finit_0028_0029_007d-user_002ddefined-function-1828"></a>
<pre class="example">     <!-- file eg/lib/groupawk.in -->
     # group.awk --- functions for dealing with the group file
     <!-- endfile -->
     <!-- line break on _gr_init for smallbook -->
     <!-- file eg/lib/groupawk.in -->
     
     BEGIN    \
     {
         # Change to suit your system
         _gr_awklib = "/usr/local/libexec/awk/"
     }
     
     function _gr_init(    oldfs, oldrs, olddol0, grcat,
                                  using_fw, using_fpat, n, a, i)
     {
         if (_gr_inited)
             return
     
         oldfs = FS
         oldrs = RS
         olddol0 = $0
         using_fw = (PROCINFO["FS"] == "FIELDWIDTHS")
         using_fpat = (PROCINFO["FS"] == "FPAT")
         FS = ":"
         RS = "\n"
     
         grcat = _gr_awklib "grcat"
         while ((grcat | getline) &gt; 0) {
             if ($1 in _gr_byname)
                 _gr_byname[$1] = _gr_byname[$1] "," $4
             else
                 _gr_byname[$1] = $0
             if ($3 in _gr_bygid)
                 _gr_bygid[$3] = _gr_bygid[$3] "," $4
             else
                 _gr_bygid[$3] = $0
     
             n = split($4, a, "[ \t]*,[ \t]*")
             for (i = 1; i &lt;= n; i++)
                 if (a[i] in _gr_groupsbyuser)
                     _gr_groupsbyuser[a[i]] = \
                         _gr_groupsbyuser[a[i]] " " $1
                 else
                     _gr_groupsbyuser[a[i]] = $1
     
             _gr_bycount[++_gr_count] = $0
         }
         close(grcat)
         _gr_count = 0
         _gr_inited++
         FS = oldfs
         if (using_fw)
             FIELDWIDTHS = FIELDWIDTHS
         else if (using_fpat)
             FPAT = FPAT
         RS = oldrs
         $0 = olddol0
     }
     <!-- endfile -->
</pre>
   <p>The <code>BEGIN</code> rule sets a private variable to the directory where
<samp><span class="command">grcat</span></samp> is stored.  Because it is used to help out an <samp><span class="command">awk</span></samp> library
routine, we have chosen to put it in <samp><span class="file">/usr/local/libexec/awk</span></samp>.  You might
want it to be in a different directory on your system.

   <p>These routines follow the same general outline as the user database routines
(see <a href="#Passwd-Functions">Passwd Functions</a>). 
The <code>_gr_inited<!-- /@w --></code> variable is used to
ensure that the database is scanned no more than once. 
The <code>_gr_init()<!-- /@w --></code> function first saves <code>FS</code>,
<code>RS</code>, and
<code>$0</code>, and then sets <code>FS</code> and <code>RS</code> to the correct values for
scanning the group information. 
It also takes care to note whether <code>FIELDWIDTHS</code> or <code>FPAT</code>
is being used, and to restore the appropriate field splitting mechanism.

   <p>The group information is stored is several associative arrays. 
The arrays are indexed by group name (<code>_gr_byname<!-- /@w --></code>), by group ID number
(<code>_gr_bygid<!-- /@w --></code>), and by position in the database (<code>_gr_bycount<!-- /@w --></code>). 
There is an additional array indexed by user name (<code>_gr_groupsbyuser<!-- /@w --></code>),
which is a space-separated list of groups to which each user belongs.

   <p>Unlike the user database, it is possible to have multiple records in the
database for the same group.  This is common when a group has a large number
of members.  A pair of such entries might look like the following:

<pre class="example">     tvpeople:*:101:johnny,jay,arsenio
     tvpeople:*:101:david,conan,tom,joan
</pre>
   <p>For this reason, <code>_gr_init()</code> looks to see if a group name or
group ID number is already seen.  If it is, then the user names are
simply concatenated onto the previous list of users.  (There is actually a
subtle problem with the code just presented.  Suppose that
the first time there were no names. This code adds the names with
a leading comma. It also doesn't check that there is a <code>$4</code>.)

   <p>Finally, <code>_gr_init()</code> closes the pipeline to <samp><span class="command">grcat</span></samp>, restores
<code>FS</code> (and <code>FIELDWIDTHS</code> or <code>FPAT</code> if necessary), <code>RS</code>, and <code>$0</code>,
initializes <code>_gr_count</code> to zero
(it is used later), and makes <code>_gr_inited</code> nonzero.

   <p><a name="index-g_t_0040code_007bgetgrnam_0028_0029_007d-function-_0028C-library_0029-1829"></a>The <code>getgrnam()</code> function takes a group name as its argument, and if that
group exists, it is returned. 
Otherwise, it
relies on the array reference to a nonexistent
element to create the element with the null string as its value:

   <p><a name="index-g_t_0040code_007bgetgrnam_0028_0029_007d-user_002ddefined-function-1830"></a>
<pre class="example">     <!-- file eg/lib/groupawk.in -->
     function getgrnam(group)
     {
         _gr_init()
         return _gr_byname[group]
     }
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040code_007bgetgrgid_0028_0029_007d-function-_0028C-library_0029-1831"></a>The <code>getgrgid()</code> function is similar; it takes a numeric group ID and
looks up the information associated with that group ID:

   <p><a name="index-g_t_0040code_007bgetgrgid_0028_0029_007d-user_002ddefined-function-1832"></a>
<pre class="example">     <!-- file eg/lib/groupawk.in -->
     function getgrgid(gid)
     {
         _gr_init()
         return _gr_bygid[gid]
     }
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040code_007bgetgruser_0028_0029_007d-function-_0028C-library_0029-1833"></a>The <code>getgruser()</code> function does not have a C counterpart. It takes a
user name and returns the list of groups that have the user as a member:

   <p><a name="index-g_t_0040code_007bgetgruser_0028_0029_007d-function_002c-user_002ddefined-1834"></a>
<pre class="example">     <!-- file eg/lib/groupawk.in -->
     function getgruser(user)
     {
         _gr_init()
         return _gr_groupsbyuser[user]
     }
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040code_007bgetgrent_0028_0029_007d-function-_0028C-library_0029-1835"></a>The <code>getgrent()</code> function steps through the database one entry at a time. 
It uses <code>_gr_count</code> to track its position in the list:

   <p><a name="index-g_t_0040code_007bgetgrent_0028_0029_007d-user_002ddefined-function-1836"></a>
<pre class="example">     <!-- file eg/lib/groupawk.in -->
     function getgrent()
     {
         _gr_init()
         if (++_gr_count in _gr_bycount)
             return _gr_bycount[_gr_count]
         return ""
     }
     <!-- endfile -->
</pre>
   <!-- ENDOFRANGE clibf -->
   <p><a name="index-g_t_0040code_007bendgrent_0028_0029_007d-function-_0028C-library_0029-1837"></a>The <code>endgrent()</code> function resets <code>_gr_count</code> to zero so that <code>getgrent()</code> can
start over again:

   <p><a name="index-g_t_0040code_007bendgrent_0028_0029_007d-user_002ddefined-function-1838"></a>
<pre class="example">     <!-- file eg/lib/groupawk.in -->
     function endgrent()
     {
         _gr_count = 0
     }
     <!-- endfile -->
</pre>
   <p>As with the user database routines, each function calls <code>_gr_init()</code> to
initialize the arrays.  Doing so only incurs the extra overhead of running
<samp><span class="command">grcat</span></samp> if these functions are used (as opposed to moving the body of
<code>_gr_init()</code> into a <code>BEGIN</code> rule).

   <p>Most of the work is in scanning the database and building the various
associative arrays.  The functions that the user calls are themselves very
simple, relying on <samp><span class="command">awk</span></samp>'s associative arrays to do work.

   <p>The <samp><span class="command">id</span></samp> program in <a href="#Id-Program">Id Program</a>,
uses these functions.

<div class="node">
<a name="Walking-Arrays"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Group-Functions">Group Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Library-Functions">Library Functions</a>

</div>

<h3 class="section">12.7 Traversing Arrays of Arrays</h3>

<p><a href="#Arrays-of-Arrays">Arrays of Arrays</a>, described how <samp><span class="command">gawk</span></samp>
provides arrays of arrays.  In particular, any element of
an array may be either a scalar, or another array. The
<code>isarray()</code> function (see <a href="#Type-Functions">Type Functions</a>)
lets you distinguish an array
from a scalar. 
The following function, <code>walk_array()</code>, recursively traverses
an array, printing each element's indices and value. 
You call it with the array and a string representing the name
of the array:

   <p><a name="index-g_t_0040code_007bwalk_005farray_0028_0029_007d-user_002ddefined-function-1839"></a>
<pre class="example">     <!-- file eg/lib/walkarray.awk -->
     function walk_array(arr, name,      i)
     {
         for (i in arr) {
             if (isarray(arr[i]))
                 walk_array(arr[i], (name "[" i "]"))
             else
                 printf("%s[%s] = %s\n", name, i, arr[i])
         }
     }
     <!-- endfile -->
</pre>
   <p class="noindent">It works by looping over each element of the array. If any given
element is itself an array, the function calls itself recursively,
passing the subarray and a new string representing the current index. 
Otherwise, the function simply prints the element's name, index, and value. 
Here is a main program to demonstrate:

<pre class="example">     BEGIN {
         a[1] = 1
         a[2][1] = 21
         a[2][2] = 22
         a[3] = 3
         a[4][1][1] = 411
         a[4][2] = 42
     
         walk_array(a, "a")
     }
</pre>
   <p>When run, the program produces the following output:

<pre class="example">     $ <kbd>gawk -f walk_array.awk</kbd>
     -| a[4][1][1] = 411
     -| a[4][2] = 42
     -| a[1] = 1
     -| a[2][1] = 21
     -| a[2][2] = 22
     -| a[3] = 3
</pre>
   <!-- ENDOFRANGE libfgdata -->
<!-- ENDOFRANGE flibgdata -->
<!-- ENDOFRANGE gdatar -->
<!-- ENDOFRANGE libf -->
<!-- ENDOFRANGE flib -->
<!-- ENDOFRANGE fudlib -->
<!-- ENDOFRANGE datagr -->
<div class="node">
<a name="Sample-Programs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Debugger">Debugger</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Library-Functions">Library Functions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">13 Practical <samp><span class="command">awk</span></samp> Programs</h2>

<!-- STARTOFRANGE awkpex -->
<p><a name="index-g_t_0040command_007bawk_007d-programs_002c-examples-of-1840"></a>
<a href="#Library-Functions">Library Functions</a>,
presents the idea that reading programs in a language contributes to
learning that language.  This chapter continues that theme,
presenting a potpourri of <samp><span class="command">awk</span></samp> programs for your reading
enjoyment. 
There are three sections. 
The first describes how to run the programs presented
in this chapter.

   <p>The second presents <samp><span class="command">awk</span></samp>
versions of several common POSIX utilities. 
These are programs that you are hopefully already familiar with,
and therefore, whose problems are understood. 
By reimplementing these programs in <samp><span class="command">awk</span></samp>,
you can focus on the <samp><span class="command">awk</span></samp>-related aspects of solving
the programming problem.

   <p>The third is a grab bag of interesting programs. 
These solve a number of different data-manipulation and management
problems.  Many of the programs are short, which emphasizes <samp><span class="command">awk</span></samp>'s
ability to do a lot in just a few lines of code.

   <p>Many of these programs use library functions presented in
<a href="#Library-Functions">Library Functions</a>.

<ul class="menu">
<li><a accesskey="1" href="#Running-Examples">Running Examples</a>:             How to run these examples. 
<li><a accesskey="2" href="#Clones">Clones</a>:                       Clones of common utilities. 
<li><a accesskey="3" href="#Miscellaneous-Programs">Miscellaneous Programs</a>:       Some interesting <samp><span class="command">awk</span></samp> programs. 
</ul>

<div class="node">
<a name="Running-Examples"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Clones">Clones</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sample-Programs">Sample Programs</a>

</div>

<h3 class="section">13.1 Running the Example Programs</h3>

<p>To run a given program, you would typically do something like this:

<pre class="example">     awk -f <var>program</var> -- <var>options</var> <var>files</var>
</pre>
   <p class="noindent">Here, <var>program</var> is the name of the <samp><span class="command">awk</span></samp> program (such as
<samp><span class="file">cut.awk</span></samp>), <var>options</var> are any command-line options for the
program that start with a &lsquo;<samp><span class="samp">-</span></samp>&rsquo;, and <var>files</var> are the actual data files.

   <p>If your system supports the &lsquo;<samp><span class="samp">#!</span></samp>&rsquo; executable interpreter mechanism
(see <a href="#Executable-Scripts">Executable Scripts</a>),
you can instead run your program directly:

<pre class="example">     cut.awk -c1-8 myfiles &gt; results
</pre>
   <p>If your <samp><span class="command">awk</span></samp> is not <samp><span class="command">gawk</span></samp>, you may instead need to use this:

<pre class="example">     cut.awk -- -c1-8 myfiles &gt; results
</pre>
   <div class="node">
<a name="Clones"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Miscellaneous-Programs">Miscellaneous Programs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Running-Examples">Running Examples</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sample-Programs">Sample Programs</a>

</div>

<h3 class="section">13.2 Reinventing Wheels for Fun and Profit</h3>

<!-- STARTOFRANGE posimawk -->
<p><a name="index-POSIX_002c-programs_0040comma_007b_007d-implementing-in-_0040command_007bawk_007d-1841"></a>
This section presents a number of POSIX utilities implemented in
<samp><span class="command">awk</span></samp>.  Reinventing these programs in <samp><span class="command">awk</span></samp> is often enjoyable,
because the algorithms can be very clearly expressed, and the code is usually
very concise and simple.  This is true because <samp><span class="command">awk</span></samp> does so much for you.

   <p>It should be noted that these programs are not necessarily intended to
replace the installed versions on your system. 
Nor may all of these programs be fully compliant with the most recent
POSIX standard.  This is not a problem; their
purpose is to illustrate <samp><span class="command">awk</span></samp> language programming for &ldquo;real world&rdquo;
tasks.

   <p>The programs are presented in alphabetical order.

<ul class="menu">
<li><a accesskey="1" href="#Cut-Program">Cut Program</a>:                  The <samp><span class="command">cut</span></samp> utility. 
<li><a accesskey="2" href="#Egrep-Program">Egrep Program</a>:                The <samp><span class="command">egrep</span></samp> utility. 
<li><a accesskey="3" href="#Id-Program">Id Program</a>:                   The <samp><span class="command">id</span></samp> utility. 
<li><a accesskey="4" href="#Split-Program">Split Program</a>:                The <samp><span class="command">split</span></samp> utility. 
<li><a accesskey="5" href="#Tee-Program">Tee Program</a>:                  The <samp><span class="command">tee</span></samp> utility. 
<li><a accesskey="6" href="#Uniq-Program">Uniq Program</a>:                 The <samp><span class="command">uniq</span></samp> utility. 
<li><a accesskey="7" href="#Wc-Program">Wc Program</a>:                   The <samp><span class="command">wc</span></samp> utility. 
</ul>

<div class="node">
<a name="Cut-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Egrep-Program">Egrep Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Clones">Clones</a>

</div>

<h4 class="subsection">13.2.1 Cutting out Fields and Columns</h4>

<p><a name="index-g_t_0040command_007bcut_007d-utility-1842"></a><!-- STARTOFRANGE cut -->
<a name="index-g_t_0040command_007bcut_007d-utility-1843"></a><!-- STARTOFRANGE ficut -->
<a name="index-fields_002c-cutting-1844"></a><!-- STARTOFRANGE colcut -->
<a name="index-columns_002c-cutting-1845"></a>The <samp><span class="command">cut</span></samp> utility selects, or &ldquo;cuts,&rdquo; characters or fields
from its standard input and sends them to its standard output. 
Fields are separated by TABs by default,
but you may supply a command-line option to change the field
<dfn>delimiter</dfn> (i.e., the field-separator character). <samp><span class="command">cut</span></samp>'s
definition of fields is less general than <samp><span class="command">awk</span></samp>'s.

   <p>A common use of <samp><span class="command">cut</span></samp> might be to pull out just the login name of
logged-on users from the output of <samp><span class="command">who</span></samp>.  For example, the following
pipeline generates a sorted, unique list of the logged-on users:

<pre class="example">     who | cut -c1-8 | sort | uniq
</pre>
   <p>The options for <samp><span class="command">cut</span></samp> are:

     <dl>
<dt><code>-c </code><var>list</var><dd>Use <var>list</var> as the list of characters to cut out.  Items within the list
may be separated by commas, and ranges of characters can be separated with
dashes.  The list &lsquo;<samp><span class="samp">1-8,15,22-35</span></samp>&rsquo; specifies characters 1 through
8, 15, and 22 through 35.

     <br><dt><code>-f </code><var>list</var><dd>Use <var>list</var> as the list of fields to cut out.

     <br><dt><code>-d </code><var>delim</var><dd>Use <var>delim</var> as the field-separator character instead of the TAB
character.

     <br><dt><code>-s</code><dd>Suppress printing of lines that do not contain the field delimiter. 
</dl>

   <p>The <samp><span class="command">awk</span></samp> implementation of <samp><span class="command">cut</span></samp> uses the <code>getopt()</code> library
function (see <a href="#Getopt-Function">Getopt Function</a>)
and the <code>join()</code> library function
(see <a href="#Join-Function">Join Function</a>).

   <p>The program begins with a comment describing the options, the library
functions needed, and a <code>usage()</code> function that prints out a usage
message and exits.  <code>usage()</code> is called if invalid arguments are
supplied:

   <p><a name="index-g_t_0040code_007bcut_002eawk_007d-program-1846"></a>
<pre class="example">     <!-- file eg/prog/cut.awk -->
     # cut.awk --- implement cut in awk
     <!-- endfile -->
     <!-- file eg/prog/cut.awk -->
     
     # Options:
     #    -f list     Cut fields
     #    -d c        Field delimiter character
     #    -c list     Cut characters
     #
     #    -s          Suppress lines without the delimiter
     #
     # Requires getopt() and join() library functions
     
     function usage(    e1, e2)
     {
         e1 = "usage: cut [-f list] [-d c] [-s] [files...]"
         e2 = "usage: cut [-c list] [files...]"
         print e1 &gt; "/dev/stderr"
         print e2 &gt; "/dev/stderr"
         exit 1
     }
     <!-- endfile -->
</pre>
   <p class="noindent">The variables <code>e1</code> and <code>e2</code> are used so that the function
fits nicely on the
page. 
screen.

   <p><a name="index-g_t_0040code_007bBEGIN_007d-pattern_002c-running-_0040command_007bawk_007d-programs-and-1847"></a><a name="index-g_t_0040code_007bFS_007d-variable_002c-running-_0040command_007bawk_007d-programs-and-1848"></a>Next comes a <code>BEGIN</code> rule that parses the command-line options. 
It sets <code>FS</code> to a single TAB character, because that is <samp><span class="command">cut</span></samp>'s
default field separator. The rule then sets the output field separator to be the
same as the input field separator.  A loop using <code>getopt()</code> steps
through the command-line options.  Exactly one of the variables
<code>by_fields</code> or <code>by_chars</code> is set to true, to indicate that
processing should be done by fields or by characters, respectively. 
When cutting by characters, the output field separator is set to the null
string:

<pre class="example">     <!-- file eg/prog/cut.awk -->
     BEGIN    \
     {
         FS = "\t"    # default
         OFS = FS
         while ((c = getopt(ARGC, ARGV, "sf:c:d:")) != -1) {
             if (c == "f") {
                 by_fields = 1
                 fieldlist = Optarg
             } else if (c == "c") {
                 by_chars = 1
                 fieldlist = Optarg
                 OFS = ""
             } else if (c == "d") {
                 if (length(Optarg) &gt; 1) {
                     printf("Using first character of %s" \
                            " for delimiter\n", Optarg) &gt; "/dev/stderr"
                     Optarg = substr(Optarg, 1, 1)
                 }
                 FS = Optarg
                 OFS = FS
                 if (FS == " ")    # defeat awk semantics
                     FS = "[ ]"
             } else if (c == "s")
                 suppress++
             else
                 usage()
         }
     
         # Clear out options
         for (i = 1; i &lt; Optind; i++)
             ARGV[i] = ""
     <!-- endfile -->
</pre>
   <p><a name="index-field-separators_002c-spaces-as-1849"></a>The code must take
special care when the field delimiter is a space.  Using
a single space (<code>"&nbsp;"<!-- /@w --></code>) for the value of <code>FS</code> is
incorrect&mdash;<samp><span class="command">awk</span></samp> would separate fields with runs of spaces,
TABs, and/or newlines, and we want them to be separated with individual
spaces.  Also remember that after <code>getopt()</code> is through
(as described in <a href="#Getopt-Function">Getopt Function</a>),
we have to
clear out all the elements of <code>ARGV</code> from 1 to <code>Optind</code>,
so that <samp><span class="command">awk</span></samp> does not try to process the command-line options
as file names.

   <p>After dealing with the command-line options, the program verifies that the
options make sense.  Only one or the other of <samp><span class="option">-c</span></samp> and <samp><span class="option">-f</span></samp>
should be used, and both require a field list.  Then the program calls
either <code>set_fieldlist()</code> or <code>set_charlist()</code> to pull apart the
list of fields or characters:

<pre class="example">     <!-- file eg/prog/cut.awk -->
         if (by_fields &amp;&amp; by_chars)
             usage()
     
         if (by_fields == 0 &amp;&amp; by_chars == 0)
             by_fields = 1    # default
     
         if (fieldlist == "") {
             print "cut: needs list for -c or -f" &gt; "/dev/stderr"
             exit 1
         }
     
         if (by_fields)
             set_fieldlist()
         else
             set_charlist()
     }
     <!-- endfile -->
</pre>
   <p><code>set_fieldlist()</code> splits the field list apart at the commas
into an array.  Then, for each element of the array, it looks to
see if the element is actually a range, and if so, splits it apart. 
The function checks the range
to make sure that the first number is smaller than the second. 
Each number in the list is added to the <code>flist</code> array, which
simply lists the fields that will be printed.  Normal field splitting
is used.  The program lets <samp><span class="command">awk</span></samp> handle the job of doing the
field splitting:

<pre class="example">     <!-- file eg/prog/cut.awk -->
     function set_fieldlist(        n, m, i, j, k, f, g)
     {
         n = split(fieldlist, f, ",")
         j = 1    # index in flist
         for (i = 1; i &lt;= n; i++) {
             if (index(f[i], "-") != 0) { # a range
                 m = split(f[i], g, "-")
                 if (m != 2 || g[1] &gt;= g[2]) {
                     printf("bad field list: %s\n",
                                       f[i]) &gt; "/dev/stderr"
                     exit 1
                 }
                 for (k = g[1]; k &lt;= g[2]; k++)
                     flist[j++] = k
             } else
                 flist[j++] = f[i]
         }
         nfields = j - 1
     }
     <!-- endfile -->
</pre>
   <p>The <code>set_charlist()</code> function is more complicated than
<code>set_fieldlist()</code>. 
The idea here is to use <samp><span class="command">gawk</span></samp>'s <code>FIELDWIDTHS</code> variable
(see <a href="#Constant-Size">Constant Size</a>),
which describes constant-width input.  When using a character list, that is
exactly what we have.

   <p>Setting up <code>FIELDWIDTHS</code> is more complicated than simply listing the
fields that need to be printed.  We have to keep track of the fields to
print and also the intervening characters that have to be skipped. 
For example, suppose you wanted characters 1 through 8, 15, and
22 through 35.  You would use &lsquo;<samp><span class="samp">-c 1-8,15,22-35</span></samp>&rsquo;.  The necessary value
for <code>FIELDWIDTHS</code> is <code>"8&nbsp;6&nbsp;1&nbsp;6&nbsp;14"<!-- /@w --></code>.  This yields five
fields, and the fields to print
are <code>$1</code>, <code>$3</code>, and <code>$5</code>. 
The intermediate fields are <dfn>filler</dfn>,
which is stuff in between the desired data. 
<code>flist</code> lists the fields to print, and <code>t</code> tracks the
complete field list, including filler fields:

<pre class="example">     <!-- file eg/prog/cut.awk -->
     function set_charlist(    field, i, j, f, g, t,
                               filler, last, len)
     {
         field = 1   # count total fields
         n = split(fieldlist, f, ",")
         j = 1       # index in flist
         for (i = 1; i &lt;= n; i++) {
             if (index(f[i], "-") != 0) { # range
                 m = split(f[i], g, "-")
                 if (m != 2 || g[1] &gt;= g[2]) {
                     printf("bad character list: %s\n",
                                    f[i]) &gt; "/dev/stderr"
                     exit 1
                 }
                 len = g[2] - g[1] + 1
                 if (g[1] &gt; 1)  # compute length of filler
                     filler = g[1] - last - 1
                 else
                     filler = 0
                 if (filler)
                     t[field++] = filler
                 t[field++] = len  # length of field
                 last = g[2]
                 flist[j++] = field - 1
             } else {
                 if (f[i] &gt; 1)
                     filler = f[i] - last - 1
                 else
                     filler = 0
                 if (filler)
                     t[field++] = filler
                 t[field++] = 1
                 last = f[i]
                 flist[j++] = field - 1
             }
         }
         FIELDWIDTHS = join(t, 1, field - 1)
         nfields = j - 1
     }
     <!-- endfile -->
</pre>
   <p>Next is the rule that actually processes the data.  If the <samp><span class="option">-s</span></samp> option
is given, then <code>suppress</code> is true.  The first <code>if</code> statement
makes sure that the input record does have the field separator.  If
<samp><span class="command">cut</span></samp> is processing fields, <code>suppress</code> is true, and the field
separator character is not in the record, then the record is skipped.

   <p>If the record is valid, then <samp><span class="command">gawk</span></samp> has split the data
into fields, either using the character in <code>FS</code> or using fixed-length
fields and <code>FIELDWIDTHS</code>.  The loop goes through the list of fields
that should be printed.  The corresponding field is printed if it contains data. 
If the next field also has data, then the separator character is
written out between the fields:

<pre class="example">     <!-- file eg/prog/cut.awk -->
     {
         if (by_fields &amp;&amp; suppress &amp;&amp; index($0, FS) != 0)
             next
     
         for (i = 1; i &lt;= nfields; i++) {
             if ($flist[i] != "") {
                 printf "%s", $flist[i]
                 if (i &lt; nfields &amp;&amp; $flist[i+1] != "")
                     printf "%s", OFS
             }
         }
         print ""
     }
     <!-- endfile -->
</pre>
   <p>This version of <samp><span class="command">cut</span></samp> relies on <samp><span class="command">gawk</span></samp>'s <code>FIELDWIDTHS</code>
variable to do the character-based cutting.  While it is possible in
other <samp><span class="command">awk</span></samp> implementations to use <code>substr()</code>
(see <a href="#String-Functions">String Functions</a>),
it is also extremely painful. 
The <code>FIELDWIDTHS</code> variable supplies an elegant solution to the problem
of picking the input line apart by characters. 
<!-- ENDOFRANGE cut -->
<!-- ENDOFRANGE ficut -->
<!-- ENDOFRANGE colcut -->

<!-- Exercise: Rewrite using split with "". -->
<div class="node">
<a name="Egrep-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Id-Program">Id Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Cut-Program">Cut Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Clones">Clones</a>

</div>

<h4 class="subsection">13.2.2 Searching for Regular Expressions in Files</h4>

<!-- STARTOFRANGE regexps -->
<p><a name="index-regular-expressions_002c-searching-for-1850"></a><!-- STARTOFRANGE sfregexp -->
<a name="index-searching_002c-files-for-regular-expressions-1851"></a><!-- STARTOFRANGE fsregexp -->
<a name="index-files_002c-searching-for-regular-expressions-1852"></a><a name="index-g_t_0040command_007begrep_007d-utility-1853"></a>The <samp><span class="command">egrep</span></samp> utility searches files for patterns.  It uses regular
expressions that are almost identical to those available in <samp><span class="command">awk</span></samp>
(see <a href="#Regexp">Regexp</a>). 
You invoke it as follows:

<pre class="example">     egrep <span class="roman">[</span> <var>options</var> <span class="roman">]</span> '<var>pattern</var>' <var>files</var> ...
</pre>
   <p>The <var>pattern</var> is a regular expression.  In typical usage, the regular
expression is quoted to prevent the shell from expanding any of the
special characters as file name wildcards.  Normally, <samp><span class="command">egrep</span></samp>
prints the lines that matched.  If multiple file names are provided on
the command line, each output line is preceded by the name of the file
and a colon.

   <p>The options to <samp><span class="command">egrep</span></samp> are as follows:

     <dl>
<dt><code>-c</code><dd>Print out a count of the lines that matched the pattern, instead of the
lines themselves.

     <br><dt><code>-s</code><dd>Be silent.  No output is produced and the exit value indicates whether
the pattern was matched.

     <br><dt><code>-v</code><dd>Invert the sense of the test. <samp><span class="command">egrep</span></samp> prints the lines that do
<em>not</em> match the pattern and exits successfully if the pattern is not
matched.

     <br><dt><code>-i</code><dd>Ignore case distinctions in both the pattern and the input data.

     <br><dt><code>-l</code><dd>Only print (list) the names of the files that matched, not the lines that matched.

     <br><dt><code>-e </code><var>pattern</var><dd>Use <var>pattern</var> as the regexp to match.  The purpose of the <samp><span class="option">-e</span></samp>
option is to allow patterns that start with a &lsquo;<samp><span class="samp">-</span></samp>&rsquo;. 
</dl>

   <p>This version uses the <code>getopt()</code> library function
(see <a href="#Getopt-Function">Getopt Function</a>)
and the file transition library program
(see <a href="#Filetrans-Function">Filetrans Function</a>).

   <p>The program begins with a descriptive comment and then a <code>BEGIN</code> rule
that processes the command-line arguments with <code>getopt()</code>.  The <samp><span class="option">-i</span></samp>
(ignore case) option is particularly easy with <samp><span class="command">gawk</span></samp>; we just use the
<code>IGNORECASE</code> built-in variable
(see <a href="#Built_002din-Variables">Built-in Variables</a>):

   <p><a name="index-g_t_0040code_007begrep_002eawk_007d-program-1854"></a>
<pre class="example">     <!-- file eg/prog/egrep.awk -->
     # egrep.awk --- simulate egrep in awk
     #
     <!-- endfile -->
     <!-- file eg/prog/egrep.awk -->
     # Options:
     #    -c    count of lines
     #    -s    silent - use exit value
     #    -v    invert test, success if no match
     #    -i    ignore case
     #    -l    print filenames only
     #    -e    argument is pattern
     #
     # Requires getopt and file transition library functions
     
     BEGIN {
         while ((c = getopt(ARGC, ARGV, "ce:svil")) != -1) {
             if (c == "c")
                 count_only++
             else if (c == "s")
                 no_print++
             else if (c == "v")
                 invert++
             else if (c == "i")
                 IGNORECASE = 1
             else if (c == "l")
                 filenames_only++
             else if (c == "e")
                 pattern = Optarg
             else
                 usage()
         }
     <!-- endfile -->
</pre>
   <p>Next comes the code that handles the <samp><span class="command">egrep</span></samp>-specific behavior. If no
pattern is supplied with <samp><span class="option">-e</span></samp>, the first nonoption on the
command line is used.  The <samp><span class="command">awk</span></samp> command-line arguments up to <code>ARGV[Optind]</code>
are cleared, so that <samp><span class="command">awk</span></samp> won't try to process them as files.  If no
files are specified, the standard input is used, and if multiple files are
specified, we make sure to note this so that the file names can precede the
matched lines in the output:

<pre class="example">     <!-- file eg/prog/egrep.awk -->
         if (pattern == "")
             pattern = ARGV[Optind++]
     
         for (i = 1; i &lt; Optind; i++)
             ARGV[i] = ""
         if (Optind &gt;= ARGC) {
             ARGV[1] = "-"
             ARGC = 2
         } else if (ARGC - Optind &gt; 1)
             do_filenames++
     
     #    if (IGNORECASE)
     #        pattern = tolower(pattern)
     }
     <!-- endfile -->
</pre>
   <p>The last two lines are commented out, since they are not needed in
<samp><span class="command">gawk</span></samp>.  They should be uncommented if you have to use another version
of <samp><span class="command">awk</span></samp>.

   <p>The next set of lines should be uncommented if you are not using
<samp><span class="command">gawk</span></samp>.  This rule translates all the characters in the input line
into lowercase if the <samp><span class="option">-i</span></samp> option is specified.<a rel="footnote" href="#fn-73" name="fnd-73"><sup>73</sup></a>
The rule is
commented out since it is not necessary with <samp><span class="command">gawk</span></samp>:

<!-- Exercise: Fix this, w/array and new line as key to original line -->
<pre class="example">     <!-- file eg/prog/egrep.awk -->
     #{
     #    if (IGNORECASE)
     #        $0 = tolower($0)
     #}
     <!-- endfile -->
</pre>
   <p>The <code>beginfile()</code> function is called by the rule in <samp><span class="file">ftrans.awk</span></samp>
when each new file is processed.  In this case, it is very simple; all it
does is initialize a variable <code>fcount</code> to zero. <code>fcount</code> tracks
how many lines in the current file matched the pattern. 
Naming the parameter <code>junk</code> shows we know that <code>beginfile()</code>
is called with a parameter, but that we're not interested in its value:

<pre class="example">     <!-- file eg/prog/egrep.awk -->
     function beginfile(junk)
     {
         fcount = 0
     }
     <!-- endfile -->
</pre>
   <p>The <code>endfile()</code> function is called after each file has been processed. 
It affects the output only when the user wants a count of the number of lines that
matched.  <code>no_print</code> is true only if the exit status is desired. 
<code>count_only</code> is true if line counts are desired.  <samp><span class="command">egrep</span></samp>
therefore only prints line counts if printing and counting are enabled. 
The output format must be adjusted depending upon the number of files to
process.  Finally, <code>fcount</code> is added to <code>total</code>, so that we
know the total number of lines that matched the pattern:

<pre class="example">     <!-- file eg/prog/egrep.awk -->
     function endfile(file)
     {
         if (! no_print &amp;&amp; count_only) {
             if (do_filenames)
                 print file ":" fcount
             else
                 print fcount
         }
     
         total += fcount
     }
     <!-- endfile -->
</pre>
   <p>The following rule does most of the work of matching lines. The variable
<code>matches</code> is true if the line matched the pattern. If the user
wants lines that did not match, the sense of <code>matches</code> is inverted
using the &lsquo;<samp><span class="samp">!</span></samp>&rsquo; operator. <code>fcount</code> is incremented with the value of
<code>matches</code>, which is either one or zero, depending upon a
successful or unsuccessful match.  If the line does not match, the
<code>next</code> statement just moves on to the next record.

   <p>A number of additional tests are made, but they are only done if we
are not counting lines.  First, if the user only wants exit status
(<code>no_print</code> is true), then it is enough to know that <em>one</em>
line in this file matched, and we can skip on to the next file with
<code>nextfile</code>.  Similarly, if we are only printing file names, we can
print the file name, and then skip to the next file with <code>nextfile</code>. 
Finally, each line is printed, with a leading file name and colon
if necessary:

   <p><a name="index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007d-operator-1855"></a><a name="index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007d-operator-1856"></a>
<pre class="example">     <!-- file eg/prog/egrep.awk -->
     {
         matches = ($0 ~ pattern)
         if (invert)
             matches = ! matches
     
         fcount += matches    # 1 or 0
     
         if (! matches)
             next
     
         if (! count_only) {
             if (no_print)
                 nextfile
     
             if (filenames_only) {
                 print FILENAME
                 nextfile
             }
     
             if (do_filenames)
                 print FILENAME ":" $0
             else
                 print
         }
     }
     <!-- endfile -->
</pre>
   <p>The <code>END</code> rule takes care of producing the correct exit status. If
there are no matches, the exit status is one; otherwise it is zero:

<pre class="example">     <!-- file eg/prog/egrep.awk -->
     END    \
     {
         if (total == 0)
             exit 1
         exit 0
     }
     <!-- endfile -->
</pre>
   <p>The <code>usage()</code> function prints a usage message in case of invalid options,
and then exits:

<pre class="example">     <!-- file eg/prog/egrep.awk -->
     function usage(    e)
     {
         e = "Usage: egrep [-csvil] [-e pat] [files ...]"
         e = e "\n\tegrep [-csvil] pat [files ...]"
         print e &gt; "/dev/stderr"
         exit 1
     }
     <!-- endfile -->
</pre>
   <p>The variable <code>e</code> is used so that the function fits nicely
on the printed page.

   <p><a name="index-g_t_0040code_007bEND_007d-pattern_002c-backslash-continuation-and-1857"></a><a name="index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-continuing-lines-and-1858"></a><a name="index-backslash-_0028_0040code_007b_005c_007d_0029_002c-continuing-lines-and-1859"></a>Just a note on programming style: you may have noticed that the <code>END</code>
rule uses backslash continuation, with the open brace on a line by
itself.  This is so that it more closely resembles the way functions
are written.  Many of the examples
in this chapter
use this style. You can decide for yourself if you like writing
your <code>BEGIN</code> and <code>END</code> rules this way
or not. 
<!-- ENDOFRANGE regexps -->
<!-- ENDOFRANGE sfregexp -->
<!-- ENDOFRANGE fsregexp -->

<div class="node">
<a name="Id-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Split-Program">Split Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Egrep-Program">Egrep Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Clones">Clones</a>

</div>

<h4 class="subsection">13.2.3 Printing out User Information</h4>

<p><a name="index-printing_002c-user-information-1860"></a><a name="index-users_002c-information-about_002c-printing-1861"></a><a name="index-g_t_0040command_007bid_007d-utility-1862"></a>The <samp><span class="command">id</span></samp> utility lists a user's real and effective user ID numbers,
real and effective group ID numbers, and the user's group set, if any. 
<samp><span class="command">id</span></samp> only prints the effective user ID and group ID if they are
different from the real ones.  If possible, <samp><span class="command">id</span></samp> also supplies the
corresponding user and group names.  The output might look like this:

<pre class="example">     $ <kbd>id</kbd>
     -| uid=500(arnold) gid=500(arnold) groups=6(disk),7(lp),19(floppy)
</pre>
   <p><a name="index-g_t_0040code_007bPROCINFO_007d-array-1863"></a>This information is part of what is provided by <samp><span class="command">gawk</span></samp>'s
<code>PROCINFO</code> array (see <a href="#Built_002din-Variables">Built-in Variables</a>). 
However, the <samp><span class="command">id</span></samp> utility provides a more palatable output than just
individual numbers.

   <p>Here is a simple version of <samp><span class="command">id</span></samp> written in <samp><span class="command">awk</span></samp>. 
It uses the user database library functions
(see <a href="#Passwd-Functions">Passwd Functions</a>)
and the group database library functions
(see <a href="#Group-Functions">Group Functions</a>):

   <p>The program is fairly straightforward.  All the work is done in the
<code>BEGIN</code> rule.  The user and group ID numbers are obtained from
<code>PROCINFO</code>. 
The code is repetitive.  The entry in the user database for the real user ID
number is split into parts at the &lsquo;<samp><span class="samp">:</span></samp>&rsquo;. The name is the first field. 
Similar code is used for the effective user ID number and the group
numbers:

   <p><a name="index-g_t_0040code_007bid_002eawk_007d-program-1864"></a>
<pre class="example">     <!-- file eg/prog/id.awk -->
     # id.awk --- implement id in awk
     #
     # Requires user and group library functions
     <!-- endfile -->
     <!-- file eg/prog/id.awk -->
     # output is:
     # uid=12(foo) euid=34(bar) gid=3(baz) \
     #             egid=5(blat) groups=9(nine),2(two),1(one)
     
     BEGIN    \
     {
         uid = PROCINFO["uid"]
         euid = PROCINFO["euid"]
         gid = PROCINFO["gid"]
         egid = PROCINFO["egid"]
     
         printf("uid=%d", uid)
         pw = getpwuid(uid)
         if (pw != "") {
             split(pw, a, ":")
             printf("(%s)", a[1])
         }
     
         if (euid != uid) {
             printf(" euid=%d", euid)
             pw = getpwuid(euid)
             if (pw != "") {
                 split(pw, a, ":")
                 printf("(%s)", a[1])
             }
         }
     
         printf(" gid=%d", gid)
         pw = getgrgid(gid)
         if (pw != "") {
             split(pw, a, ":")
             printf("(%s)", a[1])
         }
     
         if (egid != gid) {
             printf(" egid=%d", egid)
             pw = getgrgid(egid)
             if (pw != "") {
                 split(pw, a, ":")
                 printf("(%s)", a[1])
             }
         }
     
         for (i = 1; ("group" i) in PROCINFO; i++) {
             if (i == 1)
                 printf(" groups=")
             group = PROCINFO["group" i]
             printf("%d", group)
             pw = getgrgid(group)
             if (pw != "") {
                 split(pw, a, ":")
                 printf("(%s)", a[1])
             }
             if (("group" (i+1)) in PROCINFO)
                 printf(",")
         }
     
         print ""
     }
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040code_007bin_007d-operator-1865"></a>The test in the <code>for</code> loop is worth noting. 
Any supplementary groups in the <code>PROCINFO</code> array have the
indices <code>"group1"</code> through <code>"group</code><var>N</var><code>"</code> for some
<var>N</var>, i.e., the total number of supplementary groups. 
However, we don't know in advance how many of these groups
there are.

   <p>This loop works by starting at one, concatenating the value with
<code>"group"</code>, and then using <code>in</code> to see if that value is
in the array.  Eventually, <code>i</code> is incremented past
the last group in the array and the loop exits.

   <p>The loop is also correct if there are <em>no</em> supplementary
groups; then the condition is false the first time it's
tested, and the loop body never executes.

<!-- exercise!!! -->
<div class="node">
<a name="Split-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Tee-Program">Tee Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Id-Program">Id Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Clones">Clones</a>

</div>

<h4 class="subsection">13.2.4 Splitting a Large File into Pieces</h4>

<!-- FIXME: One day, update to current POSIX version of split -->
<!-- STARTOFRANGE filspl -->
<p><a name="index-files_002c-splitting-1866"></a><a name="index-g_t_0040code_007bsplit_007d-utility-1867"></a>The <samp><span class="command">split</span></samp> program splits large text files into smaller pieces. 
Usage is as follows:<a rel="footnote" href="#fn-74" name="fnd-74"><sup>74</sup></a>

<pre class="example">     split <span class="roman">[</span>-<var>count</var><span class="roman">]</span> file <span class="roman">[</span> <var>prefix</var> <span class="roman">]</span>
</pre>
   <p>By default,
the output files are named <samp><span class="file">xaa</span></samp>, <samp><span class="file">xab</span></samp>, and so on. Each file has
1000 lines in it, with the likely exception of the last file. To change the
number of lines in each file, supply a number on the command line
preceded with a minus; e.g., &lsquo;<samp><span class="samp">-500</span></samp>&rsquo; for files with 500 lines in them
instead of 1000.  To change the name of the output files to something like
<samp><span class="file">myfileaa</span></samp>, <samp><span class="file">myfileab</span></samp>, and so on, supply an additional
argument that specifies the file name prefix.

   <p>Here is a version of <samp><span class="command">split</span></samp> in <samp><span class="command">awk</span></samp>. It uses the
<code>ord()</code> and <code>chr()</code> functions presented in
<a href="#Ordinal-Functions">Ordinal Functions</a>.

   <p>The program first sets its defaults, and then tests to make sure there are
not too many arguments.  It then looks at each argument in turn.  The
first argument could be a minus sign followed by a number. If it is, this happens
to look like a negative number, so it is made positive, and that is the
count of lines.  The data file name is skipped over and the final argument
is used as the prefix for the output file names:

   <p><a name="index-g_t_0040code_007bsplit_002eawk_007d-program-1868"></a>
<pre class="example">     <!-- file eg/prog/split.awk -->
     # split.awk --- do split in awk
     #
     # Requires ord() and chr() library functions
     <!-- endfile -->
     <!-- file eg/prog/split.awk -->
     # usage: split [-num] [file] [outname]
     
     BEGIN {
         outfile = "x"    # default
         count = 1000
         if (ARGC &gt; 4)
             usage()
     
         i = 1
         if (ARGV[i] ~ /^-[[:digit:]]+$/) {
             count = -ARGV[i]
             ARGV[i] = ""
             i++
         }
         # test argv in case reading from stdin instead of file
         if (i in ARGV)
             i++    # skip data file name
         if (i in ARGV) {
             outfile = ARGV[i]
             ARGV[i] = ""
         }
     
         s1 = s2 = "a"
         out = (outfile s1 s2)
     }
     <!-- endfile -->
</pre>
   <p>The next rule does most of the work. <code>tcount</code> (temporary count) tracks
how many lines have been printed to the output file so far. If it is greater
than <code>count</code>, it is time to close the current file and start a new one. 
<code>s1</code> and <code>s2</code> track the current suffixes for the file name. If
they are both &lsquo;<samp><span class="samp">z</span></samp>&rsquo;, the file is just too big.  Otherwise, <code>s1</code>
moves to the next letter in the alphabet and <code>s2</code> starts over again at
&lsquo;<samp><span class="samp">a</span></samp>&rsquo;:

<!-- else on separate line here for page breaking -->
<pre class="example">     <!-- file eg/prog/split.awk -->
     {
         if (++tcount &gt; count) {
             close(out)
             if (s2 == "z") {
                 if (s1 == "z") {
                     printf("split: %s is too large to split\n",
                            FILENAME) &gt; "/dev/stderr"
                     exit 1
                 }
                 s1 = chr(ord(s1) + 1)
                 s2 = "a"
             }
             else
                 s2 = chr(ord(s2) + 1)
             out = (outfile s1 s2)
             tcount = 1
         }
         print &gt; out
     }
     <!-- endfile -->
</pre>
   <!-- Exercise: do this with just awk builtin functions, index("abc..."), substr, etc. -->
<p class="noindent">The <code>usage()</code> function simply prints an error message and exits:

<pre class="example">     <!-- file eg/prog/split.awk -->
     function usage(   e)
     {
         e = "usage: split [-num] [file] [outname]"
         print e &gt; "/dev/stderr"
         exit 1
     }
     <!-- endfile -->
</pre>
   <p class="noindent">The variable <code>e</code> is used so that the function
fits nicely on the
page.

   <p>This program is a bit sloppy; it relies on <samp><span class="command">awk</span></samp> to automatically close the last file
instead of doing it in an <code>END</code> rule. 
It also assumes that letters are contiguous in the character set,
which isn't true for EBCDIC systems.

<!-- Exercise: Fix these problems. -->
<!-- BFD... -->
<!-- ENDOFRANGE filspl -->
<div class="node">
<a name="Tee-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Uniq-Program">Uniq Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Split-Program">Split Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Clones">Clones</a>

</div>

<h4 class="subsection">13.2.5 Duplicating Output into Multiple Files</h4>

<p><a name="index-files_002c-multiple_0040comma_007b_007d-duplicating-output-into-1869"></a><a name="index-output_002c-duplicating-into-files-1870"></a><a name="index-g_t_0040code_007btee_007d-utility-1871"></a>The <code>tee</code> program is known as a &ldquo;pipe fitting.&rdquo;  <code>tee</code> copies
its standard input to its standard output and also duplicates it to the
files named on the command line.  Its usage is as follows:

<pre class="example">     tee <span class="roman">[</span>-a<span class="roman">]</span> file ...
</pre>
   <p>The <samp><span class="option">-a</span></samp> option tells <code>tee</code> to append to the named files, instead of
truncating them and starting over.

   <p>The <code>BEGIN</code> rule first makes a copy of all the command-line arguments
into an array named <code>copy</code>. 
<code>ARGV[0]</code> is not copied, since it is not needed. 
<code>tee</code> cannot use <code>ARGV</code> directly, since <samp><span class="command">awk</span></samp> attempts to
process each file name in <code>ARGV</code> as input data.

   <p><a name="index-flag-variables-1872"></a>If the first argument is <samp><span class="option">-a</span></samp>, then the flag variable
<code>append</code> is set to true, and both <code>ARGV[1]</code> and
<code>copy[1]</code> are deleted. If <code>ARGC</code> is less than two, then no
file names were supplied and <code>tee</code> prints a usage message and exits. 
Finally, <samp><span class="command">awk</span></samp> is forced to read the standard input by setting
<code>ARGV[1]</code> to <code>"-"</code> and <code>ARGC</code> to two:

   <p><a name="index-g_t_0040code_007btee_002eawk_007d-program-1873"></a>
<pre class="example">     <!-- file eg/prog/tee.awk -->
     # tee.awk --- tee in awk
     #
     # Copy standard input to all named output files.
     # Append content if -a option is supplied.
     #
     <!-- endfile -->
     <!-- file eg/prog/tee.awk -->
     BEGIN    \
     {
         for (i = 1; i &lt; ARGC; i++)
             copy[i] = ARGV[i]
     
         if (ARGV[1] == "-a") {
             append = 1
             delete ARGV[1]
             delete copy[1]
             ARGC--
         }
         if (ARGC &lt; 2) {
             print "usage: tee [-a] file ..." &gt; "/dev/stderr"
             exit 1
         }
         ARGV[1] = "-"
         ARGC = 2
     }
     <!-- endfile -->
</pre>
   <p>The following single rule does all the work.  Since there is no pattern, it is
executed for each line of input.  The body of the rule simply prints the
line into each file on the command line, and then to the standard output:

<pre class="example">     <!-- file eg/prog/tee.awk -->
     {
         # moving the if outside the loop makes it run faster
         if (append)
             for (i in copy)
                 print &gt;&gt; copy[i]
         else
             for (i in copy)
                 print &gt; copy[i]
         print
     }
     <!-- endfile -->
</pre>
   <p class="noindent">It is also possible to write the loop this way:

<pre class="example">     for (i in copy)
         if (append)
             print &gt;&gt; copy[i]
         else
             print &gt; copy[i]
</pre>
   <p class="noindent">This is more concise but it is also less efficient.  The &lsquo;<samp><span class="samp">if</span></samp>&rsquo; is
tested for each record and for each output file.  By duplicating the loop
body, the &lsquo;<samp><span class="samp">if</span></samp>&rsquo; is only tested once for each input record.  If there are
<var>N</var> input records and <var>M</var> output files, the first method only
executes <var>N</var> &lsquo;<samp><span class="samp">if</span></samp>&rsquo; statements, while the second executes
<var>N</var><code>*</code><var>M</var> &lsquo;<samp><span class="samp">if</span></samp>&rsquo; statements.

   <p>Finally, the <code>END</code> rule cleans up by closing all the output files:

<pre class="example">     <!-- file eg/prog/tee.awk -->
     END    \
     {
         for (i in copy)
             close(copy[i])
     }
     <!-- endfile -->
</pre>
   <div class="node">
<a name="Uniq-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Wc-Program">Wc Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Tee-Program">Tee Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Clones">Clones</a>

</div>

<h4 class="subsection">13.2.6 Printing Nonduplicated Lines of Text</h4>

<!-- FIXME: One day, update to current POSIX version of uniq -->
<!-- STARTOFRANGE prunt -->
<p><a name="index-printing_002c-unduplicated-lines-of-text-1874"></a><!-- STARTOFRANGE tpul -->
<a name="index-text_0040comma_007b_007d-printing_002c-unduplicated-lines-of-1875"></a><a name="index-g_t_0040command_007buniq_007d-utility-1876"></a>The <samp><span class="command">uniq</span></samp> utility reads sorted lines of data on its standard
input, and by default removes duplicate lines.  In other words, it only
prints unique lines&mdash;hence the name.  <samp><span class="command">uniq</span></samp> has a number of
options. The usage is as follows:

<pre class="example">     uniq <span class="roman">[</span>-udc <span class="roman">[</span>-<var>n</var><span class="roman">]]</span> <span class="roman">[</span>+<var>n</var><span class="roman">]</span> <span class="roman">[</span> <var>input file</var> <span class="roman">[</span> <var>output file</var> <span class="roman">]]</span>
</pre>
   <p>The options for <samp><span class="command">uniq</span></samp> are:

     <dl>
<dt><code>-d</code><dd>Print only repeated lines.

     <br><dt><code>-u</code><dd>Print only nonrepeated lines.

     <br><dt><code>-c</code><dd>Count lines. This option overrides <samp><span class="option">-d</span></samp> and <samp><span class="option">-u</span></samp>.  Both repeated
and nonrepeated lines are counted.

     <br><dt><code>-</code><var>n</var><dd>Skip <var>n</var> fields before comparing lines.  The definition of fields
is similar to <samp><span class="command">awk</span></samp>'s default: nonwhitespace characters separated
by runs of spaces and/or TABs.

     <br><dt><code>+</code><var>n</var><dd>Skip <var>n</var> characters before comparing lines.  Any fields specified with
&lsquo;<samp><span class="samp">-</span><var>n</var></samp>&rsquo; are skipped first.

     <br><dt><var>input file</var><dd>Data is read from the input file named on the command line, instead of from
the standard input.

     <br><dt><var>output file</var><dd>The generated output is sent to the named output file, instead of to the
standard output. 
</dl>

   <p>Normally <samp><span class="command">uniq</span></samp> behaves as if both the <samp><span class="option">-d</span></samp> and
<samp><span class="option">-u</span></samp> options are provided.

   <p><samp><span class="command">uniq</span></samp> uses the
<code>getopt()</code> library function
(see <a href="#Getopt-Function">Getopt Function</a>)
and the <code>join()</code> library function
(see <a href="#Join-Function">Join Function</a>).

   <p>The program begins with a <code>usage()</code> function and then a brief outline of
the options and their meanings in comments. 
The <code>BEGIN</code> rule deals with the command-line arguments and options. It
uses a trick to get <code>getopt()</code> to handle options of the form &lsquo;<samp><span class="samp">-25</span></samp>&rsquo;,
treating such an option as the option letter &lsquo;<samp><span class="samp">2</span></samp>&rsquo; with an argument of
&lsquo;<samp><span class="samp">5</span></samp>&rsquo;. If indeed two or more digits are supplied (<code>Optarg</code> looks
like a number), <code>Optarg</code> is
concatenated with the option digit and then the result is added to zero to make
it into a number.  If there is only one digit in the option, then
<code>Optarg</code> is not needed. In this case, <code>Optind</code> must be decremented so that
<code>getopt()</code> processes it next time.  This code is admittedly a bit
tricky.

   <p>If no options are supplied, then the default is taken, to print both
repeated and nonrepeated lines.  The output file, if provided, is assigned
to <code>outputfile</code>.  Early on, <code>outputfile</code> is initialized to the
standard output, <samp><span class="file">/dev/stdout</span></samp>:

   <p><a name="index-g_t_0040code_007buniq_002eawk_007d-program-1877"></a>
<pre class="example">     <!-- file eg/prog/uniq.awk -->
     # uniq.awk --- do uniq in awk
     #
     # Requires getopt() and join() library functions
     <!-- endfile -->
     <!-- file eg/prog/uniq.awk -->
     
     function usage(    e)
     {
         e = "Usage: uniq [-udc [-n]] [+n] [ in [ out ]]"
         print e &gt; "/dev/stderr"
         exit 1
     }
     
     # -c    count lines. overrides -d and -u
     # -d    only repeated lines
     # -u    only nonrepeated lines
     # -n    skip n fields
     # +n    skip n characters, skip fields first
     
     BEGIN   \
     {
         count = 1
         outputfile = "/dev/stdout"
         opts = "udc0:1:2:3:4:5:6:7:8:9:"
         while ((c = getopt(ARGC, ARGV, opts)) != -1) {
             if (c == "u")
                 non_repeated_only++
             else if (c == "d")
                 repeated_only++
             else if (c == "c")
                 do_count++
             else if (index("0123456789", c) != 0) {
                 # getopt requires args to options
                 # this messes us up for things like -5
                 if (Optarg ~ /^[[:digit:]]+$/)
                     fcount = (c Optarg) + 0
                 else {
                     fcount = c + 0
                     Optind--
                 }
             } else
                 usage()
         }
     
         if (ARGV[Optind] ~ /^\+[[:digit:]]+$/) {
             charcount = substr(ARGV[Optind], 2) + 0
             Optind++
         }
     
         for (i = 1; i &lt; Optind; i++)
             ARGV[i] = ""
     
         if (repeated_only == 0 &amp;&amp; non_repeated_only == 0)
             repeated_only = non_repeated_only = 1
     
         if (ARGC - Optind == 2) {
             outputfile = ARGV[ARGC - 1]
             ARGV[ARGC - 1] = ""
         }
     }
     <!-- endfile -->
</pre>
   <p>The following function, <code>are_equal()</code>, compares the current line,
<code>$0</code>, to the
previous line, <code>last</code>.  It handles skipping fields and characters. 
If no field count and no character count are specified, <code>are_equal()</code>
simply returns one or zero depending upon the result of a simple string
comparison of <code>last</code> and <code>$0</code>.  Otherwise, things get more
complicated. 
If fields have to be skipped, each line is broken into an array using
<code>split()</code>
(see <a href="#String-Functions">String Functions</a>);
the desired fields are then joined back into a line using <code>join()</code>. 
The joined lines are stored in <code>clast</code> and <code>cline</code>. 
If no fields are skipped, <code>clast</code> and <code>cline</code> are set to
<code>last</code> and <code>$0</code>, respectively. 
Finally, if characters are skipped, <code>substr()</code> is used to strip off the
leading <code>charcount</code> characters in <code>clast</code> and <code>cline</code>.  The
two strings are then compared and <code>are_equal()</code> returns the result:

<pre class="example">     <!-- file eg/prog/uniq.awk -->
     function are_equal(    n, m, clast, cline, alast, aline)
     {
         if (fcount == 0 &amp;&amp; charcount == 0)
             return (last == $0)
     
         if (fcount &gt; 0) {
             n = split(last, alast)
             m = split($0, aline)
             clast = join(alast, fcount+1, n)
             cline = join(aline, fcount+1, m)
         } else {
             clast = last
             cline = $0
         }
         if (charcount) {
             clast = substr(clast, charcount + 1)
             cline = substr(cline, charcount + 1)
         }
     
         return (clast == cline)
     }
     <!-- endfile -->
</pre>
   <p>The following two rules are the body of the program.  The first one is
executed only for the very first line of data.  It sets <code>last</code> equal to
<code>$0</code>, so that subsequent lines of text have something to be compared to.

   <p>The second rule does the work. The variable <code>equal</code> is one or zero,
depending upon the results of <code>are_equal()</code>'s comparison. If <samp><span class="command">uniq</span></samp>
is counting repeated lines, and the lines are equal, then it increments the <code>count</code> variable. 
Otherwise, it prints the line and resets <code>count</code>,
since the two lines are not equal.

   <p>If <samp><span class="command">uniq</span></samp> is not counting, and if the lines are equal, <code>count</code> is incremented. 
Nothing is printed, since the point is to remove duplicates. 
Otherwise, if <samp><span class="command">uniq</span></samp> is counting repeated lines and more than
one line is seen, or if <samp><span class="command">uniq</span></samp> is counting nonrepeated lines
and only one line is seen, then the line is printed, and <code>count</code>
is reset.

   <p>Finally, similar logic is used in the <code>END</code> rule to print the final
line of input data:

<pre class="example">     <!-- file eg/prog/uniq.awk -->
     NR == 1 {
         last = $0
         next
     }
     
     {
         equal = are_equal()
     
         if (do_count) {    # overrides -d and -u
             if (equal)
                 count++
             else {
                 printf("%4d %s\n", count, last) &gt; outputfile
                 last = $0
                 count = 1    # reset
             }
             next
         }
     
         if (equal)
             count++
         else {
             if ((repeated_only &amp;&amp; count &gt; 1) ||
                 (non_repeated_only &amp;&amp; count == 1))
                     print last &gt; outputfile
             last = $0
             count = 1
         }
     }
     
     END {
         if (do_count)
             printf("%4d %s\n", count, last) &gt; outputfile
         else if ((repeated_only &amp;&amp; count &gt; 1) ||
                 (non_repeated_only &amp;&amp; count == 1))
             print last &gt; outputfile
         close(outputfile)
     }
     <!-- endfile -->
</pre>
   <!-- ENDOFRANGE prunt -->
<!-- ENDOFRANGE tpul -->
<div class="node">
<a name="Wc-Program"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Uniq-Program">Uniq Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Clones">Clones</a>

</div>

<h4 class="subsection">13.2.7 Counting Things</h4>

<!-- FIXME: One day, update to current POSIX version of wc -->
<!-- STARTOFRANGE count -->
<p><a name="index-counting-1878"></a><!-- STARTOFRANGE infco -->
<a name="index-input-files_002c-counting-elements-in-1879"></a><!-- STARTOFRANGE woco -->
<a name="index-words_002c-counting-1880"></a><!-- STARTOFRANGE chco -->
<a name="index-characters_002c-counting-1881"></a><!-- STARTOFRANGE lico -->
<a name="index-lines_002c-counting-1882"></a><a name="index-g_t_0040command_007bwc_007d-utility-1883"></a>The <samp><span class="command">wc</span></samp> (word count) utility counts lines, words, and characters in
one or more input files. Its usage is as follows:

<pre class="example">     wc <span class="roman">[</span>-lwc<span class="roman">]</span> <span class="roman">[</span> <var>files</var> ... <span class="roman">]</span>
</pre>
   <p>If no files are specified on the command line, <samp><span class="command">wc</span></samp> reads its standard
input. If there are multiple files, it also prints total counts for all
the files.  The options and their meanings are shown in the following list:

     <dl>
<dt><code>-l</code><dd>Count only lines.

     <br><dt><code>-w</code><dd>Count only words. 
A &ldquo;word&rdquo; is a contiguous sequence of nonwhitespace characters, separated
by spaces and/or TABs.  Luckily, this is the normal way <samp><span class="command">awk</span></samp> separates
fields in its input data.

     <br><dt><code>-c</code><dd>Count only characters. 
</dl>

   <p>Implementing <samp><span class="command">wc</span></samp> in <samp><span class="command">awk</span></samp> is particularly elegant,
since <samp><span class="command">awk</span></samp> does a lot of the work for us; it splits lines into
words (i.e., fields) and counts them, it counts lines (i.e., records),
and it can easily tell us how long a line is.

   <p>This program uses the <code>getopt()</code> library function
(see <a href="#Getopt-Function">Getopt Function</a>)
and the file-transition functions
(see <a href="#Filetrans-Function">Filetrans Function</a>).

   <p>This version has one notable difference from traditional versions of
<samp><span class="command">wc</span></samp>: it always prints the counts in the order lines, words,
and characters.  Traditional versions note the order of the <samp><span class="option">-l</span></samp>,
<samp><span class="option">-w</span></samp>, and <samp><span class="option">-c</span></samp> options on the command line, and print the
counts in that order.

   <p>The <code>BEGIN</code> rule does the argument processing.  The variable
<code>print_total</code> is true if more than one file is named on the
command line:

   <p><a name="index-g_t_0040code_007bwc_002eawk_007d-program-1884"></a>
<pre class="example">     <!-- file eg/prog/wc.awk -->
     # wc.awk --- count lines, words, characters
     <!-- endfile -->
     <!-- file eg/prog/wc.awk -->
     
     # Options:
     #    -l    only count lines
     #    -w    only count words
     #    -c    only count characters
     #
     # Default is to count lines, words, characters
     #
     # Requires getopt() and file transition library functions
     
     BEGIN {
         # let getopt() print a message about
         # invalid options. we ignore them
         while ((c = getopt(ARGC, ARGV, "lwc")) != -1) {
             if (c == "l")
                 do_lines = 1
             else if (c == "w")
                 do_words = 1
             else if (c == "c")
                 do_chars = 1
         }
         for (i = 1; i &lt; Optind; i++)
             ARGV[i] = ""
     
         # if no options, do all
         if (! do_lines &amp;&amp; ! do_words &amp;&amp; ! do_chars)
             do_lines = do_words = do_chars = 1
     
         print_total = (ARGC - i &gt; 2)
     }
     <!-- endfile -->
</pre>
   <p>The <code>beginfile()</code> function is simple; it just resets the counts of lines,
words, and characters to zero, and saves the current file name in
<code>fname</code>:

<pre class="example">     <!-- file eg/prog/wc.awk -->
     function beginfile(file)
     {
         lines = words = chars = 0
         fname = FILENAME
     }
     <!-- endfile -->
</pre>
   <p>The <code>endfile()</code> function adds the current file's numbers to the running
totals of lines, words, and characters.<a rel="footnote" href="#fn-75" name="fnd-75"><sup>75</sup></a>  It then prints out those numbers
for the file that was just read. It relies on <code>beginfile()</code> to reset the
numbers for the following data file:
<!-- FIXME: ONE DAY: make the above footnote an exercise, -->
<!-- instead of giving away the answer. -->

<pre class="example">     <!-- file eg/prog/wc.awk -->
     function endfile(file)
     {
         tlines += lines
         twords += words
         tchars += chars
         if (do_lines)
             printf "\t%d", lines
         if (do_words)
             printf "\t%d", words
         if (do_chars)
             printf "\t%d", chars
         printf "\t%s\n", fname
     }
     <!-- endfile -->
</pre>
   <p>There is one rule that is executed for each line. It adds the length of
the record, plus one, to <code>chars</code>.<a rel="footnote" href="#fn-76" name="fnd-76"><sup>76</sup></a>
Adding one plus the record length
is needed because the newline character separating records (the value
of <code>RS</code>) is not part of the record itself, and thus not included
in its length.  Next, <code>lines</code> is incremented for each line read,
and <code>words</code> is incremented by the value of <code>NF</code>, which is the
number of &ldquo;words&rdquo; on this line:

<pre class="example">     <!-- file eg/prog/wc.awk -->
     # do per line
     {
         chars += length($0) + 1    # get newline
         lines++
         words += NF
     }
     <!-- endfile -->
</pre>
   <p>Finally, the <code>END</code> rule simply prints the totals for all the files:

<pre class="example">     <!-- file eg/prog/wc.awk -->
     END {
         if (print_total) {
             if (do_lines)
                 printf "\t%d", tlines
             if (do_words)
                 printf "\t%d", twords
             if (do_chars)
                 printf "\t%d", tchars
             print "\ttotal"
         }
     }
     <!-- endfile -->
</pre>
   <!-- ENDOFRANGE count -->
<!-- ENDOFRANGE infco -->
<!-- ENDOFRANGE lico -->
<!-- ENDOFRANGE woco -->
<!-- ENDOFRANGE chco -->
<!-- ENDOFRANGE posimawk -->
<div class="node">
<a name="Miscellaneous-Programs"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Clones">Clones</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sample-Programs">Sample Programs</a>

</div>

<h3 class="section">13.3 A Grab Bag of <samp><span class="command">awk</span></samp> Programs</h3>

<p>This section is a large &ldquo;grab bag&rdquo; of miscellaneous programs. 
We hope you find them both interesting and enjoyable.

<ul class="menu">
<li><a accesskey="1" href="#Dupword-Program">Dupword Program</a>:              Finding duplicated words in a document. 
<li><a accesskey="2" href="#Alarm-Program">Alarm Program</a>:                An alarm clock. 
<li><a accesskey="3" href="#Translate-Program">Translate Program</a>:            A program similar to the <samp><span class="command">tr</span></samp> utility. 
<li><a accesskey="4" href="#Labels-Program">Labels Program</a>:               Printing mailing labels. 
<li><a accesskey="5" href="#Word-Sorting">Word Sorting</a>:                 A program to produce a word usage count. 
<li><a accesskey="6" href="#History-Sorting">History Sorting</a>:              Eliminating duplicate entries from a history
                                file. 
<li><a accesskey="7" href="#Extract-Program">Extract Program</a>:              Pulling out programs from Texinfo source
                                files. 
<li><a accesskey="8" href="#Simple-Sed">Simple Sed</a>:                   A Simple Stream Editor. 
<li><a accesskey="9" href="#Igawk-Program">Igawk Program</a>:                A wrapper for <samp><span class="command">awk</span></samp> that includes
                                files. 
<li><a href="#Anagram-Program">Anagram Program</a>:              Finding anagrams from a dictionary. 
<li><a href="#Signature-Program">Signature Program</a>:            People do amazing things with too much time on
                                their hands. 
</ul>

<div class="node">
<a name="Dupword-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Alarm-Program">Alarm Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.1 Finding Duplicated Words in a Document</h4>

<p><a name="index-words_002c-duplicate_0040comma_007b_007d-searching-for-1885"></a><a name="index-searching_002c-for-words-1886"></a><a name="index-documents_0040comma_007b_007d-searching-1887"></a>A common error when writing large amounts of prose is to accidentally
duplicate words.  Typically you will see this in text as something like &ldquo;the
the program does the following<small class="dots">...</small>&rdquo;  When the text is online, often
the duplicated words occur at the end of one line and the
beginning of
another, making them very difficult to spot. 
<!-- as here! -->

   <p>This program, <samp><span class="file">dupword.awk</span></samp>, scans through a file one line at a time
and looks for adjacent occurrences of the same word.  It also saves the last
word on a line (in the variable <code>prev</code>) for comparison with the first
word on the next line.

   <p><a name="index-Texinfo-1888"></a>The first two statements make sure that the line is all lowercase,
so that, for example, &ldquo;The&rdquo; and &ldquo;the&rdquo; compare equal to each other. 
The next statement replaces nonalphanumeric and nonwhitespace characters
with spaces, so that punctuation does not affect the comparison either. 
The characters are replaced with spaces so that formatting controls
don't create nonsense words (e.g., the Texinfo &lsquo;<samp><span class="samp">@code{NF}</span></samp>&rsquo;
becomes &lsquo;<samp><span class="samp">codeNF</span></samp>&rsquo; if punctuation is simply deleted).  The record is
then resplit into fields, yielding just the actual words on the line,
and ensuring that there are no empty fields.

   <p>If there are no fields left after removing all the punctuation, the
current record is skipped.  Otherwise, the program loops through each
word, comparing it to the previous one:

   <p><a name="index-g_t_0040code_007bdupword_002eawk_007d-program-1889"></a>
<pre class="example">     <!-- file eg/prog/dupword.awk -->
     # dupword.awk --- find duplicate words in text
     <!-- endfile -->
     <!-- file eg/prog/dupword.awk -->
     {
         $0 = tolower($0)
         gsub(/[^[:alnum:][:blank:]]/, " ");
         $0 = $0         # re-split
         if (NF == 0)
             next
         if ($1 == prev)
             printf("%s:%d: duplicate %s\n",
                 FILENAME, FNR, $1)
         for (i = 2; i &lt;= NF; i++)
             if ($i == $(i-1))
                 printf("%s:%d: duplicate %s\n",
                     FILENAME, FNR, $i)
         prev = $NF
     }
     <!-- endfile -->
</pre>
   <div class="node">
<a name="Alarm-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Translate-Program">Translate Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dupword-Program">Dupword Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.2 An Alarm Clock Program</h4>

<p><a name="index-insomnia_002c-cure-for-1890"></a><a name="index-Robbins_002c-Arnold-1891"></a><blockquote>
<i>Nothing cures insomnia like a ringing alarm clock.</i><br>
Arnold Robbins
</blockquote>

<!-- STARTOFRANGE tialarm -->
   <p><a name="index-time_002c-alarm-clock-example-program-1892"></a><!-- STARTOFRANGE alaex -->
<a name="index-alarm-clock-example-program-1893"></a>The following program is a simple &ldquo;alarm clock&rdquo; program. 
You give it a time of day and an optional message.  At the specified time,
it prints the message on the standard output. In addition, you can give it
the number of times to repeat the message as well as a delay between
repetitions.

   <p>This program uses the <code>gettimeofday()</code> function from
<a href="#Gettimeofday-Function">Gettimeofday Function</a>.

   <p>All the work is done in the <code>BEGIN</code> rule.  The first part is argument
checking and setting of defaults: the delay, the count, and the message to
print.  If the user supplied a message without the ASCII BEL
character (known as the &ldquo;alert&rdquo; character, <code>"\a"</code>), then it is added to
the message.  (On many systems, printing the ASCII BEL generates an
audible alert. Thus when the alarm goes off, the system calls attention
to itself in case the user is not looking at the computer.) 
Just for a change, this program uses a <code>switch</code> statement
(see <a href="#Switch-Statement">Switch Statement</a>), but the processing could be done with a series of
<code>if</code>-<code>else</code> statements instead. 
Here is the program:

   <p><a name="index-g_t_0040code_007balarm_002eawk_007d-program-1894"></a>
<pre class="example">     <!-- file eg/prog/alarm.awk -->
     # alarm.awk --- set an alarm
     #
     # Requires gettimeofday() library function
     <!-- endfile -->
     <!-- file eg/prog/alarm.awk -->
     # usage: alarm time [ "message" [ count [ delay ] ] ]
     
     BEGIN    \
     {
         # Initial argument sanity checking
         usage1 = "usage: alarm time ['message' [count [delay]]]"
         usage2 = sprintf("\t(%s) time ::= hh:mm", ARGV[1])
     
         if (ARGC &lt; 2) {
             print usage1 &gt; "/dev/stderr"
             print usage2 &gt; "/dev/stderr"
             exit 1
         }
         switch (ARGC) {
         case 5:
             delay = ARGV[4] + 0
             # fall through
         case 4:
             count = ARGV[3] + 0
             # fall through
         case 3:
             message = ARGV[2]
             break
         default:
             if (ARGV[1] !~ /[[:digit:]]?[[:digit:]]:[[:digit:]]{2}/) {
                 print usage1 &gt; "/dev/stderr"
                 print usage2 &gt; "/dev/stderr"
                 exit 1
             }
             break
         }
     
         # set defaults for once we reach the desired time
         if (delay == 0)
             delay = 180    # 3 minutes
         if (count == 0)
             count = 5
         if (message == "")
             message = sprintf("\aIt is now %s!\a", ARGV[1])
         else if (index(message, "\a") == 0)
             message = "\a" message "\a"
     <!-- endfile -->
</pre>
   <p>The next section of code turns the alarm time into hours and minutes,
converts it (if necessary) to a 24-hour clock, and then turns that
time into a count of the seconds since midnight.  Next it turns the current
time into a count of seconds since midnight.  The difference between the two
is how long to wait before setting off the alarm:

<pre class="example">     <!-- file eg/prog/alarm.awk -->
         # split up alarm time
         split(ARGV[1], atime, ":")
         hour = atime[1] + 0    # force numeric
         minute = atime[2] + 0  # force numeric
     
         # get current broken down time
         gettimeofday(now)
     
         # if time given is 12-hour hours and it's after that
         # hour, e.g., `alarm 5:30' at 9 a.m. means 5:30 p.m.,
         # then add 12 to real hour
         if (hour &lt; 12 &amp;&amp; now["hour"] &gt; hour)
             hour += 12
     
         # set target time in seconds since midnight
         target = (hour * 60 * 60) + (minute * 60)
     
         # get current time in seconds since midnight
         current = (now["hour"] * 60 * 60) + \
                    (now["minute"] * 60) + now["second"]
     
         # how long to sleep for
         naptime = target - current
         if (naptime &lt;= 0) {
             print "time is in the past!" &gt; "/dev/stderr"
             exit 1
         }
     <!-- endfile -->
</pre>
   <p><a name="index-g_t_0040command_007bsleep_007d-utility-1895"></a>Finally, the program uses the <code>system()</code> function
(see <a href="#I_002fO-Functions">I/O Functions</a>)
to call the <samp><span class="command">sleep</span></samp> utility.  The <samp><span class="command">sleep</span></samp> utility simply pauses
for the given number of seconds.  If the exit status is not zero,
the program assumes that <samp><span class="command">sleep</span></samp> was interrupted and exits. If
<samp><span class="command">sleep</span></samp> exited with an OK status (zero), then the program prints the
message in a loop, again using <samp><span class="command">sleep</span></samp> to delay for however many
seconds are necessary:

<pre class="example">     <!-- file eg/prog/alarm.awk -->
         # zzzzzz..... go away if interrupted
         if (system(sprintf("sleep %d", naptime)) != 0)
             exit 1
     
         # time to notify!
         command = sprintf("sleep %d", delay)
         for (i = 1; i &lt;= count; i++) {
             print message
             # if sleep command interrupted, go away
             if (system(command) != 0)
                 break
         }
     
         exit 0
     }
     <!-- endfile -->
</pre>
   <!-- ENDOFRANGE tialarm -->
<!-- ENDOFRANGE alaex -->
<div class="node">
<a name="Translate-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Labels-Program">Labels Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Alarm-Program">Alarm Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.3 Transliterating Characters</h4>

<!-- STARTOFRANGE chtra -->
<p><a name="index-characters_002c-transliterating-1896"></a><a name="index-g_t_0040command_007btr_007d-utility-1897"></a>The system <samp><span class="command">tr</span></samp> utility transliterates characters.  For example, it is
often used to map uppercase letters into lowercase for further processing:

<pre class="example">     <var>generate data</var> | tr 'A-Z' 'a-z' | <var>process data</var> ...
</pre>
   <p><samp><span class="command">tr</span></samp> requires two lists of characters.<a rel="footnote" href="#fn-77" name="fnd-77"><sup>77</sup></a>  When processing the input, the first character in the
first list is replaced with the first character in the second list,
the second character in the first list is replaced with the second
character in the second list, and so on.  If there are more characters
in the &ldquo;from&rdquo; list than in the &ldquo;to&rdquo; list, the last character of the
&ldquo;to&rdquo; list is used for the remaining characters in the &ldquo;from&rdquo; list.

   <p>Some time ago,
<!-- early or mid-1989! -->
a user proposed that a transliteration function should
be added to <samp><span class="command">gawk</span></samp>. 
<!-- Wishing to avoid gratuitous new features, -->
<!-- at least theoretically -->
The following program was written to
prove that character transliteration could be done with a user-level
function.  This program is not as complete as the system <samp><span class="command">tr</span></samp> utility
but it does most of the job.

   <p>The <samp><span class="command">translate</span></samp> program demonstrates one of the few weaknesses
of standard <samp><span class="command">awk</span></samp>: dealing with individual characters is very
painful, requiring repeated use of the <code>substr()</code>, <code>index()</code>,
and <code>gsub()</code> built-in functions
(see <a href="#String-Functions">String Functions</a>).<a rel="footnote" href="#fn-78" name="fnd-78"><sup>78</sup></a>
<!-- Exercise: How might you use this new feature to simplify the program? -->
There are two functions.  The first, <code>stranslate()</code>, takes three
arguments:

     <dl>
<dt><code>from</code><dd>A list of characters from which to translate.

     <br><dt><code>to</code><dd>A list of characters to which to translate.

     <br><dt><code>target</code><dd>The string on which to do the translation. 
</dl>

   <p>Associative arrays make the translation part fairly easy. <code>t_ar</code> holds
the &ldquo;to&rdquo; characters, indexed by the &ldquo;from&rdquo; characters.  Then a simple
loop goes through <code>from</code>, one character at a time.  For each character
in <code>from</code>, if the character appears in <code>target</code>,
it is replaced with the corresponding <code>to</code> character.

   <p>The <code>translate()</code> function simply calls <code>stranslate()</code> using <code>$0</code>
as the target.  The main program sets two global variables, <code>FROM</code> and
<code>TO</code>, from the command line, and then changes <code>ARGV</code> so that
<samp><span class="command">awk</span></samp> reads from the standard input.

   <p>Finally, the processing rule simply calls <code>translate()</code> for each record:

   <p><a name="index-g_t_0040code_007btranslate_002eawk_007d-program-1898"></a>
<pre class="example">     <!-- file eg/prog/translate.awk -->
     # translate.awk --- do tr-like stuff
     <!-- endfile -->
     <!-- file eg/prog/translate.awk -->
     # Bugs: does not handle things like: tr A-Z a-z, it has
     # to be spelled out. However, if `to' is shorter than `from',
     # the last character in `to' is used for the rest of `from'.
     
     function stranslate(from, to, target,     lf, lt, ltarget, t_ar, i, c,
                                                                    result)
     {
         lf = length(from)
         lt = length(to)
         ltarget = length(target)
         for (i = 1; i &lt;= lt; i++)
             t_ar[substr(from, i, 1)] = substr(to, i, 1)
         if (lt &lt; lf)
             for (; i &lt;= lf; i++)
                 t_ar[substr(from, i, 1)] = substr(to, lt, 1)
         for (i = 1; i &lt;= ltarget; i++) {
             c = substr(target, i, 1)
             if (c in t_ar)
                 c = t_ar[c]
             result = result c
         }
         return result
     }
     
     function translate(from, to)
     {
         return $0 = stranslate(from, to, $0)
     }
     
     # main program
     BEGIN {
         if (ARGC &lt; 3) {
             print "usage: translate from to" &gt; "/dev/stderr"
             exit
         }
         FROM = ARGV[1]
         TO = ARGV[2]
         ARGC = 2
         ARGV[1] = "-"
     }
     
     {
         translate(FROM, TO)
         print
     }
     <!-- endfile -->
</pre>
   <p>While it is possible to do character transliteration in a user-level
function, it is not necessarily efficient, and we (the <samp><span class="command">gawk</span></samp>
authors) started to consider adding a built-in function.  However,
shortly after writing this program, we learned that the System V Release 4
<samp><span class="command">awk</span></samp> had added the <code>toupper()</code> and <code>tolower()</code> functions
(see <a href="#String-Functions">String Functions</a>). 
These functions handle the vast majority of the
cases where character transliteration is necessary, and so we chose to
simply add those functions to <samp><span class="command">gawk</span></samp> as well and then leave well
enough alone.

   <p>An obvious improvement to this program would be to set up the
<code>t_ar</code> array only once, in a <code>BEGIN</code> rule. However, this
assumes that the &ldquo;from&rdquo; and &ldquo;to&rdquo; lists
will never change throughout the lifetime of the program. 
<!-- ENDOFRANGE chtra -->

<div class="node">
<a name="Labels-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Word-Sorting">Word Sorting</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Translate-Program">Translate Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.4 Printing Mailing Labels</h4>

<!-- STARTOFRANGE prml -->
<p><a name="index-printing_002c-mailing-labels-1899"></a><!-- STARTOFRANGE mlprint -->
<a name="index-mailing-labels_0040comma_007b_007d-printing-1900"></a>Here is a &ldquo;real world&rdquo;<a rel="footnote" href="#fn-79" name="fnd-79"><sup>79</sup></a>
program.  This
script reads lists of names and
addresses and generates mailing labels.  Each page of labels has 20 labels
on it, two across and 10 down.  The addresses are guaranteed to be no more
than five lines of data.  Each address is separated from the next by a blank
line.

   <p>The basic idea is to read 20 labels worth of data.  Each line of each label
is stored in the <code>line</code> array.  The single rule takes care of filling
the <code>line</code> array and printing the page when 20 labels have been read.

   <p>The <code>BEGIN</code> rule simply sets <code>RS</code> to the empty string, so that
<samp><span class="command">awk</span></samp> splits records at blank lines
(see <a href="#Records">Records</a>). 
It sets <code>MAXLINES</code> to 100, since 100 is the maximum number
of lines on the page (20 * 5 = 100).

   <p>Most of the work is done in the <code>printpage()</code> function. 
The label lines are stored sequentially in the <code>line</code> array.  But they
have to print horizontally; <code>line[1]</code> next to <code>line[6]</code>,
<code>line[2]</code> next to <code>line[7]</code>, and so on.  Two loops are used to
accomplish this.  The outer loop, controlled by <code>i</code>, steps through
every 10 lines of data; this is each row of labels.  The inner loop,
controlled by <code>j</code>, goes through the lines within the row. 
As <code>j</code> goes from 0 to 4, &lsquo;<samp><span class="samp">i+j</span></samp>&rsquo; is the <code>j</code>-th line in
the row, and &lsquo;<samp><span class="samp">i+j+5</span></samp>&rsquo; is the entry next to it.  The output ends up
looking something like this:

<pre class="example">     line 1          line 6
     line 2          line 7
     line 3          line 8
     line 4          line 9
     line 5          line 10
     ...
</pre>
   <p class="noindent">The <code>printf</code> format string &lsquo;<samp><span class="samp">%-41s</span></samp>&rsquo; left-aligns
the data and prints it within a fixed-width field.

   <p>As a final note, an extra blank line is printed at lines 21 and 61, to keep
the output lined up on the labels.  This is dependent on the particular
brand of labels in use when the program was written.  You will also note
that there are two blank lines at the top and two blank lines at the bottom.

   <p>The <code>END</code> rule arranges to flush the final page of labels; there may
not have been an even multiple of 20 labels in the data:

   <p><a name="index-g_t_0040code_007blabels_002eawk_007d-program-1901"></a>
<pre class="example">     <!-- file eg/prog/labels.awk -->
     # labels.awk --- print mailing labels
     <!-- endfile -->
     <!-- file eg/prog/labels.awk -->
     
     # Each label is 5 lines of data that may have blank lines.
     # The label sheets have 2 blank lines at the top and 2 at
     # the bottom.
     
     BEGIN    { RS = "" ; MAXLINES = 100 }
     
     function printpage(    i, j)
     {
         if (Nlines &lt;= 0)
             return
     
         printf "\n\n"        # header
     
         for (i = 1; i &lt;= Nlines; i += 10) {
             if (i == 21 || i == 61)
                 print ""
             for (j = 0; j &lt; 5; j++) {
                 if (i + j &gt; MAXLINES)
                     break
                 printf "   %-41s %s\n", line[i+j], line[i+j+5]
             }
             print ""
         }
     
         printf "\n\n"        # footer
     
         delete line
     }
     
     # main rule
     {
         if (Count &gt;= 20) {
             printpage()
             Count = 0
             Nlines = 0
         }
         n = split($0, a, "\n")
         for (i = 1; i &lt;= n; i++)
             line[++Nlines] = a[i]
         for (; i &lt;= 5; i++)
             line[++Nlines] = ""
         Count++
     }
     
     END    \
     {
         printpage()
     }
     <!-- endfile -->
</pre>
   <!-- ENDOFRANGE prml -->
<!-- ENDOFRANGE mlprint -->
<div class="node">
<a name="Word-Sorting"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#History-Sorting">History Sorting</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Labels-Program">Labels Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.5 Generating Word-Usage Counts</h4>

<!-- STARTOFRANGE worus -->
<p><a name="index-words_002c-usage-counts_0040comma_007b_007d-generating-1902"></a>
When working with large amounts of text, it can be interesting to know
how often different words appear.  For example, an author may overuse
certain words, in which case she might wish to find synonyms to substitute
for words that appear too often. This subsection develops a
program for counting words and presenting the frequency information
in a useful format.

   <p>At first glance, a program like this would seem to do the job:

<pre class="example">     # Print list of word frequencies
     
     {
         for (i = 1; i &lt;= NF; i++)
             freq[$i]++
     }
     
     END {
         for (word in freq)
             printf "%s\t%d\n", word, freq[word]
     }
</pre>
   <p>The program relies on <samp><span class="command">awk</span></samp>'s default field splitting
mechanism to break each line up into &ldquo;words,&rdquo; and uses an
associative array named <code>freq</code>, indexed by each word, to count
the number of times the word occurs. In the <code>END</code> rule,
it prints the counts.

   <p>This program has several problems that prevent it from being
useful on real text files:

     <ul>
<li>The <samp><span class="command">awk</span></samp> language considers upper- and lowercase characters to be
distinct.  Therefore, &ldquo;bartender&rdquo; and &ldquo;Bartender&rdquo; are not treated
as the same word.  This is undesirable, since in normal text, words
are capitalized if they begin sentences, and a frequency analyzer should not
be sensitive to capitalization.

     <li>Words are detected using the <samp><span class="command">awk</span></samp> convention that fields are
separated just by whitespace.  Other characters in the input (except
newlines) don't have any special meaning to <samp><span class="command">awk</span></samp>.  This means that
punctuation characters count as part of words.

     <li>The output does not come out in any useful order.  You're more likely to be
interested in which words occur most frequently or in having an alphabetized
table of how frequently each word occurs. 
</ul>

   <p><a name="index-g_t_0040command_007bsort_007d-utility-1903"></a>The first problem can be solved by using <code>tolower()</code> to remove case
distinctions.  The second problem can be solved by using <code>gsub()</code>
to remove punctuation characters.  Finally, we solve the third problem
by using the system <samp><span class="command">sort</span></samp> utility to process the output of the
<samp><span class="command">awk</span></samp> script.  Here is the new version of the program:

   <p><a name="index-g_t_0040code_007bwordfreq_002eawk_007d-program-1904"></a>
<pre class="example">     <!-- file eg/prog/wordfreq.awk -->
     # wordfreq.awk --- print list of word frequencies
     
     {
         $0 = tolower($0)    # remove case distinctions
         # remove punctuation
         gsub(/[^[:alnum:]_[:blank:]]/, "", $0)
         for (i = 1; i &lt;= NF; i++)
             freq[$i]++
     }
     
     <!-- endfile -->
     END {
         for (word in freq)
             printf "%s\t%d\n", word, freq[word]
     }
</pre>
   <p>Assuming we have saved this program in a file named <samp><span class="file">wordfreq.awk</span></samp>,
and that the data is in <samp><span class="file">file1</span></samp>, the following pipeline:

<pre class="example">     awk -f wordfreq.awk file1 | sort -k 2nr
</pre>
   <p class="noindent">produces a table of the words appearing in <samp><span class="file">file1</span></samp> in order of
decreasing frequency.

   <p>The <samp><span class="command">awk</span></samp> program suitably massages the
data and produces a word frequency table, which is not ordered. 
The <samp><span class="command">awk</span></samp> script's output is then sorted by the <samp><span class="command">sort</span></samp>
utility and printed on the screen.

   <p>The options given to <samp><span class="command">sort</span></samp>
specify a sort that uses the second field of each input line (skipping
one field), that the sort keys should be treated as numeric quantities
(otherwise &lsquo;<samp><span class="samp">15</span></samp>&rsquo; would come before &lsquo;<samp><span class="samp">5</span></samp>&rsquo;), and that the sorting
should be done in descending (reverse) order.

   <p>The <samp><span class="command">sort</span></samp> could even be done from within the program, by changing
the <code>END</code> action to:

<pre class="example">     <!-- file eg/prog/wordfreq.awk -->
     END {
         sort = "sort -k 2nr"
         for (word in freq)
             printf "%s\t%d\n", word, freq[word] | sort
         close(sort)
     }
     <!-- endfile -->
</pre>
   <p>This way of sorting must be used on systems that do not
have true pipes at the command-line (or batch-file) level. 
See the general operating system documentation for more information on how
to use the <samp><span class="command">sort</span></samp> program. 
<!-- ENDOFRANGE worus -->

<div class="node">
<a name="History-Sorting"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Extract-Program">Extract Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Word-Sorting">Word Sorting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.6 Removing Duplicates from Unsorted Text</h4>

<!-- STARTOFRANGE lidu -->
<p><a name="index-lines_002c-duplicate_0040comma_007b_007d-removing-1905"></a>The <samp><span class="command">uniq</span></samp> program
(see <a href="#Uniq-Program">Uniq Program</a>),
removes duplicate lines from <em>sorted</em> data.

   <p>Suppose, however, you need to remove duplicate lines from a data file but
that you want to preserve the order the lines are in.  A good example of
this might be a shell history file.  The history file keeps a copy of all
the commands you have entered, and it is not unusual to repeat a command
several times in a row.  Occasionally you might want to compact the history
by removing duplicate entries.  Yet it is desirable to maintain the order
of the original commands.

   <p>This simple program does the job.  It uses two arrays.  The <code>data</code>
array is indexed by the text of each line. 
For each line, <code>data[$0]</code> is incremented. 
If a particular line has not
been seen before, then <code>data[$0]</code> is zero. 
In this case, the text of the line is stored in <code>lines[count]</code>. 
Each element of <code>lines</code> is a unique command, and the indices of
<code>lines</code> indicate the order in which those lines are encountered. 
The <code>END</code> rule simply prints out the lines, in order:

   <p><a name="index-Rakitzis_002c-Byron-1906"></a><a name="index-g_t_0040code_007bhistsort_002eawk_007d-program-1907"></a>
<pre class="example">     <!-- file eg/prog/histsort.awk -->
     # histsort.awk --- compact a shell history file
     # Thanks to Byron Rakitzis for the general idea
     <!-- endfile -->
     <!-- file eg/prog/histsort.awk -->
     
     {
         if (data[$0]++ == 0)
             lines[++count] = $0
     }
     
     END {
         for (i = 1; i &lt;= count; i++)
             print lines[i]
     }
     <!-- endfile -->
</pre>
   <p>This program also provides a foundation for generating other useful
information.  For example, using the following <code>print</code> statement in the
<code>END</code> rule indicates how often a particular command is used:

<pre class="example">     print data[lines[i]], lines[i]
</pre>
   <p>This works because <code>data[$0]</code> is incremented each time a line is
seen. 
<!-- ENDOFRANGE lidu -->

<div class="node">
<a name="Extract-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Simple-Sed">Simple Sed</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#History-Sorting">History Sorting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.7 Extracting Programs from Texinfo Source Files</h4>

<!-- STARTOFRANGE texse -->
<p><a name="index-Texinfo_002c-extracting-programs-from-source-files-1908"></a><!-- STARTOFRANGE fitex -->
<a name="index-files_002c-Texinfo_0040comma_007b_007d-extracting-programs-from-1909"></a>Both this chapter and the previous chapter
(<a href="#Library-Functions">Library Functions</a>)
present a large number of <samp><span class="command">awk</span></samp> programs. 
If you want to experiment with these programs, it is tedious to have to type
them in by hand.  Here we present a program that can extract parts of a
Texinfo input file into separate files.

   <p><a name="index-Texinfo-1910"></a>This Web page is written in <a href="http://texinfo.org">Texinfo</a>,
the GNU project's document formatting language. 
A single Texinfo source file can be used to produce both
printed and online documentation. 
Texinfo is fully documented in the book
<cite>Texinfo&mdash;The GNU Documentation Format</cite>,
available from the Free Software Foundation.

   <p>For our purposes, it is enough to know three things about Texinfo input
files:

     <ul>
<li>The &ldquo;at&rdquo; symbol (&lsquo;<samp><span class="samp">@</span></samp>&rsquo;) is special in Texinfo, much as
the backslash (&lsquo;<samp><span class="samp">\</span></samp>&rsquo;) is in C
or <samp><span class="command">awk</span></samp>.  Literal &lsquo;<samp><span class="samp">@</span></samp>&rsquo; symbols are represented in Texinfo source
files as &lsquo;<samp><span class="samp">@@</span></samp>&rsquo;.

     <li>Comments start with either &lsquo;<samp><span class="samp">@c</span></samp>&rsquo; or &lsquo;<samp><span class="samp">@comment</span></samp>&rsquo;. 
The file-extraction program works by using special comments that start
at the beginning of a line.

     <li>Lines containing &lsquo;<samp><span class="samp">@group</span></samp>&rsquo; and &lsquo;<samp><span class="samp">@end group</span></samp>&rsquo; commands bracket
example text that should not be split across a page boundary. 
(Unfortunately, TeX isn't always smart enough to do things exactly right,
so we have to give it some help.) 
</ul>

   <p>The following program, <samp><span class="file">extract.awk</span></samp>, reads through a Texinfo source
file and does two things, based on the special comments. 
Upon seeing &lsquo;<samp><span class="samp">@c&nbsp;system&nbsp;...<!-- /@w --></span></samp>&rsquo;,
it runs a command, by extracting the command text from the
control line and passing it on to the <code>system()</code> function
(see <a href="#I_002fO-Functions">I/O Functions</a>). 
Upon seeing &lsquo;<samp><span class="samp">@c file </span><var>filename</var></samp>&rsquo;, each subsequent line is sent to
the file <var>filename</var>, until &lsquo;<samp><span class="samp">@c endfile</span></samp>&rsquo; is encountered. 
The rules in <samp><span class="file">extract.awk</span></samp> match either &lsquo;<samp><span class="samp">@c</span></samp>&rsquo; or
&lsquo;<samp><span class="samp">@comment</span></samp>&rsquo; by letting the &lsquo;<samp><span class="samp">omment</span></samp>&rsquo; part be optional. 
Lines containing &lsquo;<samp><span class="samp">@group</span></samp>&rsquo; and &lsquo;<samp><span class="samp">@end group</span></samp>&rsquo; are simply removed. 
<samp><span class="file">extract.awk</span></samp> uses the <code>join()</code> library function
(see <a href="#Join-Function">Join Function</a>).

   <p>The example programs in the online Texinfo source for <cite>GAWK: Effective AWK Programming</cite>
(<samp><span class="file">gawk.texi</span></samp>) have all been bracketed inside &lsquo;<samp><span class="samp">file</span></samp>&rsquo; and
&lsquo;<samp><span class="samp">endfile</span></samp>&rsquo; lines.  The <samp><span class="command">gawk</span></samp> distribution uses a copy of
<samp><span class="file">extract.awk</span></samp> to extract the sample programs and install many
of them in a standard directory where <samp><span class="command">gawk</span></samp> can find them. 
The Texinfo file looks something like this:

<pre class="example">     ...
     This program has a @code{BEGIN} rule,
     that prints a nice message:
     
     @example
     @c file examples/messages.awk
     BEGIN @{ print "Don't panic!" @}
     @c end file
     @end example
     
     It also prints some final advice:
     
     @example
     @c file examples/messages.awk
     END @{ print "Always avoid bored archeologists!" @}
     @c end file
     @end example
     ...
</pre>
   <p><samp><span class="file">extract.awk</span></samp> begins by setting <code>IGNORECASE</code> to one, so that
mixed upper- and lowercase letters in the directives won't matter.

   <p>The first rule handles calling <code>system()</code>, checking that a command is
given (<code>NF</code> is at least three) and also checking that the command
exits with a zero exit status, signifying OK:

   <p><a name="index-g_t_0040code_007bextract_002eawk_007d-program-1911"></a>
<pre class="example">     <!-- file eg/prog/extract.awk -->
     # extract.awk --- extract files and run programs
     #                 from texinfo files
     <!-- endfile -->
     <!-- file eg/prog/extract.awk -->
     
     BEGIN    { IGNORECASE = 1 }
     
     /^@c(omment)?[ \t]+system/    \
     {
         if (NF &lt; 3) {
             e = (FILENAME ":" FNR)
             e = (e  ": badly formed `system' line")
             print e &gt; "/dev/stderr"
             next
         }
         $1 = ""
         $2 = ""
         stat = system($0)
         if (stat != 0) {
             e = (FILENAME ":" FNR)
             e = (e ": warning: system returned " stat)
             print e &gt; "/dev/stderr"
         }
     }
     <!-- endfile -->
</pre>
   <p class="noindent">The variable <code>e</code> is used so that the rule
fits nicely on the
page. 
screen.

   <p>The second rule handles moving data into files.  It verifies that a
file name is given in the directive.  If the file named is not the
current file, then the current file is closed.  Keeping the current file
open until a new file is encountered allows the use of the &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo;
redirection for printing the contents, keeping open file management
simple.

   <p>The <code>for</code> loop does the work.  It reads lines using <code>getline</code>
(see <a href="#Getline">Getline</a>). 
For an unexpected end of file, it calls the <code>unexpected_eof()<!-- /@w --></code>
function.  If the line is an &ldquo;endfile&rdquo; line, then it breaks out of
the loop. 
If the line is an &lsquo;<samp><span class="samp">@group</span></samp>&rsquo; or &lsquo;<samp><span class="samp">@end group</span></samp>&rsquo; line, then it
ignores it and goes on to the next line. 
Similarly, comments within examples are also ignored.

   <p>Most of the work is in the following few lines.  If the line has no &lsquo;<samp><span class="samp">@</span></samp>&rsquo;
symbols, the program can print it directly. 
Otherwise, each leading &lsquo;<samp><span class="samp">@</span></samp>&rsquo; must be stripped off. 
To remove the &lsquo;<samp><span class="samp">@</span></samp>&rsquo; symbols, the line is split into separate elements of
the array <code>a</code>, using the <code>split()</code> function
(see <a href="#String-Functions">String Functions</a>). 
The &lsquo;<samp><span class="samp">@</span></samp>&rsquo; symbol is used as the separator character. 
Each element of <code>a</code> that is empty indicates two successive &lsquo;<samp><span class="samp">@</span></samp>&rsquo;
symbols in the original line.  For each two empty elements (&lsquo;<samp><span class="samp">@@</span></samp>&rsquo; in
the original file), we have to add a single &lsquo;<samp><span class="samp">@</span></samp>&rsquo; symbol back
in.<a rel="footnote" href="#fn-80" name="fnd-80"><sup>80</sup></a>

   <p>When the processing of the array is finished, <code>join()</code> is called with the
value of <code>SUBSEP</code>, to rejoin the pieces back into a single
line.  That line is then printed to the output file:

<pre class="example">     <!-- file eg/prog/extract.awk -->
     /^@c(omment)?[ \t]+file/    \
     {
         if (NF != 3) {
             e = (FILENAME ":" FNR ": badly formed `file' line")
             print e &gt; "/dev/stderr"
             next
         }
         if ($3 != curfile) {
             if (curfile != "")
                 close(curfile)
             curfile = $3
         }
     
         for (;;) {
             if ((getline line) &lt;= 0)
                 unexpected_eof()
             if (line ~ /^@c(omment)?[ \t]+endfile/)
                 break
             else if (line ~ /^@(end[ \t]+)?group/)
                 continue
             else if (line ~ /^@c(omment+)?[ \t]+/)
                 continue
             if (index(line, "@") == 0) {
                 print line &gt; curfile
                 continue
             }
             n = split(line, a, "@")
             # if a[1] == "", means leading @,
             # don't add one back in.
             for (i = 2; i &lt;= n; i++) {
                 if (a[i] == "") { # was an @@
                     a[i] = "@"
                     if (a[i+1] == "")
                         i++
                 }
             }
             print join(a, 1, n, SUBSEP) &gt; curfile
         }
     }
     <!-- endfile -->
</pre>
   <p>An important thing to note is the use of the &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo; redirection. 
Output done with &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo; only opens the file once; it stays open and
subsequent output is appended to the file
(see <a href="#Redirection">Redirection</a>). 
This makes it easy to mix program text and explanatory prose for the same
sample source file (as has been done here!) without any hassle.  The file is
only closed when a new data file name is encountered or at the end of the
input file.

   <p>Finally, the function <code>unexpected_eof()<!-- /@w --></code> prints an appropriate
error message and then exits. 
The <code>END</code> rule handles the final cleanup, closing the open file:

<!-- function lb put on same line for page breaking. sigh -->
<pre class="example">     <!-- file eg/prog/extract.awk -->
     function unexpected_eof()
     {
         printf("%s:%d: unexpected EOF or error\n",
             FILENAME, FNR) &gt; "/dev/stderr"
         exit 1
     }
     
     END {
         if (curfile)
             close(curfile)
     }
     <!-- endfile -->
</pre>
   <!-- ENDOFRANGE texse -->
<!-- ENDOFRANGE fitex -->
<div class="node">
<a name="Simple-Sed"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Igawk-Program">Igawk Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Extract-Program">Extract Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.8 A Simple Stream Editor</h4>

<p><a name="index-g_t_0040command_007bsed_007d-utility-1912"></a><a name="index-stream-editors-1913"></a>The <samp><span class="command">sed</span></samp> utility is a stream editor, a program that reads a
stream of data, makes changes to it, and passes it on. 
It is often used to make global changes to a large file or to a stream
of data generated by a pipeline of commands. 
While <samp><span class="command">sed</span></samp> is a complicated program in its own right, its most common
use is to perform global substitutions in the middle of a pipeline:

<pre class="example">     command1 &lt; orig.data | sed 's/old/new/g' | command2 &gt; result
</pre>
   <p>Here, &lsquo;<samp><span class="samp">s/old/new/g</span></samp>&rsquo; tells <samp><span class="command">sed</span></samp> to look for the regexp
&lsquo;<samp><span class="samp">old</span></samp>&rsquo; on each input line and globally replace it with the text
&lsquo;<samp><span class="samp">new</span></samp>&rsquo;, i.e., all the occurrences on a line.  This is similar to
<samp><span class="command">awk</span></samp>'s <code>gsub()</code> function
(see <a href="#String-Functions">String Functions</a>).

   <p>The following program, <samp><span class="file">awksed.awk</span></samp>, accepts at least two command-line
arguments: the pattern to look for and the text to replace it with. Any
additional arguments are treated as data file names to process. If none
are provided, the standard input is used:

   <p><a name="index-Brennan_002c-Michael-1914"></a><a name="index-g_t_0040command_007bawksed_002eawk_007d-program-1915"></a><!-- @cindex simple stream editor -->
<!-- @cindex stream editor, simple -->
<pre class="example">     <!-- file eg/prog/awksed.awk -->
     # awksed.awk --- do s/foo/bar/g using just print
     #    Thanks to Michael Brennan for the idea
     <!-- endfile -->
     <!-- file eg/prog/awksed.awk -->
     
     function usage()
     {
         print "usage: awksed pat repl [files...]" &gt; "/dev/stderr"
         exit 1
     }
     
     BEGIN {
         # validate arguments
         if (ARGC &lt; 3)
             usage()
     
         RS = ARGV[1]
         ORS = ARGV[2]
     
         # don't use arguments as files
         ARGV[1] = ARGV[2] = ""
     }
     
     # look ma, no hands!
     {
         if (RT == "")
             printf "%s", $0
         else
             print
     }
     <!-- endfile -->
</pre>
   <p>The program relies on <samp><span class="command">gawk</span></samp>'s ability to have <code>RS</code> be a regexp,
as well as on the setting of <code>RT</code> to the actual text that terminates the
record (see <a href="#Records">Records</a>).

   <p>The idea is to have <code>RS</code> be the pattern to look for. <samp><span class="command">gawk</span></samp>
automatically sets <code>$0</code> to the text between matches of the pattern. 
This is text that we want to keep, unmodified.  Then, by setting <code>ORS</code>
to the replacement text, a simple <code>print</code> statement outputs the
text we want to keep, followed by the replacement text.

   <p>There is one wrinkle to this scheme, which is what to do if the last record
doesn't end with text that matches <code>RS</code>.  Using a <code>print</code>
statement unconditionally prints the replacement text, which is not correct. 
However, if the file did not end in text that matches <code>RS</code>, <code>RT</code>
is set to the null string.  In this case, we can print <code>$0</code> using
<code>printf</code>
(see <a href="#Printf">Printf</a>).

   <p>The <code>BEGIN</code> rule handles the setup, checking for the right number
of arguments and calling <code>usage()</code> if there is a problem. Then it sets
<code>RS</code> and <code>ORS</code> from the command-line arguments and sets
<code>ARGV[1]</code> and <code>ARGV[2]</code> to the null string, so that they are
not treated as file names
(see <a href="#ARGC-and-ARGV">ARGC and ARGV</a>).

   <p>The <code>usage()</code> function prints an error message and exits. 
Finally, the single rule handles the printing scheme outlined above,
using <code>print</code> or <code>printf</code> as appropriate, depending upon the
value of <code>RT</code>.

<div class="node">
<a name="Igawk-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Anagram-Program">Anagram Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Simple-Sed">Simple Sed</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.9 An Easy Way to Use Library Functions</h4>

<!-- STARTOFRANGE libfex -->
<p><a name="index-libraries-of-_0040command_007bawk_007d-functions_002c-example-program-for-using-1916"></a><!-- STARTOFRANGE flibex -->
<a name="index-functions_002c-library_002c-example-program-for-using-1917"></a>In <a href="#Include-Files">Include Files</a>, we saw how <samp><span class="command">gawk</span></samp> provides a built-in
file-inclusion capability.  However, this is a <samp><span class="command">gawk</span></samp> extension. 
This section provides the motivation for making file inclusion
available for standard <samp><span class="command">awk</span></samp>, and shows how to do it using a
combination of shell and <samp><span class="command">awk</span></samp> programming.

   <p>Using library functions in <samp><span class="command">awk</span></samp> can be very beneficial. It
encourages code reuse and the writing of general functions. Programs are
smaller and therefore clearer. 
However, using library functions is only easy when writing <samp><span class="command">awk</span></samp>
programs; it is painful when running them, requiring multiple <samp><span class="option">-f</span></samp>
options.  If <samp><span class="command">gawk</span></samp> is unavailable, then so too is the <samp><span class="env">AWKPATH</span></samp>
environment variable and the ability to put <samp><span class="command">awk</span></samp> functions into a
library directory (see <a href="#Options">Options</a>). 
It would be nice to be able to write programs in the following manner:

<pre class="example">     # library functions
     @include getopt.awk
     @include join.awk
     ...
     
     # main program
     BEGIN {
         while ((c = getopt(ARGC, ARGV, "a:b:cde")) != -1)
             ...
         ...
     }
</pre>
   <p>The following program, <samp><span class="file">igawk.sh</span></samp>, provides this service. 
It simulates <samp><span class="command">gawk</span></samp>'s searching of the <samp><span class="env">AWKPATH</span></samp> variable
and also allows <dfn>nested</dfn> includes; i.e., a file that is included
with &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; can contain further &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; statements. 
<samp><span class="command">igawk</span></samp> makes an effort to only include files once, so that nested
includes don't accidentally include a library function twice.

   <p><samp><span class="command">igawk</span></samp> should behave just like <samp><span class="command">gawk</span></samp> externally.  This
means it should accept all of <samp><span class="command">gawk</span></samp>'s command-line arguments,
including the ability to have multiple source files specified via
<samp><span class="option">-f</span></samp>, and the ability to mix command-line and library source files.

   <p>The program is written using the POSIX Shell (<samp><span class="command">sh</span></samp>) command
language.<a rel="footnote" href="#fn-81" name="fnd-81"><sup>81</sup></a> It works as follows:

     <ol type=1 start=1>
<li>Loop through the arguments, saving anything that doesn't represent
<samp><span class="command">awk</span></samp> source code for later, when the expanded program is run.

     <li>For any arguments that do represent <samp><span class="command">awk</span></samp> text, put the arguments into
a shell variable that will be expanded.  There are two cases:

          <ol type=a start=1>
<li>Literal text, provided with <samp><span class="option">--source</span></samp> or <samp><span class="option">--source=</span></samp>.  This
text is just appended directly.

          <li>Source file names, provided with <samp><span class="option">-f</span></samp>.  We use a neat trick and append
&lsquo;<samp><span class="samp">@include </span><var>filename</var></samp>&rsquo; to the shell variable's contents.  Since the file-inclusion
program works the way <samp><span class="command">gawk</span></samp> does, this gets the text
of the file included into the program at the correct point.
          </ol>

     <li>Run an <samp><span class="command">awk</span></samp> program (naturally) over the shell variable's contents to expand
&lsquo;<samp><span class="samp">@include</span></samp>&rsquo; statements.  The expanded program is placed in a second
shell variable.

     <li>Run the expanded program with <samp><span class="command">gawk</span></samp> and any other original command-line
arguments that the user supplied (such as the data file names).
        </ol>

   <p>This program uses shell variables extensively: for storing command-line arguments,
the text of the <samp><span class="command">awk</span></samp> program that will expand the user's program, for the
user's original program, and for the expanded program.  Doing so removes some
potential problems that might arise were we to use temporary files instead,
at the cost of making the script somewhat more complicated.

   <p>The initial part of the program turns on shell tracing if the first
argument is &lsquo;<samp><span class="samp">debug</span></samp>&rsquo;.

   <p>The next part loops through all the command-line arguments. 
There are several cases of interest:

     <dl>
<dt><code>--</code><dd>This ends the arguments to <samp><span class="command">igawk</span></samp>.  Anything else should be passed on
to the user's <samp><span class="command">awk</span></samp> program without being evaluated.

     <br><dt><code>-W</code><dd>This indicates that the next option is specific to <samp><span class="command">gawk</span></samp>.  To make
argument processing easier, the <samp><span class="option">-W</span></samp> is appended to the front of the
remaining arguments and the loop continues.  (This is an <samp><span class="command">sh</span></samp>
programming trick.  Don't worry about it if you are not familiar with
<samp><span class="command">sh</span></samp>.)

     <br><dt><code>-v</code><span class="roman">,</span><code> -F</code><dd>These are saved and passed on to <samp><span class="command">gawk</span></samp>.

     <br><dt><code>-f</code><span class="roman">,</span><code> --file</code><span class="roman">,</span><code> --file=</code><span class="roman">,</span><code> -Wfile=</code><dd>The file name is appended to the shell variable <code>program</code> with an
&lsquo;<samp><span class="samp">@include</span></samp>&rsquo; statement. 
The <samp><span class="command">expr</span></samp> utility is used to remove the leading option part of the
argument (e.g., &lsquo;<samp><span class="samp">--file=</span></samp>&rsquo;). 
(Typical <samp><span class="command">sh</span></samp> usage would be to use the <samp><span class="command">echo</span></samp> and <samp><span class="command">sed</span></samp>
utilities to do this work.  Unfortunately, some versions of <samp><span class="command">echo</span></samp> evaluate
escape sequences in their arguments, possibly mangling the program text. 
Using <samp><span class="command">expr</span></samp> avoids this problem.)

     <br><dt><code>--source</code><span class="roman">,</span><code> --source=</code><span class="roman">,</span><code> -Wsource=</code><dd>The source text is appended to <code>program</code>.

     <br><dt><code>--version</code><span class="roman">,</span><code> -Wversion</code><dd><samp><span class="command">igawk</span></samp> prints its version number, runs &lsquo;<samp><span class="samp">gawk --version</span></samp>&rsquo;
to get the <samp><span class="command">gawk</span></samp> version information, and then exits. 
</dl>

   <p>If none of the <samp><span class="option">-f</span></samp>, <samp><span class="option">--file</span></samp>, <samp><span class="option">-Wfile</span></samp>, <samp><span class="option">--source</span></samp>,
or <samp><span class="option">-Wsource</span></samp> arguments are supplied, then the first nonoption argument
should be the <samp><span class="command">awk</span></samp> program.  If there are no command-line
arguments left, <samp><span class="command">igawk</span></samp> prints an error message and exits. 
Otherwise, the first argument is appended to <code>program</code>. 
In any case, after the arguments have been processed,
<code>program</code> contains the complete text of the original <samp><span class="command">awk</span></samp>
program.

   <p>The program is as follows:

   <p><a name="index-g_t_0040code_007bigawk_002esh_007d-program-1918"></a>
<pre class="example">     <!-- file eg/prog/igawk.sh -->
     #! /bin/sh
     # igawk --- like gawk but do @include processing
     <!-- endfile -->
     <!-- file eg/prog/igawk.sh -->
     
     if [ "$1" = debug ]
     then
         set -x
         shift
     fi
     
     # A literal newline, so that program text is formatted correctly
     n='
     '
     
     # Initialize variables to empty
     program=
     opts=
     
     while [ $# -ne 0 ] # loop over arguments
     do
         case $1 in
         --)     shift
                 break ;;
     
         -W)     shift
                 # The ${x?'message here'} construct prints a
                 # diagnostic if $x is the null string
                 set -- -W"${@?'missing operand'}"
                 continue ;;
     
         -[vF])  opts="$opts $1 '${2?'missing operand'}'"
                 shift ;;
     
         -[vF]*) opts="$opts '$1'" ;;
     
         -f)     program="$program$n@include ${2?'missing operand'}"
                 shift ;;
     
         -f*)    f=$(expr "$1" : '-f\(.*\)')
                 program="$program$n@include $f" ;;
     
         -[W-]file=*)
                 f=$(expr "$1" : '-.file=\(.*\)')
                 program="$program$n@include $f" ;;
     
         -[W-]file)
                 program="$program$n@include ${2?'missing operand'}"
                 shift ;;
     
         -[W-]source=*)
                 t=$(expr "$1" : '-.source=\(.*\)')
                 program="$program$n$t" ;;
     
         -[W-]source)
                 program="$program$n${2?'missing operand'}"
                 shift ;;
     
         -[W-]version)
                 echo igawk: version 3.0 1&gt;&amp;2
                 gawk --version
                 exit 0 ;;
     
         -[W-]*) opts="$opts '$1'" ;;
     
         *)      break ;;
         esac
         shift
     done
     
     if [ -z "$program" ]
     then
          program=${1?'missing program'}
          shift
     fi
     
     # At this point, `program' has the program.
     <!-- endfile -->
</pre>
   <p>The <samp><span class="command">awk</span></samp> program to process &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; directives
is stored in the shell variable <code>expand_prog</code>.  Doing this keeps
the shell script readable.  The <samp><span class="command">awk</span></samp> program
reads through the user's program, one line at a time, using <code>getline</code>
(see <a href="#Getline">Getline</a>).  The input
file names and &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; statements are managed using a stack. 
As each &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; is encountered, the current file name is
&ldquo;pushed&rdquo; onto the stack and the file named in the &lsquo;<samp><span class="samp">@include</span></samp>&rsquo;
directive becomes the current file name.  As each file is finished,
the stack is &ldquo;popped,&rdquo; and the previous input file becomes the current
input file again.  The process is started by making the original file
the first one on the stack.

   <p>The <code>pathto()</code> function does the work of finding the full path to
a file.  It simulates <samp><span class="command">gawk</span></samp>'s behavior when searching the
<samp><span class="env">AWKPATH</span></samp> environment variable
(see <a href="#AWKPATH-Variable">AWKPATH Variable</a>). 
If a file name has a &lsquo;<samp><span class="samp">/</span></samp>&rsquo; in it, no path search is done. 
Similarly, if the file name is <code>"-"</code>, then that string is
used as-is.  Otherwise,
the file name is concatenated with the name of each directory in
the path, and an attempt is made to open the generated file name. 
The only way to test if a file can be read in <samp><span class="command">awk</span></samp> is to go
ahead and try to read it with <code>getline</code>; this is what <code>pathto()</code>
does.<a rel="footnote" href="#fn-82" name="fnd-82"><sup>82</sup></a> If the file can be read, it is closed and the file name
is returned:

<pre class="example">     <!-- file eg/prog/igawk.sh -->
     expand_prog='
     
     function pathto(file,    i, t, junk)
     {
         if (index(file, "/") != 0)
             return file
     
         if (file == "-")
             return file
     
         for (i = 1; i &lt;= ndirs; i++) {
             t = (pathlist[i] "/" file)
             if ((getline junk &lt; t) &gt; 0) {
                 # found it
                 close(t)
                 return t
             }
         }
         return ""
     }
     <!-- endfile -->
</pre>
   <p>The main program is contained inside one <code>BEGIN</code> rule.  The first thing it
does is set up the <code>pathlist</code> array that <code>pathto()</code> uses.  After
splitting the path on &lsquo;<samp><span class="samp">:</span></samp>&rsquo;, null elements are replaced with <code>"."</code>,
which represents the current directory:

<pre class="example">     <!-- file eg/prog/igawk.sh -->
     BEGIN {
         path = ENVIRON["AWKPATH"]
         ndirs = split(path, pathlist, ":")
         for (i = 1; i &lt;= ndirs; i++) {
             if (pathlist[i] == "")
                 pathlist[i] = "."
         }
     <!-- endfile -->
</pre>
   <p>The stack is initialized with <code>ARGV[1]</code>, which will be <samp><span class="file">/dev/stdin</span></samp>. 
The main loop comes next.  Input lines are read in succession. Lines that
do not start with &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; are printed verbatim. 
If the line does start with &lsquo;<samp><span class="samp">@include</span></samp>&rsquo;, the file name is in <code>$2</code>. 
<code>pathto()</code> is called to generate the full path.  If it cannot, then the program
prints an error message and continues.

   <p>The next thing to check is if the file is included already.  The
<code>processed</code> array is indexed by the full file name of each included
file and it tracks this information for us.  If the file is
seen again, a warning message is printed. Otherwise, the new file name is
pushed onto the stack and processing continues.

   <p>Finally, when <code>getline</code> encounters the end of the input file, the file
is closed and the stack is popped.  When <code>stackptr</code> is less than zero,
the program is done:

<pre class="example">     <!-- file eg/prog/igawk.sh -->
         stackptr = 0
         input[stackptr] = ARGV[1] # ARGV[1] is first file
     
         for (; stackptr &gt;= 0; stackptr--) {
             while ((getline &lt; input[stackptr]) &gt; 0) {
                 if (tolower($1) != "@include") {
                     print
                     continue
                 }
                 fpath = pathto($2)
                 if (fpath == "") {
                     printf("igawk:%s:%d: cannot find %s\n",
                         input[stackptr], FNR, $2) &gt; "/dev/stderr"
                     continue
                 }
                 if (! (fpath in processed)) {
                     processed[fpath] = input[stackptr]
                     input[++stackptr] = fpath  # push onto stack
                 } else
                     print $2, "included in", input[stackptr],
                         "already included in",
                         processed[fpath] &gt; "/dev/stderr"
             }
             close(input[stackptr])
         }
     }'  # close quote ends `expand_prog' variable
     
     processed_program=$(gawk -- "$expand_prog" /dev/stdin &lt;&lt; EOF
     $program
     EOF
     )
     <!-- endfile -->
</pre>
   <p>The shell construct &lsquo;<samp><var>command</var><span class="samp"> &lt;&lt; </span><var>marker</var></samp>&rsquo; is called a <dfn>here document</dfn>. 
Everything in the shell script up to the <var>marker</var> is fed to <var>command</var> as input. 
The shell processes the contents of the here document for variable and command substitution
(and possibly other things as well, depending upon the shell).

   <p>The shell construct &lsquo;<samp><span class="samp">$(...)</span></samp>&rsquo; is called <dfn>command substitution</dfn>. 
The output of the command inside the parentheses is substituted
into the command line. 
Because the result is used in a variable assignment,
it is saved as a single string, even if the results contain whitespace.

   <p>The expanded program is saved in the variable <code>processed_program</code>. 
It's done in these steps:

     <ol type=1 start=1>
<li>Run <samp><span class="command">gawk</span></samp> with the &lsquo;<samp><span class="samp">@include</span></samp>&rsquo;-processing program (the
value of the <code>expand_prog</code> shell variable) on standard input.

     <li>Standard input is the contents of the user's program, from the shell variable <code>program</code>. 
Its contents are fed to <samp><span class="command">gawk</span></samp> via a here document.

     <li>The results of this processing are saved in the shell variable <code>processed_program</code> by using command substitution.
        </ol>

   <p>The last step is to call <samp><span class="command">gawk</span></samp> with the expanded program,
along with the original
options and command-line arguments that the user supplied.

<!-- this causes more problems than it solves, so leave it out. -->
<pre class="example">     <!-- file eg/prog/igawk.sh -->
     eval gawk $opts -- '"$processed_program"' '"$@"'
     <!-- endfile -->
</pre>
   <p>The <samp><span class="command">eval</span></samp> command is a shell construct that reruns the shell's parsing
process.  This keeps things properly quoted.

   <p>This version of <samp><span class="command">igawk</span></samp> represents my fifth version of this program. 
There are four key simplifications that make the program work better:

     <ul>
<li>Using &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; even for the files named with <samp><span class="option">-f</span></samp> makes building
the initial collected <samp><span class="command">awk</span></samp> program much simpler; all the
&lsquo;<samp><span class="samp">@include</span></samp>&rsquo; processing can be done once.

     <li>Not trying to save the line read with <code>getline</code>
in the <code>pathto()</code> function when testing for the
file's accessibility for use with the main program simplifies things
considerably. 
<!-- what problem does this engender though - exercise -->
<!-- answer, reading from "-" or /dev/stdin -->

     <li>Using a <code>getline</code> loop in the <code>BEGIN</code> rule does it all in one
place.  It is not necessary to call out to a separate loop for processing
nested &lsquo;<samp><span class="samp">@include</span></samp>&rsquo; statements.

     <li>Instead of saving the expanded program in a temporary file, putting it in a shell variable
avoids some potential security problems. 
This has the disadvantage that the script relies upon more features
of the <samp><span class="command">sh</span></samp> language, making it harder to follow for those who
aren't familiar with <samp><span class="command">sh</span></samp>. 
</ul>

   <p>Also, this program illustrates that it is often worthwhile to combine
<samp><span class="command">sh</span></samp> and <samp><span class="command">awk</span></samp> programming together.  You can usually
accomplish quite a lot, without having to resort to low-level programming
in C or C++, and it is frequently easier to do certain kinds of string
and argument manipulation using the shell than it is in <samp><span class="command">awk</span></samp>.

   <p>Finally, <samp><span class="command">igawk</span></samp> shows that it is not always necessary to add new
features to a program; they can often be layered on top.

   <p><a name="index-search-paths-1919"></a><a name="index-search-paths_002c-for-source-files-1920"></a><a name="index-source-files_0040comma_007b_007d-search-path-for-1921"></a><a name="index-files_002c-source_0040comma_007b_007d-search-path-for-1922"></a><a name="index-directories_002c-searching-1923"></a>As an additional example of this, consider the idea of having two
files in a directory in the search path:

     <dl>
<dt><samp><span class="file">default.awk</span></samp><dd>This file contains a set of default library functions, such
as <code>getopt()</code> and <code>assert()</code>.

     <br><dt><samp><span class="file">site.awk</span></samp><dd>This file contains library functions that are specific to a site or
installation; i.e., locally developed functions. 
Having a separate file allows <samp><span class="file">default.awk</span></samp> to change with
new <samp><span class="command">gawk</span></samp> releases, without requiring the system administrator to
update it each time by adding the local functions. 
</dl>

   <p>One user
<!-- Karl Berry, karl@ileaf.com, 10/95 -->
suggested that <samp><span class="command">gawk</span></samp> be modified to automatically read these files
upon startup.  Instead, it would be very simple to modify <samp><span class="command">igawk</span></samp>
to do this. Since <samp><span class="command">igawk</span></samp> can process nested &lsquo;<samp><span class="samp">@include</span></samp>&rsquo;
directives, <samp><span class="file">default.awk</span></samp> could simply contain &lsquo;<samp><span class="samp">@include</span></samp>&rsquo;
statements for the desired library functions.

<!-- Exercise: make this change -->
<!-- ENDOFRANGE libfex -->
<!-- ENDOFRANGE flibex -->
<!-- ENDOFRANGE awkpex -->
<div class="node">
<a name="Anagram-Program"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Signature-Program">Signature Program</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Igawk-Program">Igawk Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.10 Finding Anagrams From A Dictionary</h4>

<p>An interesting programming challenge is to
search for <dfn>anagrams</dfn> in a
word list (such as
<samp><span class="file">/usr/share/dict/words</span></samp> on many GNU/Linux systems). 
One word is an anagram of another if both words contain
the same letters
(for example, &ldquo;babbling&rdquo; and &ldquo;blabbing&rdquo;).

   <p>An elegant algorithm is presented in Column 2, Problem C of
Jon Bentley's <cite>Programming Pearls</cite>, second edition. 
The idea is to give words that are anagrams a common signature,
sort all the words together by their signature, and then print them. 
Dr. Bentley observes that taking the letters in each word and
sorting them produces that common signature.

   <p>The following program uses arrays of arrays to bring together
words with the same signature and array sorting to print the words
in sorted order.

   <p><a name="index-g_t_0040code_007banagram_002eawk_007d-program-1924"></a>
<pre class="example">     <!-- file eg/prog/anagram.awk -->
     # anagram.awk --- An implementation of the anagram finding algorithm
     #                 from Jon Bentley's "Programming Pearls", 2nd edition.
     #                 Addison Wesley, 2000, ISBN 0-201-65788-0.
     #                 Column 2, Problem C, section 2.8, pp 18-20.
     <!-- endfile -->
     <!-- file eg/prog/anagram.awk -->
     
     /'s$/   { next }        # Skip possessives
     <!-- endfile -->
</pre>
   <p>The program starts with a header, and then a rule to skip
possessives in the dictionary file. The next rule builds
up the data structure. The first dimension of the array
is indexed by the signature; the second dimension is the word
itself:

<pre class="example">     <!-- file eg/prog/anagram.awk -->
     {
         key = word2key($1)  # Build signature
         data[key][$1] = $1  # Store word with signature
     }
     <!-- endfile -->
</pre>
   <p>The <code>word2key()</code> function creates the signature. 
It splits the word apart into individual letters,
sorts the letters, and then joins them back together:

<pre class="example">     <!-- file eg/prog/anagram.awk -->
     # word2key --- split word apart into letters, sort, joining back together
     
     function word2key(word,     a, i, n, result)
     {
         n = split(word, a, "")
         asort(a)
     
         for (i = 1; i &lt;= n; i++)
             result = result a[i]
     
         return result
     }
     <!-- endfile -->
</pre>
   <p>Finally, the <code>END</code> rule traverses the array
and prints out the anagram lists.  It sends the output
to the system <samp><span class="command">sort</span></samp> command, since otherwise
the anagrams would appear in arbitrary order:

<pre class="example">     <!-- file eg/prog/anagram.awk -->
     END {
         sort = "sort"
         for (key in data) {
             # Sort words with same key
             nwords = asorti(data[key], words)
             if (nwords == 1)
                 continue
     
             # And print. Minor glitch: trailing space at end of each line
             for (j = 1; j &lt;= nwords; j++)
                 printf("%s ", words[j]) | sort
             print "" | sort
         }
         close(sort)
     }
     <!-- endfile -->
</pre>
   <p>Here is some partial output when the program is run:

<pre class="example">     $ <kbd>gawk -f anagram.awk /usr/share/dict/words | grep '^b'</kbd>
     ...
     babbled blabbed
     babbler blabber brabble
     babblers blabbers brabbles
     babbling blabbing
     babbly blabby
     babel bable
     babels beslab
     babery yabber
     ...
</pre>
   <div class="node">
<a name="Signature-Program"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Anagram-Program">Anagram Program</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Miscellaneous-Programs">Miscellaneous Programs</a>

</div>

<h4 class="subsection">13.3.11 And Now For Something Completely Different</h4>

<p>The following program was written by Davide Brini
<!-- (@email{dave_br@@gmx.com}) -->
and is published on <a href="http://backreference.org/2011/02/03/obfuscated-awk/">his website</a>. 
It serves as his signature in the Usenet group <code>comp.lang.awk</code>. 
He supplies the following copyright terms:

   <blockquote>
Copyright &copy; 2008 Davide Brini

   <p>Copying and distribution of the code published in this page, with or without
modification, are permitted in any medium without royalty provided the copyright
notice and this notice are preserved. 
</blockquote>

   <p>Here is the program:

<pre class="example">     awk 'BEGIN{O="~"~"~";o="=="=="==";o+=+o;x=O""O;while(X++&lt;=x+o+o)c=c"%c";
     printf c,(x-O)*(x-O),x*(x-o)-o,x*(x-O)+x-O-o,+x*(x-O)-x+o,X*(o*o+O)+x-O,
     X*(X-x)-o*o,(x+X)*o*o+o,x*(X-x)-O-O,x-O+(O+o+X+x)*(o+O),X*X-X*(x-O)-x+O,
     O+X*(o*(o+O)+O),+x+O+X*o,x*(x-o),(o+X+x)*o*o-(x-O-O),O+(X-x)*(X+O),x-O}'
</pre>
   <p>We leave it to you to determine what the program does.

<!-- The original text for this chapter was contributed by Efraim Yawitz. -->
<!-- FIXME: Add more indexing. -->
<div class="node">
<a name="Debugger"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Language-History">Language History</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Sample-Programs">Sample Programs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">14 <samp><span class="command">dgawk</span></samp>: The <samp><span class="command">awk</span></samp> Debugger</h2>

<p><a name="index-g_t_0040command_007bdgawk_007d-1925"></a>
It would be nice if computer programs worked perfectly the first time they
were run, but in real life, this rarely happens for programs of
any complexity.  Thus, most programming languages have facilities available
for &ldquo;debugging&rdquo; programs, and now <samp><span class="command">awk</span></samp> is no exception.

   <p>The <samp><span class="command">dgawk</span></samp> debugger is purposely modeled after
<a href="http://www.gnu.org/software/gdb/">the GNU Debugger (GDB)</a>
command-line debugger.  If you are familiar with GDB, learning
<samp><span class="command">dgawk</span></samp> is easy.

<ul class="menu">
<li><a accesskey="1" href="#Debugging">Debugging</a>:                    Introduction to <samp><span class="command">dgawk</span></samp>. 
<li><a accesskey="2" href="#Sample-dgawk-session">Sample dgawk session</a>:         Sample <samp><span class="command">dgawk</span></samp> session. 
<li><a accesskey="3" href="#List-of-Debugger-Commands">List of Debugger Commands</a>:    Main <samp><span class="command">dgawk</span></samp> Commands. 
<li><a accesskey="4" href="#Readline-Support">Readline Support</a>:             Readline Support. 
<li><a accesskey="5" href="#Dgawk-Limitations">Dgawk Limitations</a>:            Limitations and future plans. 
</ul>

<div class="node">
<a name="Debugging"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Sample-dgawk-session">Sample dgawk session</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Debugger">Debugger</a>

</div>

<h3 class="section">14.1 Introduction to <samp><span class="command">dgawk</span></samp></h3>

<p>This section introduces debugging in general and begins
the discussion of debugging in <samp><span class="command">gawk</span></samp>.

<ul class="menu">
<li><a accesskey="1" href="#Debugging-Concepts">Debugging Concepts</a>:           Debugging In General. 
<li><a accesskey="2" href="#Debugging-Terms">Debugging Terms</a>:              Additional Debugging Concepts. 
<li><a accesskey="3" href="#Awk-Debugging">Awk Debugging</a>:                Awk Debugging. 
</ul>

<div class="node">
<a name="Debugging-Concepts"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Debugging-Terms">Debugging Terms</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Debugging">Debugging</a>

</div>

<h4 class="subsection">14.1.1 Debugging In General</h4>

<p>(If you have used debuggers in other languages, you may want to skip
ahead to the next section on the specific features of the <samp><span class="command">awk</span></samp>
debugger.)

   <p>Of course, a debugging program cannot remove bugs for you, since it has
no way of knowing what you or your users consider a &ldquo;bug&rdquo; and what is a
&ldquo;feature.&rdquo;  (Sometimes, we humans have a hard time with this ourselves.) 
In that case, what can you expect from such a tool?  The answer to that
depends on the language being debugged, but in general, you can expect at
least the following:

     <ul>
<li>The ability to watch a program execute its instructions one by one,
giving you, the programmer, the opportunity to think about what is happening
on a time scale of seconds, minutes, or hours, rather than the nanosecond
time scale at which the code usually runs.

     <li>The opportunity to not only passively observe the operation of your
program, but to control it and try different paths of execution, without
having to change your source files.

     <li>The chance to see the values of data in the program at any point in
execution, and also to change that data on the fly, to see how that
affects what happens afterwards.  (This often includes the ability
to look at internal data structures besides the variables you actually
defined in your code.)

     <li>The ability to obtain additional information about your program's state
or even its internal structure. 
</ul>

   <p>All of these tools provide a great amount of help in using your own
skills and understanding of the goals of your program to find where it
is going wrong (or, for that matter, to better comprehend a perfectly
functional program that you or someone else wrote).

<div class="node">
<a name="Debugging-Terms"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Awk-Debugging">Awk Debugging</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Debugging-Concepts">Debugging Concepts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Debugging">Debugging</a>

</div>

<h4 class="subsection">14.1.2 Additional Debugging Concepts</h4>

<p>Before diving in to the details, we need to introduce several
important concepts that apply to just about all debuggers, including
<samp><span class="command">dgawk</span></samp>. 
The following list defines terms used throughout the rest of
this chapter.

     <dl>
<dt><dfn>Stack Frame</dfn><dd>Programs generally call functions during the course of their execution. 
One function can call another, or a function can call itself (recursion). 
You can view the chain of called functions (main program calls A, which
calls B, which calls C), as a stack of executing functions: the currently
running function is the topmost one on the stack, and when it finishes
(returns), the next one down then becomes the active function. 
Such a stack is termed a <dfn>call stack</dfn>.

     <p>For each function on the call stack, the system maintains a data area
that contains the function's parameters, local variables, and return value,
as well as any other &ldquo;bookkeeping&rdquo; information needed to manage the
call stack.  This data area is termed a <dfn>stack frame</dfn>.

     <p><samp><span class="command">gawk</span></samp> also follows this model, and <samp><span class="command">dgawk</span></samp> gives you
access to the call stack and to each stack frame. You can see the
call stack, as well as from where each function on the stack was
invoked. Commands that print the call stack print information about
each stack frame (as detailed later on).

     <br><dt><dfn>Breakpoint</dfn><dd>During debugging, you often wish to let the program run until it
reaches a certain point, and then continue execution from there one
statement (or instruction) at a time.  The way to do this is to set
a <dfn>breakpoint</dfn> within the program.  A breakpoint is where the
execution of the program should break off (stop), so that you can
take over control of the program's execution.  You can add and remove
as many breakpoints as you like.

     <br><dt><dfn>Watchpoint</dfn><dd>A watchpoint is similar to a breakpoint.  The difference is that
breakpoints are oriented around the code: stop when a certain point in the
code is reached.  A watchpoint, however, specifies that program execution
should stop when a <em>data value</em> is changed.  This is useful, since
sometimes it happens that a variable receives an erroneous value, and it's
hard to track down where this happens just by looking at the code. 
By using a watchpoint, you can stop whenever a variable is assigned to,
and usually find the errant code quite quickly. 
</dl>

<div class="node">
<a name="Awk-Debugging"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Debugging-Terms">Debugging Terms</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Debugging">Debugging</a>

</div>

<h4 class="subsection">14.1.3 Awk Debugging</h4>

<p>Debugging an <samp><span class="command">awk</span></samp> program has some specific aspects that are
not shared with other programming languages.

   <p>First of all, the fact that <samp><span class="command">awk</span></samp> programs usually take input
line-by-line from a file or files and operate on those lines using specific
rules makes it especially useful to organize viewing the execution of
the program in terms of these rules.  As we will see, each <samp><span class="command">awk</span></samp>
rule is treated almost like a function call, with its own specific block
of instructions.

   <p>In addition, since <samp><span class="command">awk</span></samp> is by design a very concise language,
it is easy to lose sight of everything that is going on &ldquo;inside&rdquo;
each line of <samp><span class="command">awk</span></samp> code.  The debugger provides the opportunity
to look at the individual primitive instructions carried out
by the higher-level <samp><span class="command">awk</span></samp> commands.

<div class="node">
<a name="Sample-dgawk-session"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#List-of-Debugger-Commands">List of Debugger Commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Debugging">Debugging</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Debugger">Debugger</a>

</div>

<h3 class="section">14.2 Sample <samp><span class="command">dgawk</span></samp> session</h3>

<p>In order to illustrate the use of <samp><span class="command">dgawk</span></samp>, let's look at a sample
debugging session.  We will use the <samp><span class="command">awk</span></samp> implementation of the
POSIX <samp><span class="command">uniq</span></samp> command described earlier (see <a href="#Uniq-Program">Uniq Program</a>)
as our example.

<ul class="menu">
<li><a accesskey="1" href="#dgawk-invocation">dgawk invocation</a>:             <samp><span class="command">dgawk</span></samp> Invocation. 
<li><a accesskey="2" href="#Finding-The-Bug">Finding The Bug</a>:              Finding The Bug. 
</ul>

<div class="node">
<a name="dgawk-invocation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Finding-The-Bug">Finding The Bug</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sample-dgawk-session">Sample dgawk session</a>

</div>

<h4 class="subsection">14.2.1 <samp><span class="command">dgawk</span></samp> Invocation</h4>

<p>Starting <samp><span class="command">dgawk</span></samp> is exactly like running <samp><span class="command">awk</span></samp>.  The
file(s) containing the program and any supporting code are given on the
command line as arguments to one or more <samp><span class="option">-f</span></samp> options. 
(<samp><span class="command">dgawk</span></samp> is not designed to debug command-line
programs, only programs contained in files.)  In our case,
we call <samp><span class="command">dgawk</span></samp> like this:

<pre class="example">     $ <kbd>dgawk -f getopt.awk -f join.awk -f uniq.awk inputfile</kbd>
</pre>
   <p class="noindent">where both <samp><span class="file">getopt.awk</span></samp> and <samp><span class="file">uniq.awk</span></samp> are in <samp><span class="env">$AWKPATH</span></samp>. 
(Experienced users of GDB or similar debuggers should note that
this syntax is slightly different from what they are used to. 
With <samp><span class="command">dgawk</span></samp>, the arguments for running the program are given
in the command line to the debugger rather than as part of the <code>run</code>
command at the debugger prompt.)

   <p>Instead of immediately running the program on <samp><span class="file">inputfile</span></samp>, as
<samp><span class="command">gawk</span></samp> would ordinarily do, <samp><span class="command">dgawk</span></samp> merely loads all
the program source files, compiles them internally, and then gives
us a prompt:

<pre class="example">     dgawk&gt;
</pre>
   <p class="noindent">from which we can issue commands to the debugger.  At this point, no
code has been executed.

<div class="node">
<a name="Finding-The-Bug"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#dgawk-invocation">dgawk invocation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sample-dgawk-session">Sample dgawk session</a>

</div>

<h4 class="subsection">14.2.2 Finding The Bug</h4>

<p>Let's say that we are having a problem using (a faulty version of)
<samp><span class="file">uniq.awk</span></samp> in the &ldquo;field-skipping&rdquo; mode, and it doesn't seem to be
catching lines which should be identical when skipping the first field,
such as:

<pre class="example">     awk is a wonderful program!
     gawk is a wonderful program!
</pre>
   <p>This could happen if we were thinking (C-like) of the fields in a record
as being numbered in a zero-based fashion, so instead of the lines:

<pre class="example">     clast = join(alast, fcount+1, n)
     cline = join(aline, fcount+1, m)
</pre>
   <p class="noindent">we wrote:

<pre class="example">     clast = join(alast, fcount, n)
     cline = join(aline, fcount, m)
</pre>
   <p>The first thing we usually want to do when trying to investigate a
problem like this is to put a breakpoint in the program so that we can
watch it at work and catch what it is doing wrong.  A reasonable spot for
a breakpoint in <samp><span class="file">uniq.awk</span></samp> is at the beginning of the function
<code>are_equal()</code>, which compares the current line with the previous one. To set
the breakpoint, use the <code>b</code> (breakpoint) command:

<pre class="example">     dgawk&gt; <kbd>b are_equal</kbd>
     -| Breakpoint 1 set at file `awklib/eg/prog/uniq.awk', line 64
</pre>
   <p>The debugger tells us the file and line number where the breakpoint is. 
Now type &lsquo;<samp><span class="samp">r</span></samp>&rsquo; or &lsquo;<samp><span class="samp">run</span></samp>&rsquo; and the program runs until it hits
the breakpoint for the first time:

<pre class="example">     dgawk&gt; <kbd>r</kbd>
     -| Starting program:
     -| Stopping in Rule ...
     -| Breakpoint 1, are_equal(n, m, clast, cline, alast, aline)
              at `awklib/eg/prog/uniq.awk':64
     -| 64          if (fcount == 0 &amp;&amp; charcount == 0)
     dgawk&gt;
</pre>
   <p>Now we can look at what's going on inside our program.  First of all,
let's see how we got to where we are.  At the prompt, we type &lsquo;<samp><span class="samp">bt</span></samp>&rsquo;
(short for &ldquo;backtrace&rdquo;), and <samp><span class="command">dgawk</span></samp> responds with a
listing of the current stack frames:

<pre class="example">     dgawk&gt; <kbd>bt</kbd>
     -| #0  are_equal(n, m, clast, cline, alast, aline)
              at `awklib/eg/prog/uniq.awk':69
     -| #1  in main() at `awklib/eg/prog/uniq.awk':89
</pre>
   <p>This tells us that <code>are_equal()</code> was called by the main program at
line 89 of <samp><span class="file">uniq.awk</span></samp>.  (This is not a big surprise, since this
is the only call to <code>are_equal()</code> in the program, but in more complex
programs, knowing who called a function and with what parameters can be
the key to finding the source of the problem.)

   <p>Now that we're in <code>are_equal()</code>, we can start looking at the values
of some variables.  Let's say we type &lsquo;<samp><span class="samp">p n</span></samp>&rsquo;
(<code>p</code> is short for &ldquo;print&rdquo;).  We would expect to see the value of
<code>n</code>, a parameter to <code>are_equal()</code>.  Actually, <samp><span class="command">dgawk</span></samp>
gives us:

<pre class="example">     dgawk&gt; <kbd>p n</kbd>
     -| n = untyped variable
</pre>
   <p class="noindent">In this case, <code>n</code> is an uninitialized local variable, since the
function was called without arguments (see <a href="#Function-Calls">Function Calls</a>).

   <p>A more useful variable to display might be the current record:

<pre class="example">     dgawk&gt; <kbd>p $0</kbd>
     -| $0 = string ("gawk is a wonderful program!")
</pre>
   <p class="noindent">This might be a bit puzzling at first since this is the second line of
our test input above.  Let's look at <code>NR</code>:

<pre class="example">     dgawk&gt; <kbd>p NR</kbd>
     -| NR = number (2)
</pre>
   <p class="noindent">So we can see that <code>are_equal()</code> was only called for the second record
of the file.  Of course, this is because our program contained a rule for
&lsquo;<samp><span class="samp">NR == 1</span></samp>&rsquo;:

<pre class="example">     NR == 1 {
         last = $0
         next
     }
</pre>
   <p>OK, let's just check that that rule worked correctly:

<pre class="example">     dgawk&gt; <kbd>p last</kbd>
     -| last = string ("awk is a wonderful program!")
</pre>
   <p>Everything we have done so far has verified that the program has worked as
planned, up to and including the call to <code>are_equal()</code>, so the problem must
be inside this function.  To investigate further, we must begin
&ldquo;stepping through&rdquo; the lines of <code>are_equal()</code>.  We start by typing
&lsquo;<samp><span class="samp">n</span></samp>&rsquo; (for &ldquo;next&rdquo;):

<pre class="example">     dgawk&gt; <kbd>n</kbd>
     -| 67          if (fcount &gt; 0) {
</pre>
   <p>This tells us that <samp><span class="command">gawk</span></samp> is now ready to execute line 67, which
decides whether to give the lines the special &ldquo;field skipping&rdquo; treatment
indicated by the <samp><span class="option">-f</span></samp> command-line option.  (Notice that we skipped
from where we were before at line 64 to here, since the condition in line 64

<pre class="example">     if (fcount == 0 &amp;&amp; charcount == 0)
</pre>
   <p class="noindent">was false.)

   <p>Continuing to step, we now get to the splitting of the current and
last records:

<pre class="example">     dgawk&gt; <kbd>n</kbd>
     -| 68              n = split(last, alast)
     dgawk&gt; <kbd>n</kbd>
     -| 69              m = split($0, aline)
</pre>
   <p>At this point, we should be curious to see what our records were split
into, so we try to look:

<pre class="example">     dgawk&gt; <kbd>p n m alast aline</kbd>
     -| n = number (5)
     -| m = number (5)
     -| alast = array, 5 elements
     -| aline = array, 5 elements
</pre>
   <p class="noindent">(The <code>p</code> command can take more than one argument, similar to
<samp><span class="command">awk</span></samp>'s <code>print</code> statement.)

   <p>This is kind of disappointing, though.  All we found out is that there
are five elements in each of our arrays.  Useful enough (we now know that
none of the words were accidentally left out), but what if we want to see
inside the array?

   <p>The first choice would be to use subscripts:

<pre class="example">     dgawk&gt; <kbd>p alast[0]</kbd>
     -| "0" not in array `alast'
</pre>
   <p class="noindent">Oops!

<pre class="example">     dgawk&gt; <kbd>p alast[1]</kbd>
     -| alast["1"] = string ("awk")
</pre>
   <p>This would be kind of slow for a 100-member array, though, so
<samp><span class="command">dgawk</span></samp> provides a shortcut (reminiscent of another language
not to be mentioned):

<pre class="example">     dgawk&gt; <kbd>p @alast</kbd>
     -| alast["1"] = string ("awk")
     -| alast["2"] = string ("is")
     -| alast["3"] = string ("a")
     -| alast["4"] = string ("wonderful")
     -| alast["5"] = string ("program!")
</pre>
   <p>It looks like we got this far OK.  Let's take another step
or two:

<pre class="example">     dgawk&gt; <kbd>n</kbd>
     -| 70              clast = join(alast, fcount, n)
     dgawk&gt; <kbd>n</kbd>
     -| 71              cline = join(aline, fcount, m)
</pre>
   <p>Well, here we are at our error (sorry to spoil the suspense).  What we
had in mind was to join the fields starting from the second one to make
the virtual record to compare, and if the first field was numbered zero,
this would work.  Let's look at what we've got:

<pre class="example">     dgawk&gt; <kbd>p cline clast</kbd>
     -| cline = string ("gawk is a wonderful program!")
     -| clast = string ("awk is a wonderful program!")
</pre>
   <p>Hey, those look pretty familiar!  They're just our original, unaltered,
input records.  A little thinking (the human brain is still the best
debugging tool), and we realize that we were off by one!

   <p>We get out of <samp><span class="command">dgawk</span></samp>:

<pre class="example">     dgawk&gt; <kbd>q</kbd>
     -| The program is running. Exit anyway (y/n)? <kbd>y</kbd>
</pre>
   <p class="noindent">Then we get into an editor:

<pre class="example">     clast = join(alast, fcount+1, n)
     cline = join(aline, fcount+1, m)
</pre>
   <p class="noindent">and problem solved!

<div class="node">
<a name="List-of-Debugger-Commands"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Readline-Support">Readline Support</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Sample-dgawk-session">Sample dgawk session</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Debugger">Debugger</a>

</div>

<h3 class="section">14.3 Main <samp><span class="command">dgawk</span></samp> Commands</h3>

<p>The <samp><span class="command">dgawk</span></samp> command set can be divided into the
following categories:

     <ul>
<li>Breakpoint control

     <li>Execution control

     <li>Viewing and changing data

     <li>Working with the stack

     <li>Getting information

     <li>Miscellaneous
</ul>

   <p>Each of these are discussed in the following subsections. 
In the following descriptions, commands which may be abbreviated
show the abbreviation on a second description line. 
A <samp><span class="command">dgawk</span></samp> command name may also be truncated if that partial
name is unambiguous. <samp><span class="command">dgawk</span></samp> has the built-in capability to
automatically repeat the previous command when just hitting &lt;Enter&gt;. 
This works for the commands <code>list</code>, <code>next</code>, <code>nexti</code>, <code>step</code>, <code>stepi</code>
and <code>continue</code> executed without any argument.

<ul class="menu">
<li><a accesskey="1" href="#Breakpoint-Control">Breakpoint Control</a>:           Control of breakpoints. 
<li><a accesskey="2" href="#Dgawk-Execution-Control">Dgawk Execution Control</a>:      Control of execution. 
<li><a accesskey="3" href="#Viewing-And-Changing-Data">Viewing And Changing Data</a>:    Viewing and changing data. 
<li><a accesskey="4" href="#Dgawk-Stack">Dgawk Stack</a>:                  Dealing with the stack. 
<li><a accesskey="5" href="#Dgawk-Info">Dgawk Info</a>:                   Obtaining information about the program and
                                the debugger state. 
<li><a accesskey="6" href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a>:  Miscellaneous Commands. 
</ul>

<div class="node">
<a name="Breakpoint-Control"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Dgawk-Execution-Control">Dgawk Execution Control</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-of-Debugger-Commands">List of Debugger Commands</a>

</div>

<h4 class="subsection">14.3.1 Control Of Breakpoints</h4>

<p>As we saw above, the first thing you probably want to do in a debugging
session is to get your breakpoints set up, since otherwise your program
will just run as if it was not under the debugger.  The commands for
controlling breakpoints are:

     
<a name="index-debugger-commands_002c-_0040code_007bb_007d-_0028_0040code_007bbreak_007d_0029-1926"></a>
<a name="index-debugger-commands_002c-_0040code_007bbreak_007d-1927"></a>
<a name="index-g_t_0040code_007bbreak_007d-debugger-command-1928"></a>
<a name="index-g_t_0040code_007bb_007d-debugger-command-_0028alias-for-_0040code_007bbreak_007d_0029-1929"></a>
<dl><dt><code>break</code> [[<var>filename</var><code>:</code>]<var>n</var> | <var>function</var>] [<code>"</code><var>expression</var><code>"</code>]<dt><code>b</code> [[<var>filename</var><code>:</code>]<var>n</var> | <var>function</var>] [<code>"</code><var>expression</var><code>"</code>]<dd>Without any argument, set a breakpoint at the next instruction
to be executed in the selected stack frame. 
Arguments can be one of the following:

     <!-- nested table -->
          <dl>
<dt><var>n</var><dd>Set a breakpoint at line number <var>n</var> in the current source file.

          <br><dt><var>filename</var><code>:</code><var>n</var><dd>Set a breakpoint at line number <var>n</var> in source file <var>filename</var>.

          <br><dt><var>function</var><dd>Set a breakpoint at entry to (the first instruction of)
function <var>function</var>. 
</dl>

     <p>Each breakpoint is assigned a number which can be used to delete it from
the breakpoint list using the <code>delete</code> command.

     <p>With a breakpoint, you may also supply a condition.  This is an
<samp><span class="command">awk</span></samp> expression (enclosed in double quotes) that <samp><span class="command">dgawk</span></samp>
evaluates whenever the breakpoint is reached. If the condition is true,
then <samp><span class="command">dgawk</span></samp> stops execution and prompts for a command. Otherwise,
<samp><span class="command">dgawk</span></samp> continues executing the program.

     <p><a name="index-debugger-commands_002c-_0040code_007bclear_007d-1930"></a><a name="index-g_t_0040code_007bclear_007d-debugger-command-1931"></a><br><dt><code>clear</code> [[<var>filename</var><code>:</code>]<var>n</var> | <var>function</var>]<dd>Without any argument, delete any breakpoint at the next instruction
to be executed in the selected stack frame. If the program stops at
a breakpoint, this deletes that breakpoint so that the program
does not stop at that location again.  Arguments can be one of the following:

     <!-- nested table -->
          <dl>
<dt><var>n</var><dd>Delete breakpoint(s) set at line number <var>n</var> in the current source file.

          <br><dt><var>filename</var><code>:</code><var>n</var><dd>Delete breakpoint(s) set at line number <var>n</var> in source file <var>filename</var>.

          <br><dt><var>function</var><dd>Delete breakpoint(s) set at entry to function <var>function</var>. 
</dl>

     <p><a name="index-debugger-commands_002c-_0040code_007bcondition_007d-1932"></a><a name="index-g_t_0040code_007bcondition_007d-debugger-command-1933"></a><br><dt><code>condition</code> <var>n</var> <code>"</code><var>expression</var><code>"</code><dd>Add a condition to existing breakpoint or watchpoint <var>n</var>. The
condition is an <samp><span class="command">awk</span></samp> expression that <samp><span class="command">dgawk</span></samp> evaluates
whenever the breakpoint or watchpoint is reached. If the condition is true, then
<samp><span class="command">dgawk</span></samp> stops execution and prompts for a command. Otherwise,
<samp><span class="command">dgawk</span></samp> continues executing the program. If the condition expression is
not specified, any existing condition is removed; i.e., the breakpoint or
watchpoint is made unconditional.

     <p><a name="index-debugger-commands_002c-_0040code_007bd_007d-_0028_0040code_007bdelete_007d_0029-1934"></a><a name="index-debugger-commands_002c-_0040code_007bdelete_007d-1935"></a><a name="index-g_t_0040code_007bdelete_007d-debugger-command-1936"></a><a name="index-g_t_0040code_007bd_007d-debugger-command-_0028alias-for-_0040code_007bdelete_007d_0029-1937"></a><br><dt><code>delete</code> [<var>n1 n2</var> <small class="dots">...</small>] [<var>n</var>&ndash;<var>m</var>]<dt><code>d</code> [<var>n1 n2</var> <small class="dots">...</small>] [<var>n</var>&ndash;<var>m</var>]<dd>Delete specified breakpoints or a range of breakpoints. Deletes
all defined breakpoints if no argument is supplied.

     <p><a name="index-debugger-commands_002c-_0040code_007bdisable_007d-1938"></a><a name="index-g_t_0040code_007bdisable_007d-debugger-command-1939"></a><br><dt><code>disable</code> [<var>n1 n2</var> <small class="dots">...</small> | <var>n</var>&ndash;<var>m</var>]<dd>Disable specified breakpoints or a range of breakpoints. Without
any argument, disables all breakpoints.

     <p><a name="index-debugger-commands_002c-_0040code_007be_007d-_0028_0040code_007benable_007d_0029-1940"></a><a name="index-debugger-commands_002c-_0040code_007benable_007d-1941"></a><a name="index-g_t_0040code_007benable_007d-debugger-command-1942"></a><a name="index-g_t_0040code_007be_007d-debugger-command-_0028alias-for-_0040code_007benable_007d_0029-1943"></a><br><dt><code>enable</code> [<code>del</code> | <code>once</code>] [<var>n1 n2</var> <small class="dots">...</small>] [<var>n</var>&ndash;<var>m</var>]<dt><code>e</code> [<code>del</code> | <code>once</code>] [<var>n1 n2</var> <small class="dots">...</small>] [<var>n</var>&ndash;<var>m</var>]<dd>Enable specified breakpoints or a range of breakpoints. Without
any argument, enables all breakpoints. 
Optionally, you can specify how to enable the breakpoint:

     <!-- nested table -->
          <dl>
<dt><code>del</code><dd>Enable the breakpoint(s) temporarily, then delete it when
the program stops at the breakpoint.

          <br><dt><code>once</code><dd>Enable the breakpoint(s) temporarily, then disable it when
the program stops at the breakpoint. 
</dl>

     <p><a name="index-debugger-commands_002c-_0040code_007bignore_007d-1944"></a><a name="index-g_t_0040code_007bignore_007d-debugger-command-1945"></a><br><dt><code>ignore</code> <var>n</var> <var>count</var><dd>Ignore breakpoint number <var>n</var> the next <var>count</var> times it is
hit.

     <p><a name="index-debugger-commands_002c-_0040code_007bt_007d-_0028_0040code_007btbreak_007d_0029-1946"></a><a name="index-debugger-commands_002c-_0040code_007btbreak_007d-1947"></a><a name="index-g_t_0040code_007btbreak_007d-debugger-command-1948"></a><a name="index-g_t_0040code_007bt_007d-debugger-command-_0028alias-for-_0040code_007btbreak_007d_0029-1949"></a><br><dt><code>tbreak</code> [[<var>filename</var><code>:</code>]<var>n</var> | <var>function</var>]<dt><code>t</code> [[<var>filename</var><code>:</code>]<var>n</var> | <var>function</var>]<dd>Set a temporary breakpoint (enabled for only one stop). 
The arguments are the same as for <code>break</code>. 
</dl>

<div class="node">
<a name="Dgawk-Execution-Control"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Viewing-And-Changing-Data">Viewing And Changing Data</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Breakpoint-Control">Breakpoint Control</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-of-Debugger-Commands">List of Debugger Commands</a>

</div>

<h4 class="subsection">14.3.2 Control of Execution</h4>

<p>Now that your breakpoints are ready, you can start running the program
and observing its behavior.  There are more commands for controlling
execution of the program than we saw in our earlier example:

     
<a name="index-debugger-commands_002c-_0040code_007bcommands_007d-1950"></a>
<a name="index-g_t_0040code_007bcommands_007d-debugger-command-1951"></a>
<a name="index-debugger-commands_002c-_0040code_007bsilent_007d-1952"></a>
<a name="index-g_t_0040code_007bsilent_007d-debugger-command-1953"></a>
<a name="index-debugger-commands_002c-_0040code_007bend_007d-1954"></a>
<a name="index-g_t_0040code_007bend_007d-debugger-command-1955"></a>
<dl><dt><code>commands</code> [<var>n</var>]<dt><code>silent</code><dt><small class="dots">...</small><dt><code>end</code><dd>Set a list of commands to be executed upon stopping at
a breakpoint or watchpoint. <var>n</var> is the breakpoint or watchpoint number. 
Without a number, the last one set is used. The actual commands follow,
starting on the next line, and terminated by the <code>end</code> command. 
If the command <code>silent</code> is in the list, the usual messages about
stopping at a breakpoint and the source line are not printed. Any command
in the list that resumes execution (e.g., <code>continue</code>) terminates the list
(an implicit <code>end</code>), and subsequent commands are ignored. 
For example:

     <pre class="example">          dgawk&gt; <kbd>commands</kbd>
          &gt; <kbd>silent</kbd>
          &gt; <kbd>printf "A silent breakpoint; i = %d\n", i</kbd>
          &gt; <kbd>info locals</kbd>
          &gt; <kbd>set i = 10</kbd>
          &gt; <kbd>continue</kbd>
          &gt; <kbd>end</kbd>
          dgawk&gt;
</pre>
     <p><a name="index-debugger-commands_002c-_0040code_007bc_007d-_0028_0040code_007bcontinue_007d_0029-1956"></a><a name="index-debugger-commands_002c-_0040code_007bcontinue_007d-1957"></a><br><dt><code>continue</code> [<var>count</var>]<dt><code>c</code> [<var>count</var>]<dd>Resume program execution. If continued from a breakpoint and <var>count</var> is
specified, ignores the breakpoint at that location the next <var>count</var> times
before stopping.

     <p><a name="index-debugger-commands_002c-_0040code_007bfinish_007d-1958"></a><a name="index-g_t_0040code_007bfinish_007d-debugger-command-1959"></a><br><dt><code>finish</code><dd>Execute until the selected stack frame returns. 
Print the returned value.

     <p><a name="index-debugger-commands_002c-_0040code_007bn_007d-_0028_0040code_007bnext_007d_0029-1960"></a><a name="index-debugger-commands_002c-_0040code_007bnext_007d-1961"></a><a name="index-g_t_0040code_007bnext_007d-debugger-command-1962"></a><a name="index-g_t_0040code_007bn_007d-debugger-command-_0028alias-for-_0040code_007bnext_007d_0029-1963"></a><br><dt><code>next</code> [<var>count</var>]<dt><code>n</code> [<var>count</var>]<dd>Continue execution to the next source line, stepping over function calls. 
The argument <var>count</var> controls how many times to repeat the action, as
in <code>step</code>.

     <p><a name="index-debugger-commands_002c-_0040code_007bni_007d-_0028_0040code_007bnexti_007d_0029-1964"></a><a name="index-debugger-commands_002c-_0040code_007bnexti_007d-1965"></a><a name="index-g_t_0040code_007bnexti_007d-debugger-command-1966"></a><a name="index-g_t_0040code_007bni_007d-debugger-command-_0028alias-for-_0040code_007bnexti_007d_0029-1967"></a><br><dt><code>nexti</code> [<var>count</var>]<dt><code>ni</code> [<var>count</var>]<dd>Execute one (or <var>count</var>) instruction(s), stepping over function calls.

     <p><a name="index-debugger-commands_002c-_0040code_007breturn_007d-1968"></a><a name="index-g_t_0040code_007breturn_007d-debugger-command-1969"></a><br><dt><code>return</code> [<var>value</var>]<dd>Cancel execution of a function call. If <var>value</var> (either a string or a
number) is specified, it is used as the function's return value. If used in a
frame other than the innermost one (the currently executing function, i.e.,
frame number 0), discard all inner frames in addition to the selected one,
and the caller of that frame becomes the innermost frame.

     <p><a name="index-debugger-commands_002c-_0040code_007br_007d-_0028_0040code_007brun_007d_0029-1970"></a><a name="index-debugger-commands_002c-_0040code_007brun_007d-1971"></a><a name="index-g_t_0040code_007brun_007d-debugger-command-1972"></a><a name="index-g_t_0040code_007br_007d-debugger-command-_0028alias-for-_0040code_007brun_007d_0029-1973"></a><br><dt><code>run</code><dt><code>r</code><dd>Start/restart execution of the program. When restarting, <samp><span class="command">dgawk</span></samp>
retains the current breakpoints, watchpoints, command history,
automatic display variables, and debugger options.

     <p><a name="index-debugger-commands_002c-_0040code_007bs_007d-_0028_0040code_007bstep_007d_0029-1974"></a><a name="index-debugger-commands_002c-_0040code_007bstep_007d-1975"></a><a name="index-g_t_0040code_007bstep_007d-debugger-command-1976"></a><a name="index-g_t_0040code_007bs_007d-debugger-command-_0028alias-for-_0040code_007bstep_007d_0029-1977"></a><br><dt><code>step</code> [<var>count</var>]<dt><code>s</code> [<var>count</var>]<dd>Continue execution until control reaches a different source line in the
current stack frame. <code>step</code> steps inside any function called within
the line.  If the argument <var>count</var> is supplied, steps that many times before
stopping, unless it encounters a breakpoint or watchpoint.

     <p><a name="index-debugger-commands_002c-_0040code_007bsi_007d-_0028_0040code_007bstepi_007d_0029-1978"></a><a name="index-debugger-commands_002c-_0040code_007bstepi_007d-1979"></a><a name="index-g_t_0040code_007bstepi_007d-debugger-command-1980"></a><a name="index-g_t_0040code_007bsi_007d-debugger-command-_0028alias-for-_0040code_007bstepi_007d_0029-1981"></a><br><dt><code>stepi</code> [<var>count</var>]<dt><code>si</code> [<var>count</var>]<dd>Execute one (or <var>count</var>) instruction(s), stepping inside function calls. 
(For illustration of what is meant by an &ldquo;instruction&rdquo; in <samp><span class="command">gawk</span></samp>,
see the output shown under <code>dump</code> in <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a>.)

     <p><a name="index-debugger-commands_002c-_0040code_007bu_007d-_0028_0040code_007buntil_007d_0029-1982"></a><a name="index-debugger-commands_002c-_0040code_007buntil_007d-1983"></a><a name="index-g_t_0040code_007buntil_007d-debugger-command-1984"></a><a name="index-g_t_0040code_007bu_007d-debugger-command-_0028alias-for-_0040code_007buntil_007d_0029-1985"></a><br><dt><code>until</code> [[<var>filename</var><code>:</code>]<var>n</var> | <var>function</var>]<dt><code>u</code> [[<var>filename</var><code>:</code>]<var>n</var> | <var>function</var>]<dd>Without any argument, continue execution until a line past the current
line in current stack frame is reached. With an argument,
continue execution until the specified location is reached, or the current
stack frame returns. 
</dl>

<div class="node">
<a name="Viewing-And-Changing-Data"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Dgawk-Stack">Dgawk Stack</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dgawk-Execution-Control">Dgawk Execution Control</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-of-Debugger-Commands">List of Debugger Commands</a>

</div>

<h4 class="subsection">14.3.3 Viewing and Changing Data</h4>

<p>The commands for viewing and changing variables inside of <samp><span class="command">gawk</span></samp> are:

     
<a name="index-debugger-commands_002c-_0040code_007bdisplay_007d-1986"></a>
<a name="index-g_t_0040code_007bdisplay_007d-debugger-command-1987"></a>
<dl><dt><code>display</code> [<var>var</var> | <code>$</code><var>n</var>]<dd>Add variable <var>var</var> (or field <code>$</code><var>n</var>) to the display list. 
The value of the variable or field is displayed each time the program stops. 
Each variable added to the list is identified by a unique number:

     <pre class="example">          dgawk&gt; <kbd>display x</kbd>
          -| 10: x = 1
</pre>
     <p class="noindent">displays the assigned item number, the variable name and its current value. 
If the display variable refers to a function parameter, it is silently
deleted from the list as soon as the execution reaches a context where
no such variable of the given name exists. 
Without argument, <code>display</code> displays the current values of
items on the list.

     <p><a name="index-debugger-commands_002c-_0040code_007beval_007d-1988"></a><a name="index-g_t_0040code_007beval_007d-debugger-command-1989"></a><br><dt><code>eval "</code><var>awk statements</var><code>"</code><dd>Evaluate <var>awk statements</var> in the context of the running program. 
You can do anything that an <samp><span class="command">awk</span></samp> program would do: assign
values to variables, call functions, and so on.

     <br><dt><code>eval</code> <var>param</var>, <small class="dots">...</small><dt><var>awk statements</var><dt><code>end</code><dd>This form of <code>eval</code> is similar, but it allows you to define
&ldquo;local variables&rdquo; that exist in the context of the
<var>awk statements</var>, instead of using variables or function
parameters defined by the program.

     <p><a name="index-debugger-commands_002c-_0040code_007bp_007d-_0028_0040code_007bprint_007d_0029-1990"></a><a name="index-debugger-commands_002c-_0040code_007bprint_007d-1991"></a><a name="index-g_t_0040code_007bprint_007d-debugger-command-1992"></a><a name="index-g_t_0040code_007bp_007d-debugger-command-_0028alias-for-_0040code_007bprint_007d_0029-1993"></a><br><dt><code>print</code> <var>var1</var>[<code>,</code> <var>var2</var> <small class="dots">...</small>]<dt><code>p</code> <var>var1</var>[<code>,</code> <var>var2</var> <small class="dots">...</small>]<dd>Print the value of a <samp><span class="command">gawk</span></samp> variable or field. 
Fields must be referenced by constants:

     <pre class="example">          dgawk&gt; <kbd>print $3</kbd>
</pre>
     <p class="noindent">This prints the third field in the input record (if the specified field does not
exist, it prints &lsquo;<samp><span class="samp">Null field</span></samp>&rsquo;). A variable can be an array element, with
the subscripts being constant values. To print the contents of an array,
prefix the name of the array with the &lsquo;<samp><span class="samp">@</span></samp>&rsquo; symbol:

     <pre class="example">          gawk&gt; <kbd>print @a</kbd>
</pre>
     <p class="noindent">This prints the indices and the corresponding values for all elements in
the array <code>a</code>.

     <p><a name="index-debugger-commands_002c-_0040code_007bprintf_007d-1994"></a><a name="index-g_t_0040code_007bprintf_007d-debugger-command-1995"></a><br><dt><code>printf</code> <var>format</var> [<code>,</code> <var>arg</var> <small class="dots">...</small>]<dd>Print formatted text. The <var>format</var> may include escape sequences,
such as &lsquo;<samp><span class="samp">\n</span></samp>&rsquo;
(see <a href="#Escape-Sequences">Escape Sequences</a>). 
No newline is printed unless one is specified.

     <p><a name="index-debugger-commands_002c-_0040code_007bset_007d-1996"></a><a name="index-g_t_0040code_007bset_007d-debugger-command-1997"></a><br><dt><code>set</code> <var>var</var><code>=</code><var>value</var><dd>Assign a constant (number or string) value to an <samp><span class="command">awk</span></samp> variable
or field. 
String values must be enclosed between double quotes (<code>"..."</code>).

     <p>You can also set special <samp><span class="command">awk</span></samp> variables, such as <code>FS</code>,
<code>NF</code>, <code>NR</code>, etc.

     <p><a name="index-debugger-commands_002c-_0040code_007bw_007d-_0028_0040code_007bwatch_007d_0029-1998"></a><a name="index-debugger-commands_002c-_0040code_007bwatch_007d-1999"></a><a name="index-g_t_0040code_007bwatch_007d-debugger-command-2000"></a><a name="index-g_t_0040code_007bw_007d-debugger-command-_0028alias-for-_0040code_007bwatch_007d_0029-2001"></a><br><dt><code>watch</code> <var>var</var> | <code>$</code><var>n</var> [<code>"</code><var>expression</var><code>"</code>]<dt><code>w</code> <var>var</var> | <code>$</code><var>n</var> [<code>"</code><var>expression</var><code>"</code>]<dd>Add variable <var>var</var> (or field <code>$</code><var>n</var>) to the watch list. 
<samp><span class="command">dgawk</span></samp> then stops whenever
the value of the variable or field changes. Each watched item is assigned a
number which can be used to delete it from the watch list using the
<code>unwatch</code> command.

     <p>With a watchpoint, you may also supply a condition.  This is an
<samp><span class="command">awk</span></samp> expression (enclosed in double quotes) that <samp><span class="command">dgawk</span></samp>
evaluates whenever the watchpoint is reached. If the condition is true,
then <samp><span class="command">dgawk</span></samp> stops execution and prompts for a command. Otherwise,
<samp><span class="command">dgawk</span></samp> continues executing the program.

     <p><a name="index-debugger-commands_002c-_0040code_007bundisplay_007d-2002"></a><a name="index-g_t_0040code_007bundisplay_007d-debugger-command-2003"></a><br><dt><code>undisplay</code> [<var>n</var>]<dd>Remove item number <var>n</var> (or all items, if no argument) from the
automatic display list.

     <p><a name="index-debugger-commands_002c-_0040code_007bunwatch_007d-2004"></a><a name="index-g_t_0040code_007bunwatch_007d-debugger-command-2005"></a><br><dt><code>unwatch</code> [<var>n</var>]<dd>Remove item number <var>n</var> (or all items, if no argument) from the
watch list.

   </dl>

<div class="node">
<a name="Dgawk-Stack"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Dgawk-Info">Dgawk Info</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Viewing-And-Changing-Data">Viewing And Changing Data</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-of-Debugger-Commands">List of Debugger Commands</a>

</div>

<h4 class="subsection">14.3.4 Dealing With The Stack</h4>

<p>Whenever you run a program which contains any function calls,
<samp><span class="command">gawk</span></samp> maintains a stack of all of the function calls leading up
to where the program is right now.  You can see how you got to where you are,
and also move around in the stack to see what the state of things was in the
functions which called the one you are in.  The commands for doing this are:

     
<a name="index-debugger-commands_002c-_0040code_007bbt_007d-_0028_0040code_007bbacktrace_007d_0029-2006"></a>
<a name="index-debugger-commands_002c-_0040code_007bbacktrace_007d-2007"></a>
<a name="index-g_t_0040code_007bbacktrace_007d-debugger-command-2008"></a>
<a name="index-g_t_0040code_007bbt_007d-debugger-command-_0028alias-for-_0040code_007bbacktrace_007d_0029-2009"></a>
<dl><dt><code>backtrace</code> [<var>count</var>]<dt><code>bt</code> [<var>count</var>]<dd>Print a backtrace of all function calls (stack frames), or innermost <var>count</var>
frames if <var>count</var> &gt; 0. Print the outermost <var>count</var> frames if
<var>count</var> &lt; 0.  The backtrace displays the name and arguments to each
function, the source file name, and the line number.

     <p><a name="index-debugger-commands_002c-_0040code_007bdown_007d-2010"></a><a name="index-g_t_0040code_007bdown_007d-debugger-command-2011"></a><br><dt><code>down</code> [<var>count</var>]<dd>Move <var>count</var> (default 1) frames down the stack toward the innermost frame. 
Then select and print the frame.

     <p><a name="index-debugger-commands_002c-_0040code_007bf_007d-_0028_0040code_007bframe_007d_0029-2012"></a><a name="index-debugger-commands_002c-_0040code_007bframe_007d-2013"></a><a name="index-g_t_0040code_007bframe_007d-debugger-command-2014"></a><a name="index-g_t_0040code_007bf_007d-debugger-command-_0028alias-for-_0040code_007bframe_007d_0029-2015"></a><br><dt><code>frame</code> [<var>n</var>]<dt><code>f</code> [<var>n</var>]<dd>Select and print (frame number, function and argument names, source file,
and the source line) stack frame <var>n</var>. Frame 0 is the currently executing,
or <dfn>innermost</dfn>, frame (function call), frame 1 is the frame that called the
innermost one. The highest numbered frame is the one for the main program.

     <p><a name="index-debugger-commands_002c-_0040code_007bup_007d-2016"></a><a name="index-g_t_0040code_007bup_007d-debugger-command-2017"></a><br><dt><code>up</code> [<var>count</var>]<dd>Move <var>count</var> (default 1) frames up the stack toward the outermost frame. 
Then select and print the frame. 
</dl>

<div class="node">
<a name="Dgawk-Info"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dgawk-Stack">Dgawk Stack</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-of-Debugger-Commands">List of Debugger Commands</a>

</div>

<h4 class="subsection">14.3.5 Obtaining Information About The Program and The Debugger State</h4>

<p>Besides looking at the values of variables, there is often a need to get
other sorts of information about the state of your program and of the
debugging environment itself.  <samp><span class="command">dgawk</span></samp> has one command which
provides this information, appropriately called <code>info</code>.  <code>info</code>
is used with one of a number of arguments that tell it exactly what
you want to know:

     
<a name="index-debugger-commands_002c-_0040code_007bi_007d-_0028_0040code_007binfo_007d_0029-2018"></a>
<a name="index-debugger-commands_002c-_0040code_007binfo_007d-2019"></a>
<a name="index-g_t_0040code_007binfo_007d-debugger-command-2020"></a>
<a name="index-g_t_0040code_007bi_007d-debugger-command-_0028alias-for-_0040code_007binfo_007d_0029-2021"></a>
<dl><dt><code>info</code> <var>what</var><dt><code>i</code> <var>what</var><dd>The value for <var>what</var> should be one of the following:

     <!-- nested table -->
          <dl>
<dt><code>args</code><dd>Arguments of the selected frame.

          <br><dt><code>break</code><dd>List all currently set breakpoints.

          <br><dt><code>display</code><dd>List all items in the automatic display list.

          <br><dt><code>frame</code><dd>Description of the selected stack frame.

          <br><dt><code>functions</code><dd>List all function definitions including source file names and
line numbers.

          <br><dt><code>locals</code><dd>Local variables of the selected frame.

          <br><dt><code>source</code><dd>The name of the current source file. Each time the program stops, the
current source file is the file containing the current instruction. 
When <samp><span class="command">dgawk</span></samp> first starts, the current source file is the first file
included via the <samp><span class="option">-f</span></samp> option. The
&lsquo;<samp><span class="samp">list </span><var>filename</var><span class="samp">:</span><var>lineno</var></samp>&rsquo; command can
be used at any time to change the current source.

          <br><dt><code>sources</code><dd>List all program sources.

          <br><dt><code>variables</code><dd>List all global variables.

          <br><dt><code>watch</code><dd>List all items in the watch list. 
</dl>
     </dl>

   <p>Additional commands give you control over the debugger, the ability to
save the debugger's state, and the ability to run debugger commands
from a file.  The commands are:

     
<a name="index-debugger-commands_002c-_0040code_007bo_007d-_0028_0040code_007boption_007d_0029-2022"></a>
<a name="index-debugger-commands_002c-_0040code_007boption_007d-2023"></a>
<a name="index-g_t_0040code_007boption_007d-debugger-command-2024"></a>
<a name="index-g_t_0040code_007bo_007d-debugger-command-_0028alias-for-_0040code_007boption_007d_0029-2025"></a>
<dl><dt><code>option</code> [<var>name</var>[<code>=</code><var>value</var>]]<dt><code>o</code> [<var>name</var>[<code>=</code><var>value</var>]]<dd>Without an argument, display the available debugger options
and their current values. &lsquo;<samp><span class="samp">option </span><var>name</var></samp>&rsquo; shows the current
value of the named option. &lsquo;<samp><span class="samp">option </span><var>name</var><span class="samp">=</span><var>value</var></samp>&rsquo; assigns
a new value to the named option. 
The available options are:

     <!-- nested table -->
          <dl>
<dt><code>history_size</code><dd>The maximum number of lines to keep in the history file <samp><span class="file">./.dgawk_history</span></samp>. 
The default is 100.

          <br><dt><code>listsize</code><dd>The number of lines that <code>list</code> prints. The default is 15.

          <br><dt><code>outfile</code><dd>Send <samp><span class="command">gawk</span></samp> output to a file; debugger output still goes
to standard output. An empty string (<code>""</code>) resets output to
standard output.

          <br><dt><code>prompt</code><dd>The debugger prompt. The default is &lsquo;<samp><span class="samp">dgawk&gt;&nbsp;<!-- /@w --></span></samp>&rsquo;.

          <br><dt><code>save_history </code><span class="roman">[</span><code>on </code><span class="roman">|</span><code> off</code><span class="roman">]</span><dd>Save command history to file <samp><span class="file">./.dgawk_history</span></samp>. 
The default is <code>on</code>.

          <br><dt><code>save_options </code><span class="roman">[</span><code>on </code><span class="roman">|</span><code> off</code><span class="roman">]</span><dd>Save current options to file <samp><span class="file">./.dgawkrc</span></samp> upon exit. 
The default is <code>on</code>. 
Options are read back in to the next session upon startup.

          <br><dt><code>trace </code><span class="roman">[</span><code>on </code><span class="roman">|</span><code> off</code><span class="roman">]</span><dd>Turn instruction tracing on or off. The default is <code>off</code>. 
</dl>

     <br><dt><code>save</code> <var>filename</var><dd>Save the commands from the current session to the given file name,
so that they can be replayed using the <samp><span class="command">source</span></samp> command.

     <br><dt><code>source</code> <var>filename</var><dd>Run command(s) from a file; an error in any command does not
terminate execution of subsequent commands. Comments (lines starting
with &lsquo;<samp><span class="samp">#</span></samp>&rsquo;) are allowed in a command file. 
Empty lines are ignored; they do <em>not</em>
repeat the last command. 
You can't restart the program by having more than one <code>run</code>
command in the file. Also, the list of commands may include additional
<code>source</code> commands; however, <samp><span class="command">dgawk</span></samp> will not source the
same file more than once in order to avoid infinite recursion.

     <p>In addition to, or instead of the <code>source</code> command, you can use
the <samp><span class="option">-R </span><var>file</var></samp> or <samp><span class="option">--command=</span><var>file</var></samp> command-line
options to execute commands from a file non-interactively
(see <a href="#Options">Options</a>. 
</dl>

<div class="node">
<a name="Miscellaneous-Dgawk-Commands"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dgawk-Info">Dgawk Info</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#List-of-Debugger-Commands">List of Debugger Commands</a>

</div>

<h4 class="subsection">14.3.6 Miscellaneous Commands</h4>

<p>There are a few more commands which do not fit into the
previous categories, as follows:

     
<a name="index-debugger-commands_002c-_0040code_007bdump_007d-2026"></a>
<a name="index-g_t_0040code_007bdump_007d-debugger-command-2027"></a>
<dl><dt><code>dump</code> [<var>filename</var>]<dd>Dump bytecode of the program to standard output or to the file
named in <var>filename</var>.  This prints a representation of the internal
instructions which <samp><span class="command">gawk</span></samp> executes to implement the <samp><span class="command">awk</span></samp>
commands in a program.  This can be very enlightening, as the following
partial dump of Davide Brini's obfuscated code
(see <a href="#Signature-Program">Signature Program</a>) demonstrates:

     <pre class="smallexample">          dgawk&gt; <kbd>dump</kbd>
          -|        # BEGIN
          -|
          -| [     2:0x89faef4] Op_rule             : [in_rule = BEGIN] [source_file = brini.awk]
          -| [     3:0x89fa428] Op_push_i           : "~" [PERM|STRING|STRCUR]
          -| [     3:0x89fa464] Op_push_i           : "~" [PERM|STRING|STRCUR]
          -| [     3:0x89fa450] Op_match            :
          -| [     3:0x89fa3ec] Op_store_var        : O [do_reference = FALSE]
          -| [     4:0x89fa48c] Op_push_i           : "==" [PERM|STRING|STRCUR]
          -| [     4:0x89fa4c8] Op_push_i           : "==" [PERM|STRING|STRCUR]
          -| [     4:0x89fa4b4] Op_equal            :
          -| [     4:0x89fa400] Op_store_var        : o [do_reference = FALSE]
          -| [     5:0x89fa4f0] Op_push             : o
          -| [     5:0x89fa4dc] Op_plus_i           : 0 [PERM|NUMCUR|NUMBER]
          -| [     5:0x89fa414] Op_push_lhs         : o [do_reference = TRUE]
          -| [     5:0x89fa4a0] Op_assign_plus      :
          -| [      :0x89fa478] Op_pop              :
          -| [     6:0x89fa540] Op_push             : O
          -| [     6:0x89fa554] Op_push_i           : "" [PERM|STRING|STRCUR]
          -| [      :0x89fa5a4] Op_no_op            :
          -| [     6:0x89fa590] Op_push             : O
          -| [      :0x89fa5b8] Op_concat           : [expr_count = 3] [concat_flag = 0]
          -| [     6:0x89fa518] Op_store_var        : x [do_reference = FALSE]
          -| [     7:0x89fa504] Op_push_loop        : [target_continue = 0x89fa568] [target_break = 0x89fa680]
          -| [     7:0x89fa568] Op_push_lhs         : X [do_reference = TRUE]
          -| [     7:0x89fa52c] Op_postincrement    :
          -| [     7:0x89fa5e0] Op_push             : x
          -| [     7:0x89fa61c] Op_push             : o
          -| [     7:0x89fa5f4] Op_plus             :
          -| [     7:0x89fa644] Op_push             : o
          -| [     7:0x89fa630] Op_plus             :
          -| [     7:0x89fa5cc] Op_leq              :
          -| [      :0x89fa57c] Op_jmp_false        : [target_jmp = 0x89fa680]
          -| [     7:0x89fa694] Op_push_i           : "%c" [PERM|STRING|STRCUR]
          -| [      :0x89fa6d0] Op_no_op            :
          -| [     7:0x89fa608] Op_assign_concat    : c
          -| [      :0x89fa6a8] Op_jmp              : [target_jmp = 0x89fa568]
          -| [      :0x89fa680] Op_pop_loop         :
          -|
          ...
          -|
          -| [     8:0x89fa658] Op_K_printf         : [expr_count = 17] [redir_type = ""]
          -| [      :0x89fa374] Op_no_op            :
          -| [      :0x89fa3d8] Op_atexit           :
          -| [      :0x89fa6bc] Op_stop             :
          -| [      :0x89fa39c] Op_no_op            :
          -| [      :0x89fa3b0] Op_after_beginfile  :
          -| [      :0x89fa388] Op_no_op            :
          -| [      :0x89fa3c4] Op_after_endfile    :
          dgawk&gt;
</pre>
     <p><a name="index-debugger-commands_002c-_0040code_007bh_007d-_0028_0040code_007bhelp_007d_0029-2028"></a><a name="index-debugger-commands_002c-_0040code_007bhelp_007d-2029"></a><a name="index-g_t_0040code_007bhelp_007d-debugger-command-2030"></a><a name="index-g_t_0040code_007bh_007d-debugger-command-_0028alias-for-_0040code_007bhelp_007d_0029-2031"></a><br><dt><code>help</code><dt><code>h</code><dd>Print a list of all of the <samp><span class="command">dgawk</span></samp> commands with a short
summary of their usage.  &lsquo;<samp><span class="samp">help </span><var>command</var></samp>&rsquo; prints the information
about the command <var>command</var>.

     <p><a name="index-debugger-commands_002c-_0040code_007bl_007d-_0028_0040code_007blist_007d_0029-2032"></a><a name="index-debugger-commands_002c-_0040code_007blist_007d-2033"></a><a name="index-g_t_0040code_007blist_007d-debugger-command-2034"></a><a name="index-g_t_0040code_007bl_007d-debugger-command-_0028alias-for-_0040code_007blist_007d_0029-2035"></a><br><dt><code>list</code> [<code>-</code> | <code>+</code> | <var>n</var> | <var>filename</var><code>:</code><var>n</var> | <var>n</var>&ndash;<var>m</var> | <var>function</var>]<dt><code>l</code> [<code>-</code> | <code>+</code> | <var>n</var> | <var>filename</var><code>:</code><var>n</var> | <var>n</var>&ndash;<var>m</var> | <var>function</var>]<dd>Print the specified lines (default 15) from the current source file
or the file named <var>filename</var>. The possible arguments to <code>list</code>
are as follows:

     <!-- nested table -->
          <dl>
<dt><code>-</code><dd>Print lines before the lines last printed.

          <br><dt><code>+</code><dd>Print lines after the lines last printed. 
<code>list</code> without any argument does the same thing.

          <br><dt><var>n</var><dd>Print lines centered around line number <var>n</var>.

          <br><dt><var>n</var>&ndash;<var>m</var><dd>Print lines from <var>n</var> to <var>m</var>.

          <br><dt><var>filename</var><code>:</code><var>n</var><dd>Print lines centered around line number <var>n</var> in
source file <var>filename</var>. This command may change the current source file.

          <br><dt><var>function</var><dd>Print lines centered around beginning of the
function <var>function</var>. This command may change the current source file. 
</dl>

     <p><a name="index-debugger-commands_002c-_0040code_007bq_007d-_0028_0040code_007bquit_007d_0029-2036"></a><a name="index-debugger-commands_002c-_0040code_007bquit_007d-2037"></a><a name="index-g_t_0040code_007bquit_007d-debugger-command-2038"></a><a name="index-g_t_0040code_007bq_007d-debugger-command-_0028alias-for-_0040code_007bquit_007d_0029-2039"></a><br><dt><code>quit</code><dt><code>q</code><dd>Exit the debugger.  Debugging is great fun, but sometimes we all have
to tend to other obligations in life, and sometimes we find the bug,
and are free to go on to the next one!  As we saw above, if you are
running a program, <samp><span class="command">dgawk</span></samp> warns you if you accidentally type
&lsquo;<samp><span class="samp">q</span></samp>&rsquo; or &lsquo;<samp><span class="samp">quit</span></samp>&rsquo;, to make sure you really want to quit.

     <p><a name="index-debugger-commands_002c-_0040code_007btrace_007d-2040"></a><a name="index-g_t_0040code_007btrace_007d-debugger-command-2041"></a><br><dt><code>trace</code> <code>on</code> <span class="roman">|</span> <code>off</code><dd>Turn on or off a continuous printing of instructions which are about to
be executed, along with printing the <samp><span class="command">awk</span></samp> line which they
implement.  The default is <code>off</code>.

     <p>It is to be hoped that most of the &ldquo;opcodes&rdquo; in these instructions are
fairly self-explanatory, and using <code>stepi</code> and <code>nexti</code> while
<code>trace</code> is on will make them into familiar friends.

   </dl>

<div class="node">
<a name="Readline-Support"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Dgawk-Limitations">Dgawk Limitations</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#List-of-Debugger-Commands">List of Debugger Commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Debugger">Debugger</a>

</div>

<h3 class="section">14.4 Readline Support</h3>

<p>If <samp><span class="command">dgawk</span></samp> is compiled with the <code>readline</code> library, you
can take advantage of that library's command completion and history expansion
features. The following types of completion are available:

     <dl>
<dt>Command completion<dd>Command names.

     <br><dt>Source file name completion<dd>Source file names. Relevant commands are
<code>break</code>,
<code>clear</code>,
<code>list</code>,
<code>tbreak</code>,
and
<code>until</code>.

     <br><dt>Argument completion<dd>Non-numeric arguments to a command. 
Relevant commands are <code>enable</code> and <code>info</code>.

     <br><dt>Variable name completion<dd>Global variable names, and function arguments in the current context
if the program is running. Relevant commands are
<code>display</code>,
<code>print</code>,
<code>set</code>,
and
<code>watch</code>.

   </dl>

<div class="node">
<a name="Dgawk-Limitations"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Readline-Support">Readline Support</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Debugger">Debugger</a>

</div>

<h3 class="section">14.5 Limitations and Future Plans</h3>

<p>We hope you find <samp><span class="command">dgawk</span></samp> useful and enjoyable to work with,
but as with any program, especially in its early releases, it still has
some limitations.  A few which are worth being aware of are:

     <ul>
<li>At this point, <samp><span class="command">dgawk</span></samp> does not give a detailed explanation of
what you did wrong when you type in something it doesn't like. Rather, it just
responds &lsquo;<samp><span class="samp">syntax error</span></samp>&rsquo;.  When you do figure out what your mistake was,
though, you'll feel like a real guru.

     <li>If you perused the dump of opcodes in <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a>,
(or if you are already familiar with <samp><span class="command">gawk</span></samp> internals),
you will realize that much of the internal manipulation of data
in <samp><span class="command">gawk</span></samp>, as in many interpreters, is done on a stack. 
<code>Op_push</code>, <code>Op_pop</code>, etc., are the &ldquo;bread and butter&rdquo; of
most <samp><span class="command">gawk</span></samp> code.  Unfortunately, as of now, <samp><span class="command">dgawk</span></samp>
does not allow you to examine the stack's contents.

     <p>That is, the intermediate results of expression evaluation are on the
stack, but cannot be printed.  Rather, only variables which are defined
in the program can be printed.  Of course, a workaround for
this is to use more explicit variables at the debugging stage and then
change back to obscure, perhaps more optimal code later.

     <li>There is no way to look &ldquo;inside&rdquo; the process of compiling
regular expressions to see if you got it right.  As an <samp><span class="command">awk</span></samp>
programmer, you are expected to know what <code>/[^[:alnum:][:blank:]]/</code>
means.

     <li><samp><span class="command">dgawk</span></samp> is designed to be used by running a program (with all its
parameters) on the command line, as described in <a href="#dgawk-invocation">dgawk invocation</a>. 
There is no way (as of now) to attach or &ldquo;break in&rdquo; to a running program. 
This seems reasonable for a language which is used mainly for quickly
executing, short programs.

     <li><samp><span class="command">dgawk</span></samp> only accepts source supplied with the <samp><span class="option">-f</span></samp> option. 
</ul>

   <p>Look forward to a future release when these and other missing features may
be added, and of course feel free to try to add them yourself!

<div class="node">
<a name="Language-History"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Installation">Installation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Debugger">Debugger</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix A The Evolution of the <samp><span class="command">awk</span></samp> Language</h2>

<p>This Web page describes the GNU implementation of <samp><span class="command">awk</span></samp>, which follows
the POSIX specification. 
Many long-time <samp><span class="command">awk</span></samp> users learned <samp><span class="command">awk</span></samp> programming
with the original <samp><span class="command">awk</span></samp> implementation in Version 7 Unix. 
(This implementation was the basis for <samp><span class="command">awk</span></samp> in Berkeley Unix,
through 4.3-Reno.  Subsequent versions of Berkeley Unix, and some systems
derived from 4.4BSD-Lite, use various versions of <samp><span class="command">gawk</span></samp>
for their <samp><span class="command">awk</span></samp>.) 
This chapter briefly describes the
evolution of the <samp><span class="command">awk</span></samp> language, with cross-references to other parts
of the Web page where you can find more information.

<ul class="menu">
<li><a accesskey="1" href="#V7_002fSVR3_002e1">V7/SVR3.1</a>:                    The major changes between V7 and System V
                                Release 3.1. 
<li><a accesskey="2" href="#SVR4">SVR4</a>:                         Minor changes between System V Releases 3.1
                                and 4. 
<li><a accesskey="3" href="#POSIX">POSIX</a>:                        New features from the POSIX standard. 
<li><a accesskey="4" href="#BTL">BTL</a>:                          New features from Brian Kernighan's version of
                                <samp><span class="command">awk</span></samp>. 
<li><a accesskey="5" href="#POSIX_002fGNU">POSIX/GNU</a>:                    The extensions in <samp><span class="command">gawk</span></samp> not in POSIX
                                <samp><span class="command">awk</span></samp>. 
<li><a accesskey="6" href="#Common-Extensions">Common Extensions</a>:            Common Extensions Summary. 
<li><a accesskey="7" href="#Ranges-and-Locales">Ranges and Locales</a>:           How locales used to affect regexp ranges. 
<li><a accesskey="8" href="#Contributors">Contributors</a>:                 The major contributors to <samp><span class="command">gawk</span></samp>. 
</ul>

<div class="node">
<a name="V7%2fSVR3.1"></a>
<a name="V7_002fSVR3_002e1"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#SVR4">SVR4</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Language-History">Language History</a>

</div>

<h3 class="appendixsec">A.1 Major Changes Between V7 and SVR3.1</h3>

<!-- STARTOFRANGE gawkv -->
<p><a name="index-g_t_0040command_007bawk_007d_002c-versions-of-2042"></a><!-- STARTOFRANGE gawkv1 -->
<a name="index-g_t_0040command_007bawk_007d_002c-versions-of_002c-changes-between-V7-and-SVR3_002e1-2043"></a>
The <samp><span class="command">awk</span></samp> language evolved considerably between the release of
Version 7 Unix (1978) and the new version that was first made generally available in
System V Release 3.1 (1987).  This section summarizes the changes, with
cross-references to further details:

     <ul>
<li>The requirement for &lsquo;<samp><span class="samp">;</span></samp>&rsquo; to separate rules on a line
(see <a href="#Statements_002fLines">Statements/Lines</a>).

     <li>User-defined functions and the <code>return</code> statement
(see <a href="#User_002ddefined">User-defined</a>).

     <li>The <code>delete</code> statement (see <a href="#Delete">Delete</a>).

     <li>The <code>do</code>-<code>while</code> statement
(see <a href="#Do-Statement">Do Statement</a>).

     <li>The built-in functions <code>atan2()</code>, <code>cos()</code>, <code>sin()</code>, <code>rand()</code>, and
<code>srand()</code> (see <a href="#Numeric-Functions">Numeric Functions</a>).

     <li>The built-in functions <code>gsub()</code>, <code>sub()</code>, and <code>match()</code>
(see <a href="#String-Functions">String Functions</a>).

     <li>The built-in functions <code>close()</code> and <code>system()</code>
(see <a href="#I_002fO-Functions">I/O Functions</a>).

     <li>The <code>ARGC</code>, <code>ARGV</code>, <code>FNR</code>, <code>RLENGTH</code>, <code>RSTART</code>,
and <code>SUBSEP</code> built-in variables (see <a href="#Built_002din-Variables">Built-in Variables</a>).

     <li>Assignable <code>$0</code> (see <a href="#Changing-Fields">Changing Fields</a>).

     <li>The conditional expression using the ternary operator &lsquo;<samp><span class="samp">?:</span></samp>&rsquo;
(see <a href="#Conditional-Exp">Conditional Exp</a>).

     <li>The expression &lsquo;<samp><var>index-variable</var><span class="samp"> in </span><var>array</var></samp>&rsquo; outside of <code>for</code>
statements (see <a href="#Reference-to-Elements">Reference to Elements</a>).

     <li>The exponentiation operator &lsquo;<samp><span class="samp">^</span></samp>&rsquo;
(see <a href="#Arithmetic-Ops">Arithmetic Ops</a>) and its assignment operator
form &lsquo;<samp><span class="samp">^=</span></samp>&rsquo; (see <a href="#Assignment-Ops">Assignment Ops</a>).

     <li>C-compatible operator precedence, which breaks some old <samp><span class="command">awk</span></samp>
programs (see <a href="#Precedence">Precedence</a>).

     <li>Regexps as the value of <code>FS</code>
(see <a href="#Field-Separators">Field Separators</a>) and as the
third argument to the <code>split()</code> function
(see <a href="#String-Functions">String Functions</a>), rather than using only the first character
of <code>FS</code>.

     <li>Dynamic regexps as operands of the &lsquo;<samp><span class="samp">~</span></samp>&rsquo; and &lsquo;<samp><span class="samp">!~</span></samp>&rsquo; operators
(see <a href="#Regexp-Usage">Regexp Usage</a>).

     <li>The escape sequences &lsquo;<samp><span class="samp">\b</span></samp>&rsquo;, &lsquo;<samp><span class="samp">\f</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">\r</span></samp>&rsquo;
(see <a href="#Escape-Sequences">Escape Sequences</a>). 
(Some vendors have updated their old versions of <samp><span class="command">awk</span></samp> to
recognize &lsquo;<samp><span class="samp">\b</span></samp>&rsquo;, &lsquo;<samp><span class="samp">\f</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">\r</span></samp>&rsquo;, but this is not
something you can rely on.)

     <li>Redirection of input for the <code>getline</code> function
(see <a href="#Getline">Getline</a>).

     <li>Multiple <code>BEGIN</code> and <code>END</code> rules
(see <a href="#BEGIN_002fEND">BEGIN/END</a>).

     <li>Multidimensional arrays
(see <a href="#Multi_002ddimensional">Multi-dimensional</a>). 
</ul>
   <!-- ENDOFRANGE gawkv1 -->

<div class="node">
<a name="SVR4"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#POSIX">POSIX</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#V7_002fSVR3_002e1">V7/SVR3.1</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Language-History">Language History</a>

</div>

<h3 class="appendixsec">A.2 Changes Between SVR3.1 and SVR4</h3>

<p><a name="index-g_t_0040command_007bawk_007d_002c-versions-of_002c-changes-between-SVR3_002e1-and-SVR4-2044"></a>The System V Release 4 (1989) version of Unix <samp><span class="command">awk</span></samp> added these features
(some of which originated in <samp><span class="command">gawk</span></samp>):

     <ul>
<li>The <code>ENVIRON</code> array (see <a href="#Built_002din-Variables">Built-in Variables</a>). 
<!-- gawk and MKS awk -->

     <li>Multiple <samp><span class="option">-f</span></samp> options on the command line
(see <a href="#Options">Options</a>). 
<!-- MKS awk -->

     <li>The <samp><span class="option">-v</span></samp> option for assigning variables before program execution begins
(see <a href="#Options">Options</a>). 
<!-- GNU, Bell Laboratories & MKS together -->

     <li>The <samp><span class="option">--</span></samp> option for terminating command-line options.

     <li>The &lsquo;<samp><span class="samp">\a</span></samp>&rsquo;, &lsquo;<samp><span class="samp">\v</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">\x</span></samp>&rsquo; escape sequences
(see <a href="#Escape-Sequences">Escape Sequences</a>). 
<!-- GNU, for ANSI C compat -->

     <li>A defined return value for the <code>srand()</code> built-in function
(see <a href="#Numeric-Functions">Numeric Functions</a>).

     <li>The <code>toupper()</code> and <code>tolower()</code> built-in string functions
for case translation
(see <a href="#String-Functions">String Functions</a>).

     <li>A cleaner specification for the &lsquo;<samp><span class="samp">%c</span></samp>&rsquo; format-control letter in the
<code>printf</code> function
(see <a href="#Control-Letters">Control Letters</a>).

     <li>The ability to dynamically pass the field width and precision (<code>"%*.*d"</code>)
in the argument list of the <code>printf</code> function
(see <a href="#Control-Letters">Control Letters</a>).

     <li>The use of regexp constants, such as <code>/foo/</code>, as expressions, where
they are equivalent to using the matching operator, as in &lsquo;<samp><span class="samp">$0 ~ /foo/</span></samp>&rsquo;
(see <a href="#Using-Constant-Regexps">Using Constant Regexps</a>).

     <li>Processing of escape sequences inside command-line variable assignments
(see <a href="#Assignment-Options">Assignment Options</a>). 
</ul>

<div class="node">
<a name="POSIX"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#BTL">BTL</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#SVR4">SVR4</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Language-History">Language History</a>

</div>

<h3 class="appendixsec">A.3 Changes Between SVR4 and POSIX <samp><span class="command">awk</span></samp></h3>

<p><a name="index-g_t_0040command_007bawk_007d_002c-versions-of_002c-changes-between-SVR4-and-POSIX-_0040command_007bawk_007d-2045"></a><a name="index-POSIX-_0040command_007bawk_007d_002c-changes-in-_0040command_007bawk_007d-versions-2046"></a>
The POSIX Command Language and Utilities standard for <samp><span class="command">awk</span></samp> (1992)
introduced the following changes into the language:

     <ul>
<li>The use of <samp><span class="option">-W</span></samp> for implementation-specific options
(see <a href="#Options">Options</a>).

     <li>The use of <code>CONVFMT</code> for controlling the conversion of numbers
to strings (see <a href="#Conversion">Conversion</a>).

     <li>The concept of a numeric string and tighter comparison rules to go
with it (see <a href="#Typing-and-Comparison">Typing and Comparison</a>).

     <li>The use of built-in variables as function parameter names is forbidden
(see <a href="#Definition-Syntax">Definition Syntax</a>.

     <li>More complete documentation of many of the previously undocumented
features of the language. 
</ul>

   <p>See <a href="#Common-Extensions">Common Extensions</a>, for a list of common extensions
not permitted by the POSIX standard.

   <p>The 2008 POSIX standard can be found online at
<a href="http://www.opengroup.org/onlinepubs/9699919799/">http://www.opengroup.org/onlinepubs/9699919799/</a>.

<!-- ENDOFRANGE gawkv -->
<div class="node">
<a name="BTL"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#POSIX_002fGNU">POSIX/GNU</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#POSIX">POSIX</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Language-History">Language History</a>

</div>

<h3 class="appendixsec">A.4 Extensions in Brian Kernighan's <samp><span class="command">awk</span></samp></h3>

<p><a name="index-g_t_0040command_007bawk_007d_002c-versions-of_002c-See-Also-Brian-Kernighan_0027s-_0040command_007bawk_007d-2047"></a><a name="index-extensions_002c-Brian-Kernighan_0027s-_0040command_007bawk_007d-2048"></a><a name="index-Brian-Kernighan_0027s-_0040command_007bawk_007d_002c-extensions-2049"></a><a name="index-Kernighan_002c-Brian-2050"></a>Brian Kernighan
has made his version available via his home page
(see <a href="#Other-Versions">Other Versions</a>).

   <p>This section describes common extensions that
originally appeared in his version of <samp><span class="command">awk</span></samp>.

     <ul>
<li>The &lsquo;<samp><span class="samp">**</span></samp>&rsquo; and &lsquo;<samp><span class="samp">**=</span></samp>&rsquo; operators
(see <a href="#Arithmetic-Ops">Arithmetic Ops</a>
and
<a href="#Assignment-Ops">Assignment Ops</a>).

     <li>The use of <code>func</code> as an abbreviation for <code>function</code>
(see <a href="#Definition-Syntax">Definition Syntax</a>).

     <li>The <code>fflush()</code> built-in function for flushing buffered output
(see <a href="#I_002fO-Functions">I/O Functions</a>). 
As of December 2012, this function is now standardized by POSIX.

   </ul>

   <p>See <a href="#Common-Extensions">Common Extensions</a>, for a full list of the extensions
available in his <samp><span class="command">awk</span></samp>.

<div class="node">
<a name="POSIX%2fGNU"></a>
<a name="POSIX_002fGNU"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Common-Extensions">Common Extensions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#BTL">BTL</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Language-History">Language History</a>

</div>

<h3 class="appendixsec">A.5 Extensions in <samp><span class="command">gawk</span></samp> Not in POSIX <samp><span class="command">awk</span></samp></h3>

<!-- STARTOFRANGE fripls -->
<p><a name="index-compatibility-mode-_0028_0040command_007bgawk_007d_0029_002c-extensions-2051"></a><!-- STARTOFRANGE exgnot -->
<a name="index-extensions_002c-in-_0040command_007bgawk_007d_002c-not-in-POSIX-_0040command_007bawk_007d-2052"></a><!-- STARTOFRANGE posnot -->
<a name="index-POSIX_002c-_0040command_007bgawk_007d-extensions-not-included-in-2053"></a>The GNU implementation, <samp><span class="command">gawk</span></samp>, adds a large number of features. 
They can all be disabled with either the <samp><span class="option">--traditional</span></samp> or
<samp><span class="option">--posix</span></samp> options
(see <a href="#Options">Options</a>).

   <p>A number of features have come and gone over the years. This section
summarizes the additional features over POSIX <samp><span class="command">awk</span></samp> that are
in the current version of <samp><span class="command">gawk</span></samp>.

     <ul>
<li>Additional built-in variables:

          <ul>
<li>The
<code>ARGIND</code>
<code>BINMODE</code>,
<code>ERRNO</code>,
<code>FIELDWIDTHS</code>,
<code>FPAT</code>,
<code>IGNORECASE</code>,
<code>LINT</code>,
<code>PROCINFO</code>,
<code>RT</code>,
and
<code>TEXTDOMAIN</code>
variables
(see <a href="#Built_002din-Variables">Built-in Variables</a>). 
</ul>

     <li>Special files in I/O redirections:

          <ul>
<li>The <samp><span class="file">/dev/stdin</span></samp>, <samp><span class="file">/dev/stdout</span></samp>, <samp><span class="file">/dev/stderr</span></samp> and
<samp><span class="file">/dev/fd/</span><var>N</var></samp> special file names
(see <a href="#Special-Files">Special Files</a>).

          <li>The <samp><span class="file">/inet</span></samp>, <samp><span class="file">/inet4</span></samp>, and &lsquo;<samp><span class="samp">/inet6</span></samp>&rsquo; special files for
TCP/IP networking using &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; to specify which version of the
IP protocol to use. 
(see <a href="#TCP_002fIP-Networking">TCP/IP Networking</a>). 
</ul>

     <li>Changes and/or additions to the language:

          <ul>
<li>The &lsquo;<samp><span class="samp">\x</span></samp>&rsquo; escape sequence
(see <a href="#Escape-Sequences">Escape Sequences</a>).

          <li>Full support for both POSIX and GNU regexps
(see <a href="#Regexp">Regexp</a>).

          <li>The ability for <code>FS</code> and for the third
argument to <code>split()</code> to be null strings
(see <a href="#Single-Character-Fields">Single Character Fields</a>).

          <li>The ability for <code>RS</code> to be a regexp
(see <a href="#Records">Records</a>).

          <li>The ability to use octal and hexadecimal constants in <samp><span class="command">awk</span></samp>
program source code
(see <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>).

          <li>The &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operator for two-way I/O to a coprocess
(see <a href="#Two_002dway-I_002fO">Two-way I/O</a>).

          <li>Indirect function calls
(see <a href="#Indirect-Calls">Indirect Calls</a>).

          <li>Directories on the command line produce a warning and are skipped
(see <a href="#Command-line-directories">Command line directories</a>). 
</ul>

     <li>New keywords:

          <ul>
<li>The <code>BEGINFILE</code> and <code>ENDFILE</code> special patterns. 
(see <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a>).

          <li>The ability to delete all of an array at once with &lsquo;<samp><span class="samp">delete </span><var>array</var></samp>&rsquo;
(see <a href="#Delete">Delete</a>).

          <li>The <code>nextfile</code> statement
(see <a href="#Nextfile-Statement">Nextfile Statement</a>).

          <li>The <code>switch</code> statement
(see <a href="#Switch-Statement">Switch Statement</a>). 
</ul>

     <li>Changes to standard <samp><span class="command">awk</span></samp> functions:

          <ul>
<li>The optional second argument to <code>close()</code> that allows closing one end
of a two-way pipe to a coprocess
(see <a href="#Two_002dway-I_002fO">Two-way I/O</a>).

          <li>POSIX compliance for <code>gsub()</code> and <code>sub()</code>.

          <li>The <code>length()</code> function accepts an array argument
and returns the number of elements in the array
(see <a href="#String-Functions">String Functions</a>).

          <li>The optional third argument to the <code>match()</code> function
for capturing text-matching subexpressions within a regexp
(see <a href="#String-Functions">String Functions</a>).

          <li>Positional specifiers in <code>printf</code> formats for
making translations easier
(see <a href="#Printf-Ordering">Printf Ordering</a>).

          <li>The <code>split()</code> function's additional optional fourth
argument which is an array to hold the text of the field separators. 
(see <a href="#String-Functions">String Functions</a>). 
</ul>

     <li>Additional functions only in <samp><span class="command">gawk</span></samp>:

          <ul>
<li>The
<code>and()</code>,
<code>compl()</code>,
<code>lshift()</code>,
<code>or()</code>,
<code>rshift()</code>,
and
<code>xor()</code>
functions for bit manipulation
(see <a href="#Bitwise-Functions">Bitwise Functions</a>).

          <li>The <code>asort()</code> and <code>asorti()</code> functions for sorting arrays
(see <a href="#Array-Sorting">Array Sorting</a>).

          <li>The <code>bindtextdomain()</code>, <code>dcgettext()</code> and <code>dcngettext()</code>
functions for internationalization
(see <a href="#Programmer-i18n">Programmer i18n</a>).

          <li>The <code>extension()</code> built-in function and the ability to add
new functions dynamically
(see <a href="#Dynamic-Extensions">Dynamic Extensions</a>).

          <li>The <code>fflush()</code> function from Brian Kernighan's
version of <samp><span class="command">awk</span></samp>
(see <a href="#I_002fO-Functions">I/O Functions</a>).

          <li>The <code>gensub()</code>, <code>patsplit()</code>, and <code>strtonum()</code> functions
for more powerful text manipulation
(see <a href="#String-Functions">String Functions</a>).

          <li>The <code>mktime()</code>, <code>systime()</code>, and <code>strftime()</code>
functions for working with timestamps
(see <a href="#Time-Functions">Time Functions</a>). 
</ul>

     <li>Changes and/or additions in the command-line options:

          <ul>
<li>The <samp><span class="env">AWKPATH</span></samp> environment variable for specifying a path search for
the <samp><span class="option">-f</span></samp> command-line option
(see <a href="#Options">Options</a>).

          <li>The ability to use GNU-style long-named options that start with <samp><span class="option">--</span></samp>
and the
<samp><span class="option">--characters-as-bytes</span></samp>,
<samp><span class="option">--compat</span></samp>,
<samp><span class="option">--dump-variables</span></samp>,
<samp><span class="option">--exec</span></samp>,
<samp><span class="option">--gen-pot</span></samp>,
<samp><span class="option">--lint</span></samp>,
<samp><span class="option">--lint-old</span></samp>,
<samp><span class="option">--non-decimal-data</span></samp>,
<samp><span class="option">--posix</span></samp>,
<samp><span class="option">--profile</span></samp>,
<samp><span class="option">--re-interval</span></samp>,
<samp><span class="option">--sandbox</span></samp>,
<samp><span class="option">--source</span></samp>,
<samp><span class="option">--traditional</span></samp>,
and
<samp><span class="option">--use-lc-numeric</span></samp>
options
(see <a href="#Options">Options</a>). 
</ul>

     <!-- new ports -->
     <li>Support for the following obsolete systems was removed from the code
and the documentation for <samp><span class="command">gawk</span></samp> version 4.0:

     <!-- nested table -->
          <ul>
<li>Amiga

          <li>Atari

          <li>BeOS

          <li>Cray

          <li>MIPS RiscOS

          <li>MS-DOS with the Microsoft Compiler

          <li>MS-Windows with the Microsoft Compiler

          <li>NeXT

          <li>SunOS 3.x, Sun 386 (Road Runner)

          <li>Tandem (non-POSIX)

          <li>Prestandard VAX C compiler for VAX/VMS

     </ul>

   </ul>

<!-- XXX ADD MORE STUFF HERE -->
<!-- ENDOFRANGE fripls -->
<!-- ENDOFRANGE exgnot -->
<!-- ENDOFRANGE posnot -->
<div class="node">
<a name="Common-Extensions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Ranges-and-Locales">Ranges and Locales</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#POSIX_002fGNU">POSIX/GNU</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Language-History">Language History</a>

</div>

<h3 class="appendixsec">A.6 Common Extensions Summary</h3>

<p>This section summarizes the common extensions supported
by <samp><span class="command">gawk</span></samp>, Brian Kernighan's <samp><span class="command">awk</span></samp>, and <samp><span class="command">mawk</span></samp>,
the three most widely-used freely available versions of <samp><span class="command">awk</span></samp>
(see <a href="#Other-Versions">Other Versions</a>).

   <p><table summary=""><tr align="left"><th valign="top">Feature </th><th valign="top">BWK Awk </th><th valign="top">Mawk </th><th valign="top">GNU Awk
<br></th></tr><tr align="left"><td valign="top">&lsquo;<samp><span class="samp">\x</span></samp>&rsquo; Escape sequence </td><td valign="top">X </td><td valign="top">X </td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><code>RS</code> as regexp </td><td valign="top"></td><td valign="top">X </td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><code>FS</code> as null string </td><td valign="top">X </td><td valign="top">X </td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><samp><span class="file">/dev/stdin</span></samp> special file </td><td valign="top">X </td><td valign="top">X </td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><samp><span class="file">/dev/stdout</span></samp> special file </td><td valign="top">X </td><td valign="top">X </td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><samp><span class="file">/dev/stderr</span></samp> special file </td><td valign="top">X </td><td valign="top">X </td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><code>**</code> and <code>**=</code> operators </td><td valign="top">X </td><td valign="top"></td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><code>func</code> keyword </td><td valign="top">X </td><td valign="top"></td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><code>nextfile</code> statement </td><td valign="top">X </td><td valign="top">X </td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><code>delete</code> without subscript </td><td valign="top">X </td><td valign="top">X </td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><code>length()</code> of an array </td><td valign="top">X </td><td valign="top"></td><td valign="top">X
<br></td></tr><tr align="left"><td valign="top"><code>BINMODE</code> variable </td><td valign="top"></td><td valign="top">X </td><td valign="top">X
   <br></td></tr></table>

<div class="node">
<a name="Ranges-and-Locales"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Contributors">Contributors</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Common-Extensions">Common Extensions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Language-History">Language History</a>

</div>

<h3 class="appendixsec">A.7 Regexp Ranges and Locales: A Long Sad Story</h3>

<p>This section describes the confusing history of ranges within
regular expressions and their interactions with locales, and how this
affected different versions of <samp><span class="command">gawk</span></samp>.

   <p>The original Unix tools that worked with regular expressions defined
character ranges (such as &lsquo;<samp><span class="samp">[a-z]</span></samp>&rsquo;) to match any character between
the first character in the range and the last character in the range,
inclusive.  Ordering was based on the numeric value of each character
in the machine's native character set.  Thus, on ASCII-based systems,
<code>[a-z]</code> matched all the lowercase letters, and only the lowercase
letters, since the numeric values for the letters from &lsquo;<samp><span class="samp">a</span></samp>&rsquo; through
&lsquo;<samp><span class="samp">z</span></samp>&rsquo; were contiguous.  (On an EBCDIC system, the range &lsquo;<samp><span class="samp">[a-z]</span></samp>&rsquo;
includes additional, non-alphabetic characters as well.)

   <p>Almost all introductory Unix literature explained range expressions
as working in this fashion, and in particular, would teach that the
&ldquo;correct&rdquo; way to match lowercase letters was with &lsquo;<samp><span class="samp">[a-z]</span></samp>&rsquo;, and
that &lsquo;<samp><span class="samp">[A-Z]</span></samp>&rsquo; was the &ldquo;correct&rdquo; way to match uppercase letters. 
And indeed, this was true.<a rel="footnote" href="#fn-83" name="fnd-83"><sup>83</sup></a>

   <p>The 1993 POSIX standard introduced the idea of locales (see <a href="#Locales">Locales</a>). 
Since many locales include other letters besides the plain twenty-six
letters of the American English alphabet, the POSIX standard added
character classes (see <a href="#Bracket-Expressions">Bracket Expressions</a>) as a way to match
different kinds of characters besides the traditional ones in the ASCII
character set.

   <p>However, the standard <em>changed</em> the interpretation of range expressions. 
In the <code>"C"</code> and <code>"POSIX"</code> locales, a range expression like
&lsquo;<samp><span class="samp">[a-dx-z]</span></samp>&rsquo; is still equivalent to &lsquo;<samp><span class="samp">[abcdxyz]</span></samp>&rsquo;, as in ASCII. 
But outside those locales, the ordering was defined to be based on
<dfn>collation order</dfn>.

   <p>In many locales, &lsquo;<samp><span class="samp">A</span></samp>&rsquo; and &lsquo;<samp><span class="samp">a</span></samp>&rsquo; are both less than &lsquo;<samp><span class="samp">B</span></samp>&rsquo;. 
In other words, these locales sort characters in dictionary order,
and &lsquo;<samp><span class="samp">[a-dx-z]</span></samp>&rsquo; is typically not equivalent to &lsquo;<samp><span class="samp">[abcdxyz]</span></samp>&rsquo;;
instead it might be equivalent to &lsquo;<samp><span class="samp">[ABCXYabcdxyz]</span></samp>&rsquo;, for example.

   <p>This point needs to be emphasized: Much literature teaches that you should
use &lsquo;<samp><span class="samp">[a-z]</span></samp>&rsquo; to match a lowercase character.  But on systems with
non-ASCII locales, this also matched all of the uppercase characters
except &lsquo;<samp><span class="samp">A</span></samp>&rsquo; or &lsquo;<samp><span class="samp">Z</span></samp>&rsquo;!  This was a continuous cause of confusion, even well
into the twenty-first century.

   <p>To demonstrate these issues, the following example uses the <code>sub()</code>
function, which does text replacement (see <a href="#String-Functions">String Functions</a>).  Here,
the intent is to remove trailing uppercase characters:

<pre class="example">     $ <kbd>echo something1234abc | gawk-3.1.8 '{ sub("[A-Z]*$", ""); print }'</kbd>
     -| something1234a
</pre>
   <p class="noindent">This output is unexpected, since the &lsquo;<samp><span class="samp">bc</span></samp>&rsquo; at the end of
&lsquo;<samp><span class="samp">something1234abc</span></samp>&rsquo; should not normally match &lsquo;<samp><span class="samp">[A-Z]*</span></samp>&rsquo;. 
This result is due to the locale setting (and thus you may not see
it on your system).

   <p>Similar considerations apply to other ranges.  For example, &lsquo;<samp><span class="samp">["-/]</span></samp>&rsquo;
is perfectly valid in ASCII, but is not valid in many Unicode locales,
such as &lsquo;<samp><span class="samp">en_US.UTF-8</span></samp>&rsquo;.

   <p>Early versions of <samp><span class="command">gawk</span></samp> used regexp matching code that was not
locale aware, so ranges had their traditional interpretation.

   <p>When <samp><span class="command">gawk</span></samp> switched to using locale-aware regexp matchers,
the problems began; especially as both GNU/Linux and commercial Unix
vendors started implementing non-ASCII locales, <em>and making them
the default</em>.  Perhaps the most frequently asked question became something
like &ldquo;why does <code>[A-Z]</code> match lowercase letters?!?&rdquo;

   <p>This situation existed for close to 10 years, if not more, and
the <samp><span class="command">gawk</span></samp> maintainer grew weary of trying to explain that
<samp><span class="command">gawk</span></samp> was being nicely standards-compliant, and that the issue
was in the user's locale.  During the development of version 4.0,
he modified <samp><span class="command">gawk</span></samp> to always treat ranges in the original,
pre-POSIX fashion, unless <samp><span class="option">--posix</span></samp> was used (see <a href="#Options">Options</a>).<a rel="footnote" href="#fn-84" name="fnd-84"><sup>84</sup></a>

   <p>Fortunately, shortly before the final release of <samp><span class="command">gawk</span></samp> 4.0,
the maintainer learned that the 2008 standard had changed the
definition of ranges, such that outside the <code>"C"</code> and <code>"POSIX"</code>
locales, the meaning of range expressions was <em>undefined</em>.<a rel="footnote" href="#fn-85" name="fnd-85"><sup>85</sup></a>

   <p>By using this lovely technical term, the standard gives license
to implementors to implement ranges in whatever way they choose. 
The <samp><span class="command">gawk</span></samp> maintainer chose to apply the pre-POSIX meaning in all
cases: the default regexp matching; with <samp><span class="option">--traditional</span></samp>, and with
<samp><span class="option">--posix</span></samp>; in all cases, <samp><span class="command">gawk</span></samp> remains POSIX compliant.

<div class="node">
<a name="Contributors"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Ranges-and-Locales">Ranges and Locales</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Language-History">Language History</a>

</div>

<h3 class="appendixsec">A.8 Major Contributors to <samp><span class="command">gawk</span></samp></h3>

<p><a name="index-g_t_0040command_007bgawk_007d_002c-list-of-contributors-to-2054"></a><blockquote>
<i>Always give credit where credit is due.</i><br>
Anonymous
</blockquote>

   <p>This section names the major contributors to <samp><span class="command">gawk</span></samp>
and/or this Web page, in approximate chronological order:

     <ul>
<li><a name="index-Aho_002c-Alfred-2055"></a><a name="index-Weinberger_002c-Peter-2056"></a><a name="index-Kernighan_002c-Brian-2057"></a>Dr. Alfred V. Aho,
Dr. Peter J. Weinberger, and
Dr. Brian W. Kernighan, all of Bell Laboratories,
designed and implemented Unix <samp><span class="command">awk</span></samp>,
from which <samp><span class="command">gawk</span></samp> gets the majority of its feature set.

     <li><a name="index-Rubin_002c-Paul-2058"></a>Paul Rubin
did the initial design and implementation in 1986, and wrote
the first draft (around 40 pages) of this Web page.

     <li><a name="index-Fenlason_002c-Jay-2059"></a>Jay Fenlason
finished the initial implementation.

     <li><a name="index-Close_002c-Diane-2060"></a>Diane Close
revised the first draft of this Web page, bringing it
to around 90 pages.

     <li><a name="index-Stallman_002c-Richard-2061"></a>Richard Stallman
helped finish the implementation and the initial draft of this
Web page. 
He is also the founder of the FSF and the GNU project.

     <li><a name="index-Woods_002c-John-2062"></a>John Woods
contributed parts of the code (mostly fixes) in
the initial version of <samp><span class="command">gawk</span></samp>.

     <li><a name="index-Trueman_002c-David-2063"></a>In 1988,
David Trueman
took over primary maintenance of <samp><span class="command">gawk</span></samp>,
making it compatible with &ldquo;new&rdquo; <samp><span class="command">awk</span></samp>, and
greatly improving its performance.

     <li><a name="index-Kwok_002c-Conrad-2064"></a><a name="index-Garfinkle_002c-Scott-2065"></a><a name="index-Williams_002c-Kent-2066"></a>Conrad Kwok,
Scott Garfinkle,
and
Kent Williams
did the initial ports to MS-DOS with various versions of MSC.

     <li><a name="index-Rankin_002c-Pat-2067"></a>Pat Rankin
provided the VMS port and its documentation.

     <li><a name="index-Peterson_002c-Hal-2068"></a>Hal Peterson
provided help in porting <samp><span class="command">gawk</span></samp> to Cray systems. 
(This is no longer supported.)

     <li><a name="index-Rommel_002c-Kai-Uwe-2069"></a>Kai Uwe Rommel
provided the initial port to OS/2 and its documentation.

     <li><a name="index-Jaegermann_002c-Michal-2070"></a>Michal Jaegermann
provided the port to Atari systems and its documentation. 
(This port is no longer supported.) 
He continues to provide portability checking with DEC Alpha
systems, and has done a lot of work to make sure <samp><span class="command">gawk</span></samp>
works on non-32-bit systems.

     <li><a name="index-Fish_002c-Fred-2071"></a>Fred Fish
provided the port to Amiga systems and its documentation. 
(With Fred's sad passing, this is no longer supported.)

     <li><a name="index-Deifik_002c-Scott-2072"></a>Scott Deifik
currently maintains the MS-DOS port using DJGPP.

     <li><a name="index-Zaretskii_002c-Eli-2073"></a>Eli Zaretskii
currently maintains the MS-Windows port using MinGW.

     <li><a name="index-Grigera_002c-Juan-2074"></a>Juan Grigera
provided a port to Windows32 systems. 
(This is no longer supported.)

     <li><a name="index-Hankerson_002c-Darrel-2075"></a>For many years,
Dr. Darrel Hankerson
acted as coordinator for the various ports to different PC platforms
and created binary distributions for various PC operating systems. 
He was also instrumental in keeping the documentation up to date for
the various PC platforms.

     <li><a name="index-Zoulas_002c-Christos-2076"></a>Christos Zoulas
provided the <code>extension()</code>
built-in function for dynamically adding new modules.

     <li><a name="index-Kahrs_002c-J_0040_0022urgen-2077"></a>J&uuml;rgen Kahrs
contributed the initial version of the TCP/IP networking
code and documentation, and motivated the inclusion of the &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operator.

     <li><a name="index-Davies_002c-Stephen-2078"></a>Stephen Davies
provided the initial port to Tandem systems and its documentation. 
(However, this is no longer supported.) 
He was also instrumental in the initial work to integrate the
byte-code internals into the <samp><span class="command">gawk</span></samp> code base.

     <li><a name="index-Woehlke_002c-Matthew-2079"></a>Matthew Woehlke
provided improvements for Tandem's POSIX-compliant systems.

     <li><a name="index-Brown_002c-Martin-2080"></a>Martin Brown
provided the port to BeOS and its documentation. 
(This is no longer supported.)

     <li><a name="index-Peters_002c-Arno-2081"></a>Arno Peters
did the initial work to convert <samp><span class="command">gawk</span></samp> to use
GNU Automake and GNU <code>gettext</code>.

     <li><a name="index-Broder_002c-Alan-J_002e_0040_003a-2082"></a>Alan J. Broder
provided the initial version of the <code>asort()</code> function
as well as the code for the optional third argument to the
<code>match()</code> function.

     <li><a name="index-Buening_002c-Andreas-2083"></a>Andreas Buening
updated the <samp><span class="command">gawk</span></samp> port for OS/2.

     <li><a name="index-Hasegawa_002c-Isamu-2084"></a>Isamu Hasegawa,
of IBM in Japan, contributed support for multibyte characters.

     <li><a name="index-Benzinger_002c-Michael-2085"></a>Michael Benzinger contributed the initial code for <code>switch</code> statements.

     <li><a name="index-McPhee_002c-Patrick-2086"></a>Patrick T.J. McPhee contributed the code for dynamic loading in Windows32
environments. 
(This is no longer supported)

     <li><a name="index-Haque_002c-John-2087"></a>John Haque
reworked the <samp><span class="command">gawk</span></samp> internals to use a byte-code engine,
providing the <samp><span class="command">dgawk</span></samp> debugger for <samp><span class="command">awk</span></samp> programs.

     <li><a name="index-Yawitz_002c-Efraim-2088"></a>Efraim Yawitz contributed the original text for <a href="#Debugger">Debugger</a>.

     <li><a name="index-Robbins_002c-Arnold-2089"></a>Arnold Robbins
has been working on <samp><span class="command">gawk</span></samp> since 1988, at first
helping David Trueman, and as the primary maintainer since around 1994. 
</ul>

<div class="node">
<a name="Installation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Notes">Notes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Language-History">Language History</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix B Installing <samp><span class="command">gawk</span></samp></h2>

<!-- last two commas are part of see also -->
<p><a name="index-operating-systems_002c-See-Also-GNU_002fLinux_002c-PC-operating-systems_002c-Unix-2090"></a><!-- STARTOFRANGE gligawk -->
<a name="index-g_t_0040command_007bgawk_007d_002c-installing-2091"></a><!-- STARTOFRANGE ingawk -->
<a name="index-installing-_0040command_007bgawk_007d-2092"></a>This appendix provides instructions for installing <samp><span class="command">gawk</span></samp> on the
various platforms that are supported by the developers.  The primary
developer supports GNU/Linux (and Unix), whereas the other ports are
contributed. 
See <a href="#Bugs">Bugs</a>,
for the electronic mail addresses of the people who did
the respective ports.

<ul class="menu">
<li><a accesskey="1" href="#Gawk-Distribution">Gawk Distribution</a>:            What is in the <samp><span class="command">gawk</span></samp> distribution. 
<li><a accesskey="2" href="#Unix-Installation">Unix Installation</a>:            Installing <samp><span class="command">gawk</span></samp> under various
                                versions of Unix. 
<li><a accesskey="3" href="#Non_002dUnix-Installation">Non-Unix Installation</a>:        Installation on Other Operating Systems. 
<li><a accesskey="4" href="#Bugs">Bugs</a>:                         Reporting Problems and Bugs. 
<li><a accesskey="5" href="#Other-Versions">Other Versions</a>:               Other freely available <samp><span class="command">awk</span></samp>
                                implementations. 
</ul>

<div class="node">
<a name="Gawk-Distribution"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Unix-Installation">Unix Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installation">Installation</a>

</div>

<h3 class="appendixsec">B.1 The <samp><span class="command">gawk</span></samp> Distribution</h3>

<p><a name="index-source-code_002c-_0040command_007bgawk_007d-2093"></a>
This section describes how to get the <samp><span class="command">gawk</span></samp>
distribution, how to extract it, and then what is in the various files and
subdirectories.

<ul class="menu">
<li><a accesskey="1" href="#Getting">Getting</a>:                      How to get the distribution. 
<li><a accesskey="2" href="#Extracting">Extracting</a>:                   How to extract the distribution. 
<li><a accesskey="3" href="#Distribution-contents">Distribution contents</a>:        What is in the distribution. 
</ul>

<div class="node">
<a name="Getting"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Extracting">Extracting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Gawk-Distribution">Gawk Distribution</a>

</div>

<h4 class="appendixsubsec">B.1.1 Getting the <samp><span class="command">gawk</span></samp> Distribution</h4>

<p><a name="index-g_t_0040command_007bgawk_007d_002c-source-code_0040comma_007b_007d-obtaining-2094"></a>There are three ways to get GNU software:

     <ul>
<li>Copy it from someone else who already has it.

     <p><a name="index-FSF-_0028Free-Software-Foundation_0029-2095"></a><a name="index-Free-Software-Foundation-_0028FSF_0029-2096"></a><li>Retrieve <samp><span class="command">gawk</span></samp>
from the Internet host
<code>ftp.gnu.org</code>, in the directory <samp><span class="file">/gnu/gawk</span></samp>. 
Both anonymous <samp><span class="command">ftp</span></samp> and <code>http</code> access are supported. 
If you have the <samp><span class="command">wget</span></samp> program, you can use a command like
the following:

     <pre class="example">          wget http://ftp.gnu.org/gnu/gawk/gawk-4.0.2.tar.gz
</pre>
     </ul>

   <p>The GNU software archive is mirrored around the world. 
The up-to-date list of mirror sites is available from
<a href="http://www.gnu.org/order/ftp.html">the main FSF web site</a>. 
Try to use one of the mirrors; they
will be less busy, and you can usually find one closer to your site.

<div class="node">
<a name="Extracting"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Distribution-contents">Distribution contents</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Getting">Getting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Gawk-Distribution">Gawk Distribution</a>

</div>

<h4 class="appendixsubsec">B.1.2 Extracting the Distribution</h4>

<p><samp><span class="command">gawk</span></samp> is distributed as several <code>tar</code> files compressed with
different compression programs: <samp><span class="command">gzip</span></samp>, <samp><span class="command">bzip2</span></samp>,
and <samp><span class="command">xz</span></samp>. For simplicity, the rest of these instructions assume
you are using the one compressed with the GNU Zip program, <code>gzip</code>.

   <p>Once you have the distribution (for example,
<samp><span class="file">gawk-4.0.2.tar.gz</span></samp>),
use <code>gzip</code> to expand the
file and then use <code>tar</code> to extract it.  You can use the following
pipeline to produce the <samp><span class="command">gawk</span></samp> distribution:

<pre class="example">     # Under System V, add 'o' to the tar options
     gzip -d -c gawk-4.0.2.tar.gz | tar -xvpf -
</pre>
   <p>On a system with GNU <samp><span class="command">tar</span></samp>, you can let <samp><span class="command">tar</span></samp>
do the decompression for you:

<pre class="example">     tar -xvpzf gawk-4.0.2.tar.gz
</pre>
   <p class="noindent">Extracting the archive
creates a directory named <samp><span class="file">gawk-4.0.2</span></samp>
in the current directory.

   <p>The distribution file name is of the form
<samp><span class="file">gawk-</span><var>V</var><span class="file">.</span><var>R</var><span class="file">.</span><var>P</var><span class="file">.tar.gz</span></samp>. 
The <var>V</var> represents the major version of <samp><span class="command">gawk</span></samp>,
the <var>R</var> represents the current release of version <var>V</var>, and
the <var>P</var> represents a <dfn>patch level</dfn>, meaning that minor bugs have
been fixed in the release.  The current patch level is 2,
but when retrieving distributions, you should get the version with the highest
version, release, and patch level.  (Note, however, that patch levels greater than
or equal to 70 denote &ldquo;beta&rdquo; or nonproduction software; you might not want
to retrieve such a version unless you don't mind experimenting.) 
If you are not on a Unix or GNU/Linux system, you need to make other arrangements
for getting and extracting the <samp><span class="command">gawk</span></samp> distribution.  You should consult
a local expert.

<div class="node">
<a name="Distribution-contents"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Extracting">Extracting</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Gawk-Distribution">Gawk Distribution</a>

</div>

<h4 class="appendixsubsec">B.1.3 Contents of the <samp><span class="command">gawk</span></samp> Distribution</h4>

<!-- STARTOFRANGE gawdis -->
<p><a name="index-g_t_0040command_007bgawk_007d_002c-distribution-2097"></a>
The <samp><span class="command">gawk</span></samp> distribution has a number of C source files,
documentation files,
subdirectories, and files related to the configuration process
(see <a href="#Unix-Installation">Unix Installation</a>),
as well as several subdirectories related to different non-Unix
operating systems:

     <dl>
<dt>Various &lsquo;<samp><span class="samp">.c</span></samp>&rsquo;, &lsquo;<samp><span class="samp">.y</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">.h</span></samp>&rsquo; files<dd>The actual <samp><span class="command">gawk</span></samp> source code. 
</dl>

     <dl>
<dt><samp><span class="file">README</span></samp><dt><samp><span class="file">README_d/README.*</span></samp><dd>Descriptive files: <samp><span class="file">README</span></samp> for <samp><span class="command">gawk</span></samp> under Unix and the
rest for the various hardware and software combinations.

     <br><dt><samp><span class="file">INSTALL</span></samp><dd>A file providing an overview of the configuration and installation process.

     <br><dt><samp><span class="file">ChangeLog</span></samp><dd>A detailed list of source code changes as bugs are fixed or improvements made.

     <br><dt><samp><span class="file">ChangeLog.0</span></samp><dd>An older list of source code changes.

     <br><dt><samp><span class="file">NEWS</span></samp><dd>A list of changes to <samp><span class="command">gawk</span></samp> since the last release or patch.

     <br><dt><samp><span class="file">NEWS.0</span></samp><dd>An older list of changes to <samp><span class="command">gawk</span></samp>.

     <br><dt><samp><span class="file">COPYING</span></samp><dd>The GNU General Public License.

     <br><dt><samp><span class="file">FUTURES</span></samp><dd>A brief list of features and changes being contemplated for future
releases, with some indication of the time frame for the feature, based
on its difficulty.

     <br><dt><samp><span class="file">LIMITATIONS</span></samp><dd>A list of those factors that limit <samp><span class="command">gawk</span></samp>'s performance. 
Most of these depend on the hardware or operating system software and
are not limits in <samp><span class="command">gawk</span></samp> itself.

     <br><dt><samp><span class="file">POSIX.STD</span></samp><dd>A description of behaviors in the POSIX standard for <samp><span class="command">awk</span></samp> which
are left undefined, or where <samp><span class="command">gawk</span></samp> may not comply fully, as well
as a list of things that the POSIX standard should describe but does not.

     <p><a name="index-artificial-intelligence_0040comma_007b_007d-_0040command_007bgawk_007d-and-2098"></a><br><dt><samp><span class="file">doc/awkforai.txt</span></samp><dd>Pointers to the original draft of
a short article describing why <samp><span class="command">gawk</span></samp> is a good language for
Artificial Intelligence (AI) programming.

     <br><dt><samp><span class="file">doc/bc_notes</span></samp><dd>A brief description of <samp><span class="command">gawk</span></samp>'s &ldquo;byte code&rdquo; internals.

     <br><dt><samp><span class="file">doc/README.card</span></samp><dt><samp><span class="file">doc/ad.block</span></samp><dt><samp><span class="file">doc/awkcard.in</span></samp><dt><samp><span class="file">doc/cardfonts</span></samp><dt><samp><span class="file">doc/colors</span></samp><dt><samp><span class="file">doc/macros</span></samp><dt><samp><span class="file">doc/no.colors</span></samp><dt><samp><span class="file">doc/setter.outline</span></samp><dd>The <samp><span class="command">troff</span></samp> source for a five-color <samp><span class="command">awk</span></samp> reference card. 
A modern version of <samp><span class="command">troff</span></samp> such as GNU <samp><span class="command">troff</span></samp> (<samp><span class="command">groff</span></samp>) is
needed to produce the color version. See the file <samp><span class="file">README.card</span></samp>
for instructions if you have an older <samp><span class="command">troff</span></samp>.

     <br><dt><samp><span class="file">doc/gawk.1</span></samp><dd>The <samp><span class="command">troff</span></samp> source for a manual page describing <samp><span class="command">gawk</span></samp>. 
This is distributed for the convenience of Unix users.

     <p><a name="index-Texinfo-2099"></a><br><dt><samp><span class="file">doc/gawk.texi</span></samp><dd>The Texinfo source file for this Web page. 
It should be processed with TeX
(via <samp><span class="command">texi2dvi</span></samp> or <samp><span class="command">texi2pdf</span></samp>)
to produce a printed document, and
with <samp><span class="command">makeinfo</span></samp> to produce an Info or HTML file.

     <br><dt><samp><span class="file">doc/gawk.info</span></samp><dd>The generated Info file for this Web page.

     <br><dt><samp><span class="file">doc/gawkinet.texi</span></samp><dd>The Texinfo source file for
<cite>TCP/IP Internetworking with </cite><samp><span class="command">gawk</span></samp>. 
It should be processed with TeX
(via <samp><span class="command">texi2dvi</span></samp> or <samp><span class="command">texi2pdf</span></samp>)
to produce a printed document and
with <samp><span class="command">makeinfo</span></samp> to produce an Info or HTML file.

     <br><dt><samp><span class="file">doc/gawkinet.info</span></samp><dd>The generated Info file for
<cite>TCP/IP Internetworking with </cite><samp><span class="command">gawk</span></samp>.

     <br><dt><samp><span class="file">doc/igawk.1</span></samp><dd>The <samp><span class="command">troff</span></samp> source for a manual page describing the <samp><span class="command">igawk</span></samp>
program presented in
<a href="#Igawk-Program">Igawk Program</a>.

     <br><dt><samp><span class="file">doc/Makefile.in</span></samp><dd>The input file used during the configuration process to generate the
actual <samp><span class="file">Makefile</span></samp> for creating the documentation.

     <br><dt><samp><span class="file">Makefile.am</span></samp><dt><samp><span class="file">*/Makefile.am</span></samp><dd>Files used by the GNU <samp><span class="command">automake</span></samp> software for generating
the <samp><span class="file">Makefile.in</span></samp> files used by <samp><span class="command">autoconf</span></samp> and
<samp><span class="command">configure</span></samp>.

     <br><dt><samp><span class="file">Makefile.in</span></samp><dt><samp><span class="file">aclocal.m4</span></samp><dt><samp><span class="file">configh.in</span></samp><dt><samp><span class="file">configure.ac</span></samp><dt><samp><span class="file">configure</span></samp><dt><samp><span class="file">custom.h</span></samp><dt><samp><span class="file">missing_d/*</span></samp><dt><samp><span class="file">m4/*</span></samp><dd>These files and subdirectories are used when configuring <samp><span class="command">gawk</span></samp>
for various Unix systems.  They are explained in
<a href="#Unix-Installation">Unix Installation</a>.

     <br><dt><samp><span class="file">po/*</span></samp><dd>The <samp><span class="file">po</span></samp> library contains message translations.

     <br><dt><samp><span class="file">awklib/extract.awk</span></samp><dt><samp><span class="file">awklib/Makefile.am</span></samp><dt><samp><span class="file">awklib/Makefile.in</span></samp><dt><samp><span class="file">awklib/eg/*</span></samp><dd>The <samp><span class="file">awklib</span></samp> directory contains a copy of <samp><span class="file">extract.awk</span></samp>
(see <a href="#Extract-Program">Extract Program</a>),
which can be used to extract the sample programs from the Texinfo
source file for this Web page. It also contains a <samp><span class="file">Makefile.in</span></samp> file, which
<samp><span class="command">configure</span></samp> uses to generate a <samp><span class="file">Makefile</span></samp>. 
<samp><span class="file">Makefile.am</span></samp> is used by GNU Automake to create <samp><span class="file">Makefile.in</span></samp>. 
The library functions from
<a href="#Library-Functions">Library Functions</a>,
and the <samp><span class="command">igawk</span></samp> program from
<a href="#Igawk-Program">Igawk Program</a>,
are included as ready-to-use files in the <samp><span class="command">gawk</span></samp> distribution. 
They are installed as part of the installation process. 
The rest of the programs in this Web page are available in appropriate
subdirectories of <samp><span class="file">awklib/eg</span></samp>.

     <br><dt><samp><span class="file">posix/*</span></samp><dd>Files needed for building <samp><span class="command">gawk</span></samp> on POSIX-compliant systems.

     <br><dt><samp><span class="file">pc/*</span></samp><dd>Files needed for building <samp><span class="command">gawk</span></samp> under MS-Windows and OS/2
(see <a href="#PC-Installation">PC Installation</a>, for details).

     <br><dt><samp><span class="file">vms/*</span></samp><dd>Files needed for building <samp><span class="command">gawk</span></samp> under VMS
(see <a href="#VMS-Installation">VMS Installation</a>, for details).

     <br><dt><samp><span class="file">test/*</span></samp><dd>A test suite for
<samp><span class="command">gawk</span></samp>.  You can use &lsquo;<samp><span class="samp">make check</span></samp>&rsquo; from the top-level <samp><span class="command">gawk</span></samp>
directory to run your version of <samp><span class="command">gawk</span></samp> against the test suite. 
If <samp><span class="command">gawk</span></samp> successfully passes &lsquo;<samp><span class="samp">make check</span></samp>&rsquo;, then you can
be confident of a successful port. 
</dl>
   <!-- ENDOFRANGE gawdis -->

<div class="node">
<a name="Unix-Installation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Non_002dUnix-Installation">Non-Unix Installation</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Gawk-Distribution">Gawk Distribution</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installation">Installation</a>

</div>

<h3 class="appendixsec">B.2 Compiling and Installing <samp><span class="command">gawk</span></samp> on Unix-like Systems</h3>

<p>Usually, you can compile and install <samp><span class="command">gawk</span></samp> by typing only two
commands.  However, if you use an unusual system, you may need
to configure <samp><span class="command">gawk</span></samp> for your system yourself.

<ul class="menu">
<li><a accesskey="1" href="#Quick-Installation">Quick Installation</a>:                Compiling <samp><span class="command">gawk</span></samp> under Unix. 
<li><a accesskey="2" href="#Additional-Configuration-Options">Additional Configuration Options</a>:  Other compile-time options. 
<li><a accesskey="3" href="#Configuration-Philosophy">Configuration Philosophy</a>:          How it's all supposed to work. 
</ul>

<div class="node">
<a name="Quick-Installation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Additional-Configuration-Options">Additional Configuration Options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Unix-Installation">Unix Installation</a>

</div>

<h4 class="appendixsubsec">B.2.1 Compiling <samp><span class="command">gawk</span></samp> for Unix-like Systems</h4>

<p>The normal installation steps should work on all modern commercial
Unix-derived systems, GNU/Linux, BSD-based systems, and the Cygwin
environment for MS-Windows.

   <p>After you have extracted the <samp><span class="command">gawk</span></samp> distribution, <samp><span class="command">cd</span></samp>
to <samp><span class="file">gawk-4.0.2</span></samp>.  Like most GNU software,
<samp><span class="command">gawk</span></samp> is configured
automatically for your system by running the <samp><span class="command">configure</span></samp> program. 
This program is a Bourne shell script that is generated automatically using
GNU <samp><span class="command">autoconf</span></samp>. 
(The <samp><span class="command">autoconf</span></samp> software is
described fully in
<cite>Autoconf&mdash;Generating Automatic Configuration Scripts</cite>,
which can be found online at
<a href="http://www.gnu.org/software/autoconf/manual/index.html">the Free Software Foundation's web site</a>.)

   <p>To configure <samp><span class="command">gawk</span></samp>, simply run <samp><span class="command">configure</span></samp>:

<pre class="example">     sh ./configure
</pre>
   <p>This produces a <samp><span class="file">Makefile</span></samp> and <samp><span class="file">config.h</span></samp> tailored to your system. 
The <samp><span class="file">config.h</span></samp> file describes various facts about your system. 
You might want to edit the <samp><span class="file">Makefile</span></samp> to
change the <code>CFLAGS</code> variable, which controls
the command-line options that are passed to the C compiler (such as
optimization levels or compiling for debugging).

   <p>Alternatively, you can add your own values for most <samp><span class="command">make</span></samp>
variables on the command line, such as <code>CC</code> and <code>CFLAGS</code>, when
running <samp><span class="command">configure</span></samp>:

<pre class="example">     CC=cc CFLAGS=-g sh ./configure
</pre>
   <p class="noindent">See the file <samp><span class="file">INSTALL</span></samp> in the <samp><span class="command">gawk</span></samp> distribution for
all the details.

   <p>After you have run <samp><span class="command">configure</span></samp> and possibly edited the <samp><span class="file">Makefile</span></samp>,
type:

<pre class="example">     make
</pre>
   <p class="noindent">Shortly thereafter, you should have an executable version of <samp><span class="command">gawk</span></samp>. 
That's all there is to it! 
To verify that <samp><span class="command">gawk</span></samp> is working properly,
run &lsquo;<samp><span class="samp">make check</span></samp>&rsquo;.  All of the tests should succeed. 
If these steps do not work, or if any of the tests fail,
check the files in the <samp><span class="file">README_d</span></samp> directory to see if you've
found a known problem.  If the failure is not described there,
please send in a bug report (see <a href="#Bugs">Bugs</a>).

<div class="node">
<a name="Additional-Configuration-Options"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Configuration-Philosophy">Configuration Philosophy</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Quick-Installation">Quick Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Unix-Installation">Unix Installation</a>

</div>

<h4 class="appendixsubsec">B.2.2 Additional Configuration Options</h4>

<p><a name="index-g_t_0040command_007bgawk_007d_002c-configuring_002c-options-2100"></a><a name="index-configuration-options_0040comma_007b_007d-_0040command_007bgawk_007d-2101"></a>
There are several additional options you may use on the <samp><span class="command">configure</span></samp>
command line when compiling <samp><span class="command">gawk</span></samp> from scratch, including:

     
<a name="index-g_t_0040code_007b_002d_002ddisable_002dlint_007d-configuration-option-2102"></a>
<a name="index-configuration-option_002c-_0040code_007b_002d_002ddisable_002dlint_007d-2103"></a>
<dl><dt><code>--disable-lint</code><dd>Disable all lint checking within <code>gawk</code>.  The
<samp><span class="option">--lint</span></samp> and <samp><span class="option">--lint-old</span></samp> options
(see <a href="#Options">Options</a>)
are accepted, but silently do nothing. 
Similarly, setting the <code>LINT</code> variable
(see <a href="#User_002dmodified">User-modified</a>)
has no effect on the running <samp><span class="command">awk</span></samp> program.

     <p>When used with GCC's automatic dead-code-elimination, this option
cuts almost 200K bytes off the size of the <samp><span class="command">gawk</span></samp>
executable on GNU/Linux x86 systems.  Results on other systems and
with other compilers are likely to vary. 
Using this option may bring you some slight performance improvement.

     <p>Using this option will cause some of the tests in the test suite
to fail.  This option may be removed at a later date.

     <p><a name="index-g_t_0040code_007b_002d_002ddisable_002dnls_007d-configuration-option-2104"></a><a name="index-configuration-option_002c-_0040code_007b_002d_002ddisable_002dnls_007d-2105"></a><br><dt><code>--disable-nls</code><dd>Disable all message-translation facilities. 
This is usually not desirable, but it may bring you some slight performance
improvement.

     <p><a name="index-g_t_0040code_007b_002d_002dwith_002dwhiny_002duser_002dstrftime_007d-configuration-option-2106"></a><a name="index-configuration-option_002c-_0040code_007b_002d_002dwith_002dwhiny_002duser_002dstrftime_007d-2107"></a><br><dt><code>--with-whiny-user-strftime</code><dd>Force use of the included version of the <code>strftime()</code>
function for deficient systems. 
</dl>

   <p>Use the command &lsquo;<samp><span class="samp">./configure --help</span></samp>&rsquo; to see the full list of
options that <samp><span class="command">configure</span></samp> supplies.

<div class="node">
<a name="Configuration-Philosophy"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Additional-Configuration-Options">Additional Configuration Options</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Unix-Installation">Unix Installation</a>

</div>

<h4 class="appendixsubsec">B.2.3 The Configuration Process</h4>

<p><a name="index-g_t_0040command_007bgawk_007d_002c-configuring-2108"></a>This section is of interest only if you know something about using the
C language and Unix-like operating systems.

   <p>The source code for <samp><span class="command">gawk</span></samp> generally attempts to adhere to formal
standards wherever possible.  This means that <samp><span class="command">gawk</span></samp> uses library
routines that are specified by the ISO C standard and by the POSIX
operating system interface standard. 
The <samp><span class="command">gawk</span></samp> source code requires using an ISO C compiler (the 1990
standard).

   <p>Many Unix systems do not support all of either the ISO or the
POSIX standards.  The <samp><span class="file">missing_d</span></samp> subdirectory in the <samp><span class="command">gawk</span></samp>
distribution contains replacement versions of those functions that are
most likely to be missing.

   <p>The <samp><span class="file">config.h</span></samp> file that <samp><span class="command">configure</span></samp> creates contains
definitions that describe features of the particular operating system
where you are attempting to compile <samp><span class="command">gawk</span></samp>.  The three things
described by this file are: what header files are available, so that
they can be correctly included, what (supposedly) standard functions
are actually available in your C libraries, and various miscellaneous
facts about your operating system.  For example, there may not be an
<code>st_blksize</code> element in the <code>stat</code> structure.  In this case,
&lsquo;<samp><span class="samp">HAVE_ST_BLKSIZE</span></samp>&rsquo; is undefined.

   <p><a name="index-g_t_0040code_007bcustom_002eh_007d-file-2109"></a>It is possible for your C compiler to lie to <samp><span class="command">configure</span></samp>. It may
do so by not exiting with an error when a library function is not
available.  To get around this, edit the file <samp><span class="file">custom.h</span></samp>. 
Use an &lsquo;<samp><span class="samp">#ifdef</span></samp>&rsquo; that is appropriate for your system, and either
<code>#define</code> any constants that <samp><span class="command">configure</span></samp> should have defined but
didn't, or <code>#undef</code> any constants that <samp><span class="command">configure</span></samp> defined and
should not have.  <samp><span class="file">custom.h</span></samp> is automatically included by
<samp><span class="file">config.h</span></samp>.

   <p>It is also possible that the <samp><span class="command">configure</span></samp> program generated by
<samp><span class="command">autoconf</span></samp> will not work on your system in some other fashion. 
If you do have a problem, the file <samp><span class="file">configure.ac</span></samp> is the input for
<samp><span class="command">autoconf</span></samp>.  You may be able to change this file and generate a
new version of <samp><span class="command">configure</span></samp> that works on your system
(see <a href="#Bugs">Bugs</a>,
for information on how to report problems in configuring <samp><span class="command">gawk</span></samp>). 
The same mechanism may be used to send in updates to <samp><span class="file">configure.ac</span></samp>
and/or <samp><span class="file">custom.h</span></samp>.

<div class="node">
<a name="Non-Unix-Installation"></a>
<a name="Non_002dUnix-Installation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Bugs">Bugs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Unix-Installation">Unix Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installation">Installation</a>

</div>

<h3 class="appendixsec">B.3 Installation on Other Operating Systems</h3>

<p>This section describes how to install <samp><span class="command">gawk</span></samp> on
various non-Unix systems.

<ul class="menu">
<li><a accesskey="1" href="#PC-Installation">PC Installation</a>:              Installing and Compiling <samp><span class="command">gawk</span></samp> on
                                MS-DOS and OS/2. 
<li><a accesskey="2" href="#VMS-Installation">VMS Installation</a>:             Installing <samp><span class="command">gawk</span></samp> on VMS. 
</ul>

<!-- Rewritten by Scott Deifik <scottd.mail@sbcglobal.net> -->
<!-- and Darrel Hankerson <hankedr@mail.auburn.edu> -->
<div class="node">
<a name="PC-Installation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#VMS-Installation">VMS Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Non_002dUnix-Installation">Non-Unix Installation</a>

</div>

<h4 class="appendixsubsec">B.3.1 Installation on PC Operating Systems</h4>

<p><a name="index-PC-operating-systems_0040comma_007b_007d-_0040command_007bgawk_007d-on_002c-installing-2110"></a><a name="index-operating-systems_002c-PC_0040comma_007b_007d-_0040command_007bgawk_007d-on_002c-installing-2111"></a>This section covers installation and usage of <samp><span class="command">gawk</span></samp> on x86 machines
running MS-DOS, any version of MS-Windows, or OS/2. 
In this section, the term &ldquo;Windows32&rdquo;
refers to any of Microsoft Windows-95/98/ME/NT/2000/XP/Vista/7.

   <p>The limitations of MS-DOS (and MS-DOS shells under Windows32 or OS/2) has meant
that various &ldquo;DOS extenders&rdquo; are often used with programs such as
<samp><span class="command">gawk</span></samp>.  The varying capabilities of Microsoft Windows 3.1
and Windows32 can add to the confusion.  For an overview of the
considerations, please refer to <samp><span class="file">README_d/README.pc</span></samp> in the
distribution.

<ul class="menu">
<li><a accesskey="1" href="#PC-Binary-Installation">PC Binary Installation</a>:       Installing a prepared distribution. 
<li><a accesskey="2" href="#PC-Compiling">PC Compiling</a>:                 Compiling <samp><span class="command">gawk</span></samp> for MS-DOS,
                                Windows32, and OS/2. 
<li><a accesskey="3" href="#PC-Testing">PC Testing</a>:                   Testing <samp><span class="command">gawk</span></samp> on PC systems. 
<li><a accesskey="4" href="#PC-Using">PC Using</a>:                     Running <samp><span class="command">gawk</span></samp> on MS-DOS, Windows32
                                and OS/2. 
<li><a accesskey="5" href="#Cygwin">Cygwin</a>:                       Building and running <samp><span class="command">gawk</span></samp> for
                                Cygwin. 
<li><a accesskey="6" href="#MSYS">MSYS</a>:                         Using <samp><span class="command">gawk</span></samp> In The MSYS Environment. 
</ul>

<div class="node">
<a name="PC-Binary-Installation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#PC-Compiling">PC Compiling</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#PC-Installation">PC Installation</a>

</div>

<h5 class="appendixsubsubsec">B.3.1.1 Installing a Prepared Distribution for PC Systems</h5>

<p>If you have received a binary distribution prepared by the MS-DOS
maintainers, then <samp><span class="command">gawk</span></samp> and the necessary support files appear
under the <samp><span class="file">gnu</span></samp> directory, with executables in <samp><span class="file">gnu/bin</span></samp>,
libraries in <samp><span class="file">gnu/lib/awk</span></samp>, and manual pages under <samp><span class="file">gnu/man</span></samp>. 
This is designed for easy installation to a <samp><span class="file">/gnu</span></samp> directory on your
drive&mdash;however, the files can be installed anywhere provided <samp><span class="env">AWKPATH</span></samp> is
set properly.  Regardless of the installation directory, the first line of
<samp><span class="file">igawk.cmd</span></samp> and <samp><span class="file">igawk.bat</span></samp> (in <samp><span class="file">gnu/bin</span></samp>) may need to be
edited.

   <p>The binary distribution contains a separate file describing the
contents. In particular, it may include more than one version of the
<samp><span class="command">gawk</span></samp> executable.

   <p>OS/2 (32 bit, EMX) binary distributions are prepared for the <samp><span class="file">/usr</span></samp>
directory of your preferred drive. Set <samp><span class="env">UNIXROOT</span></samp> to your installation
drive (e.g., &lsquo;<samp><span class="samp">e:</span></samp>&rsquo;) if you want to install <samp><span class="command">gawk</span></samp> onto another drive
than the hardcoded default &lsquo;<samp><span class="samp">c:</span></samp>&rsquo;. Executables appear in <samp><span class="file">/usr/bin</span></samp>,
libraries under <samp><span class="file">/usr/share/awk</span></samp>, manual pages under <samp><span class="file">/usr/man</span></samp>,
Texinfo documentation under <samp><span class="file">/usr/info</span></samp>, and NLS files
under <samp><span class="file">/usr/share/locale</span></samp>. 
Note that the files can be installed anywhere provided <samp><span class="env">AWKPATH</span></samp> is
set properly.

   <p>If you already have a file <samp><span class="file">/usr/info/dir</span></samp> from another package
<em>do not overwrite it!</em> Instead enter the following commands at your prompt
(replace &lsquo;<samp><span class="samp">x:</span></samp>&rsquo; by your installation drive):

<pre class="example">     install-info --info-dir=x:/usr/info x:/usr/info/gawk.info
     install-info --info-dir=x:/usr/info x:/usr/info/gawkinet.info
</pre>
   <p>The binary distribution may contain a separate file containing additional
or more detailed installation instructions.

   <p>As of April, 2012, up to date <samp><span class="command">gawk</span></samp> binaries for MS Windows
are available from <a href="http://sourceforge.net/projects/ezwinports/files/">Eli Zaretskii's ports project</a>.

<div class="node">
<a name="PC-Compiling"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#PC-Testing">PC Testing</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#PC-Binary-Installation">PC Binary Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#PC-Installation">PC Installation</a>

</div>

<h5 class="appendixsubsubsec">B.3.1.2 Compiling <samp><span class="command">gawk</span></samp> for PC Operating Systems</h5>

<p><samp><span class="command">gawk</span></samp> can be compiled for MS-DOS, Windows32, and OS/2 using the GNU
development tools from DJ Delorie (DJGPP: MS-DOS only) or Eberhard
Mattes (EMX: MS-DOS, Windows32 and OS/2).  The file
<samp><span class="file">README_d/README.pc</span></samp> in the <samp><span class="command">gawk</span></samp> distribution contains
additional notes, and <samp><span class="file">pc/Makefile</span></samp> contains important information on
compilation options.

   <p><a name="index-compiling-_0040command_007bgawk_007d-for-MS_002dDOS-and-MS_002dWindows-2112"></a>To build <samp><span class="command">gawk</span></samp> for MS-DOS and Windows32, copy the files in
the <samp><span class="file">pc</span></samp> directory (<em>except</em> for <samp><span class="file">ChangeLog</span></samp>) to the
directory with the rest of the <samp><span class="command">gawk</span></samp> sources, then invoke
<samp><span class="command">make</span></samp> with the appropriate target name as an argument to
build <samp><span class="command">gawk</span></samp>.  The <samp><span class="file">Makefile</span></samp> copied from the <samp><span class="file">pc</span></samp>
directory contains a configuration section with comments and may need
to be edited in order to work with your <samp><span class="command">make</span></samp> utility.

   <p>The <samp><span class="file">Makefile</span></samp> supports a number of targets for building various
MS-DOS and Windows32 versions.  A list of targets is printed if the
<samp><span class="command">make</span></samp> command is given without a target.  As an example, to
build <samp><span class="command">gawk</span></samp> using the DJGPP tools, enter &lsquo;<samp><span class="samp">make djgpp</span></samp>&rsquo;. 
(The DJGPP tools needed for the build may be found at
<a href="ftp://ftp.delorie.com/pub/djgpp/current/v2gnu/">ftp://ftp.delorie.com/pub/djgpp/current/v2gnu/</a>.)  To build a
native MS-Windows binary of <samp><span class="command">gawk</span></samp>, type &lsquo;<samp><span class="samp">make mingw32</span></samp>&rsquo;.

   <p><a name="index-compiling-_0040command_007bgawk_007d-with-EMX-for-OS_002f2-2113"></a>The 32 bit EMX version of <samp><span class="command">gawk</span></samp> works &ldquo;out of the box&rdquo; under OS/2. 
However, it is highly recommended to use GCC 2.95.3 for the compilation. 
In principle, it is possible to compile <samp><span class="command">gawk</span></samp> the following way:

<pre class="example">     $ <kbd>./configure</kbd>
     $ <kbd>make</kbd>
</pre>
   <p>This is not recommended, though.  To get an OMF executable you should
use the following commands at your <samp><span class="command">sh</span></samp> prompt:

<pre class="example">     $ <kbd>CFLAGS="-O2 -Zomf -Zmt"</kbd>
     $ <kbd>export CFLAGS</kbd>
     $ <kbd>LDFLAGS="-s -Zcrtdll -Zlinker /exepack:2 -Zlinker /pm:vio -Zstack 0x6000"</kbd>
     $ <kbd>export LDFLAGS</kbd>
     $ <kbd>RANLIB="echo"</kbd>
     $ <kbd>export RANLIB</kbd>
     $ <kbd>./configure --prefix=c:/usr</kbd>
     $ <kbd>make AR=emxomfar</kbd>
</pre>
   <p>These are just suggestions for use with GCC 2.x.  You may use any other set of
(self-consistent) environment variables and compiler flags.

   <p>If you use GCC 2.95 it is recommended to use also:

<pre class="example">     $ <kbd>LIBS="-lgcc"</kbd>
     $ <kbd>export LIBS</kbd>
</pre>
   <p>You can also get an <code>a.out</code> executable if you prefer:

<pre class="example">     $ <kbd>CFLAGS="-O2 -Zmt"</kbd>
     $ <kbd>export CFLAGS</kbd>
     $ <kbd>LDFLAGS="-s -Zstack 0x6000"</kbd>
     $ <kbd>LIBS="-lgcc"</kbd>
     $ <kbd>unset RANLIB</kbd>
     <!-- $ ./configure -prefix=c:/usr -without-included-gettext -->
     $ <kbd>./configure --prefix=c:/usr</kbd>
     $ <kbd>make</kbd>
</pre>
   <blockquote>
<b>NOTE:</b> Compilation of <code>a.out</code> executables also works with GCC 3.2. 
Versions later than GCC 3.2 have not been tested successfully. 
</blockquote>

   <p>&lsquo;<samp><span class="samp">make install</span></samp>&rsquo; works as expected with the EMX build.

   <blockquote>
<b>NOTE:</b> Ancient OS/2 ports of GNU <samp><span class="command">make</span></samp> are not able to handle
the Makefiles of this package.  If you encounter any problems with
<samp><span class="command">make</span></samp>, try GNU Make 3.79.1 or later versions.  You should
find the latest version on
<a href="ftp://hobbes.nmsu.edu/pub/os2/">ftp://hobbes.nmsu.edu/pub/os2/</a>. 
</blockquote>

<div class="node">
<a name="PC-Testing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#PC-Using">PC Using</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#PC-Compiling">PC Compiling</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#PC-Installation">PC Installation</a>

</div>

<h5 class="appendixsubsubsec">B.3.1.3 Testing <samp><span class="command">gawk</span></samp> on PC Operating Systems</h5>

<p>Using <samp><span class="command">make</span></samp> to run the standard tests and to install <samp><span class="command">gawk</span></samp>
requires additional Unix-like tools, including <samp><span class="command">sh</span></samp>, <samp><span class="command">sed</span></samp>, and
<samp><span class="command">cp</span></samp>. In order to run the tests, the <samp><span class="file">test/*.ok</span></samp> files may need to
be converted so that they have the usual MS-DOS-style end-of-line markers. 
Alternatively, run <samp><span class="command">make check CMP="diff -a"</span></samp> to use GNU <samp><span class="command">diff</span></samp>
in text mode instead of <samp><span class="command">cmp</span></samp> to compare the resulting files.

   <p>Most
of the tests work properly with Stewartson's shell along with the
companion utilities or appropriate GNU utilities.  However, some editing of
<samp><span class="file">test/Makefile</span></samp> is required. It is recommended that you copy the file
<samp><span class="file">pc/Makefile.tst</span></samp> over the file <samp><span class="file">test/Makefile</span></samp> as a
replacement. Details can be found in <samp><span class="file">README_d/README.pc</span></samp>
and in the file <samp><span class="file">pc/Makefile.tst</span></samp>.

   <p>On OS/2 the <code>pid</code> test fails because <code>spawnl()</code> is used instead of
<code>fork()</code>/<code>execl()</code> to start child processes. 
Also the <code>mbfw1</code> and <code>mbprintf1</code> tests fail because the needed
multibyte functionality is not available.

<div class="node">
<a name="PC-Using"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Cygwin">Cygwin</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#PC-Testing">PC Testing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#PC-Installation">PC Installation</a>

</div>

<h5 class="appendixsubsubsec">B.3.1.4 Using <samp><span class="command">gawk</span></samp> on PC Operating Systems</h5>

<!-- STARTOFRANGE opgawx -->
<p><a name="index-operating-systems_002c-PC_002c-_0040command_007bgawk_007d-on-2114"></a><!-- STARTOFRANGE pcgawon -->
<a name="index-PC-operating-systems_002c-_0040command_007bgawk_007d-on-2115"></a>
With the exception of the Cygwin environment,
the &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operator and TCP/IP networking
(see <a href="#TCP_002fIP-Networking">TCP/IP Networking</a>)
are not supported for MS-DOS or MS-Windows.  EMX (OS/2 only) does support
at least the &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operator.

   <p><a name="index-search-paths-2116"></a><a name="index-search-paths_002c-for-source-files-2117"></a><a name="index-g_t_0040command_007bgawk_007d_002c-OS_002f2-version-of-2118"></a><a name="index-g_t_0040command_007bgawk_007d_002c-MS_002dDOS-version-of-2119"></a><a name="index-g_t_0040command_007bgawk_007d_002c-MS_002dWindows-version-of-2120"></a><a name="index-g_t_0040code_007b_003b_007d-_0028semicolon_0029_002c-_0040code_007bAWKPATH_007d-variable-and-2121"></a><a name="index-semicolon-_0028_0040code_007b_003b_007d_0029_002c-_0040code_007bAWKPATH_007d-variable-and-2122"></a><a name="index-g_t_0040code_007bAWKPATH_007d-environment-variable-2123"></a>The MS-DOS and MS-Windows versions of <samp><span class="command">gawk</span></samp> search for
program files as described in <a href="#AWKPATH-Variable">AWKPATH Variable</a>.  However,
semicolons (rather than colons) separate elements in the <samp><span class="env">AWKPATH</span></samp>
variable.  If <samp><span class="env">AWKPATH</span></samp> is not set or is empty, then the default
search path for MS-Windows and MS-DOS versions is
<code>".;c:/lib/awk;c:/gnu/lib/awk"<!-- /@w --></code>.

   <p><a name="index-g_t_0040code_007bUNIXROOT_007d-variable_002c-on-OS_002f2-systems-2124"></a>The search path for OS/2 (32 bit, EMX) is determined by the prefix directory
(most likely <samp><span class="file">/usr</span></samp> or <samp><span class="file">c:/usr</span></samp>) that has been specified as an option of
the <samp><span class="command">configure</span></samp> script like it is the case for the Unix versions. 
If <samp><span class="file">c:/usr</span></samp> is the prefix directory then the default search path contains <samp><span class="file">.</span></samp>
and <samp><span class="file">c:/usr/share/awk</span></samp>. 
Additionally, to support binary distributions of <samp><span class="command">gawk</span></samp> for OS/2
systems whose drive &lsquo;<samp><span class="samp">c:</span></samp>&rsquo; might not support long file names or might not exist
at all, there is a special environment variable.  If <samp><span class="env">UNIXROOT</span></samp> specifies
a drive then this specific drive is also searched for program files. 
E.g., if <samp><span class="env">UNIXROOT</span></samp> is set to <samp><span class="file">e:</span></samp> the complete default search path is
<code>".;c:/usr/share/awk;e:/usr/share/awk"<!-- /@w --></code>.

   <p>An <samp><span class="command">sh</span></samp>-like shell (as opposed to <samp><span class="command">command.com</span></samp> under MS-DOS
or <samp><span class="command">cmd.exe</span></samp> under MS-Windows or OS/2) may be useful for <samp><span class="command">awk</span></samp> programming. 
The DJGPP collection of tools includes an MS-DOS port of Bash,
and several shells are available for OS/2, including <samp><span class="command">ksh</span></samp>.

   <p><a name="index-common-extensions_002c-_0040code_007bBINMODE_007d-variable-2125"></a><a name="index-extensions_002c-common_0040comma_007b_007d-_0040code_007bBINMODE_007d-variable-2126"></a><a name="index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bBINMODE_007d-variable-2127"></a><a name="index-g_t_0040code_007bBINMODE_007d-variable-2128"></a>Under MS-Windows, OS/2 and MS-DOS, <samp><span class="command">gawk</span></samp> (and many other text programs) silently
translate end-of-line <code>"\r\n"</code> to <code>"\n"</code> on input and <code>"\n"</code>
to <code>"\r\n"</code> on output.  A special <code>BINMODE</code> variable (c.e.) 
allows control over these translations and is interpreted as follows:

     <ul>
<li>If <code>BINMODE</code> is <code>"r"</code>, or one,
then
binary mode is set on read (i.e., no translations on reads).

     <li>If <code>BINMODE</code> is <code>"w"</code>, or two,
then
binary mode is set on write (i.e., no translations on writes).

     <li>If <code>BINMODE</code> is <code>"rw"</code> or <code>"wr"</code> or three,
binary mode is set for both read and write.

     <li><code>BINMODE=</code><var>non-null-string</var> is
the same as &lsquo;<samp><span class="samp">BINMODE=3</span></samp>&rsquo; (i.e., no translations on
reads or writes).  However, <samp><span class="command">gawk</span></samp> issues a warning
message if the string is not one of <code>"rw"</code> or <code>"wr"</code>. 
</ul>

<p class="noindent">The modes for standard input and standard output are set one time
only (after the
command line is read, but before processing any of the <samp><span class="command">awk</span></samp> program). 
Setting <code>BINMODE</code> for standard input or
standard output is accomplished by using an
appropriate &lsquo;<samp><span class="samp">-v BINMODE=</span><var>N</var></samp>&rsquo; option on the command line. 
<code>BINMODE</code> is set at the time a file or pipe is opened and cannot be
changed mid-stream.

   <p>The name <code>BINMODE</code> was chosen to match <samp><span class="command">mawk</span></samp>
(see <a href="#Other-Versions">Other Versions</a>). 
<samp><span class="command">mawk</span></samp> and <samp><span class="command">gawk</span></samp> handle <code>BINMODE</code> similarly; however,
<samp><span class="command">mawk</span></samp> adds a &lsquo;<samp><span class="samp">-W BINMODE=</span><var>N</var></samp>&rsquo; option and an environment
variable that can set <code>BINMODE</code>, <code>RS</code>, and <code>ORS</code>.  The
files <samp><span class="file">binmode[1-3].awk</span></samp> (under <samp><span class="file">gnu/lib/awk</span></samp> in some of the
prepared distributions) have been chosen to match <samp><span class="command">mawk</span></samp>'s &lsquo;<samp><span class="samp">-W
BINMODE=</span><var>N</var></samp>&rsquo; option.  These can be changed or discarded; in particular,
the setting of <code>RS</code> giving the fewest &ldquo;surprises&rdquo; is open to debate. 
<samp><span class="command">mawk</span></samp> uses &lsquo;<samp><span class="samp">RS = "\r\n"</span></samp>&rsquo; if binary mode is set on read, which is
appropriate for files with the MS-DOS-style end-of-line.

   <p>To illustrate, the following examples set binary mode on writes for standard
output and other files, and set <code>ORS</code> as the &ldquo;usual&rdquo; MS-DOS-style
end-of-line:

<pre class="example">     gawk -v BINMODE=2 -v ORS="\r\n" ...
</pre>
   <p class="noindent">or:

<pre class="example">     gawk -v BINMODE=w -f binmode2.awk ...
</pre>
   <p class="noindent">These give the same result as the &lsquo;<samp><span class="samp">-W BINMODE=2</span></samp>&rsquo; option in
<samp><span class="command">mawk</span></samp>. 
The following changes the record separator to <code>"\r\n"</code> and sets binary
mode on reads, but does not affect the mode on standard input:

<pre class="example">     gawk -v RS="\r\n" --source "BEGIN { BINMODE = 1 }" ...
</pre>
   <p class="noindent">or:

<pre class="example">     gawk -f binmode1.awk ...
</pre>
   <p class="noindent">With proper quoting, in the first example the setting of <code>RS</code> can be
moved into the <code>BEGIN</code> rule.

<div class="node">
<a name="Cygwin"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#MSYS">MSYS</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#PC-Using">PC Using</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#PC-Installation">PC Installation</a>

</div>

<h5 class="appendixsubsubsec">B.3.1.5 Using <samp><span class="command">gawk</span></samp> In The Cygwin Environment</h5>

<p><a name="index-compiling-_0040command_007bgawk_007d-for-Cygwin-2129"></a>
<samp><span class="command">gawk</span></samp> can be built and used &ldquo;out of the box&rdquo; under MS-Windows
if you are using the <a href="http://www.cygwin.com">Cygwin environment</a>. 
This environment provides an excellent simulation of Unix, using the
GNU tools, such as Bash, the GNU Compiler Collection (GCC), GNU Make,
and other GNU programs.  Compilation and installation for Cygwin is the
same as for a Unix system:

<pre class="example">     tar -xvpzf gawk-4.0.2.tar.gz
     cd gawk-4.0.2
     ./configure
     make
</pre>
   <p>When compared to GNU/Linux on the same system, the &lsquo;<samp><span class="samp">configure</span></samp>&rsquo;
step on Cygwin takes considerably longer.  However, it does finish,
and then the &lsquo;<samp><span class="samp">make</span></samp>&rsquo; proceeds as usual.

   <blockquote>
<b>NOTE:</b> The &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operator and TCP/IP networking
(see <a href="#TCP_002fIP-Networking">TCP/IP Networking</a>)
are fully supported in the Cygwin environment.  This is not true
for any other environment on MS-Windows. 
</blockquote>

<div class="node">
<a name="MSYS"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Cygwin">Cygwin</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#PC-Installation">PC Installation</a>

</div>

<h5 class="appendixsubsubsec">B.3.1.6 Using <samp><span class="command">gawk</span></samp> In The MSYS Environment</h5>

<p>In the MSYS environment under MS-Windows, <samp><span class="command">gawk</span></samp> automatically
uses binary mode for reading and writing files.  Thus there is no
need to use the <code>BINMODE</code> variable.

   <p>This can cause problems with other Unix-like components that have
been ported to MS-Windows that expect <samp><span class="command">gawk</span></samp> to do automatic
translation of <code>"\r\n"</code>, since it won't.  Caveat Emptor!

<div class="node">
<a name="VMS-Installation"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#PC-Installation">PC Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Non_002dUnix-Installation">Non-Unix Installation</a>

</div>

<h4 class="appendixsubsec">B.3.2 How to Compile and Install <samp><span class="command">gawk</span></samp> on VMS</h4>

<!-- based on material from Pat Rankin <rankin@eql.caltech.edu> -->
<!-- now rankin@pactechdata.com -->
<!-- now r.pat.rankin@gmail.com -->
<p><a name="index-g_t_0040command_007bgawk_007d_002c-VMS-version-of-2130"></a><a name="index-installation_002c-VMS-2131"></a>This subsection describes how to compile and install <samp><span class="command">gawk</span></samp> under VMS. 
The older designation &ldquo;VMS&rdquo; is used throughout to refer to OpenVMS.

<ul class="menu">
<li><a accesskey="1" href="#VMS-Compilation">VMS Compilation</a>:              How to compile <samp><span class="command">gawk</span></samp> under VMS. 
<li><a accesskey="2" href="#VMS-Installation-Details">VMS Installation Details</a>:     How to install <samp><span class="command">gawk</span></samp> under VMS. 
<li><a accesskey="3" href="#VMS-Running">VMS Running</a>:                  How to run <samp><span class="command">gawk</span></samp> under VMS. 
<li><a accesskey="4" href="#VMS-Old-Gawk">VMS Old Gawk</a>:                 An old version comes with some VMS systems. 
</ul>

<div class="node">
<a name="VMS-Compilation"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#VMS-Installation-Details">VMS Installation Details</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#VMS-Installation">VMS Installation</a>

</div>

<h5 class="appendixsubsubsec">B.3.2.1 Compiling <samp><span class="command">gawk</span></samp> on VMS</h5>

<p><a name="index-compiling-_0040command_007bgawk_007d-for-VMS-2132"></a>
To compile <samp><span class="command">gawk</span></samp> under VMS, there is a <code>DCL</code> command procedure that
issues all the necessary <code>CC</code> and <code>LINK</code> commands. There is
also a <samp><span class="file">Makefile</span></samp> for use with the <code>MMS</code> utility.  From the source
directory, use either:

<pre class="example">     $ <kbd>@[.VMS]VMSBUILD.COM</kbd>
</pre>
   <p class="noindent">or:

<pre class="example">     $ <kbd>MMS/DESCRIPTION=[.VMS]DESCRIP.MMS GAWK</kbd>
</pre>
   <p>Older versions of <samp><span class="command">gawk</span></samp> could be built with VAX C or
GNU C on VAX/VMS, as well as with DEC C, but that is no longer
supported.  DEC C (also briefly known as &ldquo;Compaq C&rdquo; and now known
as &ldquo;HP C,&rdquo; but referred to here as &ldquo;DEC C&rdquo;) is required.  Both
<code>VMSBUILD.COM</code> and <code>DESCRIP.MMS</code> contain some obsolete support
for the older compilers but are set up to use DEC C by default.

   <p><samp><span class="command">gawk</span></samp> has been tested under Alpha/VMS 7.3-1 using Compaq C V6.4,
and on Alpha/VMS 7.3, Alpha/VMS 7.3-2, and IA64/VMS 8.3.<a rel="footnote" href="#fn-86" name="fnd-86"><sup>86</sup></a>

<div class="node">
<a name="VMS-Installation-Details"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#VMS-Running">VMS Running</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#VMS-Compilation">VMS Compilation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#VMS-Installation">VMS Installation</a>

</div>

<h5 class="appendixsubsubsec">B.3.2.2 Installing <samp><span class="command">gawk</span></samp> on VMS</h5>

<p>To install <samp><span class="command">gawk</span></samp>, all you need is a &ldquo;foreign&rdquo; command, which is
a <code>DCL</code> symbol whose value begins with a dollar sign. For example:

<pre class="example">     $ <kbd>GAWK :== $disk1:[gnubin]GAWK</kbd>
</pre>
   <p class="noindent">Substitute the actual location of <samp><span class="command">gawk.exe</span></samp> for
&lsquo;<samp><span class="samp">$disk1:[gnubin]</span></samp>&rsquo;. The symbol should be placed in the
<samp><span class="file">login.com</span></samp> of any user who wants to run <samp><span class="command">gawk</span></samp>,
so that it is defined every time the user logs on. 
Alternatively, the symbol may be placed in the system-wide
<samp><span class="file">sylogin.com</span></samp> procedure, which allows all users
to run <samp><span class="command">gawk</span></samp>.

   <p>Optionally, the help entry can be loaded into a VMS help library:

<pre class="example">     $ <kbd>LIBRARY/HELP SYS$HELP:HELPLIB [.VMS]GAWK.HLP</kbd>
</pre>
   <p class="noindent">(You may want to substitute a site-specific help library rather than
the standard VMS library &lsquo;<samp><span class="samp">HELPLIB</span></samp>&rsquo;.)  After loading the help text,
the command:

<pre class="example">     $ <kbd>HELP GAWK</kbd>
</pre>
   <p class="noindent">provides information about both the <samp><span class="command">gawk</span></samp> implementation and the
<samp><span class="command">awk</span></samp> programming language.

   <p>The logical name &lsquo;<samp><span class="samp">AWK_LIBRARY</span></samp>&rsquo; can designate a default location
for <samp><span class="command">awk</span></samp> program files.  For the <samp><span class="option">-f</span></samp> option, if the specified
file name has no device or directory path information in it, <samp><span class="command">gawk</span></samp>
looks in the current directory first, then in the directory specified
by the translation of &lsquo;<samp><span class="samp">AWK_LIBRARY</span></samp>&rsquo; if the file is not found. 
If, after searching in both directories, the file still is not found,
<samp><span class="command">gawk</span></samp> appends the suffix &lsquo;<samp><span class="samp">.awk</span></samp>&rsquo; to the filename and retries
the file search.  If &lsquo;<samp><span class="samp">AWK_LIBRARY</span></samp>&rsquo; has no definition, a default value
of &lsquo;<samp><span class="samp">SYS$LIBRARY:</span></samp>&rsquo; is used for it.

<div class="node">
<a name="VMS-Running"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#VMS-Old-Gawk">VMS Old Gawk</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#VMS-Installation-Details">VMS Installation Details</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#VMS-Installation">VMS Installation</a>

</div>

<h5 class="appendixsubsubsec">B.3.2.3 Running <samp><span class="command">gawk</span></samp> on VMS</h5>

<p>Command-line parsing and quoting conventions are significantly different
on VMS, so examples in this Web page or from other sources often need minor
changes.  They <em>are</em> minor though, and all <samp><span class="command">awk</span></samp> programs
should run correctly.

   <p>Here are a couple of trivial tests:

<pre class="example">     $ <kbd>gawk -- "BEGIN {print ""Hello, World!""}"</kbd>
     $ <kbd>gawk -"W" version</kbd>
     ! could also be -"W version" or "-W version"
</pre>
   <p class="noindent">Note that uppercase and mixed-case text must be quoted.

   <p>The VMS port of <samp><span class="command">gawk</span></samp> includes a <code>DCL</code>-style interface in addition
to the original shell-style interface (see the help entry for details). 
One side effect of dual command-line parsing is that if there is only a
single parameter (as in the quoted string program above), the command
becomes ambiguous.  To work around this, the normally optional <samp><span class="option">--</span></samp>
flag is required to force Unix-style parsing rather than <code>DCL</code> parsing.  If any
other dash-type options (or multiple parameters such as data files to
process) are present, there is no ambiguity and <samp><span class="option">--</span></samp> can be omitted.

<!-- @cindex directory search -->
<!-- @cindex path, search -->
   <p><a name="index-search-paths-2133"></a><a name="index-search-paths_002c-for-source-files-2134"></a>The default search path, when looking for <samp><span class="command">awk</span></samp> program files specified
by the <samp><span class="option">-f</span></samp> option, is <code>"SYS$DISK:[],AWK_LIBRARY:"</code>.  The logical
name <samp><span class="env">AWKPATH</span></samp> can be used to override this default.  The format
of <samp><span class="env">AWKPATH</span></samp> is a comma-separated list of directory specifications. 
When defining it, the value should be quoted so that it retains a single
translation and not a multitranslation <code>RMS</code> searchlist.

<div class="node">
<a name="VMS-Old-Gawk"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#VMS-Running">VMS Running</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#VMS-Installation">VMS Installation</a>

</div>

<h5 class="appendixsubsubsec">B.3.2.4 Some VMS Systems Have An Old Version of <samp><span class="command">gawk</span></samp></h5>

<!-- Thanks to "gerard labadie" <gerard.labadie@gmail.com> -->
<p>Some versions of VMS have an old version of <samp><span class="command">gawk</span></samp>.  To access it,
define a symbol, as follows:

<pre class="example">     $ <kbd>gawk :== $sys$common:[syshlp.examples.tcpip.snmp]gawk.exe</kbd>
</pre>
   <p>This is apparently version 2.15.6, which is extremely old. We
recommend compiling and using the current version.

<!-- ENDOFRANGE opgawx -->
<!-- ENDOFRANGE pcgawon -->
<div class="node">
<a name="Bugs"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Other-Versions">Other Versions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Non_002dUnix-Installation">Non-Unix Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installation">Installation</a>

</div>

<h3 class="appendixsec">B.4 Reporting Problems and Bugs</h3>

<p><a name="index-archeologists-2135"></a><blockquote>
<i>There is nothing more dangerous than a bored archeologist.</i><br>
The Hitchhiker's Guide to the Galaxy
</blockquote>
   <!-- the radio show, not the book. :-) -->

<!-- STARTOFRANGE dbugg -->
   <p><a name="index-debugging-_0040command_007bgawk_007d_002c-bug-reports-2136"></a><!-- STARTOFRANGE tblgawb -->
<a name="index-troubleshooting_002c-_0040command_007bgawk_007d_002c-bug-reports-2137"></a>If you have problems with <samp><span class="command">gawk</span></samp> or think that you have found a bug,
please report it to the developers; we cannot promise to do anything
but we might well want to fix it.

   <p>Before reporting a bug, make sure you have actually found a real bug. 
Carefully reread the documentation and see if it really says you can do
what you're trying to do.  If it's not clear whether you should be able
to do something or not, report that too; it's a bug in the documentation!

   <p>Before reporting a bug or trying to fix it yourself, try to isolate it
to the smallest possible <samp><span class="command">awk</span></samp> program and input data file that
reproduces the problem.  Then send us the program and data file,
some idea of what kind of Unix system you're using,
the compiler you used to compile <samp><span class="command">gawk</span></samp>, and the exact results
<samp><span class="command">gawk</span></samp> gave you.  Also say what you expected to occur; this helps
us decide whether the problem is really in the documentation.

   <p>Please include the version number of <samp><span class="command">gawk</span></samp> you are using. 
You can get this information with the command &lsquo;<samp><span class="samp">gawk --version</span></samp>&rsquo;.

   <p><a name="index-g_t_0040code_007bbug_002dgawk_0040_0040gnu_002eorg_007d-bug-reporting-address-2138"></a><a name="index-email-address-for-bug-reports_002c-_0040code_007bbug_002dgawk_0040_0040gnu_002eorg_007d-2139"></a><a name="index-bug-reports_002c-email-address_002c-_0040code_007bbug_002dgawk_0040_0040gnu_002eorg_007d-2140"></a>Once you have a precise problem, send email to
&ldquo;bug-gawk at gnu dot org&rdquo;.

   <p><a name="index-Robbins_002c-Arnold-2141"></a>Using this address automatically sends a copy of your
mail to me.  If necessary, I can be reached directly at
&ldquo;arnold at skeeve dot com&rdquo;. 
The bug reporting address is preferred since the
email list is archived at the GNU Project. 
<em>All email should be in English, since that is my native language.</em>

   <p><a name="index-g_t_0040code_007bcomp_002elang_002eawk_007d-newsgroup-2142"></a><blockquote>
<b>CAUTION:</b> Do <em>not</em> try to report bugs in <samp><span class="command">gawk</span></samp> by
posting to the Usenet/Internet newsgroup <code>comp.lang.awk</code>. 
While the <samp><span class="command">gawk</span></samp> developers do occasionally read this newsgroup,
there is no guarantee that we will see your posting.  The steps described
above are the official recognized ways for reporting bugs. 
Really. 
</blockquote>

   <blockquote>
<b>NOTE:</b> Many distributions of GNU/Linux and the various BSD-based operating systems
have their own bug reporting systems.  If you report a bug using your distribution's
bug reporting system, <em>please</em> also send a copy to
&ldquo;bug-gawk at gnu dot org&rdquo;.

   <p>This is for two reasons.  First, while some distributions forward
bug reports &ldquo;upstream&rdquo; to the GNU mailing list, many don't, so there is a good
chance that the <samp><span class="command">gawk</span></samp>  maintainer won't even see the bug report!  Second,
mail to the GNU list is archived, and having everything at the GNU project
keeps things self-contained and not dependant on other web sites. 
</blockquote>

   <p>Non-bug suggestions are always welcome as well.  If you have questions
about things that are unclear in the documentation or are just obscure
features, ask me; I will try to help you out, although I
may not have the time to fix the problem.  You can send me electronic
mail at the Internet address noted previously.

   <p>If you find bugs in one of the non-Unix ports of <samp><span class="command">gawk</span></samp>, please send
an electronic mail message to the person who maintains that port.  They
are named in the following list, as well as in the <samp><span class="file">README</span></samp> file in the <samp><span class="command">gawk</span></samp>
distribution.  Information in the <samp><span class="file">README</span></samp> file should be considered
authoritative if it conflicts with this Web page.

   <p>The people maintaining the non-Unix ports of <samp><span class="command">gawk</span></samp> are
as follows:

   <p><table summary=""><a name="index-Deifik_002c-Scott-2143"></a><tr align="left"><td valign="top">MS-DOS with DJGPP </td><td valign="top">Scott Deifik, &ldquo;scottd dot mail at sbcglobal dot net&rdquo;.

<p><a name="index-Zaretskii_002c-Eli-2144"></a><br></td></tr><tr align="left"><td valign="top">MS-Windows with MINGW </td><td valign="top">Eli Zaretskii, &ldquo;eliz at gnu dot org&rdquo;.

<p><a name="index-Buening_002c-Andreas-2145"></a><br></td></tr><tr align="left"><td valign="top">OS/2 </td><td valign="top">Andreas Buening, &ldquo;andreas dot buening at nexgo dot de&rdquo;.

<p><a name="index-Rankin_002c-Pat-2146"></a><br></td></tr><tr align="left"><td valign="top">VMS </td><td valign="top">Pat Rankin, &ldquo;r.pat.rankin at gmail.com&rdquo;

<p><a name="index-Pitts_002c-Dave-2147"></a><br></td></tr><tr align="left"><td valign="top">z/OS (OS/390) </td><td valign="top">Dave Pitts, &ldquo;dpitts at cozx dot com&rdquo;.
   <br></td></tr></table>

   <p>If your bug is also reproducible under Unix, please send a copy of your
report to the &ldquo;bug-gawk at gnu dot org&rdquo; email list as well. 
<!-- ENDOFRANGE dbugg -->
<!-- ENDOFRANGE tblgawb -->

<div class="node">
<a name="Other-Versions"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Bugs">Bugs</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Installation">Installation</a>

</div>

<h3 class="appendixsec">B.5 Other Freely Available <samp><span class="command">awk</span></samp> Implementations</h3>

<!-- STARTOFRANGE awkim -->
<p><a name="index-g_t_0040command_007bawk_007d_002c-implementations-2148"></a><a name="index-Brennan_002c-Michael-2149"></a><blockquote>
<i>It's kind of fun to put comments like this in your awk code.</i><br>
      <code>// Do C++ comments work? answer: yes! of course</code><br>
Michael Brennan
</blockquote>

   <p>There are a number of other freely available <samp><span class="command">awk</span></samp> implementations. 
This section briefly describes where to get them:

     
<a name="index-Kernighan_002c-Brian-2150"></a>
<a name="index-source-code_002c-Brian-Kernighan_0027s-_0040command_007bawk_007d-2151"></a>
<a name="index-g_t_0040command_007bawk_007d_002c-versions-of_002c-See-Also-Brian-Kernighan_0027s-_0040command_007bawk_007d-2152"></a>
<a name="index-extensions_002c-Brian-Kernighan_0027s-_0040command_007bawk_007d-2153"></a>
<a name="index-Brian-Kernighan_0027s-_0040command_007bawk_007d_002c-extensions-2154"></a>
<dl><dt>Unix <samp><span class="command">awk</span></samp><dd>Brian Kernighan, one of the original designers of Unix <samp><span class="command">awk</span></samp>,
has made his implementation of
<samp><span class="command">awk</span></samp> freely available. 
You can retrieve this version via the World Wide Web from
<a href="http://www.cs.princeton.edu/~bwk">his home page</a>. 
It is available in several archive formats:

          <dl>
<dt>Shell archive<dd><a href="http://www.cs.princeton.edu/~bwk/btl.mirror/awk.shar">http://www.cs.princeton.edu/~bwk/btl.mirror/awk.shar</a>

          <br><dt>Compressed <samp><span class="command">tar</span></samp> file<dd><a href="http://www.cs.princeton.edu/~bwk/btl.mirror/awk.tar.gz">http://www.cs.princeton.edu/~bwk/btl.mirror/awk.tar.gz</a>

          <br><dt>Zip file<dd><a href="http://www.cs.princeton.edu/~bwk/btl.mirror/awk.zip">http://www.cs.princeton.edu/~bwk/btl.mirror/awk.zip</a>
</dl>

     <p>This version requires an ISO C (1990 standard) compiler;
the C compiler from
GCC (the GNU Compiler Collection)
works quite nicely.

     <p>See <a href="#Common-Extensions">Common Extensions</a>,
for a list of extensions in this <samp><span class="command">awk</span></samp> that are not in POSIX <samp><span class="command">awk</span></samp>.

     <p><a name="index-Brennan_002c-Michael-2155"></a><a name="index-g_t_0040command_007bmawk_007d-program-2156"></a><a name="index-source-code_002c-_0040command_007bmawk_007d-2157"></a><br><dt><samp><span class="command">mawk</span></samp><dd>Michael Brennan wrote an independent implementation of <samp><span class="command">awk</span></samp>,
called <samp><span class="command">mawk</span></samp>.  It is available under the GPL
(see <a href="#Copying">Copying</a>),
just as <samp><span class="command">gawk</span></samp> is.

     <p>The original distribution site for the <samp><span class="command">mawk</span></samp> source code
no longer has it.  A copy is available at
<a href="http://www.skeeve.com/gawk/mawk1.3.3.tar.gz">http://www.skeeve.com/gawk/mawk1.3.3.tar.gz</a>.

     <p>In 2009, Thomas Dickey took on <samp><span class="command">mawk</span></samp> maintenance. 
Basic information is available on
<a href="http://www.invisible-island.net/mawk/mawk.html">the project's web page</a>. 
The download URL is
<a href="http://invisible-island.net/datafiles/release/mawk.tar.gz">http://invisible-island.net/datafiles/release/mawk.tar.gz</a>.

     <p>Once you have it,
<samp><span class="command">gunzip</span></samp> may be used to decompress this file. Installation
is similar to <samp><span class="command">gawk</span></samp>'s
(see <a href="#Unix-Installation">Unix Installation</a>).

     <p>See <a href="#Common-Extensions">Common Extensions</a>,
for a list of extensions in <samp><span class="command">mawk</span></samp> that are not in POSIX <samp><span class="command">awk</span></samp>.

     <p><a name="index-Sumner_002c-Andrew-2158"></a><a name="index-g_t_0040command_007bawka_007d-compiler-for-_0040command_007bawk_007d-2159"></a><a name="index-source-code_002c-_0040command_007bawka_007d-2160"></a><br><dt><samp><span class="command">awka</span></samp><dd>Written by Andrew Sumner,
<samp><span class="command">awka</span></samp> translates <samp><span class="command">awk</span></samp> programs into C, compiles them,
and links them with a library of functions that provides the core
<samp><span class="command">awk</span></samp> functionality. 
It also has a number of extensions.

     <p>The <samp><span class="command">awk</span></samp> translator is released under the GPL, and the library
is under the LGPL.

     <p>To get <samp><span class="command">awka</span></samp>, go to <a href="http://sourceforge.net/projects/awka">http://sourceforge.net/projects/awka</a>. 
<!-- You can reach Andrew Sumner at @email{andrew@@zbcom.net}. -->
<!-- andrewsumner@@yahoo.net -->

     <p>The project seems to be frozen; no new code changes have been made
since approximately 2003.

     <p><a name="index-Beebe_002c-Nelson-2161"></a><a name="index-g_t_0040command_007bpawk_007d-_0028profiling-version-of-Brian-Kernighan_0027s-_0040command_007bawk_007d_0029-2162"></a><a name="index-source-code_002c-_0040command_007bpawk_007d-2163"></a><br><dt><samp><span class="command">pawk</span></samp><dd>Nelson H.F. Beebe at the University of Utah has modified
Brian Kernighan's <samp><span class="command">awk</span></samp> to provide timing and profiling information. 
It is different from <samp><span class="command">pgawk</span></samp>
(see <a href="#Profiling">Profiling</a>),
in that it uses CPU-based profiling, not line-count
profiling.  You may find it at either
<a href="ftp://ftp.math.utah.edu/pub/pawk/pawk-20030606.tar.gz">ftp://ftp.math.utah.edu/pub/pawk/pawk-20030606.tar.gz</a>
or
<a href="http://www.math.utah.edu/pub/pawk/pawk-20030606.tar.gz">http://www.math.utah.edu/pub/pawk/pawk-20030606.tar.gz</a>.

     <br><dt>Busybox Awk<dd><a name="index-Busybox-Awk-2164"></a><a name="index-source-code_002c-Busybox-Awk-2165"></a>Busybox is a GPL-licensed program providing small versions of many
applications within a single executable. It is aimed at embedded systems. 
It includes a full implementation of POSIX <samp><span class="command">awk</span></samp>.  When building
it, be careful not to do &lsquo;<samp><span class="samp">make install</span></samp>&rsquo; as it will overwrite
copies of other applications in your <samp><span class="file">/usr/local/bin</span></samp>.  For more
information, see the <a href="http://busybox.net">project's home page</a>.

     <p><a name="index-OpenSolaris-2166"></a><a name="index-Solaris_002c-POSIX_002dcompliant-_0040command_007bawk_007d-2167"></a><a name="index-source-code_002c-Solaris-_0040command_007bawk_007d-2168"></a><br><dt>The OpenSolaris POSIX <samp><span class="command">awk</span></samp><dd>The version of <samp><span class="command">awk</span></samp> in <samp><span class="file">/usr/xpg4/bin</span></samp> on Solaris is
more-or-less
POSIX-compliant. It is based on the <samp><span class="command">awk</span></samp> from Mortice Kern
Systems for PCs.  The source code can be downloaded from
the <a href="http://www.opensolaris.org">OpenSolaris web site</a>. 
This author was able to make it compile and work under GNU/Linux
with 1&ndash;2 hours of work.  Making it more generally portable (using
GNU Autoconf and/or Automake) would take more work, and this
has not been done, at least to our knowledge.

     <p><a name="index-g_t_0040command_007bjawk_007d-2169"></a><a name="index-Java-implementation-of-_0040command_007bawk_007d-2170"></a><a name="index-source-code_002c-_0040command_007bjawk_007d-2171"></a><br><dt><samp><span class="command">jawk</span></samp><dd>This is an interpreter for <samp><span class="command">awk</span></samp> written in Java. It claims
to be a full interpreter, although because it uses Java facilities
for I/O and for regexp matching, the language it supports is different
from POSIX <samp><span class="command">awk</span></samp>.  More information is available on the
<a href="http://jawk.sourceforge.net">project's home page</a>.

     <br><dt>Libmawk<dd><a name="index-libmawk-2172"></a><a name="index-source-code_002c-libmawk-2173"></a>This is an embeddable <samp><span class="command">awk</span></samp> interpreter derived from
<samp><span class="command">mawk</span></samp>. For more information see
<a href="http://repo.hu/projects/libmawk/">http://repo.hu/projects/libmawk/</a>.

     <br><dt>QSE&nbsp;Awk<!-- /@w --><dd><a name="index-QSE-Awk-2174"></a><a name="index-source-code_002c-QSE-Awk-2175"></a>This is an embeddable <samp><span class="command">awk</span></samp> interpreter. For more information
see <a href="http://code.google.com/p/qse/">http://code.google.com/p/qse/</a> and <a href="http://awk.info/?tools/qse">http://awk.info/?tools/qse</a>.

     <br><dt><samp><span class="command">QTawk</span></samp><dd><a name="index-QuikTrim-Awk-2176"></a><a name="index-source-code_002c-QuikTrim-Awk-2177"></a>This is an independent implementation of <samp><span class="command">awk</span></samp> distributed
under the GPL. It has a large number of extensions over standard
<samp><span class="command">awk</span></samp> and may not be 100% syntactically compatible with it. 
See <a href="http://www.quiktrim.org/QTawk.html">http://www.quiktrim.org/QTawk.html</a> for more information,
including the manual and a download link.

     <br><dt><samp><span class="command">xgawk</span></samp><dd><a name="index-g_t_0040command_007bxgawk_007d-2178"></a><a name="index-source-code_002c-_0040command_007bxgawk_007d-2179"></a>XML <samp><span class="command">gawk</span></samp>. 
This is a fork of the <samp><span class="command">gawk</span></samp> 3.1.6 source base
to support processing XML files. It has a number of
interesting extensions which should one day be integrated
into the main <samp><span class="command">gawk</span></samp> code base. 
For more information, see
<a href="http://xmlgawk.sourceforge.net">the XMLgawk project web site</a>.

   </dl>
   <!-- ENDOFRANGE gligawk -->
<!-- ENDOFRANGE ingawk -->
<!-- ENDOFRANGE awkim -->

<div class="node">
<a name="Notes"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Basic-Concepts">Basic Concepts</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Installation">Installation</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix C Implementation Notes</h2>

<!-- STARTOFRANGE gawii -->
<p><a name="index-g_t_0040command_007bgawk_007d_002c-implementation-issues-2180"></a><!-- STARTOFRANGE impis -->
<a name="index-implementation-issues_002c-_0040command_007bgawk_007d-2181"></a>
This appendix contains information mainly of interest to implementers and
maintainers of <samp><span class="command">gawk</span></samp>.  Everything in it applies specifically to
<samp><span class="command">gawk</span></samp> and not to other implementations.

<ul class="menu">
<li><a accesskey="1" href="#Compatibility-Mode">Compatibility Mode</a>:           How to disable certain <samp><span class="command">gawk</span></samp>
                                extensions. 
<li><a accesskey="2" href="#Additions">Additions</a>:                    Making Additions To <samp><span class="command">gawk</span></samp>. 
<li><a accesskey="3" href="#Dynamic-Extensions">Dynamic Extensions</a>:           Adding new built-in functions to
                                <samp><span class="command">gawk</span></samp>. 
<li><a accesskey="4" href="#Future-Extensions">Future Extensions</a>:            New features that may be implemented one day. 
</ul>

<div class="node">
<a name="Compatibility-Mode"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Additions">Additions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Notes">Notes</a>

</div>

<h3 class="appendixsec">C.1 Downward Compatibility and Debugging</h3>

<p><a name="index-g_t_0040command_007bgawk_007d_002c-implementation-issues_002c-downward-compatibility-2182"></a><a name="index-g_t_0040command_007bgawk_007d_002c-implementation-issues_002c-debugging-2183"></a><a name="index-troubleshooting_002c-_0040command_007bgawk_007d-2184"></a><a name="index-implementation-issues_0040comma_007b_007d-_0040command_007bgawk_007d_002c-debugging-2185"></a>
See <a href="#POSIX_002fGNU">POSIX/GNU</a>,
for a summary of the GNU extensions to the <samp><span class="command">awk</span></samp> language and program. 
All of these features can be turned off by invoking <samp><span class="command">gawk</span></samp> with the
<samp><span class="option">--traditional</span></samp> option or with the <samp><span class="option">--posix</span></samp> option.

   <p>If <samp><span class="command">gawk</span></samp> is compiled for debugging with &lsquo;<samp><span class="samp">-DDEBUG</span></samp>&rsquo;, then there
is one more option available on the command line:

     <dl>
<dt><code>-Y</code><dt><code>--parsedebug</code><dd>Prints out the parse stack information as the program is being parsed. 
</dl>

   <p>This option is intended only for serious <samp><span class="command">gawk</span></samp> developers
and not for the casual user.  It probably has not even been compiled into
your version of <samp><span class="command">gawk</span></samp>, since it slows down execution.

<div class="node">
<a name="Additions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Dynamic-Extensions">Dynamic Extensions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Compatibility-Mode">Compatibility Mode</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Notes">Notes</a>

</div>

<h3 class="appendixsec">C.2 Making Additions to <samp><span class="command">gawk</span></samp></h3>

<p>If you find that you want to enhance <samp><span class="command">gawk</span></samp> in a significant
fashion, you are perfectly free to do so.  That is the point of having
free software; the source code is available and you are free to change
it as you want (see <a href="#Copying">Copying</a>).

   <p>This section discusses the ways you might want to change <samp><span class="command">gawk</span></samp>
as well as any considerations you should bear in mind.

<ul class="menu">
<li><a accesskey="1" href="#Accessing-The-Source">Accessing The Source</a>:         Accessing the Git repository. 
<li><a accesskey="2" href="#Adding-Code">Adding Code</a>:                  Adding code to the main body of
                                <samp><span class="command">gawk</span></samp>. 
<li><a accesskey="3" href="#New-Ports">New Ports</a>:                    Porting <samp><span class="command">gawk</span></samp> to a new operating
                                system. 
</ul>

<div class="node">
<a name="Accessing-The-Source"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Adding-Code">Adding Code</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Additions">Additions</a>

</div>

<h4 class="appendixsubsec">C.2.1 Accessing The <samp><span class="command">gawk</span></samp> Git Repository</h4>

<p>As <samp><span class="command">gawk</span></samp> is Free Software, the source code is always available. 
<a href="#Gawk-Distribution">Gawk Distribution</a>, describes how to get and build the formal,
released versions of <samp><span class="command">gawk</span></samp>.

   <p>However, if you want to modify <samp><span class="command">gawk</span></samp> and contribute back your
changes, you will probably wish to work with the development version. 
To do so, you will need to access the <samp><span class="command">gawk</span></samp> source code
repository.  The code is maintained using the
<a href="http://git-scm.com/">Git distributed version control system</a>. 
You will need to install it if your system doesn't have it. 
Once you have done so, use the command:

<pre class="example">     git clone git://git.savannah.gnu.org/gawk.git
</pre>
   <p class="noindent">This will clone the <samp><span class="command">gawk</span></samp> repository.  If you are behind a
firewall that will not allow you to use the Git native protocol, you
can still access the repository using:

<pre class="example">     git clone http://git.savannah.gnu.org/r/gawk.git
</pre>
   <p>Once you have made changes, you can use &lsquo;<samp><span class="samp">git diff</span></samp>&rsquo; to produce a
patch, and send that to the <samp><span class="command">gawk</span></samp> maintainer; see <a href="#Bugs">Bugs</a>
for how to do that.

   <p>Finally, if you cannot install Git (e.g., if it hasn't been ported
yet to your operating system), you can use the Git&ndash;CVS gateway
to check out a copy using CVS, as follows:

<pre class="example">     cvs -d:pserver:anonymous@pserver.git.sv.gnu.org:/gawk.git co -d gawk master
</pre>
   <div class="node">
<a name="Adding-Code"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#New-Ports">New Ports</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Accessing-The-Source">Accessing The Source</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Additions">Additions</a>

</div>

<h4 class="appendixsubsec">C.2.2 Adding New Features</h4>

<!-- STARTOFRANGE adfgaw -->
<p><a name="index-adding_002c-features-to-_0040command_007bgawk_007d-2186"></a><!-- STARTOFRANGE fadgaw -->
<a name="index-features_002c-adding-to-_0040command_007bgawk_007d-2187"></a><!-- STARTOFRANGE gawadf -->
<a name="index-g_t_0040command_007bgawk_007d_002c-features_002c-adding-2188"></a>You are free to add any new features you like to <samp><span class="command">gawk</span></samp>. 
However, if you want your changes to be incorporated into the <samp><span class="command">gawk</span></samp>
distribution, there are several steps that you need to take in order to
make it possible to include your changes:

     <ol type=1 start=1>
<li>Before building the new feature into <samp><span class="command">gawk</span></samp> itself,
consider writing it as an extension module
(see <a href="#Dynamic-Extensions">Dynamic Extensions</a>). 
If that's not possible, continue with the rest of the steps in this list.

     <li>Be prepared to sign the appropriate paperwork. 
In order for the FSF to distribute your changes, you must either place
those changes in the public domain and submit a signed statement to that
effect, or assign the copyright in your changes to the FSF. 
Both of these actions are easy to do and <em>many</em> people have done so
already. If you have questions, please contact me
(see <a href="#Bugs">Bugs</a>),
or &ldquo;assign at gnu dot org&rdquo;.

     <li>Get the latest version. 
It is much easier for me to integrate changes if they are relative to
the most recent distributed version of <samp><span class="command">gawk</span></samp>.  If your version of
<samp><span class="command">gawk</span></samp> is very old, I may not be able to integrate them at all. 
(See <a href="#Getting">Getting</a>,
for information on getting the latest version of <samp><span class="command">gawk</span></samp>.)

     <li>Follow the <cite>GNU Coding Standards</cite>. 
This document describes how GNU software should be written. If you haven't
read it, please do so, preferably <em>before</em> starting to modify <samp><span class="command">gawk</span></samp>. 
(The <cite>GNU Coding Standards</cite> are available from
the GNU Project's
<a href="http://www.gnu.org/prep/standards_toc.html">web site</a>. 
Texinfo, Info, and DVI versions are also available.)

     <p><a name="index-g_t_0040command_007bgawk_007d_002c-coding-style-in-2189"></a><li>Use the <samp><span class="command">gawk</span></samp> coding style. 
The C code for <samp><span class="command">gawk</span></samp> follows the instructions in the
<cite>GNU Coding Standards</cite>, with minor exceptions.  The code is formatted
using the traditional &ldquo;K&amp;R&rdquo; style, particularly as regards to the placement
of braces and the use of TABs.  In brief, the coding rules for <samp><span class="command">gawk</span></samp>
are as follows:

          <ul>
<li>Use ANSI/ISO style (prototype) function headers when defining functions.

          <li>Put the name of the function at the beginning of its own line.

          <li>Put the return type of the function, even if it is <code>int</code>, on the
line above the line with the name and arguments of the function.

          <li>Put spaces around parentheses used in control structures
(<code>if</code>, <code>while</code>, <code>for</code>, <code>do</code>, <code>switch</code>,
and <code>return</code>).

          <li>Do not put spaces in front of parentheses used in function calls.

          <li>Put spaces around all C operators and after commas in function calls.

          <li>Do not use the comma operator to produce multiple side effects, except
in <code>for</code> loop initialization and increment parts, and in macro bodies.

          <li>Use real TABs for indenting, not spaces.

          <li>Use the &ldquo;K&amp;R&rdquo; brace layout style.

          <li>Use comparisons against <code>NULL</code> and <code>'\0'</code> in the conditions of
<code>if</code>, <code>while</code>, and <code>for</code> statements, as well as in the <code>case</code>s
of <code>switch</code> statements, instead of just the
plain pointer or character value.

          <li>Use the <code>TRUE</code>, <code>FALSE</code> and <code>NULL</code> symbolic constants
and the character constant <code>'\0'</code> where appropriate, instead of <code>1</code>
and <code>0</code>.

          <li>Provide one-line descriptive comments for each function.

          <li>Do not use the <code>alloca()</code> function for allocating memory off the
stack.  Its use causes more portability trouble than is worth the minor
benefit of not having to free the storage. Instead, use <code>malloc()</code>
and <code>free()</code>.

          <li>Do not use comparisons of the form &lsquo;<samp><span class="samp">! strcmp(a, b)</span></samp>&rsquo; or similar. 
As Henry Spencer once said, &ldquo;<code>strcmp()</code> is not a boolean!&rdquo;
Instead, use &lsquo;<samp><span class="samp">strcmp(a, b) == 0</span></samp>&rsquo;.

          <li>If adding new bit flag values, use explicit hexadecimal constants
(<code>0x001</code>, <code>0x002</code>, <code>0x004</code>, and son on) instead of
shifting one left by successive amounts (&lsquo;<samp><span class="samp">(1&lt;&lt;0)</span></samp>&rsquo;, &lsquo;<samp><span class="samp">(1&lt;&lt;1)</span></samp>&rsquo;,
and so on). 
</ul>

     <blockquote>
<b>NOTE:</b> If I have to reformat your code to follow the coding style used in
<samp><span class="command">gawk</span></samp>, I may not bother to integrate your changes at all. 
</blockquote>

     <p><a name="index-Texinfo-2190"></a><li>Update the documentation. 
Along with your new code, please supply new sections and/or chapters
for this Web page.  If at all possible, please use real
Texinfo, instead of just supplying unformatted ASCII text (although
even that is better than no documentation at all). 
Conventions to be followed in <cite>GAWK: Effective AWK Programming</cite> are provided
after the &lsquo;<samp><span class="samp">@bye</span></samp>&rsquo; at the end of the Texinfo source file. 
If possible, please update the <samp><span class="command">man</span></samp> page as well.

     <p>You will also have to sign paperwork for your documentation changes.

     <li>Submit changes as unified diffs. 
Use &lsquo;<samp><span class="samp">diff -u -r -N</span></samp>&rsquo; to compare
the original <samp><span class="command">gawk</span></samp> source tree with your version. 
I recommend using the GNU version of <samp><span class="command">diff</span></samp>. 
Send the output produced by either run of <samp><span class="command">diff</span></samp> to me when you
submit your changes. 
(See <a href="#Bugs">Bugs</a>, for the electronic mail
information.)

     <p>Using this format makes it easy for me to apply your changes to the
master version of the <samp><span class="command">gawk</span></samp> source code (using <code>patch</code>). 
If I have to apply the changes manually, using a text editor, I may
not do so, particularly if there are lots of changes.

     <li>Include an entry for the <samp><span class="file">ChangeLog</span></samp> file with your submission. 
This helps further minimize the amount of work I have to do,
making it easier for me to accept patches.
        </ol>

   <p>Although this sounds like a lot of work, please remember that while you
may write the new code, I have to maintain it and support it. If it
isn't possible for me to do that with a minimum of extra work, then I
probably will not. 
<!-- ENDOFRANGE adfgaw -->
<!-- ENDOFRANGE gawadf -->
<!-- ENDOFRANGE fadgaw -->

<div class="node">
<a name="New-Ports"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Adding-Code">Adding Code</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Additions">Additions</a>

</div>

<h4 class="appendixsubsec">C.2.3 Porting <samp><span class="command">gawk</span></samp> to a New Operating System</h4>

<p><a name="index-portability_002c-_0040command_007bgawk_007d-2191"></a><a name="index-operating-systems_002c-porting-_0040command_007bgawk_007d-to-2192"></a>
<a name="index-porting-_0040command_007bgawk_007d-2193"></a>If you want to port <samp><span class="command">gawk</span></samp> to a new operating system, there are
several steps:

     <ol type=1 start=1>
<li>Follow the guidelines in
the previous section
concerning coding style, submission of diffs, and so on.

     <li>Be prepared to sign the appropriate paperwork. 
In order for the FSF to distribute your code, you must either place
your code in the public domain and submit a signed statement to that
effect, or assign the copyright in your code to the FSF.

     <li>When doing a port, bear in mind that your code must coexist peacefully
with the rest of <samp><span class="command">gawk</span></samp> and the other ports. Avoid gratuitous
changes to the system-independent parts of the code. If at all possible,
avoid sprinkling &lsquo;<samp><span class="samp">#ifdef</span></samp>&rsquo;s just for your port throughout the
code.

     <p>If the changes needed for a particular system affect too much of the
code, I probably will not accept them.  In such a case, you can, of course,
distribute your changes on your own, as long as you comply
with the GPL
(see <a href="#Copying">Copying</a>).

     <li>A number of the files that come with <samp><span class="command">gawk</span></samp> are maintained by other
people.  Thus, you should not change them
unless it is for a very good reason; i.e., changes are not out of the
question, but changes to these files are scrutinized extra carefully. 
The files are <samp><span class="file">dfa.c</span></samp>, <samp><span class="file">dfa.h</span></samp>, <samp><span class="file">getopt1.c</span></samp>, <samp><span class="file">getopt.c</span></samp>,
<samp><span class="file">getopt.h</span></samp>, <samp><span class="file">install-sh</span></samp>, <samp><span class="file">mkinstalldirs</span></samp>, <samp><span class="file">regcomp.c</span></samp>,
<samp><span class="file">regex.c</span></samp>, <samp><span class="file">regexec.c</span></samp>, <samp><span class="file">regexex.c</span></samp>, <samp><span class="file">regex.h</span></samp>,
<samp><span class="file">regex_internal.c</span></samp>, and <samp><span class="file">regex_internal.h</span></samp>.

     <li>Be willing to continue to maintain the port. 
Non-Unix operating systems are supported by volunteers who maintain
the code needed to compile and run <samp><span class="command">gawk</span></samp> on their systems. If noone
volunteers to maintain a port, it becomes unsupported and it may
be necessary to remove it from the distribution.

     <li>Supply an appropriate <samp><span class="file">gawkmisc.???</span></samp> file. 
Each port has its own <samp><span class="file">gawkmisc.???</span></samp> that implements certain
operating system specific functions. This is cleaner than a plethora of
&lsquo;<samp><span class="samp">#ifdef</span></samp>&rsquo;s scattered throughout the code.  The <samp><span class="file">gawkmisc.c</span></samp> in
the main source directory includes the appropriate
<samp><span class="file">gawkmisc.???</span></samp> file from each subdirectory. 
Be sure to update it as well.

     <p>Each port's <samp><span class="file">gawkmisc.???</span></samp> file has a suffix reminiscent of the machine
or operating system for the port&mdash;for example, <samp><span class="file">pc/gawkmisc.pc</span></samp> and
<samp><span class="file">vms/gawkmisc.vms</span></samp>. The use of separate suffixes, instead of plain
<samp><span class="file">gawkmisc.c</span></samp>, makes it possible to move files from a port's subdirectory
into the main subdirectory, without accidentally destroying the real
<samp><span class="file">gawkmisc.c</span></samp> file.  (Currently, this is only an issue for the
PC operating system ports.)

     <li>Supply a <samp><span class="file">Makefile</span></samp> as well as any other C source and header files that are
necessary for your operating system.  All your code should be in a
separate subdirectory, with a name that is the same as, or reminiscent
of, either your operating system or the computer system.  If possible,
try to structure things so that it is not necessary to move files out
of the subdirectory into the main source directory.  If that is not
possible, then be sure to avoid using names for your files that
duplicate the names of files in the main source directory.

     <li>Update the documentation. 
Please write a section (or sections) for this Web page describing the
installation and compilation steps needed to compile and/or install
<samp><span class="command">gawk</span></samp> for your system.
        </ol>

   <p>Following these steps makes it much easier to integrate your changes
into <samp><span class="command">gawk</span></samp> and have them coexist happily with other
operating systems' code that is already there.

   <p>In the code that you supply and maintain, feel free to use a
coding style and brace layout that suits your taste.

<div class="node">
<a name="Dynamic-Extensions"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Future-Extensions">Future Extensions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Additions">Additions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Notes">Notes</a>

</div>

<h3 class="appendixsec">C.3 Adding New Built-in Functions to <samp><span class="command">gawk</span></samp></h3>

<p><a name="index-Robinson_002c-Will-2194"></a><a name="index-robot_002c-the-2195"></a><a name="index-Lost-In-Space-2196"></a><blockquote>
<i>Danger Will Robinson!  Danger!!<br>
Warning! Warning!</i><br>
The Robot
</blockquote>

<!-- STARTOFRANGE gladfgaw -->
   <p><a name="index-g_t_0040command_007bgawk_007d_002c-functions_002c-adding-2197"></a><!-- STARTOFRANGE adfugaw -->
<a name="index-adding_002c-functions-to-_0040command_007bgawk_007d-2198"></a><!-- STARTOFRANGE fubadgaw -->
<a name="index-functions_002c-built_002din_002c-adding-to-_0040command_007bgawk_007d-2199"></a>It is possible to add new built-in
functions to <samp><span class="command">gawk</span></samp> using dynamically loaded libraries. This
facility is available on systems (such as GNU/Linux) that support
the C <code>dlopen()</code> and <code>dlsym()</code> functions. 
This section describes how to write and use dynamically
loaded extensions for <samp><span class="command">gawk</span></samp>. 
Experience with programming in
C or C++ is necessary when reading this section.

   <blockquote>
<b>CAUTION:</b> The facilities described in this section
are very much subject to change in a future <samp><span class="command">gawk</span></samp> release. 
Be aware that you may have to re-do everything,
at some future time.

   <p>If you have written your own dynamic extensions,
be sure to recompile them for each new <samp><span class="command">gawk</span></samp> release. 
There is no guarantee of binary compatibility between different
releases, nor will there ever be such a guarantee. 
</blockquote>

   <blockquote>
<b>NOTE:</b> When <samp><span class="option">--sandbox</span></samp> is specified, extensions are disabled
(see <a href="#Options">Options</a>. 
</blockquote>

<ul class="menu">
<li><a accesskey="1" href="#Internals">Internals</a>:                    A brief look at some <samp><span class="command">gawk</span></samp> internals. 
<li><a accesskey="2" href="#Plugin-License">Plugin License</a>:               A note about licensing. 
<li><a accesskey="3" href="#Sample-Library">Sample Library</a>:               A example of new functions. 
</ul>

<div class="node">
<a name="Internals"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Plugin-License">Plugin License</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Dynamic-Extensions">Dynamic Extensions</a>

</div>

<h4 class="appendixsubsec">C.3.1 A Minimal Introduction to <samp><span class="command">gawk</span></samp> Internals</h4>

<!-- STARTOFRANGE gawint -->
<p><a name="index-g_t_0040command_007bgawk_007d_002c-internals-2200"></a>
The truth is that <samp><span class="command">gawk</span></samp> was not designed for simple extensibility. 
The facilities for adding functions using shared libraries work, but
are something of a &ldquo;bag on the side.&rdquo;  Thus, this tour is
brief and simplistic; would-be <samp><span class="command">gawk</span></samp> hackers are encouraged to
spend some time reading the source code before trying to write
extensions based on the material presented here.  Of particular note
are the files <samp><span class="file">awk.h</span></samp>, <samp><span class="file">builtin.c</span></samp>, and <samp><span class="file">eval.c</span></samp>. 
Reading <samp><span class="file">awkgram.y</span></samp> in order to see how the parse tree is built
would also be of use.

   <p><a name="index-g_t_0040code_007bawk_002eh_007d-file-_0028internal_0029-2201"></a>With the disclaimers out of the way, the following types, structure
members, functions, and macros are declared in <samp><span class="file">awk.h</span></samp> and are of
use when writing extensions.  The next section
shows how they are used:

     
<a name="index-floating_002dpoint_002c-numbers_002c-_0040code_007bAWKNUM_007d-internal-type-2202"></a>
<a name="index-numbers_002c-floating_002dpoint_002c-_0040code_007bAWKNUM_007d-internal-type-2203"></a>
<a name="index-g_t_0040code_007bAWKNUM_007d-internal-type-2204"></a>
<a name="index-internal-type_002c-_0040code_007bAWKNUM_007d-2205"></a>
<dl><dt><code>AWKNUM</code><dd>An <code>AWKNUM</code> is the internal type of <samp><span class="command">awk</span></samp>
floating-point numbers.  Typically, it is a C <code>double</code>.

     <p><a name="index-g_t_0040code_007bNODE_007d-internal-type-2206"></a><a name="index-internal-type_002c-_0040code_007bNODE_007d-2207"></a><a name="index-strings_002c-_0040code_007bNODE_007d-internal-type-2208"></a><a name="index-numbers_002c-_0040code_007bNODE_007d-internal-type-2209"></a><br><dt><code>NODE</code><dd>Just about everything is done using objects of type <code>NODE</code>. 
These contain both strings and numbers, as well as variables and arrays.

     <p><a name="index-g_t_0040code_007bforce_005fnumber_0028_0029_007d-internal-function-2210"></a><a name="index-internal-function_002c-_0040code_007bforce_005fnumber_0028_0029_007d-2211"></a><a name="index-numeric_002c-values-2212"></a><br><dt><code>AWKNUM force_number(NODE *n)</code><dd>This macro forces a value to be numeric. It returns the actual
numeric value contained in the node. 
It may end up calling an internal <samp><span class="command">gawk</span></samp> function.

     <p><a name="index-g_t_0040code_007bforce_005fstring_0028_0029_007d-internal-function-2213"></a><a name="index-internal-function_002c-_0040code_007bforce_005fstring_0028_0029_007d-2214"></a><br><dt><code>void force_string(NODE *n)</code><dd>This macro guarantees that a <code>NODE</code>'s string value is current. 
It may end up calling an internal <samp><span class="command">gawk</span></samp> function. 
It also guarantees that the string is zero-terminated.

     <p><a name="index-g_t_0040code_007bforce_005fwstring_0028_0029_007d-internal-function-2215"></a><a name="index-internal-function_002c-_0040code_007bforce_005fwstring_0028_0029_007d-2216"></a><br><dt><code>void force_wstring(NODE *n)</code><dd>Similarly, this
macro guarantees that a <code>NODE</code>'s wide-string value is current. 
It may end up calling an internal <samp><span class="command">gawk</span></samp> function. 
It also guarantees that the wide string is zero-terminated.

     <p><a name="index-g_t_0040code_007bget_005fcurfunc_005farg_005fcount_0028_0029_007d-internal-function-2217"></a><a name="index-internal-function_002c-_0040code_007bget_005fcurfunc_005farg_005fcount_0028_0029_007d-2218"></a><br><dt><code>size_t get_curfunc_arg_count(void)</code><dd>This function returns the actual number of parameters passed
to the current function.  Inside the code of an extension
this can be used to determine the maximum index which is
safe to use with <code>get_actual_argument</code>.  If this value is
greater than <code>nargs</code>, the function was
called incorrectly from the <samp><span class="command">awk</span></samp> program.

     <p><a name="index-parameters_0040comma_007b_007d-number-of-2219"></a><a name="index-g_t_0040code_007bnargs_007d-internal-variable-2220"></a><a name="index-internal-variable_002c-_0040code_007bnargs_007d-2221"></a><br><dt><code>nargs</code><dd>Inside an extension function, this is the maximum number of
expected parameters, as set by the <code>make_builtin()</code> function.

     <p><a name="index-g_t_0040code_007bstptr_007d-internal-variable-2222"></a><a name="index-internal-variable_002c-_0040code_007bstptr_007d-2223"></a><a name="index-g_t_0040code_007bstlen_007d-internal-variable-2224"></a><a name="index-internal-variable_002c-_0040code_007bstlen_007d-2225"></a><br><dt><code>n-&gt;stptr</code><dt><code>n-&gt;stlen</code><dd>The data and length of a <code>NODE</code>'s string value, respectively. 
The string is <em>not</em> guaranteed to be zero-terminated. 
If you need to pass the string value to a C library function, save
the value in <code>n-&gt;stptr[n-&gt;stlen]</code>, assign <code>'\0'</code> to it,
call the routine, and then restore the value.

     <p><a name="index-g_t_0040code_007bwstptr_007d-internal-variable-2226"></a><a name="index-internal-variable_002c-_0040code_007bwstptr_007d-2227"></a><a name="index-g_t_0040code_007bwstlen_007d-internal-variable-2228"></a><a name="index-internal-variable_002c-_0040code_007bwstlen_007d-2229"></a><br><dt><code>n-&gt;wstptr</code><dt><code>n-&gt;wstlen</code><dd>The data and length of a <code>NODE</code>'s wide-string value, respectively. 
Use <code>force_wstring()</code> to make sure these values are current.

     <p><a name="index-g_t_0040code_007btype_007d-internal-variable-2230"></a><a name="index-internal-variable_002c-_0040code_007btype_007d-2231"></a><br><dt><code>n-&gt;type</code><dd>The type of the <code>NODE</code>. This is a C <code>enum</code>. Values should
be one of <code>Node_var</code>, <code>Node_var_new</code>, or <code>Node_var_array</code>
for function parameters.

     <p><a name="index-g_t_0040code_007bvname_007d-internal-variable-2232"></a><a name="index-internal-variable_002c-_0040code_007bvname_007d-2233"></a><br><dt><code>n-&gt;vname</code><dd>The &ldquo;variable name&rdquo; of a node.  This is not of much use inside
externally written extensions.

     <p><a name="index-arrays_002c-associative_002c-clearing-2234"></a><a name="index-g_t_0040code_007bassoc_005fclear_0028_0029_007d-internal-function-2235"></a><a name="index-internal-function_002c-_0040code_007bassoc_005fclear_0028_0029_007d-2236"></a><br><dt><code>void assoc_clear(NODE *n)</code><dd>Clears the associative array pointed to by <code>n</code>. 
Make sure that &lsquo;<samp><span class="samp">n-&gt;type == Node_var_array</span></samp>&rsquo; first.

     <p><a name="index-arrays_002c-elements_002c-installing-2237"></a><a name="index-g_t_0040code_007bassoc_005flookup_0028_0029_007d-internal-function-2238"></a><a name="index-internal-function_002c-_0040code_007bassoc_005flookup_0028_0029_007d-2239"></a><br><dt><code>NODE **assoc_lookup(NODE *symbol, NODE *subs, int reference)</code><dd>Finds, and installs if necessary, array elements. 
<code>symbol</code> is the array, <code>subs</code> is the subscript. 
This is usually a value created with <code>make_string()</code> (see below). 
<code>reference</code> should be <code>TRUE</code> if it is an error to use the
value before it is created. Typically, <code>FALSE</code> is the
correct value to use from extension functions.

     <p><a name="index-strings-2240"></a><a name="index-g_t_0040code_007bmake_005fstring_0028_0029_007d-internal-function-2241"></a><a name="index-internal-function_002c-_0040code_007bmake_005fstring_0028_0029_007d-2242"></a><br><dt><code>NODE *make_string(char *s, size_t len)</code><dd>Take a C string and turn it into a pointer to a <code>NODE</code> that
can be stored appropriately.  This is permanent storage; understanding
of <samp><span class="command">gawk</span></samp> memory management is helpful.

     <p><a name="index-numbers-2243"></a><a name="index-g_t_0040code_007bmake_005fnumber_0028_0029_007d-internal-function-2244"></a><a name="index-internal-function_002c-_0040code_007bmake_005fnumber_0028_0029_007d-2245"></a><br><dt><code>NODE *make_number(AWKNUM val)</code><dd>Take an <code>AWKNUM</code> and turn it into a pointer to a <code>NODE</code> that
can be stored appropriately.  This is permanent storage; understanding
of <samp><span class="command">gawk</span></samp> memory management is helpful.

     <p><a name="index-nodes_0040comma_007b_007d-duplicating-2246"></a><a name="index-g_t_0040code_007bdupnode_0028_0029_007d-internal-function-2247"></a><a name="index-internal-function_002c-_0040code_007bdupnode_0028_0029_007d-2248"></a><br><dt><code>NODE *dupnode(NODE *n)</code><dd>Duplicate a node.  In most cases, this increments an internal
reference count instead of actually duplicating the entire <code>NODE</code>;
understanding of <samp><span class="command">gawk</span></samp> memory management is helpful.

     <p><a name="index-memory_002c-releasing-2249"></a><a name="index-g_t_0040code_007bunref_0028_0029_007d-internal-function-2250"></a><a name="index-internal-function_002c-_0040code_007bunref_0028_0029_007d-2251"></a><br><dt><code>void unref(NODE *n)</code><dd>This macro releases the memory associated with a <code>NODE</code>
allocated with <code>make_string()</code> or <code>make_number()</code>. 
Understanding of <samp><span class="command">gawk</span></samp> memory management is helpful.

     <p><a name="index-g_t_0040code_007bmake_005fbuiltin_0028_0029_007d-internal-function-2252"></a><a name="index-internal-function_002c-_0040code_007bmake_005fbuiltin_0028_0029_007d-2253"></a><br><dt><code>void make_builtin(const char *name, NODE *(*func)(NODE *), int count)</code><dd>Register a C function pointed to by <code>func</code> as new built-in
function <code>name</code>. <code>name</code> is a regular C string. <code>count</code>
is the maximum number of arguments that the function takes. 
The function should be written in the following manner:

     <pre class="example">          /* do_xxx --- do xxx function for gawk */
          
          NODE *
          do_xxx(int nargs)
          {
              ...
          }
</pre>
     <p><a name="index-arguments_002c-retrieving-2254"></a><a name="index-g_t_0040code_007bget_005fargument_0028_0029_007d-internal-function-2255"></a><a name="index-internal-function_002c-_0040code_007bget_005fargument_0028_0029_007d-2256"></a><br><dt><code>NODE *get_argument(int i)</code><dd>This function is called from within a C extension function to get
the <code>i</code>-th argument from the function call. 
The first argument is argument zero.

     <p><a name="index-g_t_0040code_007bget_005factual_005fargument_0028_0029_007d-internal-function-2257"></a><a name="index-internal-function_002c-_0040code_007bget_005factual_005fargument_0028_0029_007d-2258"></a><br><dt><code>NODE *get_actual_argument(int i,</code><dt><code>                          int optional, int wantarray);</code><dd>This function retrieves a particular argument <code>i</code>.  <code>wantarray</code> is <code>TRUE</code>
if the argument should be an array, <code>FALSE</code> otherwise. If <code>optional</code> is
<code>TRUE</code>, the argument need not have been supplied.  If it wasn't, the return
value is <code>NULL</code>.  It is a fatal error if <code>optional</code> is <code>TRUE</code> but
the argument was not provided.

     <p><a name="index-g_t_0040code_007bget_005fscalar_005fargument_0028_0029_007d-internal-macro-2259"></a><a name="index-internal-macro_002c-_0040code_007bget_005fscalar_005fargument_0028_0029_007d-2260"></a><br><dt><code>get_scalar_argument(i, opt)</code><dd>This is a convenience macro that calls <code>get_actual_argument()</code>.

     <p><a name="index-g_t_0040code_007bget_005farray_005fargument_0028_0029_007d-internal-macro-2261"></a><a name="index-internal-macro_002c-_0040code_007bget_005farray_005fargument_0028_0029_007d-2262"></a><br><dt><code>get_array_argument(i, opt)</code><dd>This is a convenience macro that calls <code>get_actual_argument()</code>.

     <p><a name="index-functions_002c-return-values_0040comma_007b_007d-setting-2263"></a>
<a name="index-g_t_0040code_007bERRNO_007d-variable-2264"></a><a name="index-g_t_0040code_007bupdate_005fERRNO_0028_0029_007d-internal-function-2265"></a><a name="index-internal-function_002c-_0040code_007bupdate_005fERRNO_0028_0029_007d-2266"></a><br><dt><code>void update_ERRNO(void)</code><dd>This function is called from within a C extension function to set
the value of <samp><span class="command">gawk</span></samp>'s <code>ERRNO</code> variable, based on the current
value of the C <code>errno</code> global variable. 
It is provided as a convenience.

     <p><a name="index-g_t_0040code_007bERRNO_007d-variable-2267"></a><a name="index-g_t_0040code_007bupdate_005fERRNO_005fsaved_0028_0029_007d-internal-function-2268"></a><a name="index-internal-function_002c-_0040code_007bupdate_005fERRNO_005fsaved_0028_0029_007d-2269"></a><br><dt><code>void update_ERRNO_saved(int errno_saved)</code><dd>This function is called from within a C extension function to set
the value of <samp><span class="command">gawk</span></samp>'s <code>ERRNO</code> variable, based on the error
value provided as the argument. 
It is provided as a convenience.

     <p><a name="index-g_t_0040code_007bENVIRON_007d-array-2270"></a><a name="index-g_t_0040code_007bPROCINFO_007d-array-2271"></a><a name="index-g_t_0040code_007bregister_005fdeferred_005fvariable_0028_0029_007d-internal-function-2272"></a><a name="index-internal-function_002c-_0040code_007bregister_005fdeferred_005fvariable_0028_0029_007d-2273"></a><br><dt><code>void register_deferred_variable(const char *name, NODE *(*load_func)(void))</code><dd>This function is called to register a function to be called when a
reference to an undefined variable with the given name is encountered. 
The callback function will never be called if the variable exists already,
so, unless the calling code is running at program startup, it should first
check whether a variable of the given name already exists. 
The argument function must return a pointer to a <code>NODE</code> containing the
newly created variable.  This function is used to implement the builtin
<code>ENVIRON</code> and <code>PROCINFO</code> arrays, so you can refer to them
for examples.

     <p><a name="index-g_t_0040code_007bIOBUF_007d-internal-structure-2274"></a><a name="index-internal-structure_002c-_0040code_007bIOBUF_007d-2275"></a><a name="index-g_t_0040code_007biop_005falloc_0028_0029_007d-internal-function-2276"></a><a name="index-internal-function_002c-_0040code_007biop_005falloc_0028_0029_007d-2277"></a><a name="index-g_t_0040code_007bget_005frecord_0028_0029_007d-input-method-2278"></a><a name="index-g_t_0040code_007bclose_005ffunc_007d_0028_0029-input-method-2279"></a><a name="index-g_t_0040code_007bINVALID_005fHANDLE_007d-internal-constant-2280"></a><a name="index-internal-constant_002c-_0040code_007bINVALID_005fHANDLE_007d-2281"></a><a name="index-XML-_0028eXtensible-Markup-Language_0029-2282"></a><a name="index-eXtensible-Markup-Language-_0028XML_0029-2283"></a><a name="index-g_t_0040code_007bregister_005fopen_005fhook_0028_0029_007d-internal-function-2284"></a><a name="index-internal-function_002c-_0040code_007bregister_005fopen_005fhook_0028_0029_007d-2285"></a><br><dt><code>void register_open_hook(void *(*open_func)(IOBUF *))</code><dd>This function is called to register a function to be called whenever
a new data file is opened, leading to the creation of an <code>IOBUF</code>
structure in <code>iop_alloc()</code>.  After creating the new <code>IOBUF</code>,
<code>iop_alloc()</code> will call (in reverse order of registration, so the last
function registered is called first) each open hook until one returns
non-<code>NULL</code>.  If any hook returns a non-<code>NULL</code> value, that value is assigned
to the <code>IOBUF</code>'s <code>opaque</code> field (which will presumably point
to a structure containing additional state associated with the input
processing), and no further open hooks are called.

     <p>The function called will most likely want to set the <code>IOBUF</code>'s
<code>get_record</code> method to indicate that future input records should
be retrieved by calling that method instead of using the standard
<samp><span class="command">gawk</span></samp> input processing.

     <p>And the function will also probably want to set the <code>IOBUF</code>'s
<code>close_func</code> method to be called when the file is closed to clean
up any state associated with the input.

     <p>Finally, hook functions should be prepared to receive an <code>IOBUF</code>
structure where the <code>fd</code> field is set to <code>INVALID_HANDLE</code>,
meaning that <samp><span class="command">gawk</span></samp> was not able to open the file itself. In
this case, the hook function must be able to successfully open the file
and place a valid file descriptor there.

     <p>Currently, for example, the hook function facility is used to implement
the XML parser shared library extension.  For more info, please look in
<samp><span class="file">awk.h</span></samp> and in <samp><span class="file">io.c</span></samp>. 
</dl>

   <p>An argument that is supposed to be an array needs to be handled with
some extra code, in case the array being passed in is actually
from a function parameter.

   <p>The following boilerplate code shows how to do this:

<pre class="example">     NODE *the_arg;
     
     /* assume need 3rd arg, 0-based */
     the_arg = get_array_argument(2, FALSE);
</pre>
   <p>Again, you should spend time studying the <samp><span class="command">gawk</span></samp> internals;
don't just blindly copy this code. 
<!-- ENDOFRANGE gawint -->

<div class="node">
<a name="Plugin-License"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Sample-Library">Sample Library</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Internals">Internals</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Dynamic-Extensions">Dynamic Extensions</a>

</div>

<h4 class="appendixsubsec">C.3.2 Extension Licensing</h4>

<p>Every dynamic extension should define the global symbol
<code>plugin_is_GPL_compatible</code> to assert that it has been licensed under
a GPL-compatible license.  If this symbol does not exist, <samp><span class="command">gawk</span></samp>
will emit a fatal error and exit.

   <p>The declared type of the symbol should be <code>int</code>.  It does not need
to be in any allocated section, though.  The code merely asserts that
the symbol exists in the global scope.  Something like this is enough:

<pre class="example">     int plugin_is_GPL_compatible;
</pre>
   <div class="node">
<a name="Sample-Library"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Plugin-License">Plugin License</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Dynamic-Extensions">Dynamic Extensions</a>

</div>

<h4 class="appendixsubsec">C.3.3 Example: Directory and File Operation Built-ins</h4>

<!-- STARTOFRANGE chdirg -->
<p><a name="index-g_t_0040code_007bchdir_0028_0029_007d-function_0040comma_007b_007d-implementing-in-_0040command_007bgawk_007d-2286"></a><!-- STARTOFRANGE statg -->
<a name="index-g_t_0040code_007bstat_0028_0029_007d-function_0040comma_007b_007d-implementing-in-_0040command_007bgawk_007d-2287"></a><!-- STARTOFRANGE filre -->
<a name="index-files_002c-information-about_0040comma_007b_007d-retrieving-2288"></a><!-- STARTOFRANGE dirch -->
<a name="index-directories_002c-changing-2289"></a>
Two useful functions that are not in <samp><span class="command">awk</span></samp> are <code>chdir()</code>
(so that an <samp><span class="command">awk</span></samp> program can change its directory) and
<code>stat()</code> (so that an <samp><span class="command">awk</span></samp> program can gather information about
a file). 
This section implements these functions for <samp><span class="command">gawk</span></samp> in an
external extension library.

<ul class="menu">
<li><a accesskey="1" href="#Internal-File-Description">Internal File Description</a>:    What the new functions will do. 
<li><a accesskey="2" href="#Internal-File-Ops">Internal File Ops</a>:            The code for internal file operations. 
<li><a accesskey="3" href="#Using-Internal-File-Ops">Using Internal File Ops</a>:      How to use an external extension. 
</ul>

<div class="node">
<a name="Internal-File-Description"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Internal-File-Ops">Internal File Ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sample-Library">Sample Library</a>

</div>

<h5 class="appendixsubsubsec">C.3.3.1 Using <code>chdir()</code> and <code>stat()</code></h5>

<p>This section shows how to use the new functions at the <samp><span class="command">awk</span></samp>
level once they've been integrated into the running <samp><span class="command">gawk</span></samp>
interpreter. 
Using <code>chdir()</code> is very straightforward. It takes one argument,
the new directory to change to:

<pre class="example">     ...
     newdir = "/home/arnold/funstuff"
     ret = chdir(newdir)
     if (ret &lt; 0) {
         printf("could not change to %s: %s\n",
                        newdir, ERRNO) &gt; "/dev/stderr"
         exit 1
     }
     ...
</pre>
   <p>The return value is negative if the <code>chdir</code> failed,
and <code>ERRNO</code>
(see <a href="#Built_002din-Variables">Built-in Variables</a>)
is set to a string indicating the error.

   <p>Using <code>stat()</code> is a bit more complicated. 
The C <code>stat()</code> function fills in a structure that has a fair
amount of information. 
The right way to model this in <samp><span class="command">awk</span></samp> is to fill in an associative
array with the appropriate information:

<!-- broke printf for page breaking -->
<pre class="example">     file = "/home/arnold/.profile"
     fdata[1] = "x"    # force `fdata' to be an array
     ret = stat(file, fdata)
     if (ret &lt; 0) {
         printf("could not stat %s: %s\n",
                  file, ERRNO) &gt; "/dev/stderr"
         exit 1
     }
     printf("size of %s is %d bytes\n", file, fdata["size"])
</pre>
   <p>The <code>stat()</code> function always clears the data array, even if
the <code>stat()</code> fails.  It fills in the following elements:

     <dl>
<dt><code>"name"</code><dd>The name of the file that was <code>stat()</code>'ed.

     <br><dt><code>"dev"</code><dt><code>"ino"</code><dd>The file's device and inode numbers, respectively.

     <br><dt><code>"mode"</code><dd>The file's mode, as a numeric value. This includes both the file's
type and its permissions.

     <br><dt><code>"nlink"</code><dd>The number of hard links (directory entries) the file has.

     <br><dt><code>"uid"</code><dt><code>"gid"</code><dd>The numeric user and group ID numbers of the file's owner.

     <br><dt><code>"size"</code><dd>The size in bytes of the file.

     <br><dt><code>"blocks"</code><dd>The number of disk blocks the file actually occupies. This may not
be a function of the file's size if the file has holes.

     <br><dt><code>"atime"</code><dt><code>"mtime"</code><dt><code>"ctime"</code><dd>The file's last access, modification, and inode update times,
respectively.  These are numeric timestamps, suitable for formatting
with <code>strftime()</code>
(see <a href="#Built_002din">Built-in</a>).

     <br><dt><code>"pmode"</code><dd>The file's &ldquo;printable mode.&rdquo;  This is a string representation of
the file's type and permissions, such as what is produced by
&lsquo;<samp><span class="samp">ls -l</span></samp>&rsquo;&mdash;for example, <code>"drwxr-xr-x"</code>.

     <br><dt><code>"type"</code><dd>A printable string representation of the file's type.  The value
is one of the following:

          <dl>
<dt><code>"blockdev"</code><dt><code>"chardev"</code><dd>The file is a block or character device (&ldquo;special file&rdquo;).

          <br><dt><code>"directory"</code><dd>The file is a directory.

          <br><dt><code>"fifo"</code><dd>The file is a named-pipe (also known as a FIFO).

          <br><dt><code>"file"</code><dd>The file is just a regular file.

          <br><dt><code>"socket"</code><dd>The file is an <code>AF_UNIX</code> (&ldquo;Unix domain&rdquo;) socket in the
filesystem.

          <br><dt><code>"symlink"</code><dd>The file is a symbolic link. 
</dl>
     </dl>

   <p>Several additional elements may be present depending upon the operating
system and the type of the file.  You can test for them in your <samp><span class="command">awk</span></samp>
program by using the <code>in</code> operator
(see <a href="#Reference-to-Elements">Reference to Elements</a>):

     <dl>
<dt><code>"blksize"</code><dd>The preferred block size for I/O to the file. This field is not
present on all POSIX-like systems in the C <code>stat</code> structure.

     <br><dt><code>"linkval"</code><dd>If the file is a symbolic link, this element is the name of the
file the link points to (i.e., the value of the link).

     <br><dt><code>"rdev"</code><dt><code>"major"</code><dt><code>"minor"</code><dd>If the file is a block or character device file, then these values
represent the numeric device number and the major and minor components
of that number, respectively. 
</dl>

<div class="node">
<a name="Internal-File-Ops"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Using-Internal-File-Ops">Using Internal File Ops</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Internal-File-Description">Internal File Description</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sample-Library">Sample Library</a>

</div>

<h5 class="appendixsubsubsec">C.3.3.2 C Code for <code>chdir()</code> and <code>stat()</code></h5>

<p>Here is the C code for these extensions.  They were written for
GNU/Linux.  The code needs some more work for complete portability
to other POSIX-compliant systems:<a rel="footnote" href="#fn-87" name="fnd-87"><sup>87</sup></a>

<!-- break line for page breaking -->
<pre class="example">     #include "awk.h"
     
     #include &lt;sys/sysmacros.h&gt;
     
     int plugin_is_GPL_compatible;
     
     /*  do_chdir --- provide dynamically loaded chdir() builtin for gawk */
     
     static NODE *
     do_chdir(int nargs)
     {
         NODE *newdir;
         int ret = -1;
     
         if (do_lint &amp;&amp; get_curfunc_arg_count() != 1)
             lintwarn("chdir: called with incorrect number of arguments");
     
         newdir = get_scalar_argument(0, FALSE);
</pre>
   <p>The file includes the <code>"awk.h"</code> header file for definitions
for the <samp><span class="command">gawk</span></samp> internals.  It includes <code>&lt;sys/sysmacros.h&gt;</code>
for access to the <code>major()</code> and <code>minor</code>() macros.

   <p><a name="index-programming-conventions_002c-_0040command_007bgawk_007d-internals-2290"></a>By convention, for an <samp><span class="command">awk</span></samp> function <code>foo</code>, the function that
implements it is called &lsquo;<samp><span class="samp">do_foo</span></samp>&rsquo;.  The function should take
a &lsquo;<samp><span class="samp">int</span></samp>&rsquo; argument, usually called <code>nargs</code>, that
represents the number of defined arguments for the function.  The <code>newdir</code>
variable represents the new directory to change to, retrieved
with <code>get_scalar_argument()</code>.  Note that the first argument is
numbered zero.

   <p>This code actually accomplishes the <code>chdir()</code>. It first forces
the argument to be a string and passes the string value to the
<code>chdir()</code> system call. If the <code>chdir()</code> fails, <code>ERRNO</code>
is updated.

<pre class="example">         (void) force_string(newdir);
         ret = chdir(newdir-&gt;stptr);
         if (ret &lt; 0)
             update_ERRNO();
</pre>
   <p>Finally, the function returns the return value to the <samp><span class="command">awk</span></samp> level:

<pre class="example">         return make_number((AWKNUM) ret);
     }
</pre>
   <p>The <code>stat()</code> built-in is more involved.  First comes a function
that turns a numeric mode into a printable representation
(e.g., 644 becomes &lsquo;<samp><span class="samp">-rw-r--r--</span></samp>&rsquo;). This is omitted here for brevity:

<!-- break line for page breaking -->
<pre class="example">     /* format_mode --- turn a stat mode field into something readable */
     
     static char *
     format_mode(unsigned long fmode)
     {
         ...
     }
</pre>
   <p>Next comes the <code>do_stat()</code> function. It starts with
variable declarations and argument checking:

<pre class="example">     /* do_stat --- provide a stat() function for gawk */
     
     static NODE *
     do_stat(int nargs)
     {
         NODE *file, *array, *tmp;
         struct stat sbuf;
         int ret;
         NODE **aptr;
         char *pmode;    /* printable mode */
         char *type = "unknown";
     
         if (do_lint &amp;&amp; get_curfunc_arg_count() &gt; 2)
             lintwarn("stat: called with too many arguments");
</pre>
   <p>Then comes the actual work. First, the function gets the arguments. 
Then, it always clears the array. 
The code use <code>lstat()</code> (instead of <code>stat()</code>)
to get the file information,
in case the file is a symbolic link. 
If there's an error, it sets <code>ERRNO</code> and returns:

<!-- comment made multiline for page breaking -->
<pre class="example">         /* file is first arg, array to hold results is second */
         file = get_scalar_argument(0, FALSE);
         array = get_array_argument(1, FALSE);
     
         /* empty out the array */
         assoc_clear(array);
     
         /* lstat the file, if error, set ERRNO and return */
         (void) force_string(file);
         ret = lstat(file-&gt;stptr, &amp; sbuf);
         if (ret &lt; 0) {
             update_ERRNO();
             return make_number((AWKNUM) ret);
         }
</pre>
   <p>Now comes the tedious part: filling in the array.  Only a few of the
calls are shown here, since they all follow the same pattern:

<pre class="example">         /* fill in the array */
         aptr = assoc_lookup(array, tmp = make_string("name", 4), FALSE);
         *aptr = dupnode(file);
         unref(tmp);
     
         aptr = assoc_lookup(array, tmp = make_string("mode", 4), FALSE);
         *aptr = make_number((AWKNUM) sbuf.st_mode);
         unref(tmp);
     
         aptr = assoc_lookup(array, tmp = make_string("pmode", 5), FALSE);
         pmode = format_mode(sbuf.st_mode);
         *aptr = make_string(pmode, strlen(pmode));
         unref(tmp);
</pre>
   <p>When done, return the <code>lstat()</code> return value:

<pre class="example">     
         return make_number((AWKNUM) ret);
     }
</pre>
   <p><a name="index-programming-conventions_002c-_0040command_007bgawk_007d-internals-2291"></a>Finally, it's necessary to provide the &ldquo;glue&rdquo; that loads the
new function(s) into <samp><span class="command">gawk</span></samp>.  By convention, each library has
a routine named <code>dlload()</code> that does the job:

<pre class="example">     /* dlload --- load new builtins in this library */
     
     NODE *
     dlload(NODE *tree, void *dl)
     {
         make_builtin("chdir", do_chdir, 1);
         make_builtin("stat", do_stat, 2);
         return make_number((AWKNUM) 0);
     }
</pre>
   <p>And that's it!  As an exercise, consider adding functions to
implement system calls such as <code>chown()</code>, <code>chmod()</code>,
and <code>umask()</code>.

<div class="node">
<a name="Using-Internal-File-Ops"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Internal-File-Ops">Internal File Ops</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Sample-Library">Sample Library</a>

</div>

<h5 class="appendixsubsubsec">C.3.3.3 Integrating the Extensions</h5>

<p><a name="index-g_t_0040command_007bgawk_007d_002c-interpreter_0040comma_007b_007d-adding-code-to-2292"></a>Now that the code is written, it must be possible to add it at
runtime to the running <samp><span class="command">gawk</span></samp> interpreter.  First, the
code must be compiled.  Assuming that the functions are in
a file named <samp><span class="file">filefuncs.c</span></samp>, and <var>idir</var> is the location
of the <samp><span class="command">gawk</span></samp> include files,
the following steps create
a GNU/Linux shared library:

<pre class="example">     $ <kbd>gcc -fPIC -shared -DHAVE_CONFIG_H -c -O -g -I</kbd><var>idir</var><kbd> filefuncs.c</kbd>
     $ <kbd>ld -o filefuncs.so -shared filefuncs.o</kbd>
</pre>
   <p><a name="index-g_t_0040code_007bextension_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-2293"></a>Once the library exists, it is loaded by calling the <code>extension()</code>
built-in function. 
This function takes two arguments: the name of the
library to load and the name of a function to call when the library
is first loaded. This function adds the new functions to <samp><span class="command">gawk</span></samp>. 
It returns the value returned by the initialization function
within the shared library:

<pre class="example">     # file testff.awk
     BEGIN {
         extension("./filefuncs.so", "dlload")
     
         chdir(".")  # no-op
     
         data[1] = 1 # force `data' to be an array
         print "Info for testff.awk"
         ret = stat("testff.awk", data)
         print "ret =", ret
         for (i in data)
             printf "data[\"%s\"] = %s\n", i, data[i]
         print "testff.awk modified:",
             strftime("%m %d %y %H:%M:%S", data["mtime"])
     
         print "\nInfo for JUNK"
         ret = stat("JUNK", data)
         print "ret =", ret
         for (i in data)
             printf "data[\"%s\"] = %s\n", i, data[i]
         print "JUNK modified:", strftime("%m %d %y %H:%M:%S", data["mtime"])
     }
</pre>
   <p>Here are the results of running the program:

<pre class="example">     $ <kbd>gawk -f testff.awk</kbd>
     -| Info for testff.awk
     -| ret = 0
     -| data["size"] = 607
     -| data["ino"] = 14945891
     -| data["name"] = testff.awk
     -| data["pmode"] = -rw-rw-r--
     -| data["nlink"] = 1
     -| data["atime"] = 1293993369
     -| data["mtime"] = 1288520752
     -| data["mode"] = 33204
     -| data["blksize"] = 4096
     -| data["dev"] = 2054
     -| data["type"] = file
     -| data["gid"] = 500
     -| data["uid"] = 500
     -| data["blocks"] = 8
     -| data["ctime"] = 1290113572
     -| testff.awk modified: 10 31 10 12:25:52
     -|
     -| Info for JUNK
     -| ret = -1
     -| JUNK modified: 01 01 70 02:00:00
</pre>
   <!-- ENDOFRANGE filre -->
<!-- ENDOFRANGE dirch -->
<!-- ENDOFRANGE statg -->
<!-- ENDOFRANGE chdirg -->
<!-- ENDOFRANGE gladfgaw -->
<!-- ENDOFRANGE adfugaw -->
<!-- ENDOFRANGE fubadgaw -->
<div class="node">
<a name="Future-Extensions"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Dynamic-Extensions">Dynamic Extensions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Notes">Notes</a>

</div>

<h3 class="appendixsec">C.4 Probable Future Extensions</h3>

<p><a name="index-Perl-2294"></a><a name="index-Wall_002c-Larry-2295"></a><a name="index-Robbins_002c-Arnold-2296"></a><blockquote>
<i>AWK is a language similar to PERL, only considerably more elegant.</i><br>
Arnold Robbins

   <p><i>Hey!</i><br>
Larry Wall
</blockquote>

   <p>This section briefly lists extensions and possible improvements
that indicate the directions we are
currently considering for <samp><span class="command">gawk</span></samp>.  The file <samp><span class="file">FUTURES</span></samp> in the
<samp><span class="command">gawk</span></samp> distribution lists these extensions as well.

   <p>Following is a list of probable future changes visible at the
<samp><span class="command">awk</span></samp> language level:

<!-- these are ordered by likelihood -->
     <dl>
<dt>Loadable module interface<dd>It is not clear that the <samp><span class="command">awk</span></samp>-level interface to the
modules facility is as good as it should be.  The interface needs to be
redesigned, particularly taking namespace issues into account, as
well as possibly including issues such as library search path order
and versioning.

     <br><dt><code>RECLEN</code> variable for fixed-length records<dd>Along with <code>FIELDWIDTHS</code>, this would speed up the processing of
fixed-length records. 
<code>PROCINFO["RS"]</code> would be <code>"RS"</code> or <code>"RECLEN"</code>,
depending upon which kind of record processing is in effect.

     <br><dt>Databases<dd>It may be possible to map a GDBM/NDBM/SDBM file into an <samp><span class="command">awk</span></samp> array.

     <br><dt>More <code>lint</code> warnings<dd>There are more things that could be checked for portability. 
</dl>

   <p>Following is a list of probable improvements that will make <samp><span class="command">gawk</span></samp>'s
source code easier to work with:

     <dl>
<dt>Loadable module mechanics<dd>The current extension mechanism works
(see <a href="#Dynamic-Extensions">Dynamic Extensions</a>),
but is rather primitive. It requires a fair amount of manual work
to create and integrate a loadable module. 
Nor is the current mechanism as portable as might be desired. 
The GNU <samp><span class="command">libtool</span></samp> package provides a number of features that
would make using loadable modules much easier. 
<samp><span class="command">gawk</span></samp> should be changed to use <samp><span class="command">libtool</span></samp>.

     <br><dt>Loadable module internals<dd>The API to its internals that <samp><span class="command">gawk</span></samp> &ldquo;exports&rdquo; should be revised. 
Too many things are needlessly exposed.  A new API should be designed
and implemented to make module writing easier.

     <br><dt>Better array subscript management<dd><samp><span class="command">gawk</span></samp>'s management of array subscript storage could use revamping,
so that using the same value to index multiple arrays only
stores one copy of the index value. 
</dl>

   <p>Finally,
the programs in the test suite could use documenting in this Web page.

   <p>See <a href="#Additions">Additions</a>,
if you are interested in tackling any of these projects. 
<!-- ENDOFRANGE impis -->
<!-- ENDOFRANGE gawii -->

<div class="node">
<a name="Basic-Concepts"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Glossary">Glossary</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Notes">Notes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="appendix">Appendix D Basic Programming Concepts</h2>

<p><a name="index-programming_002c-concepts-2297"></a><!-- STARTOFRANGE procon -->
<a name="index-programming_002c-concepts-2298"></a>
This appendix attempts to define some of the basic concepts
and terms that are used throughout the rest of this Web page. 
As this Web page is specifically about <samp><span class="command">awk</span></samp>,
and not about computer programming in general, the coverage here
is by necessity fairly cursory and simplistic. 
(If you need more background, there are many
other introductory texts that you should refer to instead.)

<ul class="menu">
<li><a accesskey="1" href="#Basic-High-Level">Basic High Level</a>:             The high level view. 
<li><a accesskey="2" href="#Basic-Data-Typing">Basic Data Typing</a>:            A very quick intro to data types. 
<li><a accesskey="3" href="#Floating-Point-Issues">Floating Point Issues</a>:        Stuff to know about floating-point numbers. 
</ul>

<div class="node">
<a name="Basic-High-Level"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Basic-Data-Typing">Basic Data Typing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Basic-Concepts">Basic Concepts</a>

</div>

<h3 class="appendixsec">D.1 What a Program Does</h3>

<p><a name="index-processing-data-2299"></a>At the most basic level, the job of a program is to process
some input data and produce results.

<pre class="example">                       _______
     +------+         /       \         +---------+
     | Data | -----&gt; &lt; Program &gt; -----&gt; | Results |
     +------+         \_______/         +---------+
</pre>
   <p><a name="index-compiled-programs-2300"></a><a name="index-interpreted-programs-2301"></a>The &ldquo;program&rdquo; in the figure can be either a compiled
program<a rel="footnote" href="#fn-88" name="fnd-88"><sup>88</sup></a>
(such as <samp><span class="command">ls</span></samp>),
or it may be <dfn>interpreted</dfn>.  In the latter case, a machine-executable
program such as <samp><span class="command">awk</span></samp> reads your program, and then uses the
instructions in your program to process the data.

   <p><a name="index-programming_002c-basic-steps-2302"></a>When you write a program, it usually consists
of the following, very basic set of steps:

<pre class="example">                                   ______
     +----------------+           / More \  No       +----------+
     | Initialization | -------&gt; &lt;  Data  &gt; -------&gt; | Clean Up |
     +----------------+    ^      \   ?  /           +----------+
                           |       +--+-+
                           |          | Yes
                           |          |
                           |          V
                           |     +---------+
                           +-----+ Process |
                                 +---------+
</pre>
     <dl>
<dt>Initialization<dd>These are the things you do before actually starting to process
data, such as checking arguments, initializing any data you need
to work with, and so on. 
This step corresponds to <samp><span class="command">awk</span></samp>'s <code>BEGIN</code> rule
(see <a href="#BEGIN_002fEND">BEGIN/END</a>).

     <p>If you were baking a cake, this might consist of laying out all the
mixing bowls and the baking pan, and making sure you have all the
ingredients that you need.

     <br><dt>Processing<dd>This is where the actual work is done.  Your program reads data,
one logical chunk at a time, and processes it as appropriate.

     <p>In most programming languages, you have to manually manage the reading
of data, checking to see if there is more each time you read a chunk. 
<samp><span class="command">awk</span></samp>'s pattern-action paradigm
(see <a href="#Getting-Started">Getting Started</a>)
handles the mechanics of this for you.

     <p>In baking a cake, the processing corresponds to the actual labor:
breaking eggs, mixing the flour, water, and other ingredients, and then putting the cake
into the oven.

     <br><dt>Clean Up<dd>Once you've processed all the data, you may have things you need to
do before exiting. 
This step corresponds to <samp><span class="command">awk</span></samp>'s <code>END</code> rule
(see <a href="#BEGIN_002fEND">BEGIN/END</a>).

     <p>After the cake comes out of the oven, you still have to wrap it in
plastic wrap to keep anyone from tasting it, as well as wash
the mixing bowls and utensils. 
</dl>

   <p><a name="index-algorithms-2303"></a>An <dfn>algorithm</dfn> is a detailed set of instructions necessary to accomplish
a task, or process data.  It is much the same as a recipe for baking
a cake.  Programs implement algorithms.  Often, it is up to you to design
the algorithm and implement it, simultaneously.

   <p><a name="index-records-2304"></a><a name="index-fields-2305"></a>The &ldquo;logical chunks&rdquo; we talked about previously are called <dfn>records</dfn>,
similar to the records a company keeps on employees, a school keeps for
students, or a doctor keeps for patients. 
Each record has many component parts, such as first and last names,
date of birth, address, and so on.  The component parts are referred
to as the <dfn>fields</dfn> of the record.

   <p>The act of reading data is termed <dfn>input</dfn>, and that of
generating results, not too surprisingly, is termed <dfn>output</dfn>. 
They are often referred to together as &ldquo;input/output,&rdquo;
and even more often, as &ldquo;I/O&rdquo; for short. 
(You will also see &ldquo;input&rdquo; and &ldquo;output&rdquo; used as verbs.)

   <p><a name="index-data_002ddriven-languages-2306"></a><a name="index-languages_0040comma_007b_007d-data_002ddriven-2307"></a><samp><span class="command">awk</span></samp> manages the reading of data for you, as well as the
breaking it up into records and fields.  Your program's job is to
tell <samp><span class="command">awk</span></samp> what to do with the data.  You do this by describing
<dfn>patterns</dfn> in the data to look for, and <dfn>actions</dfn> to execute
when those patterns are seen.  This <dfn>data-driven</dfn> nature of
<samp><span class="command">awk</span></samp> programs usually makes them both easier to write
and easier to read.

<div class="node">
<a name="Basic-Data-Typing"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Floating-Point-Issues">Floating Point Issues</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basic-High-Level">Basic High Level</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Basic-Concepts">Basic Concepts</a>

</div>

<h3 class="appendixsec">D.2 Data Values in a Computer</h3>

<p><a name="index-variables-2308"></a>In a program,
you keep track of information and values in things called <dfn>variables</dfn>. 
A variable is just a name for a given value, such as <code>first_name</code>,
<code>last_name</code>, <code>address</code>, and so on. 
<samp><span class="command">awk</span></samp> has several predefined variables, and it has
special names to refer to the current input record
and the fields of the record. 
You may also group multiple
associated values under one name, as an array.

   <p><a name="index-values_002c-numeric-2309"></a><a name="index-values_002c-string-2310"></a><a name="index-scalar-values-2311"></a>Data, particularly in <samp><span class="command">awk</span></samp>, consists of either numeric
values, such as 42 or 3.1415927, or string values. 
String values are essentially anything that's not a number, such as a name. 
Strings are sometimes referred to as <dfn>character data</dfn>, since they
store the individual characters that comprise them. 
Individual variables, as well as numeric and string variables, are
referred to as <dfn>scalar</dfn> values. 
Groups of values, such as arrays, are not scalars.

   <p><a name="index-integers-2312"></a><a name="index-floating_002dpoint_002c-numbers-2313"></a><a name="index-numbers_002c-floating_002dpoint-2314"></a>Within computers, there are two kinds of numeric values: <dfn>integers</dfn>
and <dfn>floating-point</dfn>. 
In school, integer values were referred to as &ldquo;whole&rdquo; numbers&mdash;that is,
numbers without any fractional part, such as 1, 42, or &minus;17. 
The advantage to integer numbers is that they represent values exactly. 
The disadvantage is that their range is limited.  On most systems,
this range is &minus;2,147,483,648 to 2,147,483,647. 
However, many systems now support a range from
&minus;9,223,372,036,854,775,808 to 9,223,372,036,854,775,807.

   <p><a name="index-unsigned-integers-2315"></a><a name="index-integers_002c-unsigned-2316"></a>Integer values come in two flavors: <dfn>signed</dfn> and <dfn>unsigned</dfn>. 
Signed values may be negative or positive, with the range of values just
described. 
Unsigned values are always positive.  On most systems,
the range is from 0 to 4,294,967,295. 
However, many systems now support a range from
0 to 18,446,744,073,709,551,615.

   <p><a name="index-double-precision-floating_002dpoint-2317"></a><a name="index-single-precision-floating_002dpoint-2318"></a>Floating-point numbers represent what are called &ldquo;real&rdquo; numbers; i.e.,
those that do have a fractional part, such as 3.1415927. 
The advantage to floating-point numbers is that they
can represent a much larger range of values. 
The disadvantage is that there are numbers that they cannot represent
exactly. 
<samp><span class="command">awk</span></samp> uses <dfn>double precision</dfn> floating-point numbers, which
can hold more digits than <dfn>single precision</dfn>
floating-point numbers. 
Floating-point issues are discussed more fully in
<a href="#Floating-Point-Issues">Floating Point Issues</a>.

   <p>At the very lowest level, computers store values as groups of binary digits,
or <dfn>bits</dfn>.  Modern computers group bits into groups of eight, called <dfn>bytes</dfn>. 
Advanced applications sometimes have to manipulate bits directly,
and <samp><span class="command">gawk</span></samp> provides functions for doing so.

   <p><a name="index-null-strings-2319"></a>While you are probably used to the idea of a number without a value (i.e., zero),
it takes a bit more getting used to the idea of zero-length character data. 
Nevertheless, such a thing exists. 
It is called the <dfn>null string</dfn>. 
The null string is character data that has no value. 
In other words, it is empty.  It is written in <samp><span class="command">awk</span></samp> programs
like this: <code>""</code>.

   <p>Humans are used to working in decimal; i.e., base 10.  In base 10,
numbers go from 0 to 9, and then &ldquo;roll over&rdquo; into the next
column.  (Remember grade school? 42 is 4 times 10 plus 2.)

   <p>There are other number bases though.  Computers commonly use base 2
or <dfn>binary</dfn>, base 8 or <dfn>octal</dfn>, and base 16 or <dfn>hexadecimal</dfn>. 
In binary, each column represents two times the value in the column to
its right. Each column may contain either a 0 or a 1. 
Thus, binary 1010 represents 1 times 8, plus 0 times 4, plus 1 times 2,
plus 0 times 1, or decimal 10. 
Octal and hexadecimal are discussed more in
<a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>.

   <p>Programs are written in programming languages. 
Hundreds, if not thousands, of programming languages exist. 
One of the most popular is the C programming language. 
The C language had a very strong influence on the design of
the <samp><span class="command">awk</span></samp> language.

   <p><a name="index-Kernighan_002c-Brian-2320"></a><a name="index-Ritchie_002c-Dennis-2321"></a>There have been several versions of C.  The first is often referred to
as &ldquo;K&amp;R&rdquo; C, after the initials of Brian Kernighan and Dennis Ritchie,
the authors of the first book on C.  (Dennis Ritchie created the language,
and Brian Kernighan was one of the creators of <samp><span class="command">awk</span></samp>.)

   <p>In the mid-1980s, an effort began to produce an international standard
for C.  This work culminated in 1989, with the production of the ANSI
standard for C.  This standard became an ISO standard in 1990. 
In 1999, a revised ISO C standard was approved and released. 
Where it makes sense, POSIX <samp><span class="command">awk</span></samp> is compatible with 1999 ISO C.

<div class="node">
<a name="Floating-Point-Issues"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basic-Data-Typing">Basic Data Typing</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Basic-Concepts">Basic Concepts</a>

</div>

<h3 class="appendixsec">D.3 Floating-Point Number Caveats</h3>

<p>As mentioned earlier, floating-point numbers represent what are called
&ldquo;real&rdquo; numbers, i.e., those that have a fractional part.  <samp><span class="command">awk</span></samp>
uses double precision floating-point numbers to represent all
numeric values.  This section describes some of the issues
involved in using floating-point numbers.

   <p>There is a very nice
<a href="http://www.validlab.com/goldberg/paper.pdf">paper on floating-point arithmetic</a>
by David Goldberg,
&ldquo;What Every Computer Scientist Should Know About Floating-point Arithmetic,&rdquo;
<cite>ACM Computing Surveys</cite> <strong>23</strong>, 1 (1991-03), 5-48. 
This is worth reading if you are interested in the details,
but it does require a background in computer science.

<ul class="menu">
<li><a accesskey="1" href="#String-Conversion-Precision">String Conversion Precision</a>:  The String Value Can Lie. 
<li><a accesskey="2" href="#Unexpected-Results">Unexpected Results</a>:           Floating Point Numbers Are Not Abstract
                                Numbers. 
<li><a accesskey="3" href="#POSIX-Floating-Point-Problems">POSIX Floating Point Problems</a>:  Standards Versus Existing Practice. 
</ul>

<div class="node">
<a name="String-Conversion-Precision"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Unexpected-Results">Unexpected Results</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Floating-Point-Issues">Floating Point Issues</a>

</div>

<h4 class="appendixsubsec">D.3.1 The String Value Can Lie</h4>

<p>Internally, <samp><span class="command">awk</span></samp> keeps both the numeric value
(double precision floating-point) and the string value for a variable. 
Separately, <samp><span class="command">awk</span></samp> keeps
track of what type the variable has
(see <a href="#Typing-and-Comparison">Typing and Comparison</a>),
which plays a role in how variables are used in comparisons.

   <p>It is important to note that the string value for a number may not
reflect the full value (all the digits) that the numeric value
actually contains. 
The following program (<samp><span class="file">values.awk</span></samp>) illustrates this:

<pre class="example">     {
        sum = $1 + $2
        # see it for what it is
        printf("sum = %.12g\n", sum)
        # use CONVFMT
        a = "&lt;" sum "&gt;"
        print "a =", a
        # use OFMT
        print "sum =", sum
     }
</pre>
   <p class="noindent">This program shows the full value of the sum of <code>$1</code> and <code>$2</code>
using <code>printf</code>, and then prints the string values obtained
from both automatic conversion (via <code>CONVFMT</code>) and
from printing (via <code>OFMT</code>).

   <p>Here is what happens when the program is run:

<pre class="example">     $ <kbd>echo 3.654321 1.2345678 | awk -f values.awk</kbd>
     -| sum = 4.8888888
     -| a = &lt;4.88889&gt;
     -| sum = 4.88889
</pre>
   <p>This makes it clear that the full numeric value is different from
what the default string representations show.

   <p><code>CONVFMT</code>'s default value is <code>"%.6g"</code>, which yields a value with
at least six significant digits.  For some applications, you might want to
change it to specify more precision. 
On most modern machines, most of the time,
17 digits is enough to capture a floating-point number's
value exactly.<a rel="footnote" href="#fn-89" name="fnd-89"><sup>89</sup></a>

<div class="node">
<a name="Unexpected-Results"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#POSIX-Floating-Point-Problems">POSIX Floating Point Problems</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#String-Conversion-Precision">String Conversion Precision</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Floating-Point-Issues">Floating Point Issues</a>

</div>

<h4 class="appendixsubsec">D.3.2 Floating Point Numbers Are Not Abstract Numbers</h4>

<p><a name="index-floating_002dpoint_002c-numbers-2322"></a>Unlike numbers in the abstract sense (such as what you studied in high school
or college math), numbers stored in computers are limited in certain ways. 
They cannot represent an infinite number of digits, nor can they always
represent things exactly. 
In particular,
floating-point numbers cannot
always represent values exactly.  Here is an example:

<pre class="example">     $ <kbd>awk '{ printf("%010d\n", $1 * 100) }'</kbd>
     515.79
     -| 0000051579
     515.80
     -| 0000051579
     515.81
     -| 0000051580
     515.82
     -| 0000051582
     <kbd>Ctrl-d</kbd>
</pre>
   <p class="noindent">This shows that some values can be represented exactly,
whereas others are only approximated.  This is not a &ldquo;bug&rdquo;
in <samp><span class="command">awk</span></samp>, but simply an artifact of how computers
represent numbers.

   <p><a name="index-negative-zero-2323"></a><a name="index-positive-zero-2324"></a><a name="index-zero_0040comma_007b_007d-negative-vs_002e_0040_003a-positive-2325"></a>Another peculiarity of floating-point numbers on modern systems
is that they often have more than one representation for the number zero! 
In particular, it is possible to represent &ldquo;minus zero&rdquo; as well as
regular, or &ldquo;positive&rdquo; zero.

   <p>This example shows that negative and positive zero are distinct values
when stored internally, but that they are in fact equal to each other,
as well as to &ldquo;regular&rdquo; zero:

<pre class="example">     $ <kbd>gawk 'BEGIN { mz = -0 ; pz = 0</kbd>
     &gt; <kbd>printf "-0 = %g, +0 = %g, (-0 == +0) -&gt; %d\n", mz, pz, mz == pz</kbd>
     &gt; <kbd>printf "mz == 0 -&gt; %d, pz == 0 -&gt; %d\n", mz == 0, pz == 0</kbd>
     &gt; <kbd>}'</kbd>
     -| -0 = -0, +0 = 0, (-0 == +0) -&gt; 1
     -| mz == 0 -&gt; 1, pz == 0 -&gt; 1
</pre>
   <p>It helps to keep this in mind should you process numeric data
that contains negative zero values; the fact that the zero is negative
is noted and can affect comparisons.

<div class="node">
<a name="POSIX-Floating-Point-Problems"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Unexpected-Results">Unexpected Results</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Floating-Point-Issues">Floating Point Issues</a>

</div>

<h4 class="appendixsubsec">D.3.3 Standards Versus Existing Practice</h4>

<p>Historically, <samp><span class="command">awk</span></samp> has converted any non-numeric looking string
to the numeric value zero, when required.  Furthermore, the original
definition of the language and the original POSIX standards specified that
<samp><span class="command">awk</span></samp> only understands decimal numbers (base 10), and not octal
(base 8) or hexadecimal numbers (base 16).

   <p>Changes in the language of the
2001 and 2004 POSIX standard can be interpreted to imply that <samp><span class="command">awk</span></samp>
should support additional features.  These features are:

     <ul>
<li>Interpretation of floating point data values specified in hexadecimal
notation (&lsquo;<samp><span class="samp">0xDEADBEEF</span></samp>&rsquo;). (Note: data values, <em>not</em>
source code constants.)

     <li>Support for the special IEEE 754 floating point values &ldquo;Not A Number&rdquo;
(NaN), positive Infinity (&ldquo;inf&rdquo;) and negative Infinity (&ldquo;&minus;inf&rdquo;). 
In particular, the format for these values is as specified by the ISO 1999
C standard, which ignores case and can allow machine-dependent additional
characters after the &lsquo;<samp><span class="samp">nan</span></samp>&rsquo; and allow either &lsquo;<samp><span class="samp">inf</span></samp>&rsquo; or &lsquo;<samp><span class="samp">infinity</span></samp>&rsquo;. 
</ul>

   <p>The first problem is that both of these are clear changes to historical
practice:

     <ul>
<li>The <samp><span class="command">gawk</span></samp> maintainer feels that supporting hexadecimal floating
point values, in particular, is ugly, and was never intended by the
original designers to be part of the language.

     <li>Allowing completely alphabetic strings to have valid numeric
values is also a very severe departure from historical practice. 
</ul>

   <p>The second problem is that the <code>gawk</code> maintainer feels that this
interpretation of the standard, which requires a certain amount of
&ldquo;language lawyering&rdquo; to arrive at in the first place, was not even
intended by the standard developers.  In other words, &ldquo;we see how you
got where you are, but we don't think that that's where you want to be.&rdquo;

   <p>The 2008 POSIX standard added explicit wording to allow, but not require,
that <samp><span class="command">awk</span></samp> support hexadecimal floating point values and
special values for &ldquo;Not A Number&rdquo; and infinity.

   <p>Although the <samp><span class="command">gawk</span></samp> maintainer continues to feel that
providing those features is inadvisable,
nevertheless, on systems that support IEEE floating point, it seems
reasonable to provide <em>some</em> way to support NaN and Infinity values. 
The solution implemented in <samp><span class="command">gawk</span></samp> is as follows:

     <ul>
<li>With the <samp><span class="option">--posix</span></samp> command-line option, <samp><span class="command">gawk</span></samp> becomes
&ldquo;hands off.&rdquo; String values are passed directly to the system library's
<code>strtod()</code> function, and if it successfully returns a numeric value,
that is what's used.<a rel="footnote" href="#fn-90" name="fnd-90"><sup>90</sup></a>
By definition, the results are not portable across
different systems.  They are also a little surprising:

     <pre class="example">          $ <kbd>echo nanny | gawk --posix '{ print $1 + 0 }'</kbd>
          -| nan
          $ <kbd>echo 0xDeadBeef | gawk --posix '{ print $1 + 0 }'</kbd>
          -| 3735928559
</pre>
     <li>Without <samp><span class="option">--posix</span></samp>, <samp><span class="command">gawk</span></samp> interprets the four strings
&lsquo;<samp><span class="samp">+inf</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">-inf</span></samp>&rsquo;,
&lsquo;<samp><span class="samp">+nan</span></samp>&rsquo;,
and
&lsquo;<samp><span class="samp">-nan</span></samp>&rsquo;
specially, producing the corresponding special numeric values. 
The leading sign acts a signal to <samp><span class="command">gawk</span></samp> (and the user)
that the value is really numeric.  Hexadecimal floating point is
not supported (unless you also use <samp><span class="option">--non-decimal-data</span></samp>,
which is <em>not</em> recommended). For example:

     <pre class="example">          $ <kbd>echo nanny | gawk '{ print $1 + 0 }'</kbd>
          -| 0
          $ <kbd>echo +nan | gawk '{ print $1 + 0 }'</kbd>
          -| nan
          $ <kbd>echo 0xDeadBeef | gawk '{ print $1 + 0 }'</kbd>
          -| 0
</pre>
     <p><samp><span class="command">gawk</span></samp> does ignore case in the four special values. 
Thus &lsquo;<samp><span class="samp">+nan</span></samp>&rsquo; and &lsquo;<samp><span class="samp">+NaN</span></samp>&rsquo; are the same. 
</ul>

<!-- ENDOFRANGE procon -->
<div class="node">
<a name="Glossary"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Copying">Copying</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Basic-Concepts">Basic Concepts</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Glossary</h2>

     <dl>
<dt>Action<dd>A series of <samp><span class="command">awk</span></samp> statements attached to a rule.  If the rule's
pattern matches an input record, <samp><span class="command">awk</span></samp> executes the
rule's action.  Actions are always enclosed in curly braces. 
(See <a href="#Action-Overview">Action Overview</a>.)

     <p><a name="index-Spencer_002c-Henry-2326"></a><a name="index-g_t_0040command_007bsed_007d-utility-2327"></a><a name="index-amazing-_0040command_007bawk_007d-assembler-_0028_0040command_007baaa_007d_0029-2328"></a><br><dt>Amazing <samp><span class="command">awk</span></samp> Assembler<dd>Henry Spencer at the University of Toronto wrote a retargetable assembler
completely as <samp><span class="command">sed</span></samp> and <samp><span class="command">awk</span></samp> scripts.  It is thousands
of lines long, including machine descriptions for several eight-bit
microcomputers.  It is a good example of a program that would have been
better written in another language. 
You can get it from <a href="http://awk.info/?awk100/aaa">http://awk.info/?awk100/aaa</a>.

     <p><a name="index-Ada-programming-language-2329"></a><a name="index-Programming-languages_002c-Ada-2330"></a><br><dt>Ada<dd>A programming language originally defined by the U.S. Department of
Defense for embedded programming. It was designed to enforce good
Software Engineering practices.

     <p><a name="index-amazingly-workable-formatter-_0028_0040command_007bawf_007d_0029-2331"></a><a name="index-g_t_0040command_007bawf_007d-_0028amazingly-workable-formatter_0029-program-2332"></a><br><dt>Amazingly Workable Formatter (<samp><span class="command">awf</span></samp>)<dd>Henry Spencer at the University of Toronto wrote a formatter that accepts
a large subset of the &lsquo;<samp><span class="samp">nroff -ms</span></samp>&rsquo; and &lsquo;<samp><span class="samp">nroff -man</span></samp>&rsquo; formatting
commands, using <samp><span class="command">awk</span></samp> and <samp><span class="command">sh</span></samp>. 
It is available
from <a href="http://awk.info/?tools/awf">http://awk.info/?tools/awf</a>.

     <br><dt>Anchor<dd>The regexp metacharacters &lsquo;<samp><span class="samp">^</span></samp>&rsquo; and &lsquo;<samp><span class="samp">$</span></samp>&rsquo;, which force the match
to the beginning or end of the string, respectively.

     <p><a name="index-ANSI-2333"></a><br><dt>ANSI<dd>The American National Standards Institute.  This organization produces
many standards, among them the standards for the C and C++ programming
languages. 
These standards often become international standards as well. See also
&ldquo;ISO.&rdquo;

     <br><dt>Array<dd>A grouping of multiple values under the same name. 
Most languages just provide sequential arrays. 
<samp><span class="command">awk</span></samp> provides associative arrays.

     <br><dt>Assertion<dd>A statement in a program that a condition is true at this point in the program. 
Useful for reasoning about how a program is supposed to behave.

     <br><dt>Assignment<dd>An <samp><span class="command">awk</span></samp> expression that changes the value of some <samp><span class="command">awk</span></samp>
variable or data object.  An object that you can assign to is called an
<dfn>lvalue</dfn>.  The assigned values are called <dfn>rvalues</dfn>. 
See <a href="#Assignment-Ops">Assignment Ops</a>.

     <br><dt>Associative Array<dd>Arrays in which the indices may be numbers or strings, not just
sequential integers in a fixed range.

     <br><dt><samp><span class="command">awk</span></samp> Language<dd>The language in which <samp><span class="command">awk</span></samp> programs are written.

     <br><dt><samp><span class="command">awk</span></samp> Program<dd>An <samp><span class="command">awk</span></samp> program consists of a series of <dfn>patterns</dfn> and
<dfn>actions</dfn>, collectively known as <dfn>rules</dfn>.  For each input record
given to the program, the program's rules are all processed in turn. 
<samp><span class="command">awk</span></samp> programs may also contain function definitions.

     <br><dt><samp><span class="command">awk</span></samp> Script<dd>Another name for an <samp><span class="command">awk</span></samp> program.

     <br><dt>Bash<dd>The GNU version of the standard shell
(the <b>B</b>ourne-<b>A</b>gain <b>SH</b>ell). 
See also &ldquo;Bourne Shell.&rdquo;

     <br><dt>BBS<dd>See &ldquo;Bulletin Board System.&rdquo;

     <br><dt>Bit<dd>Short for &ldquo;Binary Digit.&rdquo;
All values in computer memory ultimately reduce to binary digits: values
that are either zero or one. 
Groups of bits may be interpreted differently&mdash;as integers,
floating-point numbers, character data, addresses of other
memory objects, or other data. 
<samp><span class="command">awk</span></samp> lets you work with floating-point numbers and strings. 
<samp><span class="command">gawk</span></samp> lets you manipulate bit values with the built-in
functions described in
<a href="#Bitwise-Functions">Bitwise Functions</a>.

     <p>Computers are often defined by how many bits they use to represent integer
values.  Typical systems are 32-bit systems, but 64-bit systems are
becoming increasingly popular, and 16-bit systems have essentially
disappeared.

     <br><dt>Boolean Expression<dd>Named after the English mathematician Boole. See also &ldquo;Logical Expression.&rdquo;

     <br><dt>Bourne Shell<dd>The standard shell (<samp><span class="file">/bin/sh</span></samp>) on Unix and Unix-like systems,
originally written by Steven R. Bourne. 
Many shells (Bash, <samp><span class="command">ksh</span></samp>, <samp><span class="command">pdksh</span></samp>, <samp><span class="command">zsh</span></samp>) are
generally upwardly compatible with the Bourne shell.

     <br><dt>Built-in Function<dd>The <samp><span class="command">awk</span></samp> language provides built-in functions that perform various
numerical, I/O-related, and string computations.  Examples are
<code>sqrt()</code> (for the square root of a number) and <code>substr()</code> (for a
substring of a string). 
<samp><span class="command">gawk</span></samp> provides functions for timestamp management, bit manipulation,
array sorting, type checking,
and runtime string translation. 
(See <a href="#Built_002din">Built-in</a>.)

     <br><dt>Built-in Variable<dd><code>ARGC</code>,
<code>ARGV</code>,
<code>CONVFMT</code>,
<code>ENVIRON</code>,
<code>FILENAME</code>,
<code>FNR</code>,
<code>FS</code>,
<code>NF</code>,
<code>NR</code>,
<code>OFMT</code>,
<code>OFS</code>,
<code>ORS</code>,
<code>RLENGTH</code>,
<code>RSTART</code>,
<code>RS</code>,
and
<code>SUBSEP</code>
are the variables that have special meaning to <samp><span class="command">awk</span></samp>. 
In addition,
<code>ARGIND</code>,
<code>BINMODE</code>,
<code>ERRNO</code>,
<code>FIELDWIDTHS</code>,
<code>FPAT</code>,
<code>IGNORECASE</code>,
<code>LINT</code>,
<code>PROCINFO</code>,
<code>RT</code>,
and
<code>TEXTDOMAIN</code>
are the variables that have special meaning to <samp><span class="command">gawk</span></samp>. 
Changing some of them affects <samp><span class="command">awk</span></samp>'s running environment. 
(See <a href="#Built_002din-Variables">Built-in Variables</a>.)

     <br><dt>Braces<dd>See &ldquo;Curly Braces.&rdquo;

     <br><dt>Bulletin Board System<dd>A computer system allowing users to log in and read and/or leave messages
for other users of the system, much like leaving paper notes on a bulletin
board.

     <br><dt>C<dd>The system programming language that most GNU software is written in.  The
<samp><span class="command">awk</span></samp> programming language has C-like syntax, and this Web page
points out similarities between <samp><span class="command">awk</span></samp> and C when appropriate.

     <p>In general, <samp><span class="command">gawk</span></samp> attempts to be as similar to the 1990 version
of ISO C as makes sense.

     <br><dt>C++<dd>A popular object-oriented programming language derived from C.

     <p><a name="index-ASCII-2334"></a><a name="index-ISO-8859_002d1-2335"></a><a name="index-ISO-Latin_002d1-2336"></a><a name="index-character-sets-_0028machine-character-encodings_0029-2337"></a><a name="index-Unicode-2338"></a><br><dt>Character Set<dd>The set of numeric codes used by a computer system to represent the
characters (letters, numbers, punctuation, etc.) of a particular country
or place. The most common character set in use today is ASCII (American
Standard Code for Information Interchange).  Many European
countries use an extension of ASCII known as ISO-8859-1 (ISO Latin-1). 
The <a href="http://www.unicode.org">Unicode character set</a> is
becoming increasingly popular and standard, and is particularly
widely used on GNU/Linux systems.

     <p><a name="index-g_t_0040command_007bchem_007d-utility-2339"></a><br><dt>CHEM<dd>A preprocessor for <samp><span class="command">pic</span></samp> that reads descriptions of molecules
and produces <samp><span class="command">pic</span></samp> input for drawing them. 
It was written in <samp><span class="command">awk</span></samp>
by Brian Kernighan and Jon Bentley, and is available from
<a href="http://netlib.sandia.gov/netlib/typesetting/chem.gz">http://netlib.sandia.gov/netlib/typesetting/chem.gz</a>.

     <br><dt>Coprocess<dd>A subordinate program with which two-way communications is possible.

     <p><a name="index-compiled-programs-2340"></a><br><dt>Compiler<dd>A program that translates human-readable source code into
machine-executable object code.  The object code is then executed
directly by the computer. 
See also &ldquo;Interpreter.&rdquo;

     <br><dt>Compound Statement<dd>A series of <samp><span class="command">awk</span></samp> statements, enclosed in curly braces.  Compound
statements may be nested. 
(See <a href="#Statements">Statements</a>.)

     <br><dt>Concatenation<dd>Concatenating two strings means sticking them together, one after another,
producing a new string.  For example, the string &lsquo;<samp><span class="samp">foo</span></samp>&rsquo; concatenated with
the string &lsquo;<samp><span class="samp">bar</span></samp>&rsquo; gives the string &lsquo;<samp><span class="samp">foobar</span></samp>&rsquo;. 
(See <a href="#Concatenation">Concatenation</a>.)

     <br><dt>Conditional Expression<dd>An expression using the &lsquo;<samp><span class="samp">?:</span></samp>&rsquo; ternary operator, such as
&lsquo;<samp><var>expr1</var><span class="samp"> ? </span><var>expr2</var><span class="samp"> : </span><var>expr3</var></samp>&rsquo;.  The expression
<var>expr1</var> is evaluated; if the result is true, the value of the whole
expression is the value of <var>expr2</var>; otherwise the value is
<var>expr3</var>.  In either case, only one of <var>expr2</var> and <var>expr3</var>
is evaluated. (See <a href="#Conditional-Exp">Conditional Exp</a>.)

     <br><dt>Comparison Expression<dd>A relation that is either true or false, such as &lsquo;<samp><span class="samp">a &lt; b</span></samp>&rsquo;. 
Comparison expressions are used in <code>if</code>, <code>while</code>, <code>do</code>,
and <code>for</code>
statements, and in patterns to select which input records to process. 
(See <a href="#Typing-and-Comparison">Typing and Comparison</a>.)

     <br><dt>Curly Braces<dd>The characters &lsquo;<samp><span class="samp">{</span></samp>&rsquo; and &lsquo;<samp><span class="samp">}</span></samp>&rsquo;.  Curly braces are used in
<samp><span class="command">awk</span></samp> for delimiting actions, compound statements, and function
bodies.

     <p><a name="index-dark-corner-2341"></a><br><dt>Dark Corner<dd>An area in the language where specifications often were (or still
are) not clear, leading to unexpected or undesirable behavior. 
Such areas are marked in this Web page with
&ldquo;(d.c.)&rdquo; in the text
and are indexed under the heading &ldquo;dark corner.&rdquo;

     <br><dt>Data Driven<dd>A description of <samp><span class="command">awk</span></samp> programs, where you specify the data you
are interested in processing, and what to do when that data is seen.

     <br><dt>Data Objects<dd>These are numbers and strings of characters.  Numbers are converted into
strings and vice versa, as needed. 
(See <a href="#Conversion">Conversion</a>.)

     <br><dt>Deadlock<dd>The situation in which two communicating processes are each waiting
for the other to perform an action.

     <br><dt>Debugger<dd>A program used to help developers remove &ldquo;bugs&rdquo; from (de-bug)
their programs.

     <br><dt>Double Precision<dd>An internal representation of numbers that can have fractional parts. 
Double precision numbers keep track of more digits than do single precision
numbers, but operations on them are sometimes more expensive.  This is the way
<samp><span class="command">awk</span></samp> stores numeric values.  It is the C type <code>double</code>.

     <br><dt>Dynamic Regular Expression<dd>A dynamic regular expression is a regular expression written as an
ordinary expression.  It could be a string constant, such as
<code>"foo"</code>, but it may also be an expression whose value can vary. 
(See <a href="#Computed-Regexps">Computed Regexps</a>.)

     <br><dt>Environment<dd>A collection of strings, of the form <var>name</var><code>=</code><var>val</var>, that each
program has available to it. Users generally place values into the
environment in order to provide information to various programs. Typical
examples are the environment variables <samp><span class="env">HOME</span></samp> and <samp><span class="env">PATH</span></samp>.

     <br><dt>Empty String<dd>See &ldquo;Null String.&rdquo;

     <p><a name="index-epoch_002c-definition-of-2342"></a><br><dt>Epoch<dd>The date used as the &ldquo;beginning of time&rdquo; for timestamps. 
Time values in most systems are represented as seconds since the epoch,
with library functions available for converting these values into
standard date and time formats.

     <p>The epoch on Unix and POSIX systems is 1970-01-01 00:00:00 UTC. 
See also &ldquo;GMT&rdquo; and &ldquo;UTC.&rdquo;

     <br><dt>Escape Sequences<dd>A special sequence of characters used for describing nonprinting
characters, such as &lsquo;<samp><span class="samp">\n</span></samp>&rsquo; for newline or &lsquo;<samp><span class="samp">\033</span></samp>&rsquo; for the ASCII
ESC (Escape) character. (See <a href="#Escape-Sequences">Escape Sequences</a>.)

     <br><dt>Extension<dd>An additional feature or change to a programming language or
utility not defined by that language's or utility's standard. 
<samp><span class="command">gawk</span></samp> has (too) many extensions over POSIX <samp><span class="command">awk</span></samp>.

     <br><dt>FDL<dd>See &ldquo;Free Documentation License.&rdquo;

     <br><dt>Field<dd>When <samp><span class="command">awk</span></samp> reads an input record, it splits the record into pieces
separated by whitespace (or by a separator regexp that you can
change by setting the built-in variable <code>FS</code>).  Such pieces are
called fields.  If the pieces are of fixed length, you can use the built-in
variable <code>FIELDWIDTHS</code> to describe their lengths. 
If you wish to specify the contents of fields instead of the field
separator, you can use the built-in variable <code>FPAT</code> to do so. 
(See <a href="#Field-Separators">Field Separators</a>,
<a href="#Constant-Size">Constant Size</a>,
and
<a href="#Splitting-By-Content">Splitting By Content</a>.)

     <br><dt>Flag<dd>A variable whose truth value indicates the existence or nonexistence
of some condition.

     <br><dt>Floating-Point Number<dd>Often referred to in mathematical terms as a &ldquo;rational&rdquo; or real number,
this is just a number that can have a fractional part. 
See also &ldquo;Double Precision&rdquo; and &ldquo;Single Precision.&rdquo;

     <br><dt>Format<dd>Format strings are used to control the appearance of output in the
<code>strftime()</code> and <code>sprintf()</code> functions, and are used in the
<code>printf</code> statement as well.  Also, data conversions from numbers to strings
are controlled by the format strings contained in the built-in variables
<code>CONVFMT</code> and <code>OFMT</code>. (See <a href="#Control-Letters">Control Letters</a>.)

     <br><dt>Free Documentation License<dd>This document describes the terms under which this Web page
is published and may be copied. (See <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>.)

     <br><dt>Function<dd>A specialized group of statements used to encapsulate general
or program-specific tasks.  <samp><span class="command">awk</span></samp> has a number of built-in
functions, and also allows you to define your own. 
(See <a href="#Functions">Functions</a>.)

     <br><dt>FSF<dd>See &ldquo;Free Software Foundation.&rdquo;

     <p><a name="index-FSF-_0028Free-Software-Foundation_0029-2343"></a><a name="index-Free-Software-Foundation-_0028FSF_0029-2344"></a><a name="index-Stallman_002c-Richard-2345"></a><br><dt>Free Software Foundation<dd>A nonprofit organization dedicated
to the production and distribution of freely distributable software. 
It was founded by Richard M. Stallman, the author of the original
Emacs editor.  GNU Emacs is the most widely used version of Emacs today.

     <br><dt><samp><span class="command">gawk</span></samp><dd>The GNU implementation of <samp><span class="command">awk</span></samp>.

     <p><a name="index-GPL-_0028General-Public-License_0029-2346"></a><a name="index-General-Public-License-_0028GPL_0029-2347"></a><a name="index-GNU-General-Public-License-2348"></a><br><dt>General Public License<dd>This document describes the terms under which <samp><span class="command">gawk</span></samp> and its source
code may be distributed. (See <a href="#Copying">Copying</a>.)

     <br><dt>GMT<dd>&ldquo;Greenwich Mean Time.&rdquo;
This is the old term for UTC. 
It is the time of day used internally for Unix and POSIX systems. 
See also &ldquo;Epoch&rdquo; and &ldquo;UTC.&rdquo;

     <p><a name="index-FSF-_0028Free-Software-Foundation_0029-2349"></a><a name="index-Free-Software-Foundation-_0028FSF_0029-2350"></a><a name="index-GNU-Project-2351"></a><br><dt>GNU<dd>&ldquo;GNU's not Unix&rdquo;.  An on-going project of the Free Software Foundation
to create a complete, freely distributable, POSIX-compliant computing
environment.

     <br><dt>GNU/Linux<dd>A variant of the GNU system using the Linux kernel, instead of the
Free Software Foundation's Hurd kernel. 
The Linux kernel is a stable, efficient, full-featured clone of Unix that has
been ported to a variety of architectures. 
It is most popular on PC-class systems, but runs well on a variety of
other systems too. 
The Linux kernel source code is available under the terms of the GNU General
Public License, which is perhaps its most important aspect.

     <br><dt>GPL<dd>See &ldquo;General Public License.&rdquo;

     <br><dt>Hexadecimal<dd>Base 16 notation, where the digits are <code>0</code>&ndash;<code>9</code> and
<code>A</code>&ndash;<code>F</code>, with &lsquo;<samp><span class="samp">A</span></samp>&rsquo;
representing 10, &lsquo;<samp><span class="samp">B</span></samp>&rsquo; representing 11, and so on, up to &lsquo;<samp><span class="samp">F</span></samp>&rsquo; for 15. 
Hexadecimal numbers are written in C using a leading &lsquo;<samp><span class="samp">0x</span></samp>&rsquo;,
to indicate their base.  Thus, <code>0x12</code> is 18 (1 times 16 plus 2). 
See <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>.

     <br><dt>I/O<dd>Abbreviation for &ldquo;Input/Output,&rdquo; the act of moving data into and/or
out of a running program.

     <br><dt>Input Record<dd>A single chunk of data that is read in by <samp><span class="command">awk</span></samp>.  Usually, an <samp><span class="command">awk</span></samp> input
record consists of one line of text. 
(See <a href="#Records">Records</a>.)

     <br><dt>Integer<dd>A whole number, i.e., a number that does not have a fractional part.

     <br><dt>Internationalization<dd>The process of writing or modifying a program so
that it can use multiple languages without requiring
further source code changes.

     <p><a name="index-interpreted-programs-2352"></a><br><dt>Interpreter<dd>A program that reads human-readable source code directly, and uses
the instructions in it to process data and produce results. 
<samp><span class="command">awk</span></samp> is typically (but not always) implemented as an interpreter. 
See also &ldquo;Compiler.&rdquo;

     <br><dt>Interval Expression<dd>A component of a regular expression that lets you specify repeated matches of
some part of the regexp.  Interval expressions were not originally available
in <samp><span class="command">awk</span></samp> programs.

     <p><a name="index-ISO-2353"></a><br><dt>ISO<dd>The International Organization for Standardization. 
This organization produces international standards for many things, including
programming languages, such as C and C++. 
In the computer arena, important standards like those for C, C++, and POSIX
become both American national and ISO international standards simultaneously. 
This Web page refers to Standard C as &ldquo;ISO C&rdquo; throughout. 
See <a href="http://www.iso.org/iso/home/about.htm">the ISO website</a> for more
information about the name of the organization and its language-independent
three-letter acronym.

     <p><a name="index-Java-programming-language-2354"></a><a name="index-Programming-languages_002c-Java-2355"></a><br><dt>Java<dd>A modern programming language originally developed by Sun Microsystems
(now Oracle) supporting Object-Oriented programming.  Although usually
implemented by compiling to the instructions for a standard virtual
machine (the JVM), the language can be compiled to native code.

     <br><dt>Keyword<dd>In the <samp><span class="command">awk</span></samp> language, a keyword is a word that has special
meaning.  Keywords are reserved and may not be used as variable names.

     <p><samp><span class="command">gawk</span></samp>'s keywords are:
<code>BEGIN</code>,
<code>BEGINFILE</code>,
<code>END</code>,
<code>ENDFILE</code>,
<code>break</code>,
<code>case</code>,
<code>continue</code>,
<code>default</code>
<code>delete</code>,
<code>do...while</code>,
<code>else</code>,
<code>exit</code>,
<code>for...in</code>,
<code>for</code>,
<code>function</code>,
<code>func</code>,
<code>if</code>,
<code>nextfile</code>,
<code>next</code>,
<code>switch</code>,
and
<code>while</code>.

     <p><a name="index-LGPL-_0028Lesser-General-Public-License_0029-2356"></a><a name="index-Lesser-General-Public-License-_0028LGPL_0029-2357"></a><a name="index-GNU-Lesser-General-Public-License-2358"></a><br><dt>Lesser General Public License<dd>This document describes the terms under which binary library archives
or shared objects,
and their source code may be distributed.

     <br><dt>Linux<dd>See &ldquo;GNU/Linux.&rdquo;

     <br><dt>LGPL<dd>See &ldquo;Lesser General Public License.&rdquo;

     <br><dt>Localization<dd>The process of providing the data necessary for an
internationalized program to work in a particular language.

     <br><dt>Logical Expression<dd>An expression using the operators for logic, AND, OR, and NOT, written
&lsquo;<samp><span class="samp">&amp;&amp;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">||</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">!</span></samp>&rsquo; in <samp><span class="command">awk</span></samp>. Often called Boolean
expressions, after the mathematician who pioneered this kind of
mathematical logic.

     <br><dt>Lvalue<dd>An expression that can appear on the left side of an assignment
operator.  In most languages, lvalues can be variables or array
elements.  In <samp><span class="command">awk</span></samp>, a field designator can also be used as an
lvalue.

     <br><dt>Matching<dd>The act of testing a string against a regular expression.  If the
regexp describes the contents of the string, it is said to <dfn>match</dfn> it.

     <br><dt>Metacharacters<dd>Characters used within a regexp that do not stand for themselves. 
Instead, they denote regular expression operations, such as repetition,
grouping, or alternation.

     <br><dt>No-op<dd>An operation that does nothing.

     <br><dt>Null String<dd>A string with no characters in it.  It is represented explicitly in
<samp><span class="command">awk</span></samp> programs by placing two double quote characters next to
each other (<code>""</code>).  It can appear in input data by having two successive
occurrences of the field separator appear next to each other.

     <br><dt>Number<dd>A numeric-valued data object.  Modern <samp><span class="command">awk</span></samp> implementations use
double precision floating-point to represent numbers. 
Ancient <samp><span class="command">awk</span></samp> implementations used single precision floating-point.

     <br><dt>Octal<dd>Base-eight notation, where the digits are <code>0</code>&ndash;<code>7</code>. 
Octal numbers are written in C using a leading &lsquo;<samp><span class="samp">0</span></samp>&rsquo;,
to indicate their base.  Thus, <code>013</code> is 11 (one times 8 plus 3). 
See <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a>.

     <p><a name="index-P1003_002e1-POSIX-standard-2359"></a><a name="index-P1003_002e2-POSIX-standard-2360"></a><br><dt>P1003.1, P1003.2<dd>See &ldquo;POSIX.&rdquo;

     <br><dt>Pattern<dd>Patterns tell <samp><span class="command">awk</span></samp> which input records are interesting to which
rules.

     <p>A pattern is an arbitrary conditional expression against which input is
tested.  If the condition is satisfied, the pattern is said to <dfn>match</dfn>
the input record.  A typical pattern might compare the input record against
a regular expression. (See <a href="#Pattern-Overview">Pattern Overview</a>.)

     <br><dt>POSIX<dd>The name for a series of standards
<!-- being developed by the IEEE -->
that specify a Portable Operating System interface.  The &ldquo;IX&rdquo; denotes
the Unix heritage of these standards.  The main standard of interest for
<samp><span class="command">awk</span></samp> users is
<cite>IEEE Standard for Information Technology, Standard 1003.1-2008</cite>. 
The 2008 POSIX standard can be found online at
<a href="http://www.opengroup.org/onlinepubs/9699919799/">http://www.opengroup.org/onlinepubs/9699919799/</a>.

     <br><dt>Precedence<dd>The order in which operations are performed when operators are used
without explicit parentheses.

     <br><dt>Private<dd>Variables and/or functions that are meant for use exclusively by library
functions and not for the main <samp><span class="command">awk</span></samp> program. Special care must be
taken when naming such variables and functions. 
(See <a href="#Library-Names">Library Names</a>.)

     <br><dt>Range (of input lines)<dd>A sequence of consecutive lines from the input file(s).  A pattern
can specify ranges of input lines for <samp><span class="command">awk</span></samp> to process or it can
specify single lines. (See <a href="#Pattern-Overview">Pattern Overview</a>.)

     <br><dt>Recursion<dd>When a function calls itself, either directly or indirectly. 
As long as this is not clear, refer to the entry for &ldquo;recursion.&rdquo;
If this is clear, stop, and proceed to the next entry.

     <br><dt>Redirection<dd>Redirection means performing input from something other than the standard input
stream, or performing output to something other than the standard output stream.

     <p>You can redirect input to the <code>getline</code> statement using
the &lsquo;<samp><span class="samp">&lt;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">|</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo; operators. 
You can redirect the output of the <code>print</code> and <code>printf</code> statements
to a file or a system command, using the &lsquo;<samp><span class="samp">&gt;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">&gt;&gt;</span></samp>&rsquo;, &lsquo;<samp><span class="samp">|</span></samp>&rsquo;, and &lsquo;<samp><span class="samp">|&amp;</span></samp>&rsquo;
operators. 
(See <a href="#Getline">Getline</a>,
and <a href="#Redirection">Redirection</a>.)

     <br><dt>Regexp<dd>See &ldquo;Regular Expression.&rdquo;

     <br><dt>Regular Expression<dd>A regular expression (&ldquo;regexp&rdquo; for short) is a pattern that denotes a
set of strings, possibly an infinite set.  For example, the regular expression
&lsquo;<samp><span class="samp">R.*xp</span></samp>&rsquo; matches any string starting with the letter &lsquo;<samp><span class="samp">R</span></samp>&rsquo;
and ending with the letters &lsquo;<samp><span class="samp">xp</span></samp>&rsquo;.  In <samp><span class="command">awk</span></samp>, regular expressions are
used in patterns and in conditional expressions.  Regular expressions may contain
escape sequences. (See <a href="#Regexp">Regexp</a>.)

     <br><dt>Regular Expression Constant<dd>A regular expression constant is a regular expression written within
slashes, such as <code>/foo/</code>.  This regular expression is chosen
when you write the <samp><span class="command">awk</span></samp> program and cannot be changed during
its execution. (See <a href="#Regexp-Usage">Regexp Usage</a>.)

     <br><dt>Rule<dd>A segment of an <samp><span class="command">awk</span></samp> program that specifies how to process single
input records.  A rule consists of a <dfn>pattern</dfn> and an <dfn>action</dfn>. 
<samp><span class="command">awk</span></samp> reads an input record; then, for each rule, if the input record
satisfies the rule's pattern, <samp><span class="command">awk</span></samp> executes the rule's action. 
Otherwise, the rule does nothing for that input record.

     <br><dt>Rvalue<dd>A value that can appear on the right side of an assignment operator. 
In <samp><span class="command">awk</span></samp>, essentially every expression has a value. These values
are rvalues.

     <br><dt>Scalar<dd>A single value, be it a number or a string. 
Regular variables are scalars; arrays and functions are not.

     <br><dt>Search Path<dd>In <samp><span class="command">gawk</span></samp>, a list of directories to search for <samp><span class="command">awk</span></samp> program source files. 
In the shell, a list of directories to search for executable programs.

     <br><dt>Seed<dd>The initial value, or starting point, for a sequence of random numbers.

     <br><dt><samp><span class="command">sed</span></samp><dd>See &ldquo;Stream Editor.&rdquo;

     <br><dt>Shell<dd>The command interpreter for Unix and POSIX-compliant systems. 
The shell works both interactively, and as a programming language
for batch files, or shell scripts.

     <br><dt>Short-Circuit<dd>The nature of the <samp><span class="command">awk</span></samp> logical operators &lsquo;<samp><span class="samp">&amp;&amp;</span></samp>&rsquo; and &lsquo;<samp><span class="samp">||</span></samp>&rsquo;. 
If the value of the entire expression is determinable from evaluating just
the lefthand side of these operators, the righthand side is not
evaluated. 
(See <a href="#Boolean-Ops">Boolean Ops</a>.)

     <br><dt>Side Effect<dd>A side effect occurs when an expression has an effect aside from merely
producing a value.  Assignment expressions, increment and decrement
expressions, and function calls have side effects. 
(See <a href="#Assignment-Ops">Assignment Ops</a>.)

     <br><dt>Single Precision<dd>An internal representation of numbers that can have fractional parts. 
Single precision numbers keep track of fewer digits than do double precision
numbers, but operations on them are sometimes less expensive in terms of CPU time. 
This is the type used by some very old versions of <samp><span class="command">awk</span></samp> to store
numeric values.  It is the C type <code>float</code>.

     <br><dt>Space<dd>The character generated by hitting the space bar on the keyboard.

     <br><dt>Special File<dd>A file name interpreted internally by <samp><span class="command">gawk</span></samp>, instead of being handed
directly to the underlying operating system&mdash;for example, <samp><span class="file">/dev/stderr</span></samp>. 
(See <a href="#Special-Files">Special Files</a>.)

     <br><dt>Stream Editor<dd>A program that reads records from an input stream and processes them one
or more at a time.  This is in contrast with batch programs, which may
expect to read their input files in entirety before starting to do
anything, as well as with interactive programs which require input from the
user.

     <br><dt>String<dd>A datum consisting of a sequence of characters, such as &lsquo;<samp><span class="samp">I am a
string</span></samp>&rsquo;.  Constant strings are written with double quotes in the
<samp><span class="command">awk</span></samp> language and may contain escape sequences. 
(See <a href="#Escape-Sequences">Escape Sequences</a>.)

     <br><dt>Tab<dd>The character generated by hitting the <kbd>TAB</kbd> key on the keyboard. 
It usually expands to up to eight spaces upon output.

     <br><dt>Text Domain<dd>A unique name that identifies an application. 
Used for grouping messages that are translated at runtime
into the local language.

     <br><dt>Timestamp<dd>A value in the &ldquo;seconds since the epoch&rdquo; format used by Unix
and POSIX systems.  Used for the <samp><span class="command">gawk</span></samp> functions
<code>mktime()</code>, <code>strftime()</code>, and <code>systime()</code>. 
See also &ldquo;Epoch&rdquo; and &ldquo;UTC.&rdquo;

     <p><a name="index-Linux-2361"></a><a name="index-GNU_002fLinux-2362"></a><a name="index-Unix-2363"></a><a name="index-BSD_002dbased-operating-systems-2364"></a><a name="index-NetBSD-2365"></a><a name="index-FreeBSD-2366"></a><a name="index-OpenBSD-2367"></a><br><dt>Unix<dd>A computer operating system originally developed in the early 1970's at
AT&amp;T Bell Laboratories.  It initially became popular in universities around
the world and later moved into commercial environments as a software
development system and network server system. There are many commercial
versions of Unix, as well as several work-alike systems whose source code
is freely available (such as GNU/Linux, <a href="http://www.netbsd.org">NetBSD</a>,
<a href="http://www.freebsd.org">FreeBSD</a>, and <a href="http://www.openbsd.org">OpenBSD</a>).

     <br><dt>UTC<dd>The accepted abbreviation for &ldquo;Universal Coordinated Time.&rdquo;
This is standard time in Greenwich, England, which is used as a
reference time for day and date calculations. 
See also &ldquo;Epoch&rdquo; and &ldquo;GMT.&rdquo;

     <br><dt>Whitespace<dd>A sequence of space, TAB, or newline characters occurring inside an input
record or a string. 
</dl>

<!-- The GNU General Public License. -->
<div class="node">
<a name="Copying"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Glossary">Glossary</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">GNU General Public License</h2>

<div align="center">Version 3, 29 June 2007</div>

<!-- This file is intended to be included within another document, -->
<!-- hence no sectioning command or @node. -->
<pre class="display">     Copyright &copy; 2007 Free Software Foundation, Inc. <a href="http://fsf.org/">http://fsf.org/</a>
     
     Everyone is permitted to copy and distribute verbatim copies of this
     license document, but changing it is not allowed.
</pre>
   <!-- fakenode - for prepinfo -->
<h3 class="heading">Preamble</h3>

<p>The GNU General Public License is a free, copyleft license for
software and other kinds of works.

   <p>The licenses for most software and other practical works are designed
to take away your freedom to share and change the works.  By contrast,
the GNU General Public License is intended to guarantee your freedom
to share and change all versions of a program&mdash;to make sure it remains
free software for all its users.  We, the Free Software Foundation,
use the GNU General Public License for most of our software; it
applies also to any other work released this way by its authors.  You
can apply it to your programs, too.

   <p>When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
them if you wish), that you receive source code or can get it if you
want it, that you can change the software or use pieces of it in new
free programs, and that you know you can do these things.

   <p>To protect your rights, we need to prevent others from denying you
these rights or asking you to surrender the rights.  Therefore, you
have certain responsibilities if you distribute copies of the
software, or if you modify it: responsibilities to respect the freedom
of others.

   <p>For example, if you distribute copies of such a program, whether
gratis or for a fee, you must pass on to the recipients the same
freedoms that you received.  You must make sure that they, too,
receive or can get the source code.  And you must show them these
terms so they know their rights.

   <p>Developers that use the GNU GPL protect your rights with two steps:
(1) assert copyright on the software, and (2) offer you this License
giving you legal permission to copy, distribute and/or modify it.

   <p>For the developers' and authors' protection, the GPL clearly explains
that there is no warranty for this free software.  For both users' and
authors' sake, the GPL requires that modified versions be marked as
changed, so that their problems will not be attributed erroneously to
authors of previous versions.

   <p>Some devices are designed to deny users access to install or run
modified versions of the software inside them, although the
manufacturer can do so.  This is fundamentally incompatible with the
aim of protecting users' freedom to change the software.  The
systematic pattern of such abuse occurs in the area of products for
individuals to use, which is precisely where it is most unacceptable. 
Therefore, we have designed this version of the GPL to prohibit the
practice for those products.  If such problems arise substantially in
other domains, we stand ready to extend this provision to those
domains in future versions of the GPL, as needed to protect the
freedom of users.

   <p>Finally, every program is threatened constantly by software patents. 
States should not allow patents to restrict development and use of
software on general-purpose computers, but in those that do, we wish
to avoid the special danger that patents applied to a free program
could make it effectively proprietary.  To prevent this, the GPL
assures that patents cannot be used to render the program non-free.

   <p>The precise terms and conditions for copying, distribution and
modification follow.

<!-- fakenode - for prepinfo -->
<h3 class="heading">TERMS AND CONDITIONS</h3>

     <ol type=1 start=0>
<li>Definitions.

     <p>&ldquo;This License&rdquo; refers to version 3 of the GNU General Public License.

     <p>&ldquo;Copyright&rdquo; also means copyright-like laws that apply to other kinds
of works, such as semiconductor masks.

     <p>&ldquo;The Program&rdquo; refers to any copyrightable work licensed under this
License.  Each licensee is addressed as &ldquo;you&rdquo;.  &ldquo;Licensees&rdquo; and
&ldquo;recipients&rdquo; may be individuals or organizations.

     <p>To &ldquo;modify&rdquo; a work means to copy from or adapt all or part of the work
in a fashion requiring copyright permission, other than the making of
an exact copy.  The resulting work is called a &ldquo;modified version&rdquo; of
the earlier work or a work &ldquo;based on&rdquo; the earlier work.

     <p>A &ldquo;covered work&rdquo; means either the unmodified Program or a work based
on the Program.

     <p>To &ldquo;propagate&rdquo; a work means to do anything with it that, without
permission, would make you directly or secondarily liable for
infringement under applicable copyright law, except executing it on a
computer or modifying a private copy.  Propagation includes copying,
distribution (with or without modification), making available to the
public, and in some countries other activities as well.

     <p>To &ldquo;convey&rdquo; a work means any kind of propagation that enables other
parties to make or receive copies.  Mere interaction with a user
through a computer network, with no transfer of a copy, is not
conveying.

     <p>An interactive user interface displays &ldquo;Appropriate Legal Notices&rdquo; to
the extent that it includes a convenient and prominently visible
feature that (1) displays an appropriate copyright notice, and (2)
tells the user that there is no warranty for the work (except to the
extent that warranties are provided), that licensees may convey the
work under this License, and how to view a copy of this License.  If
the interface presents a list of user commands or options, such as a
menu, a prominent item in the list meets this criterion.

     <li>Source Code.

     <p>The &ldquo;source code&rdquo; for a work means the preferred form of the work for
making modifications to it.  &ldquo;Object code&rdquo; means any non-source form
of a work.

     <p>A &ldquo;Standard Interface&rdquo; means an interface that either is an official
standard defined by a recognized standards body, or, in the case of
interfaces specified for a particular programming language, one that
is widely used among developers working in that language.

     <p>The &ldquo;System Libraries&rdquo; of an executable work include anything, other
than the work as a whole, that (a) is included in the normal form of
packaging a Major Component, but which is not part of that Major
Component, and (b) serves only to enable use of the work with that
Major Component, or to implement a Standard Interface for which an
implementation is available to the public in source code form.  A
&ldquo;Major Component&rdquo;, in this context, means a major essential component
(kernel, window system, and so on) of the specific operating system
(if any) on which the executable work runs, or a compiler used to
produce the work, or an object code interpreter used to run it.

     <p>The &ldquo;Corresponding Source&rdquo; for a work in object code form means all
the source code needed to generate, install, and (for an executable
work) run the object code and to modify the work, including scripts to
control those activities.  However, it does not include the work's
System Libraries, or general-purpose tools or generally available free
programs which are used unmodified in performing those activities but
which are not part of the work.  For example, Corresponding Source
includes interface definition files associated with source files for
the work, and the source code for shared libraries and dynamically
linked subprograms that the work is specifically designed to require,
such as by intimate data communication or control flow between those
subprograms and other parts of the work.

     <p>The Corresponding Source need not include anything that users can
regenerate automatically from other parts of the Corresponding Source.

     <p>The Corresponding Source for a work in source code form is that same
work.

     <li>Basic Permissions.

     <p>All rights granted under this License are granted for the term of
copyright on the Program, and are irrevocable provided the stated
conditions are met.  This License explicitly affirms your unlimited
permission to run the unmodified Program.  The output from running a
covered work is covered by this License only if the output, given its
content, constitutes a covered work.  This License acknowledges your
rights of fair use or other equivalent, as provided by copyright law.

     <p>You may make, run and propagate covered works that you do not convey,
without conditions so long as your license otherwise remains in force. 
You may convey covered works to others for the sole purpose of having
them make modifications exclusively for you, or provide you with
facilities for running those works, provided that you comply with the
terms of this License in conveying all material for which you do not
control copyright.  Those thus making or running the covered works for
you must do so exclusively on your behalf, under your direction and
control, on terms that prohibit them from making any copies of your
copyrighted material outside their relationship with you.

     <p>Conveying under any other circumstances is permitted solely under the
conditions stated below.  Sublicensing is not allowed; section 10
makes it unnecessary.

     <li>Protecting Users' Legal Rights From Anti-Circumvention Law.

     <p>No covered work shall be deemed part of an effective technological
measure under any applicable law fulfilling obligations under article
11 of the WIPO copyright treaty adopted on 20 December 1996, or
similar laws prohibiting or restricting circumvention of such
measures.

     <p>When you convey a covered work, you waive any legal power to forbid
circumvention of technological measures to the extent such
circumvention is effected by exercising rights under this License with
respect to the covered work, and you disclaim any intention to limit
operation or modification of the work as a means of enforcing, against
the work's users, your or third parties' legal rights to forbid
circumvention of technological measures.

     <li>Conveying Verbatim Copies.

     <p>You may convey verbatim copies of the Program's source code as you
receive it, in any medium, provided that you conspicuously and
appropriately publish on each copy an appropriate copyright notice;
keep intact all notices stating that this License and any
non-permissive terms added in accord with section 7 apply to the code;
keep intact all notices of the absence of any warranty; and give all
recipients a copy of this License along with the Program.

     <p>You may charge any price or no price for each copy that you convey,
and you may offer support or warranty protection for a fee.

     <li>Conveying Modified Source Versions.

     <p>You may convey a work based on the Program, or the modifications to
produce it from the Program, in the form of source code under the
terms of section 4, provided that you also meet all of these
conditions:

          <ol type=a start=1>
<li>The work must carry prominent notices stating that you modified it,
and giving a relevant date.

          <li>The work must carry prominent notices stating that it is released
under this License and any conditions added under section 7.  This
requirement modifies the requirement in section 4 to &ldquo;keep intact all
notices&rdquo;.

          <li>You must license the entire work, as a whole, under this License to
anyone who comes into possession of a copy.  This License will
therefore apply, along with any applicable section 7 additional terms,
to the whole of the work, and all its parts, regardless of how they
are packaged.  This License gives no permission to license the work in
any other way, but it does not invalidate such permission if you have
separately received it.

          <li>If the work has interactive user interfaces, each must display
Appropriate Legal Notices; however, if the Program has interactive
interfaces that do not display Appropriate Legal Notices, your work
need not make them do so.
          </ol>

     <p>A compilation of a covered work with other separate and independent
works, which are not by their nature extensions of the covered work,
and which are not combined with it such as to form a larger program,
in or on a volume of a storage or distribution medium, is called an
&ldquo;aggregate&rdquo; if the compilation and its resulting copyright are not
used to limit the access or legal rights of the compilation's users
beyond what the individual works permit.  Inclusion of a covered work
in an aggregate does not cause this License to apply to the other
parts of the aggregate.

     <li>Conveying Non-Source Forms.

     <p>You may convey a covered work in object code form under the terms of
sections 4 and 5, provided that you also convey the machine-readable
Corresponding Source under the terms of this License, in one of these
ways:

          <ol type=a start=1>
<li>Convey the object code in, or embodied in, a physical product
(including a physical distribution medium), accompanied by the
Corresponding Source fixed on a durable physical medium customarily
used for software interchange.

          <li>Convey the object code in, or embodied in, a physical product
(including a physical distribution medium), accompanied by a written
offer, valid for at least three years and valid for as long as you
offer spare parts or customer support for that product model, to give
anyone who possesses the object code either (1) a copy of the
Corresponding Source for all the software in the product that is
covered by this License, on a durable physical medium customarily used
for software interchange, for a price no more than your reasonable
cost of physically performing this conveying of source, or (2) access
to copy the Corresponding Source from a network server at no charge.

          <li>Convey individual copies of the object code with a copy of the written
offer to provide the Corresponding Source.  This alternative is
allowed only occasionally and noncommercially, and only if you
received the object code with such an offer, in accord with subsection
6b.

          <li>Convey the object code by offering access from a designated place
(gratis or for a charge), and offer equivalent access to the
Corresponding Source in the same way through the same place at no
further charge.  You need not require recipients to copy the
Corresponding Source along with the object code.  If the place to copy
the object code is a network server, the Corresponding Source may be
on a different server (operated by you or a third party) that supports
equivalent copying facilities, provided you maintain clear directions
next to the object code saying where to find the Corresponding Source. 
Regardless of what server hosts the Corresponding Source, you remain
obligated to ensure that it is available for as long as needed to
satisfy these requirements.

          <li>Convey the object code using peer-to-peer transmission, provided you
inform other peers where the object code and Corresponding Source of
the work are being offered to the general public at no charge under
subsection 6d.

          </ol>

     <p>A separable portion of the object code, whose source code is excluded
from the Corresponding Source as a System Library, need not be
included in conveying the object code work.

     <p>A &ldquo;User Product&rdquo; is either (1) a &ldquo;consumer product&rdquo;, which means any
tangible personal property which is normally used for personal,
family, or household purposes, or (2) anything designed or sold for
incorporation into a dwelling.  In determining whether a product is a
consumer product, doubtful cases shall be resolved in favor of
coverage.  For a particular product received by a particular user,
&ldquo;normally used&rdquo; refers to a typical or common use of that class of
product, regardless of the status of the particular user or of the way
in which the particular user actually uses, or expects or is expected
to use, the product.  A product is a consumer product regardless of
whether the product has substantial commercial, industrial or
non-consumer uses, unless such uses represent the only significant
mode of use of the product.

     <p>&ldquo;Installation Information&rdquo; for a User Product means any methods,
procedures, authorization keys, or other information required to
install and execute modified versions of a covered work in that User
Product from a modified version of its Corresponding Source.  The
information must suffice to ensure that the continued functioning of
the modified object code is in no case prevented or interfered with
solely because modification has been made.

     <p>If you convey an object code work under this section in, or with, or
specifically for use in, a User Product, and the conveying occurs as
part of a transaction in which the right of possession and use of the
User Product is transferred to the recipient in perpetuity or for a
fixed term (regardless of how the transaction is characterized), the
Corresponding Source conveyed under this section must be accompanied
by the Installation Information.  But this requirement does not apply
if neither you nor any third party retains the ability to install
modified object code on the User Product (for example, the work has
been installed in ROM).

     <p>The requirement to provide Installation Information does not include a
requirement to continue to provide support service, warranty, or
updates for a work that has been modified or installed by the
recipient, or for the User Product in which it has been modified or
installed.  Access to a network may be denied when the modification
itself materially and adversely affects the operation of the network
or violates the rules and protocols for communication across the
network.

     <p>Corresponding Source conveyed, and Installation Information provided,
in accord with this section must be in a format that is publicly
documented (and with an implementation available to the public in
source code form), and must require no special password or key for
unpacking, reading or copying.

     <li>Additional Terms.

     <p>&ldquo;Additional permissions&rdquo; are terms that supplement the terms of this
License by making exceptions from one or more of its conditions. 
Additional permissions that are applicable to the entire Program shall
be treated as though they were included in this License, to the extent
that they are valid under applicable law.  If additional permissions
apply only to part of the Program, that part may be used separately
under those permissions, but the entire Program remains governed by
this License without regard to the additional permissions.

     <p>When you convey a copy of a covered work, you may at your option
remove any additional permissions from that copy, or from any part of
it.  (Additional permissions may be written to require their own
removal in certain cases when you modify the work.)  You may place
additional permissions on material, added by you to a covered work,
for which you have or can give appropriate copyright permission.

     <p>Notwithstanding any other provision of this License, for material you
add to a covered work, you may (if authorized by the copyright holders
of that material) supplement the terms of this License with terms:

          <ol type=a start=1>
<li>Disclaiming warranty or limiting liability differently from the terms
of sections 15 and 16 of this License; or

          <li>Requiring preservation of specified reasonable legal notices or author
attributions in that material or in the Appropriate Legal Notices
displayed by works containing it; or

          <li>Prohibiting misrepresentation of the origin of that material, or
requiring that modified versions of such material be marked in
reasonable ways as different from the original version; or

          <li>Limiting the use for publicity purposes of names of licensors or
authors of the material; or

          <li>Declining to grant rights under trademark law for use of some trade
names, trademarks, or service marks; or

          <li>Requiring indemnification of licensors and authors of that material by
anyone who conveys the material (or modified versions of it) with
contractual assumptions of liability to the recipient, for any
liability that these contractual assumptions directly impose on those
licensors and authors.
          </ol>

     <p>All other non-permissive additional terms are considered &ldquo;further
restrictions&rdquo; within the meaning of section 10.  If the Program as you
received it, or any part of it, contains a notice stating that it is
governed by this License along with a term that is a further
restriction, you may remove that term.  If a license document contains
a further restriction but permits relicensing or conveying under this
License, you may add to a covered work material governed by the terms
of that license document, provided that the further restriction does
not survive such relicensing or conveying.

     <p>If you add terms to a covered work in accord with this section, you
must place, in the relevant source files, a statement of the
additional terms that apply to those files, or a notice indicating
where to find the applicable terms.

     <p>Additional terms, permissive or non-permissive, may be stated in the
form of a separately written license, or stated as exceptions; the
above requirements apply either way.

     <li>Termination.

     <p>You may not propagate or modify a covered work except as expressly
provided under this License.  Any attempt otherwise to propagate or
modify it is void, and will automatically terminate your rights under
this License (including any patent licenses granted under the third
paragraph of section 11).

     <p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

     <p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

     <p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, you do not qualify to receive new licenses for the same
material under section 10.

     <li>Acceptance Not Required for Having Copies.

     <p>You are not required to accept this License in order to receive or run
a copy of the Program.  Ancillary propagation of a covered work
occurring solely as a consequence of using peer-to-peer transmission
to receive a copy likewise does not require acceptance.  However,
nothing other than this License grants you permission to propagate or
modify any covered work.  These actions infringe copyright if you do
not accept this License.  Therefore, by modifying or propagating a
covered work, you indicate your acceptance of this License to do so.

     <li>Automatic Licensing of Downstream Recipients.

     <p>Each time you convey a covered work, the recipient automatically
receives a license from the original licensors, to run, modify and
propagate that work, subject to this License.  You are not responsible
for enforcing compliance by third parties with this License.

     <p>An &ldquo;entity transaction&rdquo; is a transaction transferring control of an
organization, or substantially all assets of one, or subdividing an
organization, or merging organizations.  If propagation of a covered
work results from an entity transaction, each party to that
transaction who receives a copy of the work also receives whatever
licenses to the work the party's predecessor in interest had or could
give under the previous paragraph, plus a right to possession of the
Corresponding Source of the work from the predecessor in interest, if
the predecessor has it or can get it with reasonable efforts.

     <p>You may not impose any further restrictions on the exercise of the
rights granted or affirmed under this License.  For example, you may
not impose a license fee, royalty, or other charge for exercise of
rights granted under this License, and you may not initiate litigation
(including a cross-claim or counterclaim in a lawsuit) alleging that
any patent claim is infringed by making, using, selling, offering for
sale, or importing the Program or any portion of it.

     <li>Patents.

     <p>A &ldquo;contributor&rdquo; is a copyright holder who authorizes use under this
License of the Program or a work on which the Program is based.  The
work thus licensed is called the contributor's &ldquo;contributor version&rdquo;.

     <p>A contributor's &ldquo;essential patent claims&rdquo; are all patent claims owned
or controlled by the contributor, whether already acquired or
hereafter acquired, that would be infringed by some manner, permitted
by this License, of making, using, or selling its contributor version,
but do not include claims that would be infringed only as a
consequence of further modification of the contributor version.  For
purposes of this definition, &ldquo;control&rdquo; includes the right to grant
patent sublicenses in a manner consistent with the requirements of
this License.

     <p>Each contributor grants you a non-exclusive, worldwide, royalty-free
patent license under the contributor's essential patent claims, to
make, use, sell, offer for sale, import and otherwise run, modify and
propagate the contents of its contributor version.

     <p>In the following three paragraphs, a &ldquo;patent license&rdquo; is any express
agreement or commitment, however denominated, not to enforce a patent
(such as an express permission to practice a patent or covenant not to
sue for patent infringement).  To &ldquo;grant&rdquo; such a patent license to a
party means to make such an agreement or commitment not to enforce a
patent against the party.

     <p>If you convey a covered work, knowingly relying on a patent license,
and the Corresponding Source of the work is not available for anyone
to copy, free of charge and under the terms of this License, through a
publicly available network server or other readily accessible means,
then you must either (1) cause the Corresponding Source to be so
available, or (2) arrange to deprive yourself of the benefit of the
patent license for this particular work, or (3) arrange, in a manner
consistent with the requirements of this License, to extend the patent
license to downstream recipients.  &ldquo;Knowingly relying&rdquo; means you have
actual knowledge that, but for the patent license, your conveying the
covered work in a country, or your recipient's use of the covered work
in a country, would infringe one or more identifiable patents in that
country that you have reason to believe are valid.

     <p>If, pursuant to or in connection with a single transaction or
arrangement, you convey, or propagate by procuring conveyance of, a
covered work, and grant a patent license to some of the parties
receiving the covered work authorizing them to use, propagate, modify
or convey a specific copy of the covered work, then the patent license
you grant is automatically extended to all recipients of the covered
work and works based on it.

     <p>A patent license is &ldquo;discriminatory&rdquo; if it does not include within the
scope of its coverage, prohibits the exercise of, or is conditioned on
the non-exercise of one or more of the rights that are specifically
granted under this License.  You may not convey a covered work if you
are a party to an arrangement with a third party that is in the
business of distributing software, under which you make payment to the
third party based on the extent of your activity of conveying the
work, and under which the third party grants, to any of the parties
who would receive the covered work from you, a discriminatory patent
license (a) in connection with copies of the covered work conveyed by
you (or copies made from those copies), or (b) primarily for and in
connection with specific products or compilations that contain the
covered work, unless you entered into that arrangement, or that patent
license was granted, prior to 28 March 2007.

     <p>Nothing in this License shall be construed as excluding or limiting
any implied license or other defenses to infringement that may
otherwise be available to you under applicable patent law.

     <li>No Surrender of Others' Freedom.

     <p>If conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot convey
a covered work so as to satisfy simultaneously your obligations under
this License and any other pertinent obligations, then as a
consequence you may not convey it at all.  For example, if you agree
to terms that obligate you to collect a royalty for further conveying
from those to whom you convey the Program, the only way you could
satisfy both those terms and this License would be to refrain entirely
from conveying the Program.

     <li>Use with the GNU Affero General Public License.

     <p>Notwithstanding any other provision of this License, you have
permission to link or combine any covered work with a work licensed
under version 3 of the GNU Affero General Public License into a single
combined work, and to convey the resulting work.  The terms of this
License will continue to apply to the part which is the covered work,
but the special requirements of the GNU Affero General Public License,
section 13, concerning interaction through a network will apply to the
combination as such.

     <li>Revised Versions of this License.

     <p>The Free Software Foundation may publish revised and/or new versions
of the GNU General Public License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.

     <p>Each version is given a distinguishing version number.  If the Program
specifies that a certain numbered version of the GNU General Public
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that numbered version or
of any later version published by the Free Software Foundation.  If
the Program does not specify a version number of the GNU General
Public License, you may choose any version ever published by the Free
Software Foundation.

     <p>If the Program specifies that a proxy can decide which future versions
of the GNU General Public License can be used, that proxy's public
statement of acceptance of a version permanently authorizes you to
choose that version for the Program.

     <p>Later license versions may give you additional or different
permissions.  However, no additional obligations are imposed on any
author or copyright holder as a result of your choosing to follow a
later version.

     <li>Disclaimer of Warranty.

     <p>THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY
APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM &ldquo;AS IS&rdquo; WITHOUT
WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND
PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE PROGRAM PROVE
DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR
CORRECTION.

     <li>Limitation of Liability.

     <p>IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR
CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES
ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT
NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR
LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM
TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER
PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.

     <li>Interpretation of Sections 15 and 16.

     <p>If the disclaimer of warranty and limitation of liability provided
above cannot be given local legal effect according to their terms,
reviewing courts shall apply local law that most closely approximates
an absolute waiver of all civil liability in connection with the
Program, unless a warranty or assumption of liability accompanies a
copy of the Program in return for a fee.

     </ol>

<!-- fakenode - for prepinfo -->
<h3 class="heading">END OF TERMS AND CONDITIONS</h3>

<!-- fakenode - for prepinfo -->
<h3 class="heading">How to Apply These Terms to Your New Programs</h3>

<p>If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these
terms.

   <p>To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
state the exclusion of warranty; and each file should have at least
the &ldquo;copyright&rdquo; line and a pointer to where the full notice is found.

<pre class="smallexample">     <var>one line to give the program's name and a brief idea of what it does.</var>
     Copyright (C) <var>year</var> <var>name of author</var>
     
     This program is free software: you can redistribute it and/or modify
     it under the terms of the GNU General Public License as published by
     the Free Software Foundation, either version 3 of the License, or (at
     your option) any later version.
     
     This program is distributed in the hope that it will be useful, but
     WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
     General Public License for more details.
     
     You should have received a copy of the GNU General Public License
     along with this program.  If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.
</pre>
   <p>Also add information on how to contact you by electronic and paper mail.

   <p>If the program does terminal interaction, make it output a short
notice like this when it starts in an interactive mode:

<pre class="smallexample">     <var>program</var> Copyright (C) <var>year</var> <var>name of author</var>
     This program comes with ABSOLUTELY NO WARRANTY; for details type &lsquo;<samp><span class="samp">show w</span></samp>&rsquo;.
     This is free software, and you are welcome to redistribute it
     under certain conditions; type &lsquo;<samp><span class="samp">show c</span></samp>&rsquo; for details.
</pre>
   <p>The hypothetical commands &lsquo;<samp><span class="samp">show w</span></samp>&rsquo; and &lsquo;<samp><span class="samp">show c</span></samp>&rsquo; should show
the appropriate parts of the General Public License.  Of course, your
program's commands might be different; for a GUI interface, you would
use an &ldquo;about box&rdquo;.

   <p>You should also get your employer (if you work as a programmer) or school,
if any, to sign a &ldquo;copyright disclaimer&rdquo; for the program, if necessary. 
For more information on this, and how to apply and follow the GNU GPL, see
<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.

   <p>The GNU General Public License does not permit incorporating your
program into proprietary programs.  If your program is a subroutine
library, you may consider it more useful to permit linking proprietary
applications with the library.  If this is what you want to do, use
the GNU Lesser General Public License instead of this License.  But
first, please read <a href="http://www.gnu.org/philosophy/why-not-lgpl.html">http://www.gnu.org/philosophy/why-not-lgpl.html</a>.

<!-- The GNU Free Documentation License. -->
<div class="node">
<a name="GNU-Free-Documentation-License"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Index">Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Copying">Copying</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">GNU Free Documentation License</h2>

<p><a name="index-FDL-_0028Free-Documentation-License_0029-2368"></a><a name="index-Free-Documentation-License-_0028FDL_0029-2369"></a><a name="index-GNU-Free-Documentation-License-2370"></a><div align="center">Version 1.3, 3 November 2008</div>

<!-- This file is intended to be included within another document, -->
<!-- hence no sectioning command or @node. -->
<pre class="display">     Copyright &copy; 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
     <a href="http://fsf.org/">http://fsf.org/</a>
     
     Everyone is permitted to copy and distribute verbatim copies
     of this license document, but changing it is not allowed.
</pre>
     <ol type=1 start=0>
<li>PREAMBLE

     <p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <dfn>free</dfn> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially. 
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

     <p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

     <p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

     <li>APPLICABILITY AND DEFINITIONS

     <p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

     <p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

     <p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

     <p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

     <p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

     <p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent. 
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.

     <p>Examples of suitable formats for Transparent copies include plain
<span class="sc">ascii</span> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.

     <p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

     <p>The &ldquo;publisher&rdquo; means any person or entity that distributes copies
of the Document to the public.

     <p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.

     <p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

     <li>VERBATIM COPYING

     <p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

     <p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

     <li>COPYING IN QUANTITY

     <p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition. 
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

     <p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

     <p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material. 
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

     <p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

     <li>MODIFICATIONS

     <p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

          <ol type=A start=1>
<li>Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

          <li>List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

          <li>State on the Title page the name of the publisher of the
Modified Version, as the publisher.

          <li>Preserve all the copyright notices of the Document.

          <li>Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

          <li>Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

          <li>Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

          <li>Include an unaltered copy of this License.

          <li>Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

          <li>Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section. 
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

          <li>For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

          <li>Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

          <li>Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

          <li>Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

          <li>Preserve any Warranty Disclaimers.
          </ol>

     <p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice. 
These titles must be distinct from any other section titles.

     <p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

     <p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

     <p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

     <li>COMBINING DOCUMENTS

     <p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

     <p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number. 
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

     <p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;

     <li>COLLECTIONS OF DOCUMENTS

     <p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

     <p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

     <li>AGGREGATION WITH INDEPENDENT WORKS

     <p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit. 
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

     <p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form. 
Otherwise they must appear on printed covers that bracket the whole
aggregate.

     <li>TRANSLATION

     <p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4. 
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

     <p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

     <li>TERMINATION

     <p>You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.

     <p>However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

     <p>Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

     <p>Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.

     <li>FUTURE REVISIONS OF THIS LICENSE

     <p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.

     <p>Each version of the License is given a distinguishing version number. 
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy's public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.

     <li>RELICENSING

     <p>&ldquo;Massive Multiauthor Collaboration Site&rdquo; (or &ldquo;MMC Site&rdquo;) means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
&ldquo;Massive Multiauthor Collaboration&rdquo; (or &ldquo;MMC&rdquo;) contained in the
site means any set of copyrightable works thus published on the MMC
site.

     <p>&ldquo;CC-BY-SA&rdquo; means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.

     <p>&ldquo;Incorporate&rdquo; means to publish or republish a Document, in whole or
in part, as part of another Document.

     <p>An MMC is &ldquo;eligible for relicensing&rdquo; if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.

     <p>The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.

        </ol>

<!-- fakenode - for prepinfo -->
<h3 class="unnumberedsec">ADDENDUM: How to use this License for your documents</h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

<pre class="smallexample">       Copyright (C)  <var>year</var>  <var>your name</var>.
       Permission is granted to copy, distribute and/or modify this document
       under the terms of the GNU Free Documentation License, Version 1.3
       or any later version published by the Free Software Foundation;
       with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
       Texts.  A copy of the license is included in the section entitled ``GNU
       Free Documentation License''.
</pre>
   <p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with<small class="dots">...</small>Texts.&rdquo; line with this:

<pre class="smallexample">         with the Invariant Sections being <var>list their titles</var>, with
         the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
         being <var>list</var>.
</pre>
   <p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

   <p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

<!-- Local Variables: -->
<!-- ispell-local-pdict: "ispell-dict" -->
<!-- End: -->
<div class="node">
<a name="Index"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#GNU-Free-Documentation-License">GNU Free Documentation License</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Index</h2>

<ul class="index-cp" compact>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007d--operator-967"><code>!</code> (exclamation point), <code>!</code>  operator</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007d-operator-1855"><code>!</code> (exclamation point), <code>!</code> operator</a>: <a href="#Egrep-Program">Egrep Program</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007d-operator-1091"><code>!</code> (exclamation point), <code>!</code> operator</a>: <a href="#Ranges">Ranges</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007d-operator-1001"><code>!</code> (exclamation point), <code>!</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_003d_007d-operator-1023"><code>!</code> (exclamation point), <code>!=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_003d_007d-operator-934"><code>!</code> (exclamation point), <code>!=</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-1075"><code>!</code> (exclamation point), <code>!~</code> operator</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-1038"><code>!</code> (exclamation point), <code>!~</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-938"><code>!</code> (exclamation point), <code>!~</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-794"><code>!</code> (exclamation point), <code>!~</code> operator</a>: <a href="#Regexp-Constants">Regexp Constants</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-474"><code>!</code> (exclamation point), <code>!~</code> operator</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-465"><code>!</code> (exclamation point), <code>!~</code> operator</a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-g_t_0040code_007b_0021_007d-_0028exclamation-point_0029_002c-_0040code_007b_0021_007e_007d-operator-315"><code>!</code> (exclamation point), <code>!~</code> operator</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-g_t_0040code_007b_0022_007d-_0028double-quote_0029-136"><code>"</code> (double quote)</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-g_t_0040code_007b_0022_007d-_0028double-quote_0029-98"><code>"</code> (double quote)</a>: <a href="#Read-Terminal">Read Terminal</a></li>
<li><a href="#index-g_t_0040code_007b_0022_007d-_0028double-quote_0029_002c-regexp-constants-479"><code>"</code> (double quote), regexp constants</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-g_t_0040code_007b_0023_007d-_0028number-sign_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029-111"><code>#</code> (number sign), <code>#!</code> (executable scripts)</a>: <a href="#Executable-Scripts">Executable Scripts</a></li>
<li><a href="#index-g_t_0040code_007b_0023_007d-_0028number-sign_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029_002c-portability-issues-with-114"><code>#</code> (number sign), <code>#!</code> (executable scripts), portability issues with</a>: <a href="#Executable-Scripts">Executable Scripts</a></li>
<li><a href="#index-g_t_0040code_007b_0023_007d-_0028number-sign_0029_002c-commenting-119"><code>#</code> (number sign), commenting</a>: <a href="#Comments">Comments</a></li>
<li><a href="#index-g_t_0040code_007b_0024_007d-_0028dollar-sign_0029-368"><code>$</code> (dollar sign)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_0024_007d-_0028dollar-sign_0029_002c-_0040code_007b_0024_007d-field-operator-987"><code>$</code> (dollar sign), <code>$</code> field operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_0024_007d-_0028dollar-sign_0029_002c-_0040code_007b_0024_007d-field-operator-532"><code>$</code> (dollar sign), <code>$</code> field operator</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-g_t_0040code_007b_0024_007d-_0028dollar-sign_0029_002c-incrementing-fields-and-arrays-893"><code>$</code> (dollar sign), incrementing fields and arrays</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_0025_007d-_0028percent-sign_0029_002c-_0040code_007b_0025_007d-operator-1007"><code>%</code> (percent sign), <code>%</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_0025_007d-_0028percent-sign_0029_002c-_0040code_007b_0025_003d_007d-operator-1057"><code>%</code> (percent sign), <code>%=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_0025_007d-_0028percent-sign_0029_002c-_0040code_007b_0025_003d_007d-operator-866"><code>%</code> (percent sign), <code>%=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_0026_007d-_0028ampersand_0029_002c-_0040code_007b_0026_0026_007d-operator-1041"><code>&amp;</code> (ampersand), <code>&amp;&amp;</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_0026_007d-_0028ampersand_0029_002c-_0040code_007b_0026_0026_007d-operator-962"><code>&amp;</code> (ampersand), <code>&amp;&amp;</code> operator</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-g_t_0040code_007b_0026_007d-_0028ampersand_0029_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bgensub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-and-1405"><code>&amp;</code> (ampersand), <code>gsub()</code>/<code>gensub()</code>/<code>sub()</code> functions and</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-g_t_0040code_007b_0027_007d-_0028single-quote_0029-134"><code>'</code> (single quote)</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-g_t_0040code_007b_0027_007d-_0028single-quote_0029-109"><code>'</code> (single quote)</a>: <a href="#Long">Long</a></li>
<li><a href="#index-g_t_0040code_007b_0027_007d-_0028single-quote_0029-87"><code>'</code> (single quote)</a>: <a href="#One_002dshot">One-shot</a></li>
<li><a href="#index-g_t_0040code_007b_0027_007d-_0028single-quote_0029_002c-vs_002e_0040_003a-apostrophe-125"><code>'</code> (single quote), vs. apostrophe</a>: <a href="#Comments">Comments</a></li>
<li><a href="#index-g_t_0040code_007b_0027_007d-_0028single-quote_0029_002c-with-double-quotes-138"><code>'</code> (single quote), with double quotes</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-g_t_0040code_007b_0028_0029_007d-_0028parentheses_0029-381"><code>()</code> (parentheses)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_0028_0029_007d-_0028parentheses_0029_002c-_0040command_007bpgawk_007d-program-1679"><code>()</code> (parentheses), <samp><span class="command">pgawk</span></samp> program</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_007d-operator_002c-as-multiplication-operator-1003"><code>*</code> (asterisk), <code>*</code> operator, as multiplication operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_007d-operator_002c-as-regexp-operator-383"><code>*</code> (asterisk), <code>*</code> operator, as regexp operator</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_007d-operator_002c-null-strings_0040comma_007b_007d-matching-1411"><code>*</code> (asterisk), <code>*</code> operator, null strings, matching</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_002a_007d-operator-995"><code>*</code> (asterisk), <code>**</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_002a_007d-operator-834"><code>*</code> (asterisk), <code>**</code> operator</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_002a_003d_007d-operator-1053"><code>*</code> (asterisk), <code>**=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_002a_003d_007d-operator-870"><code>*</code> (asterisk), <code>**=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_003d_007d-operator-1051"><code>*</code> (asterisk), <code>*=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002a_007d-_0028asterisk_0029_002c-_0040code_007b_002a_003d_007d-operator-862"><code>*</code> (asterisk), <code>*=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029-385"><code>+</code> (plus sign)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_007d-operator-997"><code>+</code> (plus sign), <code>+</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_002b_007d-_0028decrement_002fincrement-operators_0029-890"><code>+</code> (plus sign), <code>++</code> (decrement/increment operators)</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_002b_007d-operator-989"><code>+</code> (plus sign), <code>++</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_002b_007d-operator-896"><code>+</code> (plus sign), <code>++</code> operator</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_003d_007d-operator-1047"><code>+</code> (plus sign), <code>+=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002b_007d-_0028plus-sign_0029_002c-_0040code_007b_002b_003d_007d-operator-855"><code>+</code> (plus sign), <code>+=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002c_007d-_0028comma_0029_002c-in-range-patterns-1087"><code>,</code> (comma), in range patterns</a>: <a href="#Ranges">Ranges</a></li>
<li><a href="#index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_007d-operator-999"><code>-</code> (hyphen), <code>-</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_002d_007d-_0028decrement_002fincrement_0029-operator-991"><code>-</code> (hyphen), <code>--</code> (decrement/increment) operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_002d_007d-operator-898"><code>-</code> (hyphen), <code>--</code> operator</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_003d_007d-operator-1049"><code>-</code> (hyphen), <code>-=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-_0040code_007b_002d_003d_007d-operator-860"><code>-</code> (hyphen), <code>-=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-filenames-beginning-with-200"><code>-</code> (hyphen), filenames beginning with</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_007d-_0028hyphen_0029_002c-in-bracket-expressions-403"><code>-</code> (hyphen), in bracket expressions</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dassign_007d-option-193"><code>--assign</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dc_007d-option-204"><code>--c</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dcharacters_002das_002dbytes_007d-option-203"><code>--characters-as-bytes</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dcommand_007d-option-263"><code>--command</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dcopyright_007d-option-208"><code>--copyright</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002ddisable_002dlint_007d-configuration-option-2102"><code>--disable-lint</code> configuration option</a>: <a href="#Additional-Configuration-Options">Additional Configuration Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002ddisable_002dnls_007d-configuration-option-2104"><code>--disable-nls</code> configuration option</a>: <a href="#Additional-Configuration-Options">Additional Configuration Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002ddump_002dvariables_007d-option-1714"><code>--dump-variables</code> option</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002ddump_002dvariables_007d-option-211"><code>--dump-variables</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dexec_007d-option-220"><code>--exec</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dfield_002dseparator_007d-option-187"><code>--field-separator</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dfile_007d-option-190"><code>--file</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dgen_002dpot_007d-option-1585"><code>--gen-pot</code> option</a>: <a href="#String-Extraction">String Extraction</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dgen_002dpot_007d-option-224"><code>--gen-pot</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dhelp_007d-option-228"><code>--help</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dL_007d-option-267"><code>--L</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dlint_007d-option-233"><code>--lint</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dlint_007d-option-180"><code>--lint</code> option</a>: <a href="#Command-Line">Command Line</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dlint_002dold_007d-option-268"><code>--lint-old</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option-1617"><code>--non-decimal-data</code> option</a>: <a href="#Nondecimal-Data">Nondecimal Data</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option-237"><code>--non-decimal-data</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option_002c-_0040code_007bstrtonum_0028_0029_007d-function-and-1622"><code>--non-decimal-data</code> option, <code>strtonum()</code> function and</a>: <a href="#Nondecimal-Data">Nondecimal Data</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002doptimize_007d-option-243"><code>--optimize</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dposix_007d-option-249"><code>--posix</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dposix_007d-option_002c-_0040code_007b_002d_002dtraditional_007d-option-and-258"><code>--posix</code> option, <code>--traditional</code> option and</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dprofile_007d-option-1670"><code>--profile</code> option</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dprofile_007d-option-246"><code>--profile</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dre_002dinterval_007d-option-260"><code>--re-interval</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dsandbox_007d-option-265"><code>--sandbox</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dsandbox_007d-option_002c-disabling-_0040code_007bsystem_0028_0029_007d-function-1425"><code>--sandbox</code> option, disabling <code>system()</code> function</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dsandbox_007d-option_002c-input-redirection-with-_0040command_007bgetline_007d-619"><code>--sandbox</code> option, input redirection with <samp><span class="command">getline</span></samp></a>: <a href="#Getline">Getline</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dsandbox_007d-option_002c-output-redirection-with-_0040code_007bprint_007d_002c-_0040code_007bprintf_007d-710"><code>--sandbox</code> option, output redirection with <code>print</code>, <code>printf</code></a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dsource_007d-option-217"><code>--source</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dtraditional_007d-option-205"><code>--traditional</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dtraditional_007d-option_002c-_0040code_007b_002d_002dposix_007d-option-and-257"><code>--traditional</code> option, <code>--posix</code> option and</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002duse_002dlc_002dnumeric_007d-option-242"><code>--use-lc-numeric</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dversion_007d-option-270"><code>--version</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002d_002dwith_002dwhiny_002duser_002dstrftime_007d-configuration-option-2106"><code>--with-whiny-user-strftime</code> configuration option</a>: <a href="#Additional-Configuration-Options">Additional Configuration Options</a></li>
<li><a href="#index-g_t_0040code_007b_002db_007d-option-202"><code>-b</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dC_007d-option-207"><code>-C</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dd_007d-option-210"><code>-d</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dE_007d-option-219"><code>-E</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002de_007d-option-216"><code>-e</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dF_007d-option-575"><code>-F</code> option</a>: <a href="#Command-Line-Field-Separator">Command Line Field Separator</a></li>
<li><a href="#index-g_t_0040code_007b_002df_007d-option-189"><code>-f</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dF_007d-option-186"><code>-F</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002df_007d-option-104"><code>-f</code> option</a>: <a href="#Long">Long</a></li>
<li><a href="#index-g_t_0040code_007b_002dF_007d-option_002c-_0040code_007b_002dFt_007d-sets-_0040code_007bFS_007d-to-TAB-272"><code>-F</code> option, <code>-Ft</code> sets <code>FS</code> to TAB</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002df_007d-option_002c-on-command-line-273"><code>-f</code> option, on command line</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dg_007d-option-223"><code>-g</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dh_007d-option-227"><code>-h</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dl_007d-option-232"><code>-l</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dN_007d-option-241"><code>-N</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dn_007d-option-236"><code>-n</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dO_007d-option-244"><code>-O</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dP_007d-option-248"><code>-P</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dp_007d-option-245"><code>-p</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dR_007d-option-262"><code>-R</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dr_007d-option-259"><code>-r</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dS_007d-option-264"><code>-S</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dV_007d-option-269"><code>-V</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dv_007d-option-192"><code>-v</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dv_007d-option_002c-variables_0040comma_007b_007d-assigning-810"><code>-v</code> option, variables, assigning</a>: <a href="#Assignment-Options">Assignment Options</a></li>
<li><a href="#index-g_t_0040code_007b_002dW_007d-option-197"><code>-W</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007b_002e_007d-_0028period_0029-370"><code>.</code> (period)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_002emo_007d-files-1535"><code>.mo</code> files</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007b_002emo_007d-files_002c-converting-from-_0040code_007b_002epo_007d-1607"><code>.mo</code> files, converting from <code>.po</code></a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-g_t_0040code_007b_002emo_007d-files_002c-specifying-directory-of-1569"><code>.mo</code> files, specifying directory of</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040code_007b_002emo_007d-files_002c-specifying-directory-of-1540"><code>.mo</code> files, specifying directory of</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007b_002epo_007d-files-1579"><code>.po</code> files</a>: <a href="#Translator-i18n">Translator i18n</a></li>
<li><a href="#index-g_t_0040code_007b_002epo_007d-files-1531"><code>.po</code> files</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007b_002epo_007d-files_002c-converting-to-_0040code_007b_002emo_007d-1605"><code>.po</code> files, converting to <code>.mo</code></a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-g_t_0040code_007b_002epot_007d-files-1527"><code>.pot</code> files</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029-308"><code>/</code> (forward slash)</a>: <a href="#Regexp">Regexp</a></li>
<li><a href="#index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029_002c-_0040code_007b_002f_007d-operator-1005"><code>/</code> (forward slash), <code>/</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029_002c-_0040code_007b_002f_003d_007d-operator-1055"><code>/</code> (forward slash), <code>/=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029_002c-_0040code_007b_002f_003d_007d-operator-864"><code>/</code> (forward slash), <code>/=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029_002c-_0040code_007b_002f_003d_007d-operator_002c-vs_002e-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d-regexp-constant-880"><code>/</code> (forward slash), <code>/=</code> operator, vs. <code>/=.../</code> regexp constant</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002f_007d-_0028forward-slash_0029_002c-patterns-and-1071"><code>/</code> (forward slash), patterns and</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-g_t_0040code_007b_002f_003d_007d-operator-vs_002e-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d-regexp-constant-886"><code>/=</code> operator vs. <code>/=.../</code> regexp constant</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_002fdev_002f_0040dots_007b_007d_007d-special-files-_0028_0040command_007bgawk_007d_0029-750"><code>/dev/...</code> special files (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-g_t_0040code_007b_002fdev_002ffd_002f_0040var_007bN_007d_007d-special-files-752"><code>/dev/fd/</code><var>N</var> special files</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-g_t_0040code_007b_002finet_002f_0040dots_007b_007d_007d-special-files-_0028_0040command_007bgawk_007d_0029-1653"><code>/inet/...</code> special files (<samp><span class="command">gawk</span></samp>)</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-g_t_0040code_007b_002finet4_002f_0040dots_007b_007d_007d-special-files-_0028_0040command_007bgawk_007d_0029-1655"><code>/inet4/...</code> special files (<samp><span class="command">gawk</span></samp>)</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-g_t_0040code_007b_002finet6_002f_0040dots_007b_007d_007d-special-files-_0028_0040command_007bgawk_007d_0029-1657"><code>/inet6/...</code> special files (<samp><span class="command">gawk</span></samp>)</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-g_t_0040code_007b_003b_007d-_0028semicolon_0029-166"><code>;</code> (semicolon)</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-g_t_0040code_007b_003b_007d-_0028semicolon_0029_002c-_0040code_007bAWKPATH_007d-variable-and-2121"><code>;</code> (semicolon), <code>AWKPATH</code> variable and</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-g_t_0040code_007b_003b_007d-_0028semicolon_0029_002c-separating-statements-in-actions-1135"><code>;</code> (semicolon), separating statements in actions</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-g_t_0040code_007b_003b_007d-_0028semicolon_0029_002c-separating-statements-in-actions-1123"><code>;</code> (semicolon), separating statements in actions</a>: <a href="#Action-Overview">Action Overview</a></li>
<li><a href="#index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_007d-operator-1013"><code>&lt;</code> (left angle bracket), <code>&lt;</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_007d-operator-924"><code>&lt;</code> (left angle bracket), <code>&lt;</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_007d-operator-_0028I_002fO_0029-623"><code>&lt;</code> (left angle bracket), <code>&lt;</code> operator (I/O)</a>: <a href="#Getline_002fFile">Getline/File</a></li>
<li><a href="#index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_003d_007d-operator-1015"><code>&lt;</code> (left angle bracket), <code>&lt;=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_003c_007d-_0028left-angle-bracket_0029_002c-_0040code_007b_003c_003d_007d-operator-926"><code>&lt;</code> (left angle bracket), <code>&lt;=</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040code_007b_003d_007d-_0028equals-sign_0029_002c-_0040code_007b_003d_007d-operator-847"><code>=</code> (equals sign), <code>=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_003d_007d-_0028equals-sign_0029_002c-_0040code_007b_003d_003d_007d-operator-1021"><code>=</code> (equals sign), <code>==</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_003d_007d-_0028equals-sign_0029_002c-_0040code_007b_003d_003d_007d-operator-932"><code>=</code> (equals sign), <code>==</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_007d-operator-1019"><code>&gt;</code> (right angle bracket), <code>&gt;</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_007d-operator-930"><code>&gt;</code> (right angle bracket), <code>&gt;</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_007d-operator-_0028I_002fO_0029-713"><code>&gt;</code> (right angle bracket), <code>&gt;</code> operator (I/O)</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_003d_007d-operator-1017"><code>&gt;</code> (right angle bracket), <code>&gt;=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_003d_007d-operator-928"><code>&gt;</code> (right angle bracket), <code>&gt;=</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_003e_007d-operator-_0028I_002fO_0029-1025"><code>&gt;</code> (right angle bracket), <code>&gt;&gt;</code> operator (I/O)</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_003e_007d-_0028right-angle-bracket_0029_002c-_0040code_007b_003e_003e_007d-operator-_0028I_002fO_0029-716"><code>&gt;</code> (right angle bracket), <code>&gt;&gt;</code> operator (I/O)</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-g_t_0040code_007b_003f_007d-_0028question-mark_0029-regexp-operator-451"><code>?</code> (question mark) regexp operator</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_003f_007d-_0028question-mark_0029-regexp-operator-387"><code>?</code> (question mark) regexp operator</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_003f_007d-_0028question-mark_0029_002c-_0040code_007b_003f_003a_007d-operator-1045"><code>?</code> (question mark), <code>?:</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_005b_005d_007d-_0028square-brackets_0029-373"><code>[]</code> (square brackets)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029-363"><code>\</code> (backslash)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029-131"><code>\</code> (backslash)</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029-126"><code>\</code> (backslash)</a>: <a href="#Comments">Comments</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029-99"><code>\</code> (backslash)</a>: <a href="#Read-Terminal">Read Terminal</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_0022_007d-escape-sequence-347"><code>\</code> (backslash), <code>\"</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_0027_007d-operator-_0028_0040command_007bgawk_007d_0029-448"><code>\</code> (backslash), <code>\'</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_002f_007d-escape-sequence-345"><code>\</code> (backslash), <code>\/</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_003c_007d-operator-_0028_0040command_007bgawk_007d_0029-434"><code>\</code> (backslash), <code>\&lt;</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_003e_007d-operator-_0028_0040command_007bgawk_007d_0029-436"><code>\</code> (backslash), <code>\&gt;</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_0060_007d-operator-_0028_0040command_007bgawk_007d_0029-446"><code>\</code> (backslash), <code>\`</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005ca_007d-escape-sequence-325"><code>\</code> (backslash), <code>\a</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cb_007d-escape-sequence-327"><code>\</code> (backslash), <code>\b</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cB_007d-operator-_0028_0040command_007bgawk_007d_0029-441"><code>\</code> (backslash), <code>\B</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cf_007d-escape-sequence-329"><code>\</code> (backslash), <code>\f</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cn_007d-escape-sequence-331"><code>\</code> (backslash), <code>\n</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005c_007d_0040var_007bnnn_007d-escape-sequence-339"><code>\</code> (backslash), <code>\</code><var>nnn</var> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cr_007d-escape-sequence-333"><code>\</code> (backslash), <code>\r</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cS_007d-operator-_0028_0040command_007bgawk_007d_0029-428"><code>\</code> (backslash), <code>\S</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cs_007d-operator-_0028_0040command_007bgawk_007d_0029-426"><code>\</code> (backslash), <code>\s</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005ct_007d-escape-sequence-335"><code>\</code> (backslash), <code>\t</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cv_007d-escape-sequence-337"><code>\</code> (backslash), <code>\v</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cW_007d-operator-_0028_0040command_007bgawk_007d_0029-432"><code>\</code> (backslash), <code>\W</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cw_007d-operator-_0028_0040command_007bgawk_007d_0029-430"><code>\</code> (backslash), <code>\w</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cx_007d-escape-sequence-341"><code>\</code> (backslash), <code>\x</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007b_005cy_007d-operator-_0028_0040command_007bgawk_007d_0029-438"><code>\</code> (backslash), <code>\y</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-as-field-separators-581"><code>\</code> (backslash), as field separators</a>: <a href="#Command-Line-Field-Separator">Command Line Field Separator</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-continuing-lines-and-1858"><code>\</code> (backslash), continuing lines and</a>: <a href="#Egrep-Program">Egrep Program</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-continuing-lines-and-156"><code>\</code> (backslash), continuing lines and</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-continuing-lines-and_002c-comments-and-163"><code>\</code> (backslash), continuing lines and, comments and</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-continuing-lines-and_002c-in-_0040command_007bcsh_007d-161"><code>\</code> (backslash), continuing lines and, in <samp><span class="command">csh</span></samp></a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bgensub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-and-1403"><code>\</code> (backslash), <code>gsub()</code>/<code>gensub()</code>/<code>sub()</code> functions and</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-in-bracket-expressions-399"><code>\</code> (backslash), in bracket expressions</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-in-escape-sequences-324"><code>\</code> (backslash), in escape sequences</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-in-escape-sequences_002c-POSIX-and-355"><code>\</code> (backslash), in escape sequences, POSIX and</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007b_005c_007d-_0028backslash_0029_002c-regexp-constants-477"><code>\</code> (backslash), regexp constants</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-g_t_0040code_007b_005e_007d-_0028caret_0029-449"><code>^</code> (caret)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005e_007d-_0028caret_0029-366"><code>^</code> (caret)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_005e_007d-_0028caret_0029_002c-_0040code_007b_005e_007d-operator-993"><code>^</code> (caret), <code>^</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_005e_007d-_0028caret_0029_002c-_0040code_007b_005e_003d_007d-operator-1059"><code>^</code> (caret), <code>^=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_005e_007d-_0028caret_0029_002c-_0040code_007b_005e_003d_007d-operator-868"><code>^</code> (caret), <code>^=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007b_005e_007d-_0028caret_0029_002c-in-bracket-expressions-401"><code>^</code> (caret), in bracket expressions</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-g_t_0040code_007b_005e_007d_002c-in-_0040code_007bFS_007d-566"><code>^</code>, in <code>FS</code></a>: <a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></li>
<li><a href="#index-g_t_0040code_007b_005f_007d-_0028underscore_0029_002c-_0040code_007b_005f_007d-C-macro-1545"><code>_</code> (underscore), <code>_</code> C macro</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007b_005f_007d-_0028underscore_0029_002c-in-names-of-private-variables-1712"><code>_</code> (underscore), in names of private variables</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-g_t_0040code_007b_005f_007d-_0028underscore_0029_002c-translatable-string-1576"><code>_</code> (underscore), translatable string</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040code_007b_005fgr_005finit_0028_0029_007d-user_002ddefined-function-1828"><code>_gr_init()</code> user-defined function</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007b_005fpw_005finit_0028_0029_007d-user_002ddefined-function-1803"><code>_pw_init()</code> user-defined function</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-accessing-fields-526">accessing fields</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-account-information-1823">account information</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-account-information-1796">account information</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-actions-1118">actions</a>: <a href="#Action-Overview">Action Overview</a></li>
<li><a href="#index-actions_002c-control-statements-in-1128">actions, control statements in</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-actions_002c-default-144">actions, default</a>: <a href="#Very-Simple">Very Simple</a></li>
<li><a href="#index-actions_002c-empty-146">actions, empty</a>: <a href="#Very-Simple">Very Simple</a></li>
<li><a href="#index-Ada-programming-language-2329">Ada programming language</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-adding_002c-features-to-_0040command_007bgawk_007d-2186">adding, features to <samp><span class="command">gawk</span></samp></a>: <a href="#Adding-Code">Adding Code</a></li>
<li><a href="#index-adding_002c-fields-540">adding, fields</a>: <a href="#Changing-Fields">Changing Fields</a></li>
<li><a href="#index-adding_002c-functions-to-_0040command_007bgawk_007d-2198">adding, functions to <samp><span class="command">gawk</span></samp></a>: <a href="#Dynamic-Extensions">Dynamic Extensions</a></li>
<li><a href="#index-advanced-features_002c-buffering-1426">advanced features, buffering</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-advanced-features_002c-_0040code_007bclose_0028_0029_007d-function-768">advanced features, <code>close()</code> function</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-advanced-features_002c-constants_0040comma_007b_007d-values-of-790">advanced features, constants, values of</a>: <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></li>
<li><a href="#index-advanced-features_002c-_0040value_007bDF_007ds-as-single-record-518">advanced features, data files as single record</a>: <a href="#Records">Records</a></li>
<li><a href="#index-advanced-features_002c-fixed_002dwidth-data-592">advanced features, fixed-width data</a>: <a href="#Constant-Size">Constant Size</a></li>
<li><a href="#index-advanced-features_002c-_0040code_007bFNR_007d_002f_0040code_007bNR_007d-variables-1267">advanced features, <code>FNR</code>/<code>NR</code> variables</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-advanced-features_002c-_0040command_007bgawk_007d-1616">advanced features, <samp><span class="command">gawk</span></samp></a>: <a href="#Advanced-Features">Advanced Features</a></li>
<li><a href="#index-advanced-features_002c-_0040command_007bgawk_007d_002c-network-programming-1650">advanced features, <samp><span class="command">gawk</span></samp>, network programming</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-advanced-features_002c-_0040command_007bgawk_007d_002c-nondecimal-input-data-1618">advanced features, <samp><span class="command">gawk</span></samp>, nondecimal input data</a>: <a href="#Nondecimal-Data">Nondecimal Data</a></li>
<li><a href="#index-advanced-features_002c-_0040command_007bgawk_007d_002c-processes_0040comma_007b_007d-communicating-with-1636">advanced features, <samp><span class="command">gawk</span></samp>, processes, communicating with</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-advanced-features_002c-network-connections_002c-See-Also-networks_002c-connections-1614">advanced features, network connections, See Also networks, connections</a>: <a href="#Advanced-Features">Advanced Features</a></li>
<li><a href="#index-advanced-features_002c-null-strings_0040comma_007b_007d-matching-1408">advanced features, null strings, matching</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-advanced-features_002c-operators_0040comma_007b_007d-precedence-900">advanced features, operators, precedence</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-advanced-features_002c-piping-into-_0040command_007bsh_007d-730">advanced features, piping into <samp><span class="command">sh</span></samp></a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-advanced-features_002c-regexp-constants-878">advanced features, regexp constants</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-advanced-features_002c-specifying-field-content-598">advanced features, specifying field content</a>: <a href="#Splitting-By-Content">Splitting By Content</a></li>
<li><a href="#index-Aho_002c-Alfred-2055">Aho, Alfred</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Aho_002c-Alfred-13">Aho, Alfred</a>: <a href="#History">History</a></li>
<li><a href="#index-alarm-clock-example-program-1893">alarm clock example program</a>: <a href="#Alarm-Program">Alarm Program</a></li>
<li><a href="#index-g_t_0040code_007balarm_002eawk_007d-program-1894"><code>alarm.awk</code> program</a>: <a href="#Alarm-Program">Alarm Program</a></li>
<li><a href="#index-algorithms-2303">algorithms</a>: <a href="#Basic-High-Level">Basic High Level</a></li>
<li><a href="#index-Alpha-_0028DEC_0029-42">Alpha (DEC)</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-amazing-_0040command_007bawk_007d-assembler-_0028_0040command_007baaa_007d_0029-2328">amazing <samp><span class="command">awk</span></samp> assembler (<samp><span class="command">aaa</span></samp>)</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-amazingly-workable-formatter-_0028_0040command_007bawf_007d_0029-2331">amazingly workable formatter (<samp><span class="command">awf</span></samp>)</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-ambiguity_002c-syntactic_003a-_0040code_007b_002f_003d_007d-operator-vs_002e-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d-regexp-constant-884">ambiguity, syntactic: <code>/=</code> operator vs. <code>/=.../</code> regexp constant</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-ampersand-_0028_0040code_007b_0026_007d_0029_002c-_0040code_007b_0026_0026_007d-operator-1042">ampersand (<code>&amp;</code>), <code>&amp;&amp;</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-ampersand-_0028_0040code_007b_0026_007d_0029_002c-_0040code_007b_0026_0026_007d-operator-963">ampersand (<code>&amp;</code>), <code>&amp;&amp;</code> operator</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-ampersand-_0028_0040code_007b_0026_007d_0029_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bgensub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-and-1406">ampersand (<code>&amp;</code>), <code>gsub()</code>/<code>gensub()</code>/<code>sub()</code> functions and</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-g_t_0040code_007banagram_002eawk_007d-program-1924"><code>anagram.awk</code> program</a>: <a href="#Anagram-Program">Anagram Program</a></li>
<li><a href="#index-AND-bitwise-operation-1452">AND bitwise operation</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-and-Boolean_002dlogic-operator-950">and Boolean-logic operator</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-g_t_0040code_007band_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1463"><code>and()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-ANSI-2333">ANSI</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-archeologists-2135">archeologists</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-g_t_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables-1269"><code>ARGC</code>/<code>ARGV</code> variables</a>: <a href="#ARGC-and-ARGV">ARGC and ARGV</a></li>
<li><a href="#index-g_t_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables-1235"><code>ARGC</code>/<code>ARGV</code> variables</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables_002c-command_002dline-arguments-284"><code>ARGC</code>/<code>ARGV</code> variables, command-line arguments</a>: <a href="#Other-Arguments">Other Arguments</a></li>
<li><a href="#index-g_t_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables_002c-portability-and-117"><code>ARGC</code>/<code>ARGV</code> variables, portability and</a>: <a href="#Executable-Scripts">Executable Scripts</a></li>
<li><a href="#index-g_t_0040code_007bARGIND_007d-variable-1240"><code>ARGIND</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bARGIND_007d-variable_002c-command_002dline-arguments-283"><code>ARGIND</code> variable, command-line arguments</a>: <a href="#Other-Arguments">Other Arguments</a></li>
<li><a href="#index-arguments_002c-command_002dline-1270">arguments, command-line</a>: <a href="#ARGC-and-ARGV">ARGC and ARGV</a></li>
<li><a href="#index-arguments_002c-command_002dline-1236">arguments, command-line</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-arguments_002c-command_002dline-281">arguments, command-line</a>: <a href="#Other-Arguments">Other Arguments</a></li>
<li><a href="#index-arguments_002c-command_002dline_002c-invoking-_0040command_007bawk_007d-173">arguments, command-line, invoking <samp><span class="command">awk</span></samp></a>: <a href="#Command-Line">Command Line</a></li>
<li><a href="#index-arguments_002c-in-function-calls-982">arguments, in function calls</a>: <a href="#Function-Calls">Function Calls</a></li>
<li><a href="#index-arguments_002c-processing-1783">arguments, processing</a>: <a href="#Getopt-Function">Getopt Function</a></li>
<li><a href="#index-arguments_002c-retrieving-2254">arguments, retrieving</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-arithmetic-operators-824">arithmetic operators</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-arrays-1273">arrays</a>: <a href="#Arrays">Arrays</a></li>
<li><a href="#index-arrays_002c-as-parameters-to-functions-1504">arrays, as parameters to functions</a>: <a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></li>
<li><a href="#index-arrays_002c-associative-1283">arrays, associative</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-arrays_002c-associative_002c-clearing-2234">arrays, associative, clearing</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-arrays_002c-associative_002c-library-functions-and-1715">arrays, associative, library functions and</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-arrays_002c-deleting-entire-contents-1312">arrays, deleting entire contents</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-arrays_002c-elements_002c-assigning-1295">arrays, elements, assigning</a>: <a href="#Assigning-Elements">Assigning Elements</a></li>
<li><a href="#index-arrays_002c-elements_002c-deleting-1306">arrays, elements, deleting</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-arrays_002c-elements_002c-installing-2237">arrays, elements, installing</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-arrays_002c-elements_002c-order-of-1302">arrays, elements, order of</a>: <a href="#Scanning-an-Array">Scanning an Array</a></li>
<li><a href="#index-arrays_002c-elements_002c-referencing-1291">arrays, elements, referencing</a>: <a href="#Reference-to-Elements">Reference to Elements</a></li>
<li><a href="#index-arrays_002c-elements_002c-retrieving-number-of-1357">arrays, elements, retrieving number of</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-arrays_002c-_0040code_007bfor_007d-statement-and-1300">arrays, <code>for</code> statement and</a>: <a href="#Scanning-an-Array">Scanning an Array</a></li>
<li><a href="#index-arrays_002c-_0040code_007bIGNORECASE_007d-variable-and-1289">arrays, <code>IGNORECASE</code> variable and</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-arrays_002c-indexing-1280">arrays, indexing</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-arrays_002c-merging-into-strings-1753">arrays, merging into strings</a>: <a href="#Join-Function">Join Function</a></li>
<li><a href="#index-arrays_002c-multidimensional-1331">arrays, multidimensional</a>: <a href="#Multi_002ddimensional">Multi-dimensional</a></li>
<li><a href="#index-arrays_002c-multidimensional_002c-scanning-1334">arrays, multidimensional, scanning</a>: <a href="#Multi_002dscanning">Multi-scanning</a></li>
<li><a href="#index-arrays_002c-names-of-1276">arrays, names of</a>: <a href="#Arrays">Arrays</a></li>
<li><a href="#index-arrays_002c-scanning-1298">arrays, scanning</a>: <a href="#Scanning-an-Array">Scanning an Array</a></li>
<li><a href="#index-arrays_002c-sorting-1624">arrays, sorting</a>: <a href="#Array-Sorting-Functions">Array Sorting Functions</a></li>
<li><a href="#index-arrays_002c-sorting_002c-_0040code_007bIGNORECASE_007d-variable-and-1632">arrays, sorting, <code>IGNORECASE</code> variable and</a>: <a href="#Array-Sorting-Functions">Array Sorting Functions</a></li>
<li><a href="#index-arrays_002c-sparse-1285">arrays, sparse</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-arrays_002c-subscripts-1319">arrays, subscripts</a>: <a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></li>
<li><a href="#index-arrays_002c-subscripts_002c-uninitialized-variables-as-1326">arrays, subscripts, uninitialized variables as</a>: <a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></li>
<li><a href="#index-artificial-intelligence_0040comma_007b_007d-_0040command_007bgawk_007d-and-2098">artificial intelligence, <samp><span class="command">gawk</span></samp> and</a>: <a href="#Distribution-contents">Distribution contents</a></li>
<li><a href="#index-ASCII-2334">ASCII</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-ASCII-1747">ASCII</a>: <a href="#Ordinal-Functions">Ordinal Functions</a></li>
<li><a href="#index-g_t_0040code_007basort_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1625"><code>asort()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Array-Sorting-Functions">Array Sorting Functions</a></li>
<li><a href="#index-g_t_0040code_007basort_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1358"><code>asort()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007basort_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-arrays_0040comma_007b_007d-sorting-1626"><code>asort()</code> function (<samp><span class="command">gawk</span></samp>), arrays, sorting</a>: <a href="#Array-Sorting-Functions">Array Sorting Functions</a></li>
<li><a href="#index-g_t_0040code_007basorti_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1361"><code>asorti()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bassert_0028_0029_007d-function-_0028C-library_0029-1720"><code>assert()</code> function (C library)</a>: <a href="#Assert-Function">Assert Function</a></li>
<li><a href="#index-g_t_0040code_007bassert_0028_0029_007d-user_002ddefined-function-1724"><code>assert()</code> user-defined function</a>: <a href="#Assert-Function">Assert Function</a></li>
<li><a href="#index-assertions-1719">assertions</a>: <a href="#Assert-Function">Assert Function</a></li>
<li><a href="#index-assignment-operators-844">assignment operators</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-assignment-operators_002c-evaluation-order-859">assignment operators, evaluation order</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-assignment-operators_002c-lvalues_002frvalues-852">assignment operators, lvalues/rvalues</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-assignments-as-filenames-1775">assignments as filenames</a>: <a href="#Ignoring-Assigns">Ignoring Assigns</a></li>
<li><a href="#index-g_t_0040code_007bassoc_005fclear_0028_0029_007d-internal-function-2235"><code>assoc_clear()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bassoc_005flookup_0028_0029_007d-internal-function-2238"><code>assoc_lookup()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-associative-arrays-1282">associative arrays</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_007d-operator_002c-as-multiplication-operator-1004">asterisk (<code>*</code>), <code>*</code> operator, as multiplication operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_007d-operator_002c-as-regexp-operator-384">asterisk (<code>*</code>), <code>*</code> operator, as regexp operator</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_007d-operator_002c-null-strings_0040comma_007b_007d-matching-1412">asterisk (<code>*</code>), <code>*</code> operator, null strings, matching</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_002a_007d-operator-996">asterisk (<code>*</code>), <code>**</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_002a_007d-operator-835">asterisk (<code>*</code>), <code>**</code> operator</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_002a_003d_007d-operator-1054">asterisk (<code>*</code>), <code>**=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_002a_003d_007d-operator-871">asterisk (<code>*</code>), <code>**=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_003d_007d-operator-1052">asterisk (<code>*</code>), <code>*=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-asterisk-_0028_0040code_007b_002a_007d_0029_002c-_0040code_007b_002a_003d_007d-operator-863">asterisk (<code>*</code>), <code>*=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007batan2_0028_0029_007d-function-1345"><code>atan2()</code> function</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-g_t_0040command_007bawf_007d-_0028amazingly-workable-formatter_0029-program-2332"><samp><span class="command">awf</span></samp> (amazingly workable formatter) program</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-language_002c-POSIX-version-874"><samp><span class="command">awk</span></samp> language, POSIX version</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs-149"><samp><span class="command">awk</span></samp> programs</a>: <a href="#Two-Rules">Two Rules</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs-110"><samp><span class="command">awk</span></samp> programs</a>: <a href="#Executable-Scripts">Executable Scripts</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs-81"><samp><span class="command">awk</span></samp> programs</a>: <a href="#Getting-Started">Getting Started</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-complex-170"><samp><span class="command">awk</span></samp> programs, complex</a>: <a href="#When">When</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-documenting-1706"><samp><span class="command">awk</span></samp> programs, documenting</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-documenting-122"><samp><span class="command">awk</span></samp> programs, documenting</a>: <a href="#Comments">Comments</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-examples-of-1840"><samp><span class="command">awk</span></samp> programs, examples of</a>: <a href="#Sample-Programs">Sample Programs</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-execution-of-1159"><samp><span class="command">awk</span></samp> programs, execution of</a>: <a href="#Next-Statement">Next Statement</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-internationalizing-1563"><samp><span class="command">awk</span></samp> programs, internationalizing</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-internationalizing-1479"><samp><span class="command">awk</span></samp> programs, internationalizing</a>: <a href="#I18N-Functions">I18N Functions</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-lengthy-102"><samp><span class="command">awk</span></samp> programs, lengthy</a>: <a href="#Long">Long</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-lengthy_002c-assertions-1723"><samp><span class="command">awk</span></samp> programs, lengthy, assertions</a>: <a href="#Assert-Function">Assert Function</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-location-of-191"><samp><span class="command">awk</span></samp> programs, location of</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-one_002dline-examples-147"><samp><span class="command">awk</span></samp> programs, one-line examples</a>: <a href="#Very-Simple">Very Simple</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-profiling-1663"><samp><span class="command">awk</span></samp> programs, profiling</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-profiling_002c-enabling-247"><samp><span class="command">awk</span></samp> programs, profiling, enabling</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-running-101"><samp><span class="command">awk</span></samp> programs, running</a>: <a href="#Long">Long</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-running-84"><samp><span class="command">awk</span></samp> programs, running</a>: <a href="#Running-gawk">Running gawk</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-running_002c-from-shell-scripts-89"><samp><span class="command">awk</span></samp> programs, running, from shell scripts</a>: <a href="#One_002dshot">One-shot</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-running_002c-without-input-files-95"><samp><span class="command">awk</span></samp> programs, running, without input files</a>: <a href="#Read-Terminal">Read Terminal</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d-programs_002c-shell-variables-in-1116"><samp><span class="command">awk</span></samp> programs, shell variables in</a>: <a href="#Using-Shell-Variables">Using Shell Variables</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-function-of-78"><samp><span class="command">awk</span></samp>, function of</a>: <a href="#Getting-Started">Getting Started</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-_0040command_007bgawk_007d-and-26"><samp><span class="command">awk</span></samp>, <samp><span class="command">gawk</span></samp> and</a>: <a href="#This-Manual">This Manual</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-_0040command_007bgawk_007d-and-5"><samp><span class="command">awk</span></samp>, <samp><span class="command">gawk</span></samp> and</a>: <a href="#Preface">Preface</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-history-of-16"><samp><span class="command">awk</span></samp>, history of</a>: <a href="#History">History</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-implementation-issues_002c-pipes-728"><samp><span class="command">awk</span></samp>, implementation issues, pipes</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-implementations-2148"><samp><span class="command">awk</span></samp>, implementations</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-implementations_002c-limits-651"><samp><span class="command">awk</span></samp>, implementations, limits</a>: <a href="#Getline-Notes">Getline Notes</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-invoking-172"><samp><span class="command">awk</span></samp>, invoking</a>: <a href="#Command-Line">Command Line</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-new-vs_002e_0040_003a-old-20"><samp><span class="command">awk</span></samp>, new vs. old</a>: <a href="#Names">Names</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-new-vs_002e_0040_003a-old_002c-_0040code_007bOFMT_007d-variable-823"><samp><span class="command">awk</span></samp>, new vs. old, <code>OFMT</code> variable</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-POSIX-and-2"><samp><span class="command">awk</span></samp>, POSIX and</a>: <a href="#Preface">Preface</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-POSIX-and_002c-See-Also-POSIX-_0040command_007bawk_007d-1"><samp><span class="command">awk</span></samp>, POSIX and, See Also POSIX <samp><span class="command">awk</span></samp></a>: <a href="#Preface">Preface</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-regexp-constants-and-948"><samp><span class="command">awk</span></samp>, regexp constants and</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-See-Also-_0040command_007bgawk_007d-7"><samp><span class="command">awk</span></samp>, See Also <samp><span class="command">gawk</span></samp></a>: <a href="#Preface">Preface</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-terms-describing-24"><samp><span class="command">awk</span></samp>, terms describing</a>: <a href="#This-Manual">This Manual</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-uses-for-169"><samp><span class="command">awk</span></samp>, uses for</a>: <a href="#When">When</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-uses-for-79"><samp><span class="command">awk</span></samp>, uses for</a>: <a href="#Getting-Started">Getting Started</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-uses-for-6"><samp><span class="command">awk</span></samp>, uses for</a>: <a href="#Preface">Preface</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-versions-of-2042"><samp><span class="command">awk</span></samp>, versions of</a>: <a href="#V7_002fSVR3_002e1">V7/SVR3.1</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-versions-of-21"><samp><span class="command">awk</span></samp>, versions of</a>: <a href="#Names">Names</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-versions-of_002c-changes-between-SVR3_002e1-and-SVR4-2044"><samp><span class="command">awk</span></samp>, versions of, changes between SVR3.1 and SVR4</a>: <a href="#SVR4">SVR4</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-versions-of_002c-changes-between-SVR4-and-POSIX-_0040command_007bawk_007d-2045"><samp><span class="command">awk</span></samp>, versions of, changes between SVR4 and POSIX <samp><span class="command">awk</span></samp></a>: <a href="#POSIX">POSIX</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-versions-of_002c-changes-between-V7-and-SVR3_002e1-2043"><samp><span class="command">awk</span></samp>, versions of, changes between V7 and SVR3.1</a>: <a href="#V7_002fSVR3_002e1">V7/SVR3.1</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-versions-of_002c-See-Also-Brian-Kernighan_0027s-_0040command_007bawk_007d-2152"><samp><span class="command">awk</span></samp>, versions of, See Also Brian Kernighan's <samp><span class="command">awk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-g_t_0040command_007bawk_007d_002c-versions-of_002c-See-Also-Brian-Kernighan_0027s-_0040command_007bawk_007d-2047"><samp><span class="command">awk</span></samp>, versions of, See Also Brian Kernighan's <samp><span class="command">awk</span></samp></a>: <a href="#BTL">BTL</a></li>
<li><a href="#index-g_t_0040code_007bawk_002eh_007d-file-_0028internal_0029-2201"><code>awk.h</code> file (internal)</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040command_007bawka_007d-compiler-for-_0040command_007bawk_007d-2159"><samp><span class="command">awka</span></samp> compiler for <samp><span class="command">awk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-g_t_0040code_007bAWKNUM_007d-internal-type-2204"><code>AWKNUM</code> internal type</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bAWKPATH_007d-environment-variable-2123"><code>AWKPATH</code> environment variable</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-g_t_0040env_007bAWKPATH_007d-environment-variable-288"><samp><span class="env">AWKPATH</span></samp> environment variable</a>: <a href="#AWKPATH-Variable">AWKPATH Variable</a></li>
<li><a href="#index-g_t_0040code_007bawkprof_002eout_007d-file-1667"><code>awkprof.out</code> file</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040command_007bawksed_002eawk_007d-program-1915"><samp><span class="command">awksed.awk</span></samp> program</a>: <a href="#Simple-Sed">Simple Sed</a></li>
<li><a href="#index-g_t_0040code_007bawkvars_002eout_007d-file-212"><code>awkvars.out</code> file</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007bb_007d-debugger-command-_0028alias-for-_0040code_007bbreak_007d_0029-1929"><code>b</code> debugger command (alias for <code>break</code>)</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029-362">backslash (<code>\</code>)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029-132">backslash (<code>\</code>)</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029-127">backslash (<code>\</code>)</a>: <a href="#Comments">Comments</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029-100">backslash (<code>\</code>)</a>: <a href="#Read-Terminal">Read Terminal</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_0022_007d-escape-sequence-348">backslash (<code>\</code>), <code>\"</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_0027_007d-operator-_0028_0040command_007bgawk_007d_0029-447">backslash (<code>\</code>), <code>\'</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_002f_007d-escape-sequence-346">backslash (<code>\</code>), <code>\/</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_003c_007d-operator-_0028_0040command_007bgawk_007d_0029-433">backslash (<code>\</code>), <code>\&lt;</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_003e_007d-operator-_0028_0040command_007bgawk_007d_0029-435">backslash (<code>\</code>), <code>\&gt;</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_0060_007d-operator-_0028_0040command_007bgawk_007d_0029-445">backslash (<code>\</code>), <code>\`</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005ca_007d-escape-sequence-326">backslash (<code>\</code>), <code>\a</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cb_007d-escape-sequence-328">backslash (<code>\</code>), <code>\b</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cB_007d-operator-_0028_0040command_007bgawk_007d_0029-440">backslash (<code>\</code>), <code>\B</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cf_007d-escape-sequence-330">backslash (<code>\</code>), <code>\f</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cn_007d-escape-sequence-332">backslash (<code>\</code>), <code>\n</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005c_007d_0040var_007bnnn_007d-escape-sequence-340">backslash (<code>\</code>), <code>\</code><var>nnn</var> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cr_007d-escape-sequence-334">backslash (<code>\</code>), <code>\r</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cS_007d-operator-_0028_0040command_007bgawk_007d_0029-427">backslash (<code>\</code>), <code>\S</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cs_007d-operator-_0028_0040command_007bgawk_007d_0029-425">backslash (<code>\</code>), <code>\s</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005ct_007d-escape-sequence-336">backslash (<code>\</code>), <code>\t</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cv_007d-escape-sequence-338">backslash (<code>\</code>), <code>\v</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cW_007d-operator-_0028_0040command_007bgawk_007d_0029-431">backslash (<code>\</code>), <code>\W</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cw_007d-operator-_0028_0040command_007bgawk_007d_0029-429">backslash (<code>\</code>), <code>\w</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cx_007d-escape-sequence-342">backslash (<code>\</code>), <code>\x</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007b_005cy_007d-operator-_0028_0040command_007bgawk_007d_0029-437">backslash (<code>\</code>), <code>\y</code> operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-as-field-separators-582">backslash (<code>\</code>), as field separators</a>: <a href="#Command-Line-Field-Separator">Command Line Field Separator</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-continuing-lines-and-1859">backslash (<code>\</code>), continuing lines and</a>: <a href="#Egrep-Program">Egrep Program</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-continuing-lines-and-157">backslash (<code>\</code>), continuing lines and</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-continuing-lines-and_002c-comments-and-162">backslash (<code>\</code>), continuing lines and, comments and</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-continuing-lines-and_002c-in-_0040command_007bcsh_007d-160">backslash (<code>\</code>), continuing lines and, in <samp><span class="command">csh</span></samp></a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bgensub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-and-1404">backslash (<code>\</code>), <code>gsub()</code>/<code>gensub()</code>/<code>sub()</code> functions and</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-in-bracket-expressions-400">backslash (<code>\</code>), in bracket expressions</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-in-escape-sequences-323">backslash (<code>\</code>), in escape sequences</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-in-escape-sequences_002c-POSIX-and-354">backslash (<code>\</code>), in escape sequences, POSIX and</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-backslash-_0028_0040code_007b_005c_007d_0029_002c-regexp-constants-478">backslash (<code>\</code>), regexp constants</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-g_t_0040code_007bbacktrace_007d-debugger-command-2008"><code>backtrace</code> debugger command</a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-g_t_0040code_007bBBS_002dlist_007d-file-142"><code>BBS-list</code> file</a>: <a href="#Sample-Data-Files">Sample Data Files</a></li>
<li><a href="#index-Beebe_002c-Nelson-2161">Beebe, Nelson</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-Beebe_002c-Nelson-56">Beebe, Nelson</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern-1092"><code>BEGIN</code> pattern</a>: <a href="#BEGIN_002fEND">BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern-554"><code>BEGIN</code> pattern</a>: <a href="#Field-Separators">Field Separators</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern-501"><code>BEGIN</code> pattern</a>: <a href="#Records">Records</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bassert_0028_0029_007d-user_002ddefined-function-and-1726"><code>BEGIN</code> pattern, <code>assert()</code> user-defined function and</a>: <a href="#Assert-Function">Assert Function</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-Boolean-patterns-and-1080"><code>BEGIN</code> pattern, Boolean patterns and</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bexit_007d-statement-and-1172"><code>BEGIN</code> pattern, <code>exit</code> statement and</a>: <a href="#Exit-Statement">Exit Statement</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bgetline_007d-and-657"><code>BEGIN</code> pattern, <code>getline</code> and</a>: <a href="#Getline-Notes">Getline Notes</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-headings_0040comma_007b_007d-adding-672"><code>BEGIN</code> pattern, headings, adding</a>: <a href="#Print-Examples">Print Examples</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1160"><code>BEGIN</code> pattern, <code>next</code>/<code>nextfile</code> statements and</a>: <a href="#Next-Statement">Next Statement</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1104"><code>BEGIN</code> pattern, <code>next</code>/<code>nextfile</code> statements and</a>: <a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bOFS_007d_002f_0040code_007bORS_007d-variables_002c-assigning-values-to-681"><code>BEGIN</code> pattern, <code>OFS</code>/<code>ORS</code> variables, assigning values to</a>: <a href="#Output-Separators">Output Separators</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-operators-and-1094"><code>BEGIN</code> pattern, operators and</a>: <a href="#Using-BEGIN_002fEND">Using BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040command_007bpgawk_007d-program-1671"><code>BEGIN</code> pattern, <samp><span class="command">pgawk</span></samp> program</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bprint_007d-statement-and-1100"><code>BEGIN</code> pattern, <code>print</code> statement and</a>: <a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bpwcat_007d-program-1804"><code>BEGIN</code> pattern, <code>pwcat</code> program</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-running-_0040command_007bawk_007d-programs-and-1847"><code>BEGIN</code> pattern, running <samp><span class="command">awk</span></samp> programs and</a>: <a href="#Cut-Program">Cut Program</a></li>
<li><a href="#index-g_t_0040code_007bBEGIN_007d-pattern_002c-_0040code_007bTEXTDOMAIN_007d-variable-and-1574"><code>BEGIN</code> pattern, <code>TEXTDOMAIN</code> variable and</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040code_007bBEGINFILE_007d-pattern-1106"><code>BEGINFILE</code> pattern</a>: <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></li>
<li><a href="#index-g_t_0040code_007bBEGINFILE_007d-pattern_002c-Boolean-patterns-and-1082"><code>BEGINFILE</code> pattern, Boolean patterns and</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-g_t_0040code_007bbeginfile_0028_0029_007d-user_002ddefined-function-1765"><code>beginfile()</code> user-defined function</a>: <a href="#Filetrans-Function">Filetrans Function</a></li>
<li><a href="#index-Benzinger_002c-Michael-2085">Benzinger, Michael</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Berry_002c-Karl-45">Berry, Karl</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-binary-input_002foutput-1182">binary input/output</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bbindtextdomain_0028_0029_007d-function-_0028C-library_0029-1539"><code>bindtextdomain()</code> function (C library)</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bbindtextdomain_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1573"><code>bindtextdomain()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040code_007bbindtextdomain_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1480"><code>bindtextdomain()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#I18N-Functions">I18N Functions</a></li>
<li><a href="#index-g_t_0040code_007bbindtextdomain_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-portability-and-1600"><code>bindtextdomain()</code> function (<samp><span class="command">gawk</span></samp>), portability and</a>: <a href="#I18N-Portability">I18N Portability</a></li>
<li><a href="#index-g_t_0040code_007bBINMODE_007d-variable-2128"><code>BINMODE</code> variable</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-g_t_0040code_007bBINMODE_007d-variable-1181"><code>BINMODE</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bbits2str_0028_0029_007d-user_002ddefined-function-1469"><code>bits2str()</code> user-defined function</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-bitwise_002c-complement-1456">bitwise, complement</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-bitwise_002c-operations-1451">bitwise, operations</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-bitwise_002c-shift-1458">bitwise, shift</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-body_002c-in-actions-1131">body, in actions</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-body_002c-in-loops-1141">body, in loops</a>: <a href="#While-Statement">While Statement</a></li>
<li><a href="#index-Boolean-expressions-954">Boolean expressions</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-Boolean-expressions_002c-as-patterns-1079">Boolean expressions, as patterns</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-Boolean-operators_002c-See-Boolean-expressions-956">Boolean operators, See Boolean expressions</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-Bourne-shell_002c-quoting-rules-for-130">Bourne shell, quoting rules for</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-braces-_0028_0040code_007b_0040_007b_0040_007d_007d_0029_002c-actions-and-1120">braces (<code>{}</code>), actions and</a>: <a href="#Action-Overview">Action Overview</a></li>
<li><a href="#index-braces-_0028_0040code_007b_0040_007b_0040_007d_007d_0029_002c-_0040command_007bpgawk_007d-program-1678">braces (<code>{}</code>), <samp><span class="command">pgawk</span></samp> program</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-braces-_0028_0040code_007b_0040_007b_0040_007d_007d_0029_002c-statements_002c-grouping-1133">braces (<code>{}</code>), statements, grouping</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-bracket-expressions-396">bracket expressions</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-bracket-expressions-375">bracket expressions</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-bracket-expressions_002c-character-classes-409">bracket expressions, character classes</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-bracket-expressions_002c-collating-elements-411">bracket expressions, collating elements</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-bracket-expressions_002c-collating-symbols-414">bracket expressions, collating symbols</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-bracket-expressions_002c-complemented-378">bracket expressions, complemented</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-bracket-expressions_002c-equivalence-classes-416">bracket expressions, equivalence classes</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-bracket-expressions_002c-non_002dASCII-412">bracket expressions, non-ASCII</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-bracket-expressions_002c-range-expressions-397">bracket expressions, range expressions</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-g_t_0040code_007bbreak_007d-debugger-command-1928"><code>break</code> debugger command</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-g_t_0040code_007bbreak_007d-statement-1149"><code>break</code> statement</a>: <a href="#Break-Statement">Break Statement</a></li>
<li><a href="#index-Brennan_002c-Michael-2149">Brennan, Michael</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-Brennan_002c-Michael-1914">Brennan, Michael</a>: <a href="#Simple-Sed">Simple Sed</a></li>
<li><a href="#index-Brennan_002c-Michael-1634">Brennan, Michael</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-Brennan_002c-Michael-1316">Brennan, Michael</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-Brian-Kernighan_0027s-_0040command_007bawk_007d_002c-extensions-2154">Brian Kernighan's <samp><span class="command">awk</span></samp>, extensions</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-Brian-Kernighan_0027s-_0040command_007bawk_007d_002c-extensions-2049">Brian Kernighan's <samp><span class="command">awk</span></samp>, extensions</a>: <a href="#BTL">BTL</a></li>
<li><a href="#index-Broder_002c-Alan-J_002e_0040_003a-2082">Broder, Alan J.</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Brown_002c-Martin-2080">Brown, Martin</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-BSD_002dbased-operating-systems-2364">BSD-based operating systems</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-g_t_0040code_007bbt_007d-debugger-command-_0028alias-for-_0040code_007bbacktrace_007d_0029-2009"><code>bt</code> debugger command (alias for <code>backtrace</code>)</a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-Buening_002c-Andreas-2145">Buening, Andreas</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-Buening_002c-Andreas-2083">Buening, Andreas</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Buening_002c-Andreas-57">Buening, Andreas</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-buffering_002c-input_002foutput-1644">buffering, input/output</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-buffering_002c-input_002foutput-1430">buffering, input/output</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-buffering_002c-interactive-vs_002e_0040_003a-noninteractive-1427">buffering, interactive vs. noninteractive</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-buffers_002c-flushing-1419">buffers, flushing</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-buffers_002c-operators-for-442">buffers, operators for</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-bug-reports_002c-email-address_002c-_0040code_007bbug_002dgawk_0040_0040gnu_002eorg_007d-2140">bug reports, email address, <code>bug-gawk@gnu.org</code></a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-g_t_0040code_007bbug_002dgawk_0040_0040gnu_002eorg_007d-bug-reporting-address-2138"><code>bug-gawk@gnu.org</code> bug reporting address</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-built_002din-functions-1336">built-in functions</a>: <a href="#Functions">Functions</a></li>
<li><a href="#index-built_002din-functions_002c-evaluation-order-1344">built-in functions, evaluation order</a>: <a href="#Calling-Built_002din">Calling Built-in</a></li>
<li><a href="#index-built_002din-variables-1176">built-in variables</a>: <a href="#Built_002din-Variables">Built-in Variables</a></li>
<li><a href="#index-built_002din-variables_002c-_0040code_007b_002dv_007d-option_0040comma_007b_007d-setting-with-195">built-in variables, <code>-v</code> option, setting with</a>: <a href="#Options">Options</a></li>
<li><a href="#index-built_002din-variables_002c-conveying-information-1233">built-in variables, conveying information</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-built_002din-variables_002c-user_002dmodifiable-1179">built-in variables, user-modifiable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-Busybox-Awk-2164">Busybox Awk</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-call-by-reference-1503">call by reference</a>: <a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></li>
<li><a href="#index-call-by-value-1502">call by value</a>: <a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></li>
<li><a href="#index-caret-_0028_0040code_007b_005e_007d_0029-450">caret (<code>^</code>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-caret-_0028_0040code_007b_005e_007d_0029-367">caret (<code>^</code>)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-caret-_0028_0040code_007b_005e_007d_0029_002c-_0040code_007b_005e_007d-operator-994">caret (<code>^</code>), <code>^</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-caret-_0028_0040code_007b_005e_007d_0029_002c-_0040code_007b_005e_003d_007d-operator-1060">caret (<code>^</code>), <code>^=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-caret-_0028_0040code_007b_005e_007d_0029_002c-_0040code_007b_005e_003d_007d-operator-869">caret (<code>^</code>), <code>^=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-caret-_0028_0040code_007b_005e_007d_0029_002c-in-bracket-expressions-402">caret (<code>^</code>), in bracket expressions</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-g_t_0040code_007bcase_007d-keyword-1147"><code>case</code> keyword</a>: <a href="#Switch-Statement">Switch Statement</a></li>
<li><a href="#index-case-sensitivity_002c-array-indices-and-1288">case sensitivity, array indices and</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-case-sensitivity_002c-converting-case-1395">case sensitivity, converting case</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-case-sensitivity_002c-example-programs-1701">case sensitivity, example programs</a>: <a href="#Library-Functions">Library Functions</a></li>
<li><a href="#index-case-sensitivity_002c-_0040command_007bgawk_007d-461">case sensitivity, <samp><span class="command">gawk</span></samp></a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-case-sensitivity_002c-regexps-and-1208">case sensitivity, regexps and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-case-sensitivity_002c-regexps-and-459">case sensitivity, regexps and</a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-case-sensitivity_002c-string-comparisons-and-1207">case sensitivity, string comparisons and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-CGI_002c-_0040command_007bawk_007d-scripts-for-222">CGI, <samp><span class="command">awk</span></samp> scripts for</a>: <a href="#Options">Options</a></li>
<li><a href="#index-character-lists_002c-See-bracket-expressions-377">character lists, See bracket expressions</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-character-sets-_0028machine-character-encodings_0029-2337">character sets (machine character encodings)</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-character-sets-_0028machine-character-encodings_0029-1746">character sets (machine character encodings)</a>: <a href="#Ordinal-Functions">Ordinal Functions</a></li>
<li><a href="#index-character-sets_002c-See-Also-bracket-expressions-376">character sets, See Also bracket expressions</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-characters_002c-counting-1881">characters, counting</a>: <a href="#Wc-Program">Wc Program</a></li>
<li><a href="#index-characters_002c-transliterating-1896">characters, transliterating</a>: <a href="#Translate-Program">Translate Program</a></li>
<li><a href="#index-characters_002c-values-of-as-numbers-1742">characters, values of as numbers</a>: <a href="#Ordinal-Functions">Ordinal Functions</a></li>
<li><a href="#index-Chassell_002c-Robert-J_002e_0040_003a-46">Chassell, Robert J.</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-g_t_0040code_007bchdir_0028_0029_007d-function_0040comma_007b_007d-implementing-in-_0040command_007bgawk_007d-2286"><code>chdir()</code> function, implementing in <samp><span class="command">gawk</span></samp></a>: <a href="#Sample-Library">Sample Library</a></li>
<li><a href="#index-g_t_0040command_007bchem_007d-utility-2339"><samp><span class="command">chem</span></samp> utility</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-g_t_0040code_007bchr_0028_0029_007d-user_002ddefined-function-1745"><code>chr()</code> user-defined function</a>: <a href="#Ordinal-Functions">Ordinal Functions</a></li>
<li><a href="#index-g_t_0040code_007bclear_007d-debugger-command-1931"><code>clear</code> debugger command</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-Cliff-random-numbers-1736">Cliff random numbers</a>: <a href="#Cliff-Random-Function">Cliff Random Function</a></li>
<li><a href="#index-g_t_0040code_007bcliff_005frand_0028_0029_007d-user_002ddefined-function-1739"><code>cliff_rand()</code> user-defined function</a>: <a href="#Cliff-Random-Function">Cliff Random Function</a></li>
<li><a href="#index-g_t_0040code_007bclose_0028_0029_007d-function-1413"><code>close()</code> function</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-g_t_0040code_007bclose_0028_0029_007d-function-764"><code>close()</code> function</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-g_t_0040code_007bclose_0028_0029_007d-function-636"><code>close()</code> function</a>: <a href="#Getline_002fPipe">Getline/Pipe</a></li>
<li><a href="#index-g_t_0040code_007bclose_0028_0029_007d-function-630"><code>close()</code> function</a>: <a href="#Getline_002fVariable_002fFile">Getline/Variable/File</a></li>
<li><a href="#index-g_t_0040code_007bclose_0028_0029_007d-function_002c-return-values-770"><code>close()</code> function, return values</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-g_t_0040code_007bclose_0028_0029_007d-function_002c-two_002dway-pipes-and-1646"><code>close()</code> function, two-way pipes and</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-Close_002c-Diane-2060">Close, Diane</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Close_002c-Diane-43">Close, Diane</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-g_t_0040code_007bclose_005ffunc_007d_0028_0029-input-method-2279"><code>close_func</code>() input method</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-collating-elements-413">collating elements</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-collating-symbols-415">collating symbols</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-Colombo_002c-Antonio-58">Colombo, Antonio</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-columns_002c-aligning-674">columns, aligning</a>: <a href="#Print-Examples">Print Examples</a></li>
<li><a href="#index-columns_002c-cutting-1845">columns, cutting</a>: <a href="#Cut-Program">Cut Program</a></li>
<li><a href="#index-comma-_0028_0040code_007b_002c_007d_0029_002c-in-range-patterns-1088">comma (<code>,</code>), in range patterns</a>: <a href="#Ranges">Ranges</a></li>
<li><a href="#index-command-line_002c-arguments-1271">command line, arguments</a>: <a href="#ARGC-and-ARGV">ARGC and ARGV</a></li>
<li><a href="#index-command-line_002c-arguments-1237">command line, arguments</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-command-line_002c-arguments-280">command line, arguments</a>: <a href="#Other-Arguments">Other Arguments</a></li>
<li><a href="#index-command-line_002c-directories-on-660">command line, directories on</a>: <a href="#Command-line-directories">Command line directories</a></li>
<li><a href="#index-command-line_002c-formats-85">command line, formats</a>: <a href="#Running-gawk">Running gawk</a></li>
<li><a href="#index-command-line_002c-_0040code_007bFS_007d-on_0040comma_007b_007d-setting-579">command line, <code>FS</code> on, setting</a>: <a href="#Command-Line-Field-Separator">Command Line Field Separator</a></li>
<li><a href="#index-command-line_002c-invoking-_0040command_007bawk_007d-from-171">command line, invoking <samp><span class="command">awk</span></samp> from</a>: <a href="#Command-Line">Command Line</a></li>
<li><a href="#index-command-line_002c-options-577">command line, options</a>: <a href="#Command-Line-Field-Separator">Command Line Field Separator</a></li>
<li><a href="#index-command-line_002c-options-182">command line, options</a>: <a href="#Options">Options</a></li>
<li><a href="#index-command-line_002c-options-105">command line, options</a>: <a href="#Long">Long</a></li>
<li><a href="#index-command-line_002c-options_002c-end-of-198">command line, options, end of</a>: <a href="#Options">Options</a></li>
<li><a href="#index-command-line_002c-variables_0040comma_007b_007d-assigning-on-809">command line, variables, assigning on</a>: <a href="#Assignment-Options">Assignment Options</a></li>
<li><a href="#index-command_002dline-options_002c-processing-1780">command-line options, processing</a>: <a href="#Getopt-Function">Getopt Function</a></li>
<li><a href="#index-command_002dline-options_002c-string-extraction-1586">command-line options, string extraction</a>: <a href="#String-Extraction">String Extraction</a></li>
<li><a href="#index-g_t_0040code_007bcommands_007d-debugger-command-1951"><code>commands</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-commenting-121">commenting</a>: <a href="#Comments">Comments</a></li>
<li><a href="#index-commenting_002c-backslash-continuation-and-164">commenting, backslash continuation and</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007b_002a_002a_007d-operator-826">common extensions, <code>**</code> operator</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007b_002a_002a_003d_007d-operator-872">common extensions, <code>**=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007b_002fdev_002fstderr_007d-special-file-745">common extensions, <code>/dev/stderr</code> special file</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007b_002fdev_002fstdin_007d-special-file-743">common extensions, <code>/dev/stdin</code> special file</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007b_002fdev_002fstdout_007d-special-file-744">common extensions, <code>/dev/stdout</code> special file</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007b_005cx_007d-escape-sequence-343">common extensions, <code>\x</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007bBINMODE_007d-variable-2125">common extensions, <code>BINMODE</code> variable</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007bdelete_007d-to-delete-entire-arrays-1310">common extensions, <code>delete</code> to delete entire arrays</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007bfflush_0028_0029_007d-function-1416">common extensions, <code>fflush()</code> function</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007bfunc_007d-keyword-1493">common extensions, <code>func</code> keyword</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007blength_0028_0029_007d-applied-to-an-array-1370">common extensions, <code>length()</code> applied to an array</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007bnextfile_007d-statement-1167">common extensions, <code>nextfile</code> statement</a>: <a href="#Nextfile-Statement">Nextfile Statement</a></li>
<li><a href="#index-common-extensions_002c-_0040code_007bRS_007d-as-a-regexp-515">common extensions, <code>RS</code> as a regexp</a>: <a href="#Records">Records</a></li>
<li><a href="#index-common-extensions_002c-single-character-fields-568">common extensions, single character fields</a>: <a href="#Single-Character-Fields">Single Character Fields</a></li>
<li><a href="#index-g_t_0040code_007bcomp_002elang_002eawk_007d-newsgroup-2142"><code>comp.lang.awk</code> newsgroup</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-comparison-expressions-913">comparison expressions</a>: <a href="#Typing-and-Comparison">Typing and Comparison</a></li>
<li><a href="#index-comparison-expressions_002c-as-patterns-1069">comparison expressions, as patterns</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-comparison-expressions_002c-string-vs_002e_0040_003a-regexp-943">comparison expressions, string vs. regexp</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-compatibility-mode-_0028_0040command_007bgawk_007d_0029_002c-extensions-2051">compatibility mode (<samp><span class="command">gawk</span></samp>), extensions</a>: <a href="#POSIX_002fGNU">POSIX/GNU</a></li>
<li><a href="#index-compatibility-mode-_0028_0040command_007bgawk_007d_0029_002c-_0040value_007bFN_007ds-756">compatibility mode (<samp><span class="command">gawk</span></samp>), file names</a>: <a href="#Special-Caveats">Special Caveats</a></li>
<li><a href="#index-compatibility-mode-_0028_0040command_007bgawk_007d_0029_002c-hexadecimal-numbers-789">compatibility mode (<samp><span class="command">gawk</span></samp>), hexadecimal numbers</a>: <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></li>
<li><a href="#index-compatibility-mode-_0028_0040command_007bgawk_007d_0029_002c-octal-numbers-788">compatibility mode (<samp><span class="command">gawk</span></samp>), octal numbers</a>: <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></li>
<li><a href="#index-compatibility-mode-_0028_0040command_007bgawk_007d_0029_002c-specifying-206">compatibility mode (<samp><span class="command">gawk</span></samp>), specifying</a>: <a href="#Options">Options</a></li>
<li><a href="#index-compiled-programs-2340">compiled programs</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-compiled-programs-2300">compiled programs</a>: <a href="#Basic-High-Level">Basic High Level</a></li>
<li><a href="#index-compiling-_0040command_007bgawk_007d-for-Cygwin-2129">compiling <samp><span class="command">gawk</span></samp> for Cygwin</a>: <a href="#Cygwin">Cygwin</a></li>
<li><a href="#index-compiling-_0040command_007bgawk_007d-for-MS_002dDOS-and-MS_002dWindows-2112">compiling <samp><span class="command">gawk</span></samp> for MS-DOS and MS-Windows</a>: <a href="#PC-Compiling">PC Compiling</a></li>
<li><a href="#index-compiling-_0040command_007bgawk_007d-for-VMS-2132">compiling <samp><span class="command">gawk</span></samp> for VMS</a>: <a href="#VMS-Compilation">VMS Compilation</a></li>
<li><a href="#index-compiling-_0040command_007bgawk_007d-with-EMX-for-OS_002f2-2113">compiling <samp><span class="command">gawk</span></samp> with EMX for OS/2</a>: <a href="#PC-Compiling">PC Compiling</a></li>
<li><a href="#index-g_t_0040code_007bcompl_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1464"><code>compl()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-complement_002c-bitwise-1457">complement, bitwise</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-compound-statements_0040comma_007b_007d-control-statements-and-1129">compound statements, control statements and</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-concatenating-839">concatenating</a>: <a href="#Concatenation">Concatenation</a></li>
<li><a href="#index-g_t_0040code_007bcondition_007d-debugger-command-1933"><code>condition</code> debugger command</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-conditional-expressions-973">conditional expressions</a>: <a href="#Conditional-Exp">Conditional Exp</a></li>
<li><a href="#index-configuration-option_002c-_0040code_007b_002d_002ddisable_002dlint_007d-2103">configuration option, <code>--disable-lint</code></a>: <a href="#Additional-Configuration-Options">Additional Configuration Options</a></li>
<li><a href="#index-configuration-option_002c-_0040code_007b_002d_002ddisable_002dnls_007d-2105">configuration option, <code>--disable-nls</code></a>: <a href="#Additional-Configuration-Options">Additional Configuration Options</a></li>
<li><a href="#index-configuration-option_002c-_0040code_007b_002d_002dwith_002dwhiny_002duser_002dstrftime_007d-2107">configuration option, <code>--with-whiny-user-strftime</code></a>: <a href="#Additional-Configuration-Options">Additional Configuration Options</a></li>
<li><a href="#index-configuration-options_0040comma_007b_007d-_0040command_007bgawk_007d-2101">configuration options, <samp><span class="command">gawk</span></samp></a>: <a href="#Additional-Configuration-Options">Additional Configuration Options</a></li>
<li><a href="#index-constants_002c-nondecimal-1620">constants, nondecimal</a>: <a href="#Nondecimal-Data">Nondecimal Data</a></li>
<li><a href="#index-constants_002c-types-of-777">constants, types of</a>: <a href="#Constants">Constants</a></li>
<li><a href="#index-g_t_0040code_007bcontinue_007d-statement-1154"><code>continue</code> statement</a>: <a href="#Continue-Statement">Continue Statement</a></li>
<li><a href="#index-control-statements-1126">control statements</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-converting_002c-case-1396">converting, case</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-converting_002c-dates-to-timestamps-1445">converting, dates to timestamps</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-converting_002c-during-subscripting-1322">converting, during subscripting</a>: <a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></li>
<li><a href="#index-converting_002c-numbers-to-strings-1474">converting, numbers to strings</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-converting_002c-numbers-to-strings-815">converting, numbers to strings</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-converting_002c-strings-to-numbers-1471">converting, strings to numbers</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-converting_002c-strings-to-numbers-812">converting, strings to numbers</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-g_t_0040code_007bCONVFMT_007d-variable-1185"><code>CONVFMT</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bCONVFMT_007d-variable-818"><code>CONVFMT</code> variable</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-g_t_0040code_007bCONVFMT_007d-variable_002c-array-subscripts-and-1321"><code>CONVFMT</code> variable, array subscripts and</a>: <a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></li>
<li><a href="#index-coprocesses-1638">coprocesses</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-coprocesses-721">coprocesses</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-coprocesses_002c-closing-762">coprocesses, closing</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-coprocesses_002c-_0040code_007bgetline_007d-from-642">coprocesses, <code>getline</code> from</a>: <a href="#Getline_002fCoprocess">Getline/Coprocess</a></li>
<li><a href="#index-g_t_0040code_007bcos_0028_0029_007d-function-1346"><code>cos()</code> function</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-counting-1878">counting</a>: <a href="#Wc-Program">Wc Program</a></li>
<li><a href="#index-g_t_0040command_007bcsh_007d-utility-159"><samp><span class="command">csh</span></samp> utility</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-g_t_0040command_007bcsh_007d-utility_002c-_0040env_007bPOSIXLY_005fCORRECT_007d-environment-variable-278"><samp><span class="command">csh</span></samp> utility, <samp><span class="env">POSIXLY_CORRECT</span></samp> environment variable</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040command_007bcsh_007d-utility_002c-_0040code_007b_007c_0026_007d-operator_002c-comparison-with-1642"><samp><span class="command">csh</span></samp> utility, <code>|&amp;</code> operator, comparison with</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-g_t_0040code_007bctime_0028_0029_007d-user_002ddefined-function-1498"><code>ctime()</code> user-defined function</a>: <a href="#Function-Example">Function Example</a></li>
<li><a href="#index-currency-symbols_002c-localization-1555">currency symbols, localization</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bcustom_002eh_007d-file-2109"><code>custom.h</code> file</a>: <a href="#Configuration-Philosophy">Configuration Philosophy</a></li>
<li><a href="#index-g_t_0040command_007bcut_007d-utility-1842"><samp><span class="command">cut</span></samp> utility</a>: <a href="#Cut-Program">Cut Program</a></li>
<li><a href="#index-g_t_0040code_007bcut_002eawk_007d-program-1846"><code>cut.awk</code> program</a>: <a href="#Cut-Program">Cut Program</a></li>
<li><a href="#index-g_t_0040code_007bd_007d-debugger-command-_0028alias-for-_0040code_007bdelete_007d_0029-1937"><code>d</code> debugger command (alias for <code>delete</code>)</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-d_002ec_002e_002c-See-dark-corner-30">d.c., See dark corner</a>: <a href="#Conventions">Conventions</a></li>
<li><a href="#index-dark-corner-2341">dark corner</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-dark-corner-912">dark corner</a>: <a href="#Truth-Values">Truth Values</a></li>
<li><a href="#index-dark-corner-883">dark corner</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-dark-corner-31">dark corner</a>: <a href="#Conventions">Conventions</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007b_005e_007d_002c-in-_0040code_007bFS_007d-567">dark corner, <code>^</code>, in <code>FS</code></a>: <a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></li>
<li><a href="#index-dark-corner_002c-array-subscripts-1328">dark corner, array subscripts</a>: <a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bbreak_007d-statement-1152">dark corner, <code>break</code> statement</a>: <a href="#Break-Statement">Break Statement</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bclose_0028_0029_007d-function-769">dark corner, <code>close()</code> function</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-dark-corner_002c-command_002dline-arguments-811">dark corner, command-line arguments</a>: <a href="#Assignment-Options">Assignment Options</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bcontinue_007d-statement-1156">dark corner, <code>continue</code> statement</a>: <a href="#Continue-Statement">Continue Statement</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bCONVFMT_007d-variable-819">dark corner, <code>CONVFMT</code> variable</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-dark-corner_002c-escape-sequences-286">dark corner, escape sequences</a>: <a href="#Other-Arguments">Other Arguments</a></li>
<li><a href="#index-dark-corner_002c-escape-sequences_002c-for-metacharacters-360">dark corner, escape sequences, for metacharacters</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bexit_007d-statement-1174">dark corner, <code>exit</code> statement</a>: <a href="#Exit-Statement">Exit Statement</a></li>
<li><a href="#index-dark-corner_002c-field-separators-587">dark corner, field separators</a>: <a href="#Field-Splitting-Summary">Field Splitting Summary</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bFILENAME_007d-variable-1251">dark corner, <code>FILENAME</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bFILENAME_007d-variable-655">dark corner, <code>FILENAME</code> variable</a>: <a href="#Getline-Notes">Getline Notes</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bFNR_007d_002f_0040code_007bNR_007d-variables-1268">dark corner, <code>FNR</code>/<code>NR</code> variables</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-dark-corner_002c-format_002dcontrol-characters-697">dark corner, format-control characters</a>: <a href="#Control-Letters">Control Letters</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bFS_007d-as-null-string-573">dark corner, <code>FS</code> as null string</a>: <a href="#Single-Character-Fields">Single Character Fields</a></li>
<li><a href="#index-dark-corner_002c-input-files-504">dark corner, input files</a>: <a href="#Records">Records</a></li>
<li><a href="#index-dark-corner_002c-invoking-_0040command_007bawk_007d-178">dark corner, invoking <samp><span class="command">awk</span></samp></a>: <a href="#Command-Line">Command Line</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007blength_0028_0029_007d-function-1369">dark corner, <code>length()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-dark-corner_002c-multiline-records-609">dark corner, multiline records</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bNF_007d-variable_002c-decrementing-545">dark corner, <code>NF</code> variable, decrementing</a>: <a href="#Changing-Fields">Changing Fields</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bOFMT_007d-variable-687">dark corner, <code>OFMT</code> variable</a>: <a href="#OFMT">OFMT</a></li>
<li><a href="#index-dark-corner_002c-regexp-constants-796">dark corner, regexp constants</a>: <a href="#Using-Constant-Regexps">Using Constant Regexps</a></li>
<li><a href="#index-dark-corner_002c-regexp-constants_002c-_0040code_007b_002f_003d_007d-operator-and-879">dark corner, regexp constants, <code>/=</code> operator and</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-dark-corner_002c-regexp-constants_002c-as-arguments-to-user_002ddefined-functions-800">dark corner, regexp constants, as arguments to user-defined functions</a>: <a href="#Using-Constant-Regexps">Using Constant Regexps</a></li>
<li><a href="#index-dark-corner_002c-_0040code_007bsplit_0028_0029_007d-function-1384">dark corner, <code>split()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-dark-corner_002c-strings_002c-storing-521">dark corner, strings, storing</a>: <a href="#Records">Records</a></li>
<li><a href="#index-dark-corner_002c-value-of-_0040code_007bARGV_005b0_005d_007d-1239">dark corner, value of <code>ARGV[0]</code></a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-data_002c-fixed_002dwidth-590">data, fixed-width</a>: <a href="#Constant-Size">Constant Size</a></li>
<li><a href="#index-data_002ddriven-languages-2306">data-driven languages</a>: <a href="#Basic-High-Level">Basic High Level</a></li>
<li><a href="#index-database_002c-group_002c-reading-1818">database, group, reading</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-database_002c-users_0040comma_007b_007d-reading-1790">database, users, reading</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040command_007bdate_007d-utility_002c-GNU-1437"><samp><span class="command">date</span></samp> utility, GNU</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-g_t_0040code_007bdate_007d-utility_002c-POSIX-1449"><code>date</code> utility, POSIX</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-dates_002c-converting-to-timestamps-1446">dates, converting to timestamps</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-dates_002c-information-related-to_0040comma_007b_007d-localization-1560">dates, information related to, localization</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-Davies_002c-Stephen-2078">Davies, Stephen</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Davies_002c-Stephen-59">Davies, Stephen</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-g_t_0040code_007bdcgettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1567"><code>dcgettext()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040code_007bdcgettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1481"><code>dcgettext()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#I18N-Functions">I18N Functions</a></li>
<li><a href="#index-g_t_0040code_007bdcgettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-portability-and-1601"><code>dcgettext()</code> function (<samp><span class="command">gawk</span></samp>), portability and</a>: <a href="#I18N-Portability">I18N Portability</a></li>
<li><a href="#index-g_t_0040code_007bdcngettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1568"><code>dcngettext()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040code_007bdcngettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1482"><code>dcngettext()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#I18N-Functions">I18N Functions</a></li>
<li><a href="#index-g_t_0040code_007bdcngettext_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-portability-and-1602"><code>dcngettext()</code> function (<samp><span class="command">gawk</span></samp>), portability and</a>: <a href="#I18N-Portability">I18N Portability</a></li>
<li><a href="#index-deadlocks-1643">deadlocks</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bb_007d-_0028_0040code_007bbreak_007d_0029-1926">debugger commands, <code>b</code> (<code>break</code>)</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bbacktrace_007d-2007">debugger commands, <code>backtrace</code></a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bbreak_007d-1927">debugger commands, <code>break</code></a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bbt_007d-_0028_0040code_007bbacktrace_007d_0029-2006">debugger commands, <code>bt</code> (<code>backtrace</code>)</a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bc_007d-_0028_0040code_007bcontinue_007d_0029-1956">debugger commands, <code>c</code> (<code>continue</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bclear_007d-1930">debugger commands, <code>clear</code></a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bcommands_007d-1950">debugger commands, <code>commands</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bcondition_007d-1932">debugger commands, <code>condition</code></a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bcontinue_007d-1957">debugger commands, <code>continue</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bd_007d-_0028_0040code_007bdelete_007d_0029-1934">debugger commands, <code>d</code> (<code>delete</code>)</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bdelete_007d-1935">debugger commands, <code>delete</code></a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bdisable_007d-1938">debugger commands, <code>disable</code></a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bdisplay_007d-1986">debugger commands, <code>display</code></a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bdown_007d-2010">debugger commands, <code>down</code></a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bdump_007d-2026">debugger commands, <code>dump</code></a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007be_007d-_0028_0040code_007benable_007d_0029-1940">debugger commands, <code>e</code> (<code>enable</code>)</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007benable_007d-1941">debugger commands, <code>enable</code></a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bend_007d-1954">debugger commands, <code>end</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007beval_007d-1988">debugger commands, <code>eval</code></a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bf_007d-_0028_0040code_007bframe_007d_0029-2012">debugger commands, <code>f</code> (<code>frame</code>)</a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bfinish_007d-1958">debugger commands, <code>finish</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bframe_007d-2013">debugger commands, <code>frame</code></a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bh_007d-_0028_0040code_007bhelp_007d_0029-2028">debugger commands, <code>h</code> (<code>help</code>)</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bhelp_007d-2029">debugger commands, <code>help</code></a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bi_007d-_0028_0040code_007binfo_007d_0029-2018">debugger commands, <code>i</code> (<code>info</code>)</a>: <a href="#Dgawk-Info">Dgawk Info</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bignore_007d-1944">debugger commands, <code>ignore</code></a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007binfo_007d-2019">debugger commands, <code>info</code></a>: <a href="#Dgawk-Info">Dgawk Info</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bl_007d-_0028_0040code_007blist_007d_0029-2032">debugger commands, <code>l</code> (<code>list</code>)</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007blist_007d-2033">debugger commands, <code>list</code></a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bn_007d-_0028_0040code_007bnext_007d_0029-1960">debugger commands, <code>n</code> (<code>next</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bnext_007d-1961">debugger commands, <code>next</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bnexti_007d-1965">debugger commands, <code>nexti</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bni_007d-_0028_0040code_007bnexti_007d_0029-1964">debugger commands, <code>ni</code> (<code>nexti</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bo_007d-_0028_0040code_007boption_007d_0029-2022">debugger commands, <code>o</code> (<code>option</code>)</a>: <a href="#Dgawk-Info">Dgawk Info</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007boption_007d-2023">debugger commands, <code>option</code></a>: <a href="#Dgawk-Info">Dgawk Info</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bp_007d-_0028_0040code_007bprint_007d_0029-1990">debugger commands, <code>p</code> (<code>print</code>)</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bprint_007d-1991">debugger commands, <code>print</code></a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bprintf_007d-1994">debugger commands, <code>printf</code></a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bq_007d-_0028_0040code_007bquit_007d_0029-2036">debugger commands, <code>q</code> (<code>quit</code>)</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bquit_007d-2037">debugger commands, <code>quit</code></a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007br_007d-_0028_0040code_007brun_007d_0029-1970">debugger commands, <code>r</code> (<code>run</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007breturn_007d-1968">debugger commands, <code>return</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007brun_007d-1971">debugger commands, <code>run</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bs_007d-_0028_0040code_007bstep_007d_0029-1974">debugger commands, <code>s</code> (<code>step</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bset_007d-1996">debugger commands, <code>set</code></a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bsi_007d-_0028_0040code_007bstepi_007d_0029-1978">debugger commands, <code>si</code> (<code>stepi</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bsilent_007d-1952">debugger commands, <code>silent</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bstep_007d-1975">debugger commands, <code>step</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bstepi_007d-1979">debugger commands, <code>stepi</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bt_007d-_0028_0040code_007btbreak_007d_0029-1946">debugger commands, <code>t</code> (<code>tbreak</code>)</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007btbreak_007d-1947">debugger commands, <code>tbreak</code></a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007btrace_007d-2040">debugger commands, <code>trace</code></a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bu_007d-_0028_0040code_007buntil_007d_0029-1982">debugger commands, <code>u</code> (<code>until</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bundisplay_007d-2002">debugger commands, <code>undisplay</code></a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007buntil_007d-1983">debugger commands, <code>until</code></a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bunwatch_007d-2004">debugger commands, <code>unwatch</code></a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bup_007d-2016">debugger commands, <code>up</code></a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bw_007d-_0028_0040code_007bwatch_007d_0029-1998">debugger commands, <code>w</code> (<code>watch</code>)</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-debugger-commands_002c-_0040code_007bwatch_007d-1999">debugger commands, <code>watch</code></a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-debugging-_0040command_007bgawk_007d_002c-bug-reports-2136">debugging <samp><span class="command">gawk</span></samp>, bug reports</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-decimal-point-character_002c-locale-specific-256">decimal point character, locale specific</a>: <a href="#Options">Options</a></li>
<li><a href="#index-decrement-operators-895">decrement operators</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-g_t_0040code_007bdefault_007d-keyword-1148"><code>default</code> keyword</a>: <a href="#Switch-Statement">Switch Statement</a></li>
<li><a href="#index-Deifik_002c-Scott-2143">Deifik, Scott</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-Deifik_002c-Scott-2072">Deifik, Scott</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Deifik_002c-Scott-60">Deifik, Scott</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-g_t_0040code_007bdelete_007d-debugger-command-1936"><code>delete</code> debugger command</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-g_t_0040code_007bdelete_007d-statement-1304"><code>delete</code> statement</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-deleting-elements-in-arrays-1305">deleting elements in arrays</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-deleting-entire-arrays-1313">deleting entire arrays</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-g_t_0040command_007bdgawk_007d-1925"><samp><span class="command">dgawk</span></samp></a>: <a href="#Debugger">Debugger</a></li>
<li><a href="#index-differences-between-_0040command_007bgawk_007d-and-_0040command_007bawk_007d-1372">differences between <samp><span class="command">gawk</span></samp> and <samp><span class="command">awk</span></samp></a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables-1272">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>ARGC</code>/<code>ARGV</code> variables</a>: <a href="#ARGC-and-ARGV">ARGC and ARGV</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bARGIND_007d-variable-1241">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>ARGIND</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-array-elements_002c-deleting-1314">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, array elements, deleting</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bAWKPATH_007d-environment-variable-292">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>AWKPATH</code> environment variable</a>: <a href="#AWKPATH-Variable">AWKPATH Variable</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bBEGIN_007d_002f_0040code_007bEND_007d-patterns-1097">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>BEGIN</code>/<code>END</code> patterns</a>: <a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bBINMODE_007d-variable-2127">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>BINMODE</code> variable</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bBINMODE_007d-variable-1184">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>BINMODE</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bclose_0028_0029_007d-function-765">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>close()</code> function</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-1248">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>ERRNO</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-error-messages-741">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, error messages</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bFIELDWIDTHS_007d-variable-1191">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>FIELDWIDTHS</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bFPAT_007d-variable-1196">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>FPAT</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-function-arguments-_0028_0040command_007bgawk_007d_0029-1341">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, function arguments (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Calling-Built_002din">Calling Built-in</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bgetline_007d-command-617">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>getline</code> command</a>: <a href="#Getline">Getline</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-1206">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>IGNORECASE</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-implementation-limitations-726">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, implementation limitations</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-implementation-limitations-649">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, implementation limitations</a>: <a href="#Getline-Notes">Getline Notes</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-indirect-function-calls-1516">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, indirect function calls</a>: <a href="#Indirect-Calls">Indirect Calls</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-input_002foutput-operators-724">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, input/output operators</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-input_002foutput-operators-647">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, input/output operators</a>: <a href="#Getline_002fCoprocess">Getline/Coprocess</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-line-continuations-977">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, line continuations</a>: <a href="#Conditional-Exp">Conditional Exp</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bLINT_007d-variable-1212">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>LINT</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bmatch_0028_0029_007d-function-1377">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>match()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-1166">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>next</code>/<code>nextfile</code> statements</a>: <a href="#Nextfile-Statement">Nextfile Statement</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bprint_007d_002f_0040code_007bprintf_007d-statements-703">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>print</code>/<code>printf</code> statements</a>: <a href="#Format-Modifiers">Format Modifiers</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bPROCINFO_007d-array-1257">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>PROCINFO</code> array</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-record-separators-511">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, record separators</a>: <a href="#Records">Records</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-regexp-constants-799">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, regexp constants</a>: <a href="#Using-Constant-Regexps">Using Constant Regexps</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-regular-expressions-462">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, regular expressions</a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bRS_007d_002f_0040code_007bRT_007d-variables-517">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>RS</code>/<code>RT</code> variables</a>: <a href="#Records">Records</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bRT_007d-variable-1264">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>RT</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-single_002dcharacter-fields-570">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, single-character fields</a>: <a href="#Single-Character-Fields">Single Character Fields</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bsplit_0028_0029_007d-function-1383">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>split()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-strings-780">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, strings</a>: <a href="#Scalar-Constants">Scalar Constants</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-strings_002c-storing-520">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, strings, storing</a>: <a href="#Records">Records</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bstrtonum_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1387">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>strtonum()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-_0040code_007bTEXTDOMAIN_007d-variable-1231">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, <code>TEXTDOMAIN</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-differences-in-_0040command_007bawk_007d-and-_0040command_007bgawk_007d_002c-trunc_002dmod-operation-831">differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>, trunc-mod operation</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-directories_002c-changing-2289">directories, changing</a>: <a href="#Sample-Library">Sample Library</a></li>
<li><a href="#index-directories_002c-command-line-659">directories, command line</a>: <a href="#Command-line-directories">Command line directories</a></li>
<li><a href="#index-directories_002c-searching-1923">directories, searching</a>: <a href="#Igawk-Program">Igawk Program</a></li>
<li><a href="#index-directories_002c-searching-289">directories, searching</a>: <a href="#AWKPATH-Variable">AWKPATH Variable</a></li>
<li><a href="#index-g_t_0040code_007bdisable_007d-debugger-command-1939"><code>disable</code> debugger command</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-g_t_0040code_007bdisplay_007d-debugger-command-1987"><code>display</code> debugger command</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-division-830">division</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-g_t_0040code_007bdo_007d_002d_0040code_007bwhile_007d-statement-1142"><code>do</code>-<code>while</code> statement</a>: <a href="#Do-Statement">Do Statement</a></li>
<li><a href="#index-g_t_0040code_007bdo_007d_002d_0040code_007bwhile_007d-statement-319"><code>do</code>-<code>while</code> statement</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-documentation_002c-of-_0040command_007bawk_007d-programs-1707">documentation, of <samp><span class="command">awk</span></samp> programs</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-documentation_002c-online-38">documentation, online</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-documents_0040comma_007b_007d-searching-1887">documents, searching</a>: <a href="#Dupword-Program">Dupword Program</a></li>
<li><a href="#index-dollar-sign-_0028_0040code_007b_0024_007d_0029-369">dollar sign (<code>$</code>)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-_0040code_007b_0024_007d-field-operator-988">dollar sign (<code>$</code>), <code>$</code> field operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-_0040code_007b_0024_007d-field-operator-533">dollar sign (<code>$</code>), <code>$</code> field operator</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-dollar-sign-_0028_0040code_007b_0024_007d_0029_002c-incrementing-fields-and-arrays-894">dollar sign (<code>$</code>), incrementing fields and arrays</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-double-precision-floating_002dpoint-2317">double precision floating-point</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-double-quote-_0028_0040code_007b_0022_007d_0029-135">double quote (<code>"</code>)</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-double-quote-_0028_0040code_007b_0022_007d_0029-97">double quote (<code>"</code>)</a>: <a href="#Read-Terminal">Read Terminal</a></li>
<li><a href="#index-double-quote-_0028_0040code_007b_0022_007d_0029_002c-regexp-constants-480">double quote (<code>"</code>), regexp constants</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-g_t_0040code_007bdown_007d-debugger-command-2011"><code>down</code> debugger command</a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-Drepper_002c-Ulrich-53">Drepper, Ulrich</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-DuBois_002c-John-61">DuBois, John</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-g_t_0040code_007bdump_007d-debugger-command-2027"><code>dump</code> debugger command</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-g_t_0040code_007bdupnode_0028_0029_007d-internal-function-2247"><code>dupnode()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bdupword_002eawk_007d-program-1889"><code>dupword.awk</code> program</a>: <a href="#Dupword-Program">Dupword Program</a></li>
<li><a href="#index-g_t_0040code_007be_007d-debugger-command-_0028alias-for-_0040code_007benable_007d_0029-1943"><code>e</code> debugger command (alias for <code>enable</code>)</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-EBCDIC-1748">EBCDIC</a>: <a href="#Ordinal-Functions">Ordinal Functions</a></li>
<li><a href="#index-g_t_0040command_007begrep_007d-utility-1853"><samp><span class="command">egrep</span></samp> utility</a>: <a href="#Egrep-Program">Egrep Program</a></li>
<li><a href="#index-g_t_0040command_007begrep_007d-utility-408"><samp><span class="command">egrep</span></samp> utility</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-g_t_0040code_007begrep_002eawk_007d-program-1854"><code>egrep.awk</code> program</a>: <a href="#Egrep-Program">Egrep Program</a></li>
<li><a href="#index-elements-in-arrays-1292">elements in arrays</a>: <a href="#Reference-to-Elements">Reference to Elements</a></li>
<li><a href="#index-elements-in-arrays_002c-assigning-1296">elements in arrays, assigning</a>: <a href="#Assigning-Elements">Assigning Elements</a></li>
<li><a href="#index-elements-in-arrays_002c-deleting-1307">elements in arrays, deleting</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-elements-in-arrays_002c-order-of-1303">elements in arrays, order of</a>: <a href="#Scanning-an-Array">Scanning an Array</a></li>
<li><a href="#index-elements-in-arrays_002c-scanning-1297">elements in arrays, scanning</a>: <a href="#Scanning-an-Array">Scanning an Array</a></li>
<li><a href="#index-email-address-for-bug-reports_002c-_0040code_007bbug_002dgawk_0040_0040gnu_002eorg_007d-2139">email address for bug reports, <code>bug-gawk@gnu.org</code></a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-g_t_0040code_007bEMISTERED_007d-1659"><code>EMISTERED</code></a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-empty-pattern-1113">empty pattern</a>: <a href="#Empty">Empty</a></li>
<li><a href="#index-empty-strings_002c-See-null-strings-564">empty strings, See null strings</a>: <a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></li>
<li><a href="#index-g_t_0040code_007benable_007d-debugger-command-1942"><code>enable</code> debugger command</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-g_t_0040code_007bend_007d-debugger-command-1955"><code>end</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-g_t_0040code_007bEND_007d-pattern-1093"><code>END</code> pattern</a>: <a href="#BEGIN_002fEND">BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bEND_007d-pattern_002c-_0040code_007bassert_0028_0029_007d-user_002ddefined-function-and-1725"><code>END</code> pattern, <code>assert()</code> user-defined function and</a>: <a href="#Assert-Function">Assert Function</a></li>
<li><a href="#index-g_t_0040code_007bEND_007d-pattern_002c-backslash-continuation-and-1857"><code>END</code> pattern, backslash continuation and</a>: <a href="#Egrep-Program">Egrep Program</a></li>
<li><a href="#index-g_t_0040code_007bEND_007d-pattern_002c-Boolean-patterns-and-1081"><code>END</code> pattern, Boolean patterns and</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-g_t_0040code_007bEND_007d-pattern_002c-_0040code_007bexit_007d-statement-and-1173"><code>END</code> pattern, <code>exit</code> statement and</a>: <a href="#Exit-Statement">Exit Statement</a></li>
<li><a href="#index-g_t_0040code_007bEND_007d-pattern_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1161"><code>END</code> pattern, <code>next</code>/<code>nextfile</code> statements and</a>: <a href="#Next-Statement">Next Statement</a></li>
<li><a href="#index-g_t_0040code_007bEND_007d-pattern_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1105"><code>END</code> pattern, <code>next</code>/<code>nextfile</code> statements and</a>: <a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bEND_007d-pattern_002c-operators-and-1095"><code>END</code> pattern, operators and</a>: <a href="#Using-BEGIN_002fEND">Using BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bEND_007d-pattern_002c-_0040command_007bpgawk_007d-program-1672"><code>END</code> pattern, <samp><span class="command">pgawk</span></samp> program</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040code_007bEND_007d-pattern_002c-_0040code_007bprint_007d-statement-and-1101"><code>END</code> pattern, <code>print</code> statement and</a>: <a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bENDFILE_007d-pattern-1107"><code>ENDFILE</code> pattern</a>: <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></li>
<li><a href="#index-g_t_0040code_007bENDFILE_007d-pattern_002c-Boolean-patterns-and-1083"><code>ENDFILE</code> pattern, Boolean patterns and</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-g_t_0040code_007bendfile_0028_0029_007d-user_002ddefined-function-1766"><code>endfile()</code> user-defined function</a>: <a href="#Filetrans-Function">Filetrans Function</a></li>
<li><a href="#index-g_t_0040code_007bendgrent_0028_0029_007d-function-_0028C-library_0029-1837"><code>endgrent()</code> function (C library)</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bendgrent_0028_0029_007d-user_002ddefined-function-1838"><code>endgrent()</code> user-defined function</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bendpwent_0028_0029_007d-function-_0028C-library_0029-1813"><code>endpwent()</code> function (C library)</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bendpwent_0028_0029_007d-user_002ddefined-function-1814"><code>endpwent()</code> user-defined function</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bENVIRON_007d-array-2270"><code>ENVIRON</code> array</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bENVIRON_007d-array-1244"><code>ENVIRON</code> array</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-environment-variables-1245">environment variables</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-epoch_002c-definition-of-2342">epoch, definition of</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-equals-sign-_0028_0040code_007b_003d_007d_0029_002c-_0040code_007b_003d_007d-operator-848">equals sign (<code>=</code>), <code>=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-equals-sign-_0028_0040code_007b_003d_007d_0029_002c-_0040code_007b_003d_003d_007d-operator-1022">equals sign (<code>=</code>), <code>==</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-equals-sign-_0028_0040code_007b_003d_007d_0029_002c-_0040code_007b_003d_003d_007d-operator-933">equals sign (<code>=</code>), <code>==</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-EREs-_0028Extended-Regular-Expressions_0029-407">EREs (Extended Regular Expressions)</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-g_t_0040code_007bERRNO_007d-variable-2264"><code>ERRNO</code> variable</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bERRNO_007d-variable-1662"><code>ERRNO</code> variable</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-g_t_0040code_007bERRNO_007d-variable-1247"><code>ERRNO</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bERRNO_007d-variable-1109"><code>ERRNO</code> variable</a>: <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></li>
<li><a href="#index-g_t_0040code_007bERRNO_007d-variable-775"><code>ERRNO</code> variable</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-g_t_0040code_007bERRNO_007d-variable-616"><code>ERRNO</code> variable</a>: <a href="#Getline">Getline</a></li>
<li><a href="#index-error-handling-742">error handling</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-error-handling_002c-_0040code_007bERRNO_007d-variable-and-1249">error handling, <code>ERRNO</code> variable and</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-error-output-737">error output</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-escape-processing_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bgensub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-1399">escape processing, <code>gsub()</code>/<code>gensub()</code>/<code>sub()</code> functions</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-escape-sequences-322">escape sequences</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007beval_007d-debugger-command-1989"><code>eval</code> debugger command</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-evaluation-order-904">evaluation order</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-evaluation-order_002c-concatenation-842">evaluation order, concatenation</a>: <a href="#Concatenation">Concatenation</a></li>
<li><a href="#index-evaluation-order_002c-functions-1342">evaluation order, functions</a>: <a href="#Calling-Built_002din">Calling Built-in</a></li>
<li><a href="#index-examining-fields-524">examining fields</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007d-operator-1856">exclamation point (<code>!</code>), <code>!</code> operator</a>: <a href="#Egrep-Program">Egrep Program</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007d-operator-1002">exclamation point (<code>!</code>), <code>!</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007d-operator-968">exclamation point (<code>!</code>), <code>!</code> operator</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_003d_007d-operator-1024">exclamation point (<code>!</code>), <code>!=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_003d_007d-operator-935">exclamation point (<code>!</code>), <code>!=</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-1076">exclamation point (<code>!</code>), <code>!~</code> operator</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-1039">exclamation point (<code>!</code>), <code>!~</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-939">exclamation point (<code>!</code>), <code>!~</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-795">exclamation point (<code>!</code>), <code>!~</code> operator</a>: <a href="#Regexp-Constants">Regexp Constants</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-475">exclamation point (<code>!</code>), <code>!~</code> operator</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-466">exclamation point (<code>!</code>), <code>!~</code> operator</a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-exclamation-point-_0028_0040code_007b_0021_007d_0029_002c-_0040code_007b_0021_007e_007d-operator-316">exclamation point (<code>!</code>), <code>!~</code> operator</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-g_t_0040code_007bexit_007d-statement-1171"><code>exit</code> statement</a>: <a href="#Exit-Statement">Exit Statement</a></li>
<li><a href="#index-exit-status_002c-of-_0040command_007bgawk_007d-293">exit status, of <samp><span class="command">gawk</span></samp></a>: <a href="#Exit-Status">Exit Status</a></li>
<li><a href="#index-g_t_0040code_007bexp_0028_0029_007d-function-1347"><code>exp()</code> function</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-g_t_0040command_007bexpand_007d-utility-148"><samp><span class="command">expand</span></samp> utility</a>: <a href="#Very-Simple">Very Simple</a></li>
<li><a href="#index-expressions-776">expressions</a>: <a href="#Expressions">Expressions</a></li>
<li><a href="#index-expressions_002c-as-patterns-1068">expressions, as patterns</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-expressions_002c-assignment-846">expressions, assignment</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-expressions_002c-Boolean-953">expressions, Boolean</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-expressions_002c-comparison-914">expressions, comparison</a>: <a href="#Typing-and-Comparison">Typing and Comparison</a></li>
<li><a href="#index-expressions_002c-conditional-974">expressions, conditional</a>: <a href="#Conditional-Exp">Conditional Exp</a></li>
<li><a href="#index-expressions_002c-matching_002c-See-comparison-expressions-915">expressions, matching, See comparison expressions</a>: <a href="#Typing-and-Comparison">Typing and Comparison</a></li>
<li><a href="#index-expressions_002c-selecting-975">expressions, selecting</a>: <a href="#Conditional-Exp">Conditional Exp</a></li>
<li><a href="#index-Extended-Regular-Expressions-_0028EREs_0029-406">Extended Regular Expressions (EREs)</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-eXtensible-Markup-Language-_0028XML_0029-2283">eXtensible Markup Language (XML)</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bextension_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-2293"><code>extension()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Using-Internal-File-Ops">Using Internal File Ops</a></li>
<li><a href="#index-extensions_002c-Brian-Kernighan_0027s-_0040command_007bawk_007d-2153">extensions, Brian Kernighan's <samp><span class="command">awk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-extensions_002c-Brian-Kernighan_0027s-_0040command_007bawk_007d-2048">extensions, Brian Kernighan's <samp><span class="command">awk</span></samp></a>: <a href="#BTL">BTL</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_002a_002a_007d-operator-827">extensions, common, <code>**</code> operator</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_002a_002a_003d_007d-operator-873">extensions, common, <code>**=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_002fdev_002fstderr_007d-special-file-748">extensions, common, <code>/dev/stderr</code> special file</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_002fdev_002fstdin_007d-special-file-746">extensions, common, <code>/dev/stdin</code> special file</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_002fdev_002fstdout_007d-special-file-747">extensions, common, <code>/dev/stdout</code> special file</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007b_005cx_007d-escape-sequence-344">extensions, common, <code>\x</code> escape sequence</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007bBINMODE_007d-variable-2126">extensions, common, <code>BINMODE</code> variable</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007bdelete_007d-to-delete-entire-arrays-1311">extensions, common, <code>delete</code> to delete entire arrays</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007bfflush_0028_0029_007d-function-1417">extensions, common, <code>fflush()</code> function</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007bfunc_007d-keyword-1494">extensions, common, <code>func</code> keyword</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007blength_0028_0029_007d-applied-to-an-array-1371">extensions, common, <code>length()</code> applied to an array</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007bnextfile_007d-statement-1168">extensions, common, <code>nextfile</code> statement</a>: <a href="#Nextfile-Statement">Nextfile Statement</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-_0040code_007bRS_007d-as-a-regexp-516">extensions, common, <code>RS</code> as a regexp</a>: <a href="#Records">Records</a></li>
<li><a href="#index-extensions_002c-common_0040comma_007b_007d-single-character-fields-569">extensions, common, single character fields</a>: <a href="#Single-Character-Fields">Single Character Fields</a></li>
<li><a href="#index-extensions_002c-in-_0040command_007bgawk_007d_002c-not-in-POSIX-_0040command_007bawk_007d-2052">extensions, in <samp><span class="command">gawk</span></samp>, not in POSIX <samp><span class="command">awk</span></samp></a>: <a href="#POSIX_002fGNU">POSIX/GNU</a></li>
<li><a href="#index-g_t_0040code_007bextract_002eawk_007d-program-1911"><code>extract.awk</code> program</a>: <a href="#Extract-Program">Extract Program</a></li>
<li><a href="#index-extraction_002c-of-marked-strings-_0028internationalization_0029-1589">extraction, of marked strings (internationalization)</a>: <a href="#String-Extraction">String Extraction</a></li>
<li><a href="#index-g_t_0040code_007bf_007d-debugger-command-_0028alias-for-_0040code_007bframe_007d_0029-2015"><code>f</code> debugger command (alias for <code>frame</code>)</a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-false_002c-logical-909">false, logical</a>: <a href="#Truth-Values">Truth Values</a></li>
<li><a href="#index-FDL-_0028Free-Documentation-License_0029-2368">FDL (Free Documentation License)</a>: <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></li>
<li><a href="#index-features_002c-adding-to-_0040command_007bgawk_007d-2187">features, adding to <samp><span class="command">gawk</span></samp></a>: <a href="#Adding-Code">Adding Code</a></li>
<li><a href="#index-features_002c-advanced_002c-See-advanced-features-294">features, advanced, See advanced features</a>: <a href="#Obsolete">Obsolete</a></li>
<li><a href="#index-features_002c-deprecated-296">features, deprecated</a>: <a href="#Obsolete">Obsolete</a></li>
<li><a href="#index-features_002c-undocumented-300">features, undocumented</a>: <a href="#Undocumented">Undocumented</a></li>
<li><a href="#index-Fenlason_002c-Jay-2059">Fenlason, Jay</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Fenlason_002c-Jay-18">Fenlason, Jay</a>: <a href="#History">History</a></li>
<li><a href="#index-g_t_0040code_007bfflush_0028_0029_007d-function-1415"><code>fflush()</code> function</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-field-numbers-538">field numbers</a>: <a href="#Nonconstant-Fields">Nonconstant Fields</a></li>
<li><a href="#index-field-operator-_0040code_007b_0024_007d-531">field operator <code>$</code></a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-field-operators_0040comma_007b_007d-dollar-sign-as-534">field operators, dollar sign as</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-field-separators-1201">field separators</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-field-separators-550">field separators</a>: <a href="#Field-Separators">Field Separators</a></li>
<li><a href="#index-field-separators_002c-choice-of-555">field separators, choice of</a>: <a href="#Field-Separators">Field Separators</a></li>
<li><a href="#index-field-separators_002c-_0040code_007bFIELDWIDTHS_007d-variable-and-1192">field separators, <code>FIELDWIDTHS</code> variable and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-field-separators_002c-_0040code_007bFPAT_007d-variable-and-1197">field separators, <code>FPAT</code> variable and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-field-separators_002c-in-multiline-records-610">field separators, in multiline records</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-field-separators_002c-on-command-line-578">field separators, on command line</a>: <a href="#Command-Line-Field-Separator">Command Line Field Separator</a></li>
<li><a href="#index-field-separators_002c-POSIX-and-586">field separators, POSIX and</a>: <a href="#Field-Splitting-Summary">Field Splitting Summary</a></li>
<li><a href="#index-field-separators_002c-POSIX-and-529">field separators, POSIX and</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-field-separators_002c-regular-expressions-as-561">field separators, regular expressions as</a>: <a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></li>
<li><a href="#index-field-separators_002c-regular-expressions-as-557">field separators, regular expressions as</a>: <a href="#Field-Separators">Field Separators</a></li>
<li><a href="#index-field-separators_002c-See-Also-_0040code_007bOFS_007d-544">field separators, See Also <code>OFS</code></a>: <a href="#Changing-Fields">Changing Fields</a></li>
<li><a href="#index-field-separators_002c-spaces-as-1849">field separators, spaces as</a>: <a href="#Cut-Program">Cut Program</a></li>
<li><a href="#index-fields-2305">fields</a>: <a href="#Basic-High-Level">Basic High Level</a></li>
<li><a href="#index-fields-525">fields</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-fields-491">fields</a>: <a href="#Reading-Files">Reading Files</a></li>
<li><a href="#index-fields_002c-adding-541">fields, adding</a>: <a href="#Changing-Fields">Changing Fields</a></li>
<li><a href="#index-fields_002c-changing-contents-of-539">fields, changing contents of</a>: <a href="#Changing-Fields">Changing Fields</a></li>
<li><a href="#index-fields_002c-cutting-1844">fields, cutting</a>: <a href="#Cut-Program">Cut Program</a></li>
<li><a href="#index-fields_002c-examining-527">fields, examining</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-fields_002c-number-of-536">fields, number of</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-fields_002c-numbers-537">fields, numbers</a>: <a href="#Nonconstant-Fields">Nonconstant Fields</a></li>
<li><a href="#index-fields_002c-printing-669">fields, printing</a>: <a href="#Print-Examples">Print Examples</a></li>
<li><a href="#index-fields_002c-separating-549">fields, separating</a>: <a href="#Field-Separators">Field Separators</a></li>
<li><a href="#index-fields_002c-single_002dcharacter-572">fields, single-character</a>: <a href="#Single-Character-Fields">Single Character Fields</a></li>
<li><a href="#index-g_t_0040code_007bFIELDWIDTHS_007d-variable-1190"><code>FIELDWIDTHS</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bFIELDWIDTHS_007d-variable-595"><code>FIELDWIDTHS</code> variable</a>: <a href="#Constant-Size">Constant Size</a></li>
<li><a href="#index-file-descriptors-739">file descriptors</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-g_t_0040value_007bFN_007ds_002c-distinguishing-1243">file names, distinguishing</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040value_007bFN_007ds_002c-in-compatibility-mode-757">file names, in compatibility mode</a>: <a href="#Special-Caveats">Special Caveats</a></li>
<li><a href="#index-g_t_0040value_007bFN_007ds_002c-standard-streams-in-_0040command_007bgawk_007d-749">file names, standard streams in <samp><span class="command">gawk</span></samp></a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-g_t_0040code_007bFILENAME_007d-variable-1250"><code>FILENAME</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bFILENAME_007d-variable-489"><code>FILENAME</code> variable</a>: <a href="#Reading-Files">Reading Files</a></li>
<li><a href="#index-g_t_0040code_007bFILENAME_007d-variable_002c-_0040code_007bgetline_007d_0040comma_007b_007d-setting-with-654"><code>FILENAME</code> variable, <code>getline</code>, setting with</a>: <a href="#Getline-Notes">Getline Notes</a></li>
<li><a href="#index-filenames_002c-assignments-as-1776">filenames, assignments as</a>: <a href="#Ignoring-Assigns">Ignoring Assigns</a></li>
<li><a href="#index-files_002c-_0040code_007b_002emo_007d-1536">files, <code>.mo</code></a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-files_002c-_0040code_007b_002emo_007d_002c-converting-from-_0040code_007b_002epo_007d-1608">files, <code>.mo</code>, converting from <code>.po</code></a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-files_002c-_0040code_007b_002emo_007d_002c-specifying-directory-of-1570">files, <code>.mo</code>, specifying directory of</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-files_002c-_0040code_007b_002emo_007d_002c-specifying-directory-of-1541">files, <code>.mo</code>, specifying directory of</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-files_002c-_0040code_007b_002epo_007d-1580">files, <code>.po</code></a>: <a href="#Translator-i18n">Translator i18n</a></li>
<li><a href="#index-files_002c-_0040code_007b_002epo_007d-1532">files, <code>.po</code></a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-files_002c-_0040code_007b_002epo_007d_002c-converting-to-_0040code_007b_002emo_007d-1606">files, <code>.po</code>, converting to <code>.mo</code></a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-files_002c-_0040code_007b_002epot_007d-1528">files, <code>.pot</code></a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-files_002c-_0040code_007b_002fdev_002f_0040dots_007b_007d_007d-special-files-751">files, <code>/dev/...</code> special files</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-files_002c-_0040code_007b_002finet_002f_0040dots_007b_007d_007d-_0028_0040command_007bgawk_007d_0029-1654">files, <code>/inet/...</code> (<samp><span class="command">gawk</span></samp>)</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-files_002c-_0040code_007b_002finet4_002f_0040dots_007b_007d_007d-_0028_0040command_007bgawk_007d_0029-1656">files, <code>/inet4/...</code> (<samp><span class="command">gawk</span></samp>)</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-files_002c-_0040code_007b_002finet6_002f_0040dots_007b_007d_007d-_0028_0040command_007bgawk_007d_0029-1658">files, <code>/inet6/...</code> (<samp><span class="command">gawk</span></samp>)</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-files_002c-as-single-records-523">files, as single records</a>: <a href="#Records">Records</a></li>
<li><a href="#index-files_002c-_0040command_007bawk_007d-programs-in-103">files, <samp><span class="command">awk</span></samp> programs in</a>: <a href="#Long">Long</a></li>
<li><a href="#index-files_002c-_0040code_007bawkprof_002eout_007d-1668">files, <code>awkprof.out</code></a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-files_002c-_0040code_007bawkvars_002eout_007d-213">files, <code>awkvars.out</code></a>: <a href="#Options">Options</a></li>
<li><a href="#index-files_002c-closing-1414">files, closing</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-files_002c-descriptors_002c-See-file-descriptors-740">files, descriptors, See file descriptors</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-files_002c-group-1825">files, group</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-files_002c-information-about_0040comma_007b_007d-retrieving-2288">files, information about, retrieving</a>: <a href="#Sample-Library">Sample Library</a></li>
<li><a href="#index-files_002c-initialization-and-cleanup-1764">files, initialization and cleanup</a>: <a href="#Filetrans-Function">Filetrans Function</a></li>
<li><a href="#index-files_002c-input_002c-See-input-files-93">files, input, See input files</a>: <a href="#Read-Terminal">Read Terminal</a></li>
<li><a href="#index-files_002c-log_0040comma_007b_007d-timestamps-in-1434">files, log, timestamps in</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-files_002c-managing-1760">files, managing</a>: <a href="#Data-File-Management">Data File Management</a></li>
<li><a href="#index-files_002c-managing_002c-_0040value_007bDF_007d-boundaries-1763">files, managing, data file boundaries</a>: <a href="#Filetrans-Function">Filetrans Function</a></li>
<li><a href="#index-files_002c-message-object-1538">files, message object</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-files_002c-message-object_002c-converting-from-portable-object-files-1612">files, message object, converting from portable object files</a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-files_002c-message-object_002c-specifying-directory-of-1572">files, message object, specifying directory of</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-files_002c-message-object_002c-specifying-directory-of-1543">files, message object, specifying directory of</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-files_002c-multiple-passes-over-287">files, multiple passes over</a>: <a href="#Other-Arguments">Other Arguments</a></li>
<li><a href="#index-files_002c-multiple_0040comma_007b_007d-duplicating-output-into-1869">files, multiple, duplicating output into</a>: <a href="#Tee-Program">Tee Program</a></li>
<li><a href="#index-files_002c-output_002c-See-output-files-758">files, output, See output files</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-files_002c-password-1798">files, password</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-files_002c-portable-object-1582">files, portable object</a>: <a href="#Translator-i18n">Translator i18n</a></li>
<li><a href="#index-files_002c-portable-object-1534">files, portable object</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-files_002c-portable-object-template-1530">files, portable object template</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-files_002c-portable-object_002c-converting-to-message-object-files-1610">files, portable object, converting to message object files</a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-files_002c-portable-object_002c-generating-226">files, portable object, generating</a>: <a href="#Options">Options</a></li>
<li><a href="#index-files_002c-processing_0040comma_007b_007d-_0040code_007bARGIND_007d-variable-and-1242">files, processing, <code>ARGIND</code> variable and</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-files_002c-reading-1767">files, reading</a>: <a href="#Rewind-Function">Rewind Function</a></li>
<li><a href="#index-files_002c-reading_002c-multiline-records-603">files, reading, multiline records</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-files_002c-searching-for-regular-expressions-1852">files, searching for regular expressions</a>: <a href="#Egrep-Program">Egrep Program</a></li>
<li><a href="#index-files_002c-skipping-1771">files, skipping</a>: <a href="#File-Checking">File Checking</a></li>
<li><a href="#index-files_002c-source_0040comma_007b_007d-search-path-for-1922">files, source, search path for</a>: <a href="#Igawk-Program">Igawk Program</a></li>
<li><a href="#index-files_002c-splitting-1866">files, splitting</a>: <a href="#Split-Program">Split Program</a></li>
<li><a href="#index-files_002c-Texinfo_0040comma_007b_007d-extracting-programs-from-1909">files, Texinfo, extracting programs from</a>: <a href="#Extract-Program">Extract Program</a></li>
<li><a href="#index-g_t_0040code_007bfinish_007d-debugger-command-1959"><code>finish</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-Fish_002c-Fred-2071">Fish, Fred</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-fixed_002dwidth-data-591">fixed-width data</a>: <a href="#Constant-Size">Constant Size</a></li>
<li><a href="#index-flag-variables-1872">flag variables</a>: <a href="#Tee-Program">Tee Program</a></li>
<li><a href="#index-flag-variables-971">flag variables</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-floating_002dpoint_002c-numbers-2322">floating-point, numbers</a>: <a href="#Unexpected-Results">Unexpected Results</a></li>
<li><a href="#index-floating_002dpoint_002c-numbers-2313">floating-point, numbers</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-floating_002dpoint_002c-numbers_002c-_0040code_007bAWKNUM_007d-internal-type-2202">floating-point, numbers, <code>AWKNUM</code> internal type</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bFNR_007d-variable-1252"><code>FNR</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bFNR_007d-variable-496"><code>FNR</code> variable</a>: <a href="#Records">Records</a></li>
<li><a href="#index-g_t_0040code_007bFNR_007d-variable_002c-changing-1266"><code>FNR</code> variable, changing</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bfor_007d-statement-1143"><code>for</code> statement</a>: <a href="#For-Statement">For Statement</a></li>
<li><a href="#index-g_t_0040code_007bfor_007d-statement_002c-in-arrays-1301"><code>for</code> statement, in arrays</a>: <a href="#Scanning-an-Array">Scanning an Array</a></li>
<li><a href="#index-g_t_0040code_007bforce_005fnumber_0028_0029_007d-internal-function-2210"><code>force_number()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bforce_005fstring_0028_0029_007d-internal-function-2213"><code>force_string()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bforce_005fwstring_0028_0029_007d-internal-function-2215"><code>force_wstring()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-format-specifiers_002c-mixing-regular-with-positional-specifiers-1596">format specifiers, mixing regular with positional specifiers</a>: <a href="#Printf-Ordering">Printf Ordering</a></li>
<li><a href="#index-format-specifiers_002c-_0040code_007bprintf_007d-statement-696">format specifiers, <code>printf</code> statement</a>: <a href="#Control-Letters">Control Letters</a></li>
<li><a href="#index-format-specifiers_002c-_0040code_007bstrftime_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1448">format specifiers, <code>strftime()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-format-strings-694">format strings</a>: <a href="#Basic-Printf">Basic Printf</a></li>
<li><a href="#index-formats_0040comma_007b_007d-numeric-output-683">formats, numeric output</a>: <a href="#OFMT">OFMT</a></li>
<li><a href="#index-formatting-output-692">formatting output</a>: <a href="#Printf">Printf</a></li>
<li><a href="#index-forward-slash-_0028_0040code_007b_002f_007d_0029-307">forward slash (<code>/</code>)</a>: <a href="#Regexp">Regexp</a></li>
<li><a href="#index-forward-slash-_0028_0040code_007b_002f_007d_0029_002c-_0040code_007b_002f_007d-operator-1006">forward slash (<code>/</code>), <code>/</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-forward-slash-_0028_0040code_007b_002f_007d_0029_002c-_0040code_007b_002f_003d_007d-operator-1056">forward slash (<code>/</code>), <code>/=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-forward-slash-_0028_0040code_007b_002f_007d_0029_002c-_0040code_007b_002f_003d_007d-operator-865">forward slash (<code>/</code>), <code>/=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-forward-slash-_0028_0040code_007b_002f_007d_0029_002c-_0040code_007b_002f_003d_007d-operator_002c-vs_002e-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d-regexp-constant-881">forward slash (<code>/</code>), <code>/=</code> operator, vs. <code>/=.../</code> regexp constant</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-forward-slash-_0028_0040code_007b_002f_007d_0029_002c-patterns-and-1072">forward slash (<code>/</code>), patterns and</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-g_t_0040code_007bFPAT_007d-variable-1195"><code>FPAT</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bFPAT_007d-variable-600"><code>FPAT</code> variable</a>: <a href="#Splitting-By-Content">Splitting By Content</a></li>
<li><a href="#index-g_t_0040code_007bframe_007d-debugger-command-2014"><code>frame</code> debugger command</a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-Free-Documentation-License-_0028FDL_0029-2369">Free Documentation License (FDL)</a>: <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></li>
<li><a href="#index-Free-Software-Foundation-_0028FSF_0029-2344">Free Software Foundation (FSF)</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-Free-Software-Foundation-_0028FSF_0029-2096">Free Software Foundation (FSF)</a>: <a href="#Getting">Getting</a></li>
<li><a href="#index-Free-Software-Foundation-_0028FSF_0029-33">Free Software Foundation (FSF)</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-FreeBSD-2366">FreeBSD</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-g_t_0040code_007bFS_007d-variable-1199"><code>FS</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bFS_007d-variable-548"><code>FS</code> variable</a>: <a href="#Field-Separators">Field Separators</a></li>
<li><a href="#index-g_t_0040code_007bFS_007d-variable_002c-_0040code_007b_002d_002dfield_002dseparator_007d-option-and-188"><code>FS</code> variable, <code>--field-separator</code> option and</a>: <a href="#Options">Options</a></li>
<li><a href="#index-FS-variable_002c-as-null-string-574">FS variable, as null string</a>: <a href="#Single-Character-Fields">Single Character Fields</a></li>
<li><a href="#index-g_t_0040code_007bFS_007d-variable_002c-as-TAB-character-254"><code>FS</code> variable, as TAB character</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007bFS_007d-variable_002c-changing-value-of-553"><code>FS</code> variable, changing value of</a>: <a href="#Field-Separators">Field Separators</a></li>
<li><a href="#index-g_t_0040code_007bFS_007d-variable_002c-running-_0040command_007bawk_007d-programs-and-1848"><code>FS</code> variable, running <samp><span class="command">awk</span></samp> programs and</a>: <a href="#Cut-Program">Cut Program</a></li>
<li><a href="#index-g_t_0040code_007bFS_007d-variable_002c-setting-from-command-line-580"><code>FS</code> variable, setting from command line</a>: <a href="#Command-Line-Field-Separator">Command Line Field Separator</a></li>
<li><a href="#index-g_t_0040code_007bFS_007d_002c-containing-_0040code_007b_005e_007d-565"><code>FS</code>, containing <code>^</code></a>: <a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></li>
<li><a href="#index-FSF-_0028Free-Software-Foundation_0029-2343">FSF (Free Software Foundation)</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-FSF-_0028Free-Software-Foundation_0029-2095">FSF (Free Software Foundation)</a>: <a href="#Getting">Getting</a></li>
<li><a href="#index-FSF-_0028Free-Software-Foundation_0029-32">FSF (Free Software Foundation)</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-function-calls-980">function calls</a>: <a href="#Function-Calls">Function Calls</a></li>
<li><a href="#index-function-calls_002c-indirect-1513">function calls, indirect</a>: <a href="#Indirect-Calls">Indirect Calls</a></li>
<li><a href="#index-function-pointers-1514">function pointers</a>: <a href="#Indirect-Calls">Indirect Calls</a></li>
<li><a href="#index-functions_002c-arrays-as-parameters-to-1505">functions, arrays as parameters to</a>: <a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></li>
<li><a href="#index-functions_002c-built_002din-1335">functions, built-in</a>: <a href="#Functions">Functions</a></li>
<li><a href="#index-functions_002c-built_002din-981">functions, built-in</a>: <a href="#Function-Calls">Function Calls</a></li>
<li><a href="#index-functions_002c-built_002din_002c-adding-to-_0040command_007bgawk_007d-2199">functions, built-in, adding to <samp><span class="command">gawk</span></samp></a>: <a href="#Dynamic-Extensions">Dynamic Extensions</a></li>
<li><a href="#index-functions_002c-built_002din_002c-evaluation-order-1343">functions, built-in, evaluation order</a>: <a href="#Calling-Built_002din">Calling Built-in</a></li>
<li><a href="#index-functions_002c-defining-1485">functions, defining</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-functions_002c-library-1697">functions, library</a>: <a href="#Library-Functions">Library Functions</a></li>
<li><a href="#index-functions_002c-library_002c-assertions-1722">functions, library, assertions</a>: <a href="#Assert-Function">Assert Function</a></li>
<li><a href="#index-functions_002c-library_002c-associative-arrays-and-1717">functions, library, associative arrays and</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-functions_002c-library_002c-C-library-1782">functions, library, C library</a>: <a href="#Getopt-Function">Getopt Function</a></li>
<li><a href="#index-functions_002c-library_002c-character-values-as-numbers-1741">functions, library, character values as numbers</a>: <a href="#Ordinal-Functions">Ordinal Functions</a></li>
<li><a href="#index-functions_002c-library_002c-Cliff-random-numbers-1738">functions, library, Cliff random numbers</a>: <a href="#Cliff-Random-Function">Cliff Random Function</a></li>
<li><a href="#index-functions_002c-library_002c-command_002dline-options-1779">functions, library, command-line options</a>: <a href="#Getopt-Function">Getopt Function</a></li>
<li><a href="#index-functions_002c-library_002c-example-program-for-using-1917">functions, library, example program for using</a>: <a href="#Igawk-Program">Igawk Program</a></li>
<li><a href="#index-functions_002c-library_002c-group-database_002c-reading-1816">functions, library, group database, reading</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-functions_002c-library_002c-managing-_0040value_007bDF_007ds-1762">functions, library, managing data files</a>: <a href="#Data-File-Management">Data File Management</a></li>
<li><a href="#index-functions_002c-library_002c-managing-time-1756">functions, library, managing time</a>: <a href="#Gettimeofday-Function">Gettimeofday Function</a></li>
<li><a href="#index-functions_002c-library_002c-merging-arrays-into-strings-1751">functions, library, merging arrays into strings</a>: <a href="#Join-Function">Join Function</a></li>
<li><a href="#index-functions_002c-library_002c-rounding-numbers-1730">functions, library, rounding numbers</a>: <a href="#Round-Function">Round Function</a></li>
<li><a href="#index-functions_002c-library_002c-user-database_002c-reading-1788">functions, library, user database, reading</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-functions_002c-names-of-1487">functions, names of</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-functions_002c-names-of-1275">functions, names of</a>: <a href="#Arrays">Arrays</a></li>
<li><a href="#index-functions_002c-recursive-1492">functions, recursive</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-functions_002c-return-values_0040comma_007b_007d-setting-2263">functions, return values, setting</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-functions_002c-string_002dtranslation-1477">functions, string-translation</a>: <a href="#I18N-Functions">I18N Functions</a></li>
<li><a href="#index-functions_002c-undefined-1507">functions, undefined</a>: <a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></li>
<li><a href="#index-functions_002c-user_002ddefined-1484">functions, user-defined</a>: <a href="#User_002ddefined">User-defined</a></li>
<li><a href="#index-functions_002c-user_002ddefined_002c-calling-1499">functions, user-defined, calling</a>: <a href="#Calling-A-Function">Calling A Function</a></li>
<li><a href="#index-functions_002c-user_002ddefined_002c-counts-1675">functions, user-defined, counts</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-functions_002c-user_002ddefined_002c-library-of-1698">functions, user-defined, library of</a>: <a href="#Library-Functions">Library Functions</a></li>
<li><a href="#index-functions_002c-user_002ddefined_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1169">functions, user-defined, <code>next</code>/<code>nextfile</code> statements and</a>: <a href="#Nextfile-Statement">Nextfile Statement</a></li>
<li><a href="#index-functions_002c-user_002ddefined_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1164">functions, user-defined, <code>next</code>/<code>nextfile</code> statements and</a>: <a href="#Next-Statement">Next Statement</a></li>
<li><a href="#index-G_002dd-77">G-d</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Garfinkle_002c-Scott-2065">Garfinkle, Scott</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bARGIND_007d-variable-in-282"><samp><span class="command">gawk</span></samp>, <code>ARGIND</code> variable in</a>: <a href="#Other-Arguments">Other Arguments</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040command_007bawk_007d-and-25"><samp><span class="command">gawk</span></samp>, <samp><span class="command">awk</span></samp> and</a>: <a href="#This-Manual">This Manual</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040command_007bawk_007d-and-4"><samp><span class="command">gawk</span></samp>, <samp><span class="command">awk</span></samp> and</a>: <a href="#Preface">Preface</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-bitwise-operations-in-1462"><samp><span class="command">gawk</span></samp>, bitwise operations in</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bbreak_007d-statement-in-1153"><samp><span class="command">gawk</span></samp>, <code>break</code> statement in</a>: <a href="#Break-Statement">Break Statement</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-built_002din-variables-and-1178"><samp><span class="command">gawk</span></samp>, built-in variables and</a>: <a href="#Built_002din-Variables">Built-in Variables</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-character-classes-and-418"><samp><span class="command">gawk</span></samp>, character classes and</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-coding-style-in-2189"><samp><span class="command">gawk</span></samp>, coding style in</a>: <a href="#Adding-Code">Adding Code</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-command_002dline-options-457"><samp><span class="command">gawk</span></samp>, command-line options</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-comparison-operators-and-942"><samp><span class="command">gawk</span></samp>, comparison operators and</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-configuring-2108"><samp><span class="command">gawk</span></samp>, configuring</a>: <a href="#Configuration-Philosophy">Configuration Philosophy</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-configuring_002c-options-2100"><samp><span class="command">gawk</span></samp>, configuring, options</a>: <a href="#Additional-Configuration-Options">Additional Configuration Options</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bcontinue_007d-statement-in-1157"><samp><span class="command">gawk</span></samp>, <code>continue</code> statement in</a>: <a href="#Continue-Statement">Continue Statement</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-distribution-2097"><samp><span class="command">gawk</span></samp>, distribution</a>: <a href="#Distribution-contents">Distribution contents</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-in-1661"><samp><span class="command">gawk</span></samp>, <code>ERRNO</code> variable in</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-in-1246"><samp><span class="command">gawk</span></samp>, <code>ERRNO</code> variable in</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-in-1108"><samp><span class="command">gawk</span></samp>, <code>ERRNO</code> variable in</a>: <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-in-774"><samp><span class="command">gawk</span></samp>, <code>ERRNO</code> variable in</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bERRNO_007d-variable-in-615"><samp><span class="command">gawk</span></samp>, <code>ERRNO</code> variable in</a>: <a href="#Getline">Getline</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-escape-sequences-357"><samp><span class="command">gawk</span></samp>, escape sequences</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-extensions_0040comma_007b_007d-disabling-251"><samp><span class="command">gawk</span></samp>, extensions, disabling</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-features_002c-adding-2188"><samp><span class="command">gawk</span></samp>, features, adding</a>: <a href="#Adding-Code">Adding Code</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-features_002c-advanced-1615"><samp><span class="command">gawk</span></samp>, features, advanced</a>: <a href="#Advanced-Features">Advanced Features</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-field-separators-and-1203"><samp><span class="command">gawk</span></samp>, field separators and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bFIELDWIDTHS_007d-variable-in-1189"><samp><span class="command">gawk</span></samp>, <code>FIELDWIDTHS</code> variable in</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bFIELDWIDTHS_007d-variable-in-596"><samp><span class="command">gawk</span></samp>, <code>FIELDWIDTHS</code> variable in</a>: <a href="#Constant-Size">Constant Size</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040value_007bFN_007ds-in-732"><samp><span class="command">gawk</span></samp>, file names in</a>: <a href="#Special-Files">Special Files</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-format_002dcontrol-characters-698"><samp><span class="command">gawk</span></samp>, format-control characters</a>: <a href="#Control-Letters">Control Letters</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bFPAT_007d-variable-in-1194"><samp><span class="command">gawk</span></samp>, <code>FPAT</code> variable in</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bFPAT_007d-variable-in-599"><samp><span class="command">gawk</span></samp>, <code>FPAT</code> variable in</a>: <a href="#Splitting-By-Content">Splitting By Content</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-function-arguments-and-1340"><samp><span class="command">gawk</span></samp>, function arguments and</a>: <a href="#Calling-Built_002din">Calling Built-in</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-functions_002c-adding-2197"><samp><span class="command">gawk</span></samp>, functions, adding</a>: <a href="#Dynamic-Extensions">Dynamic Extensions</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-hexadecimal-numbers-and-787"><samp><span class="command">gawk</span></samp>, hexadecimal numbers and</a>: <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-in-1630"><samp><span class="command">gawk</span></samp>, <code>IGNORECASE</code> variable in</a>: <a href="#Array-Sorting-Functions">Array Sorting Functions</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-in-1359"><samp><span class="command">gawk</span></samp>, <code>IGNORECASE</code> variable in</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-in-1286"><samp><span class="command">gawk</span></samp>, <code>IGNORECASE</code> variable in</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-in-1204"><samp><span class="command">gawk</span></samp>, <code>IGNORECASE</code> variable in</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bIGNORECASE_007d-variable-in-468"><samp><span class="command">gawk</span></samp>, <code>IGNORECASE</code> variable in</a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-implementation-issues-2180"><samp><span class="command">gawk</span></samp>, implementation issues</a>: <a href="#Notes">Notes</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-implementation-issues_002c-debugging-2183"><samp><span class="command">gawk</span></samp>, implementation issues, debugging</a>: <a href="#Compatibility-Mode">Compatibility Mode</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-implementation-issues_002c-downward-compatibility-2182"><samp><span class="command">gawk</span></samp>, implementation issues, downward compatibility</a>: <a href="#Compatibility-Mode">Compatibility Mode</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-implementation-issues_002c-limits-652"><samp><span class="command">gawk</span></samp>, implementation issues, limits</a>: <a href="#Getline-Notes">Getline Notes</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-implementation-issues_002c-pipes-729"><samp><span class="command">gawk</span></samp>, implementation issues, pipes</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-installing-2091"><samp><span class="command">gawk</span></samp>, installing</a>: <a href="#Installation">Installation</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-internals-2200"><samp><span class="command">gawk</span></samp>, internals</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-internationalization-and_002c-See-internationalization-1518"><samp><span class="command">gawk</span></samp>, internationalization and, See internationalization</a>: <a href="#Internationalization">Internationalization</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-interpreter_0040comma_007b_007d-adding-code-to-2292"><samp><span class="command">gawk</span></samp>, interpreter, adding code to</a>: <a href="#Using-Internal-File-Ops">Using Internal File Ops</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-interval-expressions-and-391"><samp><span class="command">gawk</span></samp>, interval expressions and</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-line-continuation-in-979"><samp><span class="command">gawk</span></samp>, line continuation in</a>: <a href="#Conditional-Exp">Conditional Exp</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bLINT_007d-variable-in-1210"><samp><span class="command">gawk</span></samp>, <code>LINT</code> variable in</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-list-of-contributors-to-2054"><samp><span class="command">gawk</span></samp>, list of contributors to</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-MS_002dDOS-version-of-2119"><samp><span class="command">gawk</span></samp>, MS-DOS version of</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-MS_002dWindows-version-of-2120"><samp><span class="command">gawk</span></samp>, MS-Windows version of</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-newlines-in-155"><samp><span class="command">gawk</span></samp>, newlines in</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-octal-numbers-and-786"><samp><span class="command">gawk</span></samp>, octal numbers and</a>: <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-OS_002f2-version-of-2118"><samp><span class="command">gawk</span></samp>, OS/2 version of</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bPROCINFO_007d-array-in-1648"><samp><span class="command">gawk</span></samp>, <code>PROCINFO</code> array in</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bPROCINFO_007d-array-in-1440"><samp><span class="command">gawk</span></samp>, <code>PROCINFO</code> array in</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bPROCINFO_007d-array-in-1255"><samp><span class="command">gawk</span></samp>, <code>PROCINFO</code> array in</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-regexp-constants-and-797"><samp><span class="command">gawk</span></samp>, regexp constants and</a>: <a href="#Using-Constant-Regexps">Using Constant Regexps</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-regular-expressions_002c-case-sensitivity-460"><samp><span class="command">gawk</span></samp>, regular expressions, case sensitivity</a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-regular-expressions_002c-operators-421"><samp><span class="command">gawk</span></samp>, regular expressions, operators</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-regular-expressions_002c-precedence-395"><samp><span class="command">gawk</span></samp>, regular expressions, precedence</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bRT_007d-variable-in-1262"><samp><span class="command">gawk</span></samp>, <code>RT</code> variable in</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bRT_007d-variable-in-628"><samp><span class="command">gawk</span></samp>, <code>RT</code> variable in</a>: <a href="#Getline_002fVariable_002fFile">Getline/Variable/File</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bRT_007d-variable-in-611"><samp><span class="command">gawk</span></samp>, <code>RT</code> variable in</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bRT_007d-variable-in-507"><samp><span class="command">gawk</span></samp>, <code>RT</code> variable in</a>: <a href="#Records">Records</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-See-Also-_0040command_007bawk_007d-8"><samp><span class="command">gawk</span></samp>, See Also <samp><span class="command">awk</span></samp></a>: <a href="#Preface">Preface</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-source-code_0040comma_007b_007d-obtaining-2094"><samp><span class="command">gawk</span></samp>, source code, obtaining</a>: <a href="#Getting">Getting</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-splitting-fields-and-597"><samp><span class="command">gawk</span></samp>, splitting fields and</a>: <a href="#Constant-Size">Constant Size</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-string_002dtranslation-functions-1476"><samp><span class="command">gawk</span></samp>, string-translation functions</a>: <a href="#I18N-Functions">I18N Functions</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-_0040code_007bTEXTDOMAIN_007d-variable-in-1229"><samp><span class="command">gawk</span></samp>, <code>TEXTDOMAIN</code> variable in</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-timestamps-1435"><samp><span class="command">gawk</span></samp>, timestamps</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-uses-for-9"><samp><span class="command">gawk</span></samp>, uses for</a>: <a href="#Preface">Preface</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-versions-of_002c-information-about_0040comma_007b_007d-printing-271"><samp><span class="command">gawk</span></samp>, versions of, information about, printing</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-VMS-version-of-2130"><samp><span class="command">gawk</span></samp>, VMS version of</a>: <a href="#VMS-Installation">VMS Installation</a></li>
<li><a href="#index-g_t_0040command_007bgawk_007d_002c-word_002dboundary-operator-453"><samp><span class="command">gawk</span></samp>, word-boundary operator</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-General-Public-License-_0028GPL_0029-2347">General Public License (GPL)</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-General-Public-License_002c-See-GPL-37">General Public License, See GPL</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-g_t_0040code_007bgensub_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1362"><code>gensub()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bgensub_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-801"><code>gensub()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Using-Constant-Regexps">Using Constant Regexps</a></li>
<li><a href="#index-g_t_0040code_007bgensub_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-escape-processing-1402"><code>gensub()</code> function (<samp><span class="command">gawk</span></samp>), escape processing</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-g_t_0040code_007bget_005factual_005fargument_0028_0029_007d-internal-function-2257"><code>get_actual_argument()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bget_005fargument_0028_0029_007d-internal-function-2255"><code>get_argument()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bget_005farray_005fargument_0028_0029_007d-internal-macro-2261"><code>get_array_argument()</code> internal macro</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bget_005fcurfunc_005farg_005fcount_0028_0029_007d-internal-function-2217"><code>get_curfunc_arg_count()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bget_005frecord_0028_0029_007d-input-method-2278"><code>get_record()</code> input method</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bget_005fscalar_005fargument_0028_0029_007d-internal-macro-2259"><code>get_scalar_argument()</code> internal macro</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bgetaddrinfo_0028_0029_007d-function-_0028C-library_0029-1660"><code>getaddrinfo()</code> function (C library)</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-g_t_0040code_007bgetgrent_0028_0029_007d-function-_0028C-library_0029-1820"><code>getgrent()</code> function (C library)</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetgrent_0028_0029_007d-user_002ddefined-function-1821"><code>getgrent()</code> user-defined function</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetgrgid_0028_0029_007d-function-_0028C-library_0029-1831"><code>getgrgid()</code> function (C library)</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetgrgid_0028_0029_007d-user_002ddefined-function-1832"><code>getgrgid()</code> user-defined function</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetgrnam_0028_0029_007d-function-_0028C-library_0029-1829"><code>getgrnam()</code> function (C library)</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetgrnam_0028_0029_007d-user_002ddefined-function-1830"><code>getgrnam()</code> user-defined function</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetgruser_0028_0029_007d-function-_0028C-library_0029-1833"><code>getgruser()</code> function (C library)</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetgruser_0028_0029_007d-function_002c-user_002ddefined-1834"><code>getgruser()</code> function, user-defined</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-command-492"><code>getline</code> command</a>: <a href="#Reading-Files">Reading Files</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-command_002c-_0040code_007b_005fgr_005finit_0028_0029_007d-user_002ddefined-function-1827"><code>getline</code> command, <code>_gr_init()</code> user-defined function</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-command_002c-_0040code_007b_005fpw_005finit_0028_0029_007d-function-1805"><code>getline</code> command, <code>_pw_init()</code> function</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-command_002c-coprocesses_0040comma_007b_007d-using-from-763"><code>getline</code> command, coprocesses, using from</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-command_002c-coprocesses_0040comma_007b_007d-using-from-643"><code>getline</code> command, coprocesses, using from</a>: <a href="#Getline_002fCoprocess">Getline/Coprocess</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-command_002c-deadlock-and-1645"><code>getline</code> command, deadlock and</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-command_002c-explicit-input-with-613"><code>getline</code> command, explicit input with</a>: <a href="#Getline">Getline</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-command_002c-_0040code_007bFILENAME_007d-variable-and-656"><code>getline</code> command, <code>FILENAME</code> variable and</a>: <a href="#Getline-Notes">Getline Notes</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-command_002c-return-values-618"><code>getline</code> command, return values</a>: <a href="#Getline">Getline</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-command_002c-variants-658"><code>getline</code> command, variants</a>: <a href="#Getline-Summary">Getline Summary</a></li>
<li><a href="#index-g_t_0040code_007bgetline_007d-statement_002c-_0040code_007bBEGINFILE_007d_002f_0040code_007bENDFILE_007d-patterns-and-1112"><code>getline</code> statement, <code>BEGINFILE</code>/<code>ENDFILE</code> patterns and</a>: <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></li>
<li><a href="#index-g_t_0040code_007bgetopt_0028_0029_007d-function-_0028C-library_0029-1784"><code>getopt()</code> function (C library)</a>: <a href="#Getopt-Function">Getopt Function</a></li>
<li><a href="#index-g_t_0040code_007bgetopt_0028_0029_007d-user_002ddefined-function-1785"><code>getopt()</code> user-defined function</a>: <a href="#Getopt-Function">Getopt Function</a></li>
<li><a href="#index-g_t_0040code_007bgetpwent_0028_0029_007d-function-_0028C-library_0029-1792"><code>getpwent()</code> function (C library)</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetpwent_0028_0029_007d-user_002ddefined-function-1793"><code>getpwent()</code> user-defined function</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetpwnam_0028_0029_007d-function-_0028C-library_0029-1807"><code>getpwnam()</code> function (C library)</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetpwnam_0028_0029_007d-user_002ddefined-function-1808"><code>getpwnam()</code> user-defined function</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetpwuid_0028_0029_007d-function-_0028C-library_0029-1809"><code>getpwuid()</code> function (C library)</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bgetpwuid_0028_0029_007d-user_002ddefined-function-1810"><code>getpwuid()</code> user-defined function</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bgettext_007d-library-1524"><code>gettext</code> library</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bgettext_007d-library_002c-locale-categories-1548"><code>gettext</code> library, locale categories</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bgettext_0028_0029_007d-function-_0028C-library_0029-1544"><code>gettext()</code> function (C library)</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bgettimeofday_0028_0029_007d-user_002ddefined-function-1759"><code>gettimeofday()</code> user-defined function</a>: <a href="#Gettimeofday-Function">Gettimeofday Function</a></li>
<li><a href="#index-GNITS-mailing-list-54">GNITS mailing list</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-GNU-_0040command_007bawk_007d_002c-See-_0040command_007bgawk_007d-10">GNU <samp><span class="command">awk</span></samp>, See <samp><span class="command">gawk</span></samp></a>: <a href="#Preface">Preface</a></li>
<li><a href="#index-GNU-Free-Documentation-License-2370">GNU Free Documentation License</a>: <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></li>
<li><a href="#index-GNU-General-Public-License-2348">GNU General Public License</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-GNU-Lesser-General-Public-License-2358">GNU Lesser General Public License</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-GNU-long-options-183">GNU long options</a>: <a href="#Options">Options</a></li>
<li><a href="#index-GNU-long-options-175">GNU long options</a>: <a href="#Command-Line">Command Line</a></li>
<li><a href="#index-GNU-long-options_002c-printing-list-of-229">GNU long options, printing list of</a>: <a href="#Options">Options</a></li>
<li><a href="#index-GNU-Project-2351">GNU Project</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-GNU-Project-35">GNU Project</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-GNU_002fLinux-2362">GNU/Linux</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-GNU_002fLinux-1604">GNU/Linux</a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-GNU_002fLinux-40">GNU/Linux</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-GPL-_0028General-Public-License_0029-2346">GPL (General Public License)</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-GPL-_0028General-Public-License_0029-36">GPL (General Public License)</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-GPL-_0028General-Public-License_0029_002c-printing-209">GPL (General Public License), printing</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040command_007bgrcat_007d-program-1826"><samp><span class="command">grcat</span></samp> program</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-Grigera_002c-Juan-2074">Grigera, Juan</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-group-database_002c-reading-1817">group database, reading</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-group-file-1824">group file</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-groups_0040comma_007b_007d-information-about-1822">groups, information about</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bgsub_0028_0029_007d-function-1363"><code>gsub()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bgsub_0028_0029_007d-function-803"><code>gsub()</code> function</a>: <a href="#Using-Constant-Regexps">Using Constant Regexps</a></li>
<li><a href="#index-g_t_0040code_007bgsub_0028_0029_007d-function_002c-arguments-of-1390"><code>gsub()</code> function, arguments of</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bgsub_0028_0029_007d-function_002c-escape-processing-1401"><code>gsub()</code> function, escape processing</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-g_t_0040code_007bh_007d-debugger-command-_0028alias-for-_0040code_007bhelp_007d_0029-2031"><code>h</code> debugger command (alias for <code>help</code>)</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-Hankerson_002c-Darrel-2075">Hankerson, Darrel</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Hankerson_002c-Darrel-62">Hankerson, Darrel</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Haque_002c-John-2087">Haque, John</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Haque_002c-John-63">Haque, John</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Hartholz_002c-Elaine-48">Hartholz, Elaine</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Hartholz_002c-Marshall-47">Hartholz, Marshall</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Hasegawa_002c-Isamu-2084">Hasegawa, Isamu</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-g_t_0040code_007bhelp_007d-debugger-command-2030"><code>help</code> debugger command</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-hexadecimal-numbers-783">hexadecimal numbers</a>: <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></li>
<li><a href="#index-hexadecimal-values_0040comma_007b_007d-enabling-interpretation-of-238">hexadecimal values, enabling interpretation of</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007bhistsort_002eawk_007d-program-1907"><code>histsort.awk</code> program</a>: <a href="#History-Sorting">History Sorting</a></li>
<li><a href="#index-Hughes_002c-Phil-51">Hughes, Phil</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-g_t_0040code_007bHUP_007d-signal-1687"><code>HUP</code> signal</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_007d-operator-1000">hyphen (<code>-</code>), <code>-</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_002d_007d-_0028decrement_002fincrement_0029-operators-992">hyphen (<code>-</code>), <code>--</code> (decrement/increment) operators</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_002d_007d-operator-899">hyphen (<code>-</code>), <code>--</code> operator</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_003d_007d-operator-1050">hyphen (<code>-</code>), <code>-=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-_0040code_007b_002d_003d_007d-operator-861">hyphen (<code>-</code>), <code>-=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-filenames-beginning-with-201">hyphen (<code>-</code>), filenames beginning with</a>: <a href="#Options">Options</a></li>
<li><a href="#index-hyphen-_0028_0040code_007b_002d_007d_0029_002c-in-bracket-expressions-404">hyphen (<code>-</code>), in bracket expressions</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-g_t_0040code_007bi_007d-debugger-command-_0028alias-for-_0040code_007binfo_007d_0029-2021"><code>i</code> debugger command (alias for <code>info</code>)</a>: <a href="#Dgawk-Info">Dgawk Info</a></li>
<li><a href="#index-g_t_0040command_007bid_007d-utility-1862"><samp><span class="command">id</span></samp> utility</a>: <a href="#Id-Program">Id Program</a></li>
<li><a href="#index-g_t_0040code_007bid_002eawk_007d-program-1864"><code>id.awk</code> program</a>: <a href="#Id-Program">Id Program</a></li>
<li><a href="#index-g_t_0040code_007bif_007d-statement-1137"><code>if</code> statement</a>: <a href="#If-Statement">If Statement</a></li>
<li><a href="#index-g_t_0040code_007bif_007d-statement-317"><code>if</code> statement</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-g_t_0040code_007bif_007d-statement_002c-actions_0040comma_007b_007d-changing-1089"><code>if</code> statement, actions, changing</a>: <a href="#Ranges">Ranges</a></li>
<li><a href="#index-g_t_0040code_007bigawk_002esh_007d-program-1918"><code>igawk.sh</code> program</a>: <a href="#Igawk-Program">Igawk Program</a></li>
<li><a href="#index-g_t_0040code_007bignore_007d-debugger-command-1945"><code>ignore</code> debugger command</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-g_t_0040code_007bIGNORECASE_007d-variable-1631"><code>IGNORECASE</code> variable</a>: <a href="#Array-Sorting-Functions">Array Sorting Functions</a></li>
<li><a href="#index-g_t_0040code_007bIGNORECASE_007d-variable-1360"><code>IGNORECASE</code> variable</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bIGNORECASE_007d-variable-1287"><code>IGNORECASE</code> variable</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-g_t_0040code_007bIGNORECASE_007d-variable-1205"><code>IGNORECASE</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bIGNORECASE_007d-variable-467"><code>IGNORECASE</code> variable</a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-g_t_0040code_007bIGNORECASE_007d-variable_002c-array-sorting-and-1633"><code>IGNORECASE</code> variable, array sorting and</a>: <a href="#Array-Sorting-Functions">Array Sorting Functions</a></li>
<li><a href="#index-g_t_0040code_007bIGNORECASE_007d-variable_002c-array-subscripts-and-1290"><code>IGNORECASE</code> variable, array subscripts and</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-g_t_0040code_007bIGNORECASE_007d-variable_002c-in-example-programs-1702"><code>IGNORECASE</code> variable, in example programs</a>: <a href="#Library-Functions">Library Functions</a></li>
<li><a href="#index-implementation-issues_002c-_0040command_007bgawk_007d-2181">implementation issues, <samp><span class="command">gawk</span></samp></a>: <a href="#Notes">Notes</a></li>
<li><a href="#index-implementation-issues_0040comma_007b_007d-_0040command_007bgawk_007d_002c-debugging-2185">implementation issues, <samp><span class="command">gawk</span></samp>, debugging</a>: <a href="#Compatibility-Mode">Compatibility Mode</a></li>
<li><a href="#index-implementation-issues_002c-_0040command_007bgawk_007d_002c-limits-727">implementation issues, <samp><span class="command">gawk</span></samp>, limits</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-implementation-issues_002c-_0040command_007bgawk_007d_002c-limits-650">implementation issues, <samp><span class="command">gawk</span></samp>, limits</a>: <a href="#Getline-Notes">Getline Notes</a></li>
<li><a href="#index-g_t_0040code_007bin_007d-operator-1865"><code>in</code> operator</a>: <a href="#Id-Program">Id Program</a></li>
<li><a href="#index-g_t_0040code_007bin_007d-operator-1145"><code>in</code> operator</a>: <a href="#For-Statement">For Statement</a></li>
<li><a href="#index-g_t_0040code_007bin_007d-operator-1040"><code>in</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007bin_007d-operator-940"><code>in</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040code_007bin_007d-operator_002c-arrays-and-1299"><code>in</code> operator, arrays and</a>: <a href="#Scanning-an-Array">Scanning an Array</a></li>
<li><a href="#index-g_t_0040code_007bin_007d-operator_002c-arrays-and-1293"><code>in</code> operator, arrays and</a>: <a href="#Reference-to-Elements">Reference to Elements</a></li>
<li><a href="#index-increment-operators-887">increment operators</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-g_t_0040code_007bindex_0028_0029_007d-function-1364"><code>index()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-indexing-arrays-1281">indexing arrays</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-indirect-function-calls-1512">indirect function calls</a>: <a href="#Indirect-Calls">Indirect Calls</a></li>
<li><a href="#index-g_t_0040code_007binfo_007d-debugger-command-2020"><code>info</code> debugger command</a>: <a href="#Dgawk-Info">Dgawk Info</a></li>
<li><a href="#index-initialization_002c-automatic-152">initialization, automatic</a>: <a href="#More-Complex">More Complex</a></li>
<li><a href="#index-input-files-488">input files</a>: <a href="#Reading-Files">Reading Files</a></li>
<li><a href="#index-input-files_002c-closing-759">input files, closing</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-input-files_002c-counting-elements-in-1879">input files, counting elements in</a>: <a href="#Wc-Program">Wc Program</a></li>
<li><a href="#index-input-files_002c-examples-141">input files, examples</a>: <a href="#Sample-Data-Files">Sample Data Files</a></li>
<li><a href="#index-input-files_002c-reading-487">input files, reading</a>: <a href="#Reading-Files">Reading Files</a></li>
<li><a href="#index-input-files_002c-running-_0040command_007bawk_007d-without-92">input files, running <samp><span class="command">awk</span></samp> without</a>: <a href="#Read-Terminal">Read Terminal</a></li>
<li><a href="#index-input-files_002c-variable-assignments-and-285">input files, variable assignments and</a>: <a href="#Other-Arguments">Other Arguments</a></li>
<li><a href="#index-input-pipeline-633">input pipeline</a>: <a href="#Getline_002fPipe">Getline/Pipe</a></li>
<li><a href="#index-input-redirection-621">input redirection</a>: <a href="#Getline_002fFile">Getline/File</a></li>
<li><a href="#index-input_002c-data_0040comma_007b_007d-nondecimal-1619">input, data, nondecimal</a>: <a href="#Nondecimal-Data">Nondecimal Data</a></li>
<li><a href="#index-input_002c-explicit-614">input, explicit</a>: <a href="#Getline">Getline</a></li>
<li><a href="#index-input_002c-files_002c-See-input-files-604">input, files, See input files</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-input_002c-multiline-records-602">input, multiline records</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-input_002c-splitting-into-records-493">input, splitting into records</a>: <a href="#Records">Records</a></li>
<li><a href="#index-input_002c-standard-734">input, standard</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-input_002c-standard-91">input, standard</a>: <a href="#Read-Terminal">Read Terminal</a></li>
<li><a href="#index-input_002foutput_002c-binary-1183">input/output, binary</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-input_002foutput_002c-from-_0040code_007bBEGIN_007d-and-_0040code_007bEND_007d-1096">input/output, from <code>BEGIN</code> and <code>END</code></a>: <a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></li>
<li><a href="#index-input_002foutput_002c-two_002dway-1639">input/output, two-way</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-insomnia_002c-cure-for-1890">insomnia, cure for</a>: <a href="#Alarm-Program">Alarm Program</a></li>
<li><a href="#index-installation_002c-VMS-2131">installation, VMS</a>: <a href="#VMS-Installation">VMS Installation</a></li>
<li><a href="#index-installing-_0040command_007bgawk_007d-2092">installing <samp><span class="command">gawk</span></samp></a>: <a href="#Installation">Installation</a></li>
<li><a href="#index-g_t_0040code_007bINT_007d-signal-_0028MS_002dWindows_0029-1690"><code>INT</code> signal (MS-Windows)</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040code_007bint_0028_0029_007d-function-1348"><code>int()</code> function</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-integers-2312">integers</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-integers_002c-unsigned-2316">integers, unsigned</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-interacting-with-other-programs-1423">interacting with other programs</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-internal-constant_002c-_0040code_007bINVALID_005fHANDLE_007d-2281">internal constant, <code>INVALID_HANDLE</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bassoc_005fclear_0028_0029_007d-2236">internal function, <code>assoc_clear()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bassoc_005flookup_0028_0029_007d-2239">internal function, <code>assoc_lookup()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bdupnode_0028_0029_007d-2248">internal function, <code>dupnode()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bforce_005fnumber_0028_0029_007d-2211">internal function, <code>force_number()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bforce_005fstring_0028_0029_007d-2214">internal function, <code>force_string()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bforce_005fwstring_0028_0029_007d-2216">internal function, <code>force_wstring()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bget_005factual_005fargument_0028_0029_007d-2258">internal function, <code>get_actual_argument()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bget_005fargument_0028_0029_007d-2256">internal function, <code>get_argument()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bget_005fcurfunc_005farg_005fcount_0028_0029_007d-2218">internal function, <code>get_curfunc_arg_count()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007biop_005falloc_0028_0029_007d-2277">internal function, <code>iop_alloc()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bmake_005fbuiltin_0028_0029_007d-2253">internal function, <code>make_builtin()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bmake_005fnumber_0028_0029_007d-2245">internal function, <code>make_number()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bmake_005fstring_0028_0029_007d-2242">internal function, <code>make_string()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bregister_005fdeferred_005fvariable_0028_0029_007d-2273">internal function, <code>register_deferred_variable()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bregister_005fopen_005fhook_0028_0029_007d-2285">internal function, <code>register_open_hook()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bunref_0028_0029_007d-2251">internal function, <code>unref()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bupdate_005fERRNO_0028_0029_007d-2266">internal function, <code>update_ERRNO()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-function_002c-_0040code_007bupdate_005fERRNO_005fsaved_0028_0029_007d-2269">internal function, <code>update_ERRNO_saved()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-macro_002c-_0040code_007bget_005farray_005fargument_0028_0029_007d-2262">internal macro, <code>get_array_argument()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-macro_002c-_0040code_007bget_005fscalar_005fargument_0028_0029_007d-2260">internal macro, <code>get_scalar_argument()</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-structure_002c-_0040code_007bIOBUF_007d-2275">internal structure, <code>IOBUF</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-type_002c-_0040code_007bAWKNUM_007d-2205">internal type, <code>AWKNUM</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-type_002c-_0040code_007bNODE_007d-2207">internal type, <code>NODE</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-variable_002c-_0040code_007bnargs_007d-2221">internal variable, <code>nargs</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-variable_002c-_0040code_007bstlen_007d-2225">internal variable, <code>stlen</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-variable_002c-_0040code_007bstptr_007d-2223">internal variable, <code>stptr</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-variable_002c-_0040code_007btype_007d-2231">internal variable, <code>type</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-variable_002c-_0040code_007bvname_007d-2233">internal variable, <code>vname</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-variable_002c-_0040code_007bwstlen_007d-2229">internal variable, <code>wstlen</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internal-variable_002c-_0040code_007bwstptr_007d-2227">internal variable, <code>wstptr</code></a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-internationalization-1520">internationalization</a>: <a href="#I18N-and-L10N">I18N and L10N</a></li>
<li><a href="#index-internationalization-1478">internationalization</a>: <a href="#I18N-Functions">I18N Functions</a></li>
<li><a href="#index-internationalization_002c-localization-1517">internationalization, localization</a>: <a href="#Internationalization">Internationalization</a></li>
<li><a href="#index-internationalization_002c-localization-1232">internationalization, localization</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-internationalization_002c-localization_002c-character-classes-417">internationalization, localization, character classes</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-internationalization_002c-localization_002c-_0040command_007bgawk_007d-and-1519">internationalization, localization, <samp><span class="command">gawk</span></samp> and</a>: <a href="#Internationalization">Internationalization</a></li>
<li><a href="#index-internationalization_002c-localization_002c-locale-categories-1547">internationalization, localization, locale categories</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-internationalization_002c-localization_002c-marked-strings-1565">internationalization, localization, marked strings</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-internationalization_002c-localization_002c-portability-and-1598">internationalization, localization, portability and</a>: <a href="#I18N-Portability">I18N Portability</a></li>
<li><a href="#index-internationalizing-a-program-1523">internationalizing a program</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-interpreted-programs-2352">interpreted programs</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-interpreted-programs-2301">interpreted programs</a>: <a href="#Basic-High-Level">Basic High Level</a></li>
<li><a href="#index-interval-expressions-389">interval expressions</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007bINVALID_005fHANDLE_007d-internal-constant-2280"><code>INVALID_HANDLE</code> internal constant</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007binventory_002dshipped_007d-file-143"><code>inventory-shipped</code> file</a>: <a href="#Sample-Data-Files">Sample Data Files</a></li>
<li><a href="#index-g_t_0040code_007bIOBUF_007d-internal-structure-2274"><code>IOBUF</code> internal structure</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007biop_005falloc_0028_0029_007d-internal-function-2276"><code>iop_alloc()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bisarray_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1475"><code>isarray()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Type-Functions">Type Functions</a></li>
<li><a href="#index-ISO-2353">ISO</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-ISO-8859_002d1-2335">ISO 8859-1</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-ISO-Latin_002d1-2336">ISO Latin-1</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-Jacobs_002c-Andrew-1800">Jacobs, Andrew</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-Jaegermann_002c-Michal-2070">Jaegermann, Michal</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Jaegermann_002c-Michal-64">Jaegermann, Michal</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Java-implementation-of-_0040command_007bawk_007d-2170">Java implementation of <samp><span class="command">awk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-Java-programming-language-2354">Java programming language</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-g_t_0040command_007bjawk_007d-2169"><samp><span class="command">jawk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-Jedi-knights-303">Jedi knights</a>: <a href="#Undocumented">Undocumented</a></li>
<li><a href="#index-g_t_0040code_007bjoin_0028_0029_007d-user_002ddefined-function-1754"><code>join()</code> user-defined function</a>: <a href="#Join-Function">Join Function</a></li>
<li><a href="#index-Kahrs_002c-J_0040_0022urgen-2077">Kahrs, J&uuml;rgen</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Kahrs_002c-J_0040_0022urgen-65">Kahrs, J&uuml;rgen</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Kasal_002c-Stepan-66">Kasal, Stepan</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Kenobi_002c-Obi_002dWan-302">Kenobi, Obi-Wan</a>: <a href="#Undocumented">Undocumented</a></li>
<li><a href="#index-Kernighan_002c-Brian-2320">Kernighan, Brian</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-Kernighan_002c-Brian-2150">Kernighan, Brian</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-Kernighan_002c-Brian-2057">Kernighan, Brian</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Kernighan_002c-Brian-2050">Kernighan, Brian</a>: <a href="#BTL">BTL</a></li>
<li><a href="#index-Kernighan_002c-Brian-836">Kernighan, Brian</a>: <a href="#Concatenation">Concatenation</a></li>
<li><a href="#index-Kernighan_002c-Brian-73">Kernighan, Brian</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Kernighan_002c-Brian-29">Kernighan, Brian</a>: <a href="#Conventions">Conventions</a></li>
<li><a href="#index-Kernighan_002c-Brian-15">Kernighan, Brian</a>: <a href="#History">History</a></li>
<li><a href="#index-g_t_0040command_007bkill_007d-command_0040comma_007b_007d-dynamic-profiling-1683"><samp><span class="command">kill</span></samp> command, dynamic profiling</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-Knights_002c-jedi-304">Knights, jedi</a>: <a href="#Undocumented">Undocumented</a></li>
<li><a href="#index-Kwok_002c-Conrad-2064">Kwok, Conrad</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-g_t_0040code_007bl_007d-debugger-command-_0028alias-for-_0040code_007blist_007d_0029-2035"><code>l</code> debugger command (alias for <code>list</code>)</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-g_t_0040code_007blabels_002eawk_007d-program-1901"><code>labels.awk</code> program</a>: <a href="#Labels-Program">Labels Program</a></li>
<li><a href="#index-languages_0040comma_007b_007d-data_002ddriven-2307">languages, data-driven</a>: <a href="#Basic-High-Level">Basic High Level</a></li>
<li><a href="#index-g_t_0040code_007bLC_005fALL_007d-locale-category-1562"><code>LC_ALL</code> locale category</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bLC_005fCOLLATE_007d-locale-category-1552"><code>LC_COLLATE</code> locale category</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bLC_005fCTYPE_007d-locale-category-1553"><code>LC_CTYPE</code> locale category</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bLC_005fMESSAGES_007d-locale-category-1550"><code>LC_MESSAGES</code> locale category</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bLC_005fMESSAGES_007d-locale-category_002c-_0040code_007bbindtextdomain_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1578"><code>LC_MESSAGES</code> locale category, <code>bindtextdomain()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040code_007bLC_005fMONETARY_007d-locale-category-1556"><code>LC_MONETARY</code> locale category</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bLC_005fNUMERIC_007d-locale-category-1557"><code>LC_NUMERIC</code> locale category</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bLC_005fRESPONSE_007d-locale-category-1558"><code>LC_RESPONSE</code> locale category</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040code_007bLC_005fTIME_007d-locale-category-1561"><code>LC_TIME</code> locale category</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_007d-operator-1014">left angle bracket (<code>&lt;</code>), <code>&lt;</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_007d-operator-925">left angle bracket (<code>&lt;</code>), <code>&lt;</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_007d-operator-_0028I_002fO_0029-624">left angle bracket (<code>&lt;</code>), <code>&lt;</code> operator (I/O)</a>: <a href="#Getline_002fFile">Getline/File</a></li>
<li><a href="#index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_003d_007d-operator-1016">left angle bracket (<code>&lt;</code>), <code>&lt;=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-left-angle-bracket-_0028_0040code_007b_003c_007d_0029_002c-_0040code_007b_003c_003d_007d-operator-927">left angle bracket (<code>&lt;</code>), <code>&lt;=</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-left-shift_002c-bitwise-1459">left shift, bitwise</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-leftmost-longest-match-607">leftmost longest match</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-g_t_0040code_007blength_0028_0029_007d-function-1366"><code>length()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-Lesser-General-Public-License-_0028LGPL_0029-2357">Lesser General Public License (LGPL)</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-LGPL-_0028Lesser-General-Public-License_0029-2356">LGPL (Lesser General Public License)</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-libmawk-2172">libmawk</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions-1696">libraries of <samp><span class="command">awk</span></samp> functions</a>: <a href="#Library-Functions">Library Functions</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-assertions-1721">libraries of <samp><span class="command">awk</span></samp> functions, assertions</a>: <a href="#Assert-Function">Assert Function</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-associative-arrays-and-1716">libraries of <samp><span class="command">awk</span></samp> functions, associative arrays and</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-character-values-as-numbers-1740">libraries of <samp><span class="command">awk</span></samp> functions, character values as numbers</a>: <a href="#Ordinal-Functions">Ordinal Functions</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-command_002dline-options-1778">libraries of <samp><span class="command">awk</span></samp> functions, command-line options</a>: <a href="#Getopt-Function">Getopt Function</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-example-program-for-using-1916">libraries of <samp><span class="command">awk</span></samp> functions, example program for using</a>: <a href="#Igawk-Program">Igawk Program</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-group-database_002c-reading-1815">libraries of <samp><span class="command">awk</span></samp> functions, group database, reading</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-managing_002c-_0040value_007bDF_007ds-1761">libraries of <samp><span class="command">awk</span></samp> functions, managing, data files</a>: <a href="#Data-File-Management">Data File Management</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-managing_002c-time-1755">libraries of <samp><span class="command">awk</span></samp> functions, managing, time</a>: <a href="#Gettimeofday-Function">Gettimeofday Function</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-merging-arrays-into-strings-1750">libraries of <samp><span class="command">awk</span></samp> functions, merging arrays into strings</a>: <a href="#Join-Function">Join Function</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-rounding-numbers-1729">libraries of <samp><span class="command">awk</span></samp> functions, rounding numbers</a>: <a href="#Round-Function">Round Function</a></li>
<li><a href="#index-libraries-of-_0040command_007bawk_007d-functions_002c-user-database_002c-reading-1787">libraries of <samp><span class="command">awk</span></samp> functions, user database, reading</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-line-breaks-153">line breaks</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-line-continuations-966">line continuations</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-line-continuations_002c-_0040command_007bgawk_007d-978">line continuations, <samp><span class="command">gawk</span></samp></a>: <a href="#Conditional-Exp">Conditional Exp</a></li>
<li><a href="#index-line-continuations_002c-in-_0040code_007bprint_007d-statement-675">line continuations, in <code>print</code> statement</a>: <a href="#Print-Examples">Print Examples</a></li>
<li><a href="#index-line-continuations_002c-with-C-shell-151">line continuations, with C shell</a>: <a href="#More-Complex">More Complex</a></li>
<li><a href="#index-lines_002c-blank_002c-printing-666">lines, blank, printing</a>: <a href="#Print">Print</a></li>
<li><a href="#index-lines_002c-counting-1882">lines, counting</a>: <a href="#Wc-Program">Wc Program</a></li>
<li><a href="#index-lines_002c-duplicate_0040comma_007b_007d-removing-1905">lines, duplicate, removing</a>: <a href="#History-Sorting">History Sorting</a></li>
<li><a href="#index-lines_002c-matching-ranges-of-1086">lines, matching ranges of</a>: <a href="#Ranges">Ranges</a></li>
<li><a href="#index-lines_002c-skipping-between-markers-1090">lines, skipping between markers</a>: <a href="#Ranges">Ranges</a></li>
<li><a href="#index-lint-checking-1213">lint checking</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-lint-checking_002c-array-elements-1309">lint checking, array elements</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-lint-checking_002c-array-subscripts-1329">lint checking, array subscripts</a>: <a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></li>
<li><a href="#index-lint-checking_002c-empty-programs-179">lint checking, empty programs</a>: <a href="#Command-Line">Command Line</a></li>
<li><a href="#index-lint-checking_002c-issuing-warnings-234">lint checking, issuing warnings</a>: <a href="#Options">Options</a></li>
<li><a href="#index-lint-checking_002c-_0040env_007bPOSIXLY_005fCORRECT_007d-environment-variable-276">lint checking, <samp><span class="env">POSIXLY_CORRECT</span></samp> environment variable</a>: <a href="#Options">Options</a></li>
<li><a href="#index-lint-checking_002c-undefined-functions-1508">lint checking, undefined functions</a>: <a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></li>
<li><a href="#index-g_t_0040code_007bLINT_007d-variable-1211"><code>LINT</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-Linux-2361">Linux</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-Linux-1603">Linux</a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-Linux-39">Linux</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-g_t_0040code_007blist_007d-debugger-command-2034"><code>list</code> debugger command</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-local-variables-1500">local variables</a>: <a href="#Variable-Scope">Variable Scope</a></li>
<li><a href="#index-locale-categories-1549">locale categories</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-locale-decimal-point-character-255">locale decimal point character</a>: <a href="#Options">Options</a></li>
<li><a href="#index-locale_002c-definition-of-1063">locale, definition of</a>: <a href="#Locales">Locales</a></li>
<li><a href="#index-localization-1522">localization</a>: <a href="#I18N-and-L10N">I18N and L10N</a></li>
<li><a href="#index-localization_002c-See-internationalization_0040comma_007b_007d-localization-1521">localization, See internationalization, localization</a>: <a href="#I18N-and-L10N">I18N and L10N</a></li>
<li><a href="#index-log-files_002c-timestamps-in-1433">log files, timestamps in</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-g_t_0040code_007blog_0028_0029_007d-function-1349"><code>log()</code> function</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-logical-false_002ftrue-908">logical false/true</a>: <a href="#Truth-Values">Truth Values</a></li>
<li><a href="#index-logical-operators_002c-See-Boolean-expressions-957">logical operators, See Boolean expressions</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-login-information-1795">login information</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-long-options-176">long options</a>: <a href="#Command-Line">Command Line</a></li>
<li><a href="#index-loops-1139">loops</a>: <a href="#While-Statement">While Statement</a></li>
<li><a href="#index-loops_002c-_0040code_007bcontinue_007d-statements-and-1144">loops, <code>continue</code> statements and</a>: <a href="#For-Statement">For Statement</a></li>
<li><a href="#index-loops_002c-count-for-header-1674">loops, count for header</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-loops_002c-exiting-1150">loops, exiting</a>: <a href="#Break-Statement">Break Statement</a></li>
<li><a href="#index-loops_002c-See-Also-_0040code_007bwhile_007d-statement-1140">loops, See Also <code>while</code> statement</a>: <a href="#While-Statement">While Statement</a></li>
<li><a href="#index-Lost-In-Space-2196">Lost In Space</a>: <a href="#Dynamic-Extensions">Dynamic Extensions</a></li>
<li><a href="#index-g_t_0040command_007bls_007d-utility-150"><samp><span class="command">ls</span></samp> utility</a>: <a href="#More-Complex">More Complex</a></li>
<li><a href="#index-g_t_0040code_007blshift_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1465"><code>lshift()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-lvalues_002frvalues-850">lvalues/rvalues</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-mailing-labels_0040comma_007b_007d-printing-1900">mailing labels, printing</a>: <a href="#Labels-Program">Labels Program</a></li>
<li><a href="#index-mailing-list_002c-GNITS-55">mailing list, GNITS</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-g_t_0040code_007bmake_005fbuiltin_0028_0029_007d-internal-function-2252"><code>make_builtin()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bmake_005fnumber_0028_0029_007d-internal-function-2244"><code>make_number()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bmake_005fstring_0028_0029_007d-internal-function-2241"><code>make_string()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-mark-parity-1749">mark parity</a>: <a href="#Ordinal-Functions">Ordinal Functions</a></li>
<li><a href="#index-marked-string-extraction-_0028internationalization_0029-1588">marked string extraction (internationalization)</a>: <a href="#String-Extraction">String Extraction</a></li>
<li><a href="#index-marked-strings_0040comma_007b_007d-extracting-1584">marked strings, extracting</a>: <a href="#String-Extraction">String Extraction</a></li>
<li><a href="#index-Marx_002c-Groucho-905">Marx, Groucho</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-g_t_0040code_007bmatch_0028_0029_007d-function-1373"><code>match()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bmatch_0028_0029_007d-function_002c-_0040code_007bRSTART_007d_002f_0040code_007bRLENGTH_007d-variables-1376"><code>match()</code> function, <code>RSTART</code>/<code>RLENGTH</code> variables</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-matching_002c-expressions_002c-See-comparison-expressions-916">matching, expressions, See comparison expressions</a>: <a href="#Typing-and-Comparison">Typing and Comparison</a></li>
<li><a href="#index-matching_002c-leftmost-longest-608">matching, leftmost longest</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-matching_002c-null-strings-1409">matching, null strings</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-g_t_0040command_007bmawk_007d-program-2156"><samp><span class="command">mawk</span></samp> program</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-McPhee_002c-Patrick-2086">McPhee, Patrick</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-memory_002c-releasing-2249">memory, releasing</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-message-object-files-1537">message object files</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-message-object-files_002c-converting-from-portable-object-files-1611">message object files, converting from portable object files</a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-message-object-files_002c-specifying-directory-of-1571">message object files, specifying directory of</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-message-object-files_002c-specifying-directory-of-1542">message object files, specifying directory of</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-metacharacters_002c-escape-sequences-for-359">metacharacters, escape sequences for</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-g_t_0040code_007bmktime_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1439"><code>mktime()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-modifiers_0040comma_007b_007d-in-format-specifiers-702">modifiers, in format specifiers</a>: <a href="#Format-Modifiers">Format Modifiers</a></li>
<li><a href="#index-monetary-information_002c-localization-1554">monetary information, localization</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-g_t_0040command_007bmsgfmt_007d-utility-1613"><samp><span class="command">msgfmt</span></samp> utility</a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-g_t_0040code_007bn_007d-debugger-command-_0028alias-for-_0040code_007bnext_007d_0029-1963"><code>n</code> debugger command (alias for <code>next</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-names_002c-arrays_002fvariables-1703">names, arrays/variables</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-names_002c-arrays_002fvariables-1277">names, arrays/variables</a>: <a href="#Arrays">Arrays</a></li>
<li><a href="#index-names_002c-functions-1704">names, functions</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-names_002c-functions-1486">names, functions</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-namespace-issues-1705">namespace issues</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-namespace-issues-1278">namespace issues</a>: <a href="#Arrays">Arrays</a></li>
<li><a href="#index-namespace-issues_002c-functions-1488">namespace issues, functions</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-g_t_0040code_007bnargs_007d-internal-variable-2220"><code>nargs</code> internal variable</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040command_007bnawk_007d-utility-22"><samp><span class="command">nawk</span></samp> utility</a>: <a href="#Names">Names</a></li>
<li><a href="#index-negative-zero-2323">negative zero</a>: <a href="#Unexpected-Results">Unexpected Results</a></li>
<li><a href="#index-NetBSD-2365">NetBSD</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-networks_002c-programming-1651">networks, programming</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-networks_002c-support-for-754">networks, support for</a>: <a href="#Special-Network">Special Network</a></li>
<li><a href="#index-newlines-969">newlines</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-newlines-252">newlines</a>: <a href="#Options">Options</a></li>
<li><a href="#index-newlines-154">newlines</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-newlines_002c-as-field-separators-558">newlines, as field separators</a>: <a href="#Default-Field-Splitting">Default Field Splitting</a></li>
<li><a href="#index-newlines_002c-as-record-separators-499">newlines, as record separators</a>: <a href="#Records">Records</a></li>
<li><a href="#index-newlines_002c-in-dynamic-regexps-485">newlines, in dynamic regexps</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-newlines_002c-in-regexp-constants-486">newlines, in regexp constants</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-newlines_002c-printing-668">newlines, printing</a>: <a href="#Print-Examples">Print Examples</a></li>
<li><a href="#index-newlines_002c-separating-statements-in-actions-1134">newlines, separating statements in actions</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-newlines_002c-separating-statements-in-actions-1122">newlines, separating statements in actions</a>: <a href="#Action-Overview">Action Overview</a></li>
<li><a href="#index-g_t_0040code_007bnext_007d-debugger-command-1962"><code>next</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-g_t_0040code_007bnext_007d-statement-1158"><code>next</code> statement</a>: <a href="#Next-Statement">Next Statement</a></li>
<li><a href="#index-g_t_0040code_007bnext_007d-statement-972"><code>next</code> statement</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-g_t_0040code_007bnext_007d-statement_002c-_0040code_007bBEGIN_007d_002f_0040code_007bEND_007d-patterns-and-1102"><code>next</code> statement, <code>BEGIN</code>/<code>END</code> patterns and</a>: <a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bnext_007d-statement_002c-_0040code_007bBEGINFILE_007d_002f_0040code_007bENDFILE_007d-patterns-and-1111"><code>next</code> statement, <code>BEGINFILE</code>/<code>ENDFILE</code> patterns and</a>: <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></li>
<li><a href="#index-g_t_0040code_007bnext_007d-statement_002c-user_002ddefined-functions-and-1163"><code>next</code> statement, user-defined functions and</a>: <a href="#Next-Statement">Next Statement</a></li>
<li><a href="#index-g_t_0040code_007bnextfile_007d-statement-1165"><code>nextfile</code> statement</a>: <a href="#Nextfile-Statement">Nextfile Statement</a></li>
<li><a href="#index-g_t_0040code_007bnextfile_007d-statement_002c-_0040code_007bBEGIN_007d_002f_0040code_007bEND_007d-patterns-and-1103"><code>nextfile</code> statement, <code>BEGIN</code>/<code>END</code> patterns and</a>: <a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bnextfile_007d-statement_002c-_0040code_007bBEGINFILE_007d_002f_0040code_007bENDFILE_007d-patterns-and-1110"><code>nextfile</code> statement, <code>BEGINFILE</code>/<code>ENDFILE</code> patterns and</a>: <a href="#BEGINFILE_002fENDFILE">BEGINFILE/ENDFILE</a></li>
<li><a href="#index-g_t_0040code_007bnextfile_007d-statement_002c-user_002ddefined-functions-and-1170"><code>nextfile</code> statement, user-defined functions and</a>: <a href="#Nextfile-Statement">Nextfile Statement</a></li>
<li><a href="#index-g_t_0040code_007bnexti_007d-debugger-command-1966"><code>nexti</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-g_t_0040code_007bNF_007d-variable-1253"><code>NF</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bNF_007d-variable-535"><code>NF</code> variable</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-g_t_0040code_007bNF_007d-variable_002c-decrementing-546"><code>NF</code> variable, decrementing</a>: <a href="#Changing-Fields">Changing Fields</a></li>
<li><a href="#index-g_t_0040code_007bni_007d-debugger-command-_0028alias-for-_0040code_007bnexti_007d_0029-1967"><code>ni</code> debugger command (alias for <code>nexti</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-g_t_0040code_007bnoassign_002eawk_007d-program-1777"><code>noassign.awk</code> program</a>: <a href="#Ignoring-Assigns">Ignoring Assigns</a></li>
<li><a href="#index-g_t_0040code_007bNODE_007d-internal-type-2206"><code>NODE</code> internal type</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-nodes_0040comma_007b_007d-duplicating-2246">nodes, duplicating</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-not-Boolean_002dlogic-operator-952">not Boolean-logic operator</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-g_t_0040code_007bNR_007d-variable-1254"><code>NR</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bNR_007d-variable-495"><code>NR</code> variable</a>: <a href="#Records">Records</a></li>
<li><a href="#index-g_t_0040code_007bNR_007d-variable_002c-changing-1265"><code>NR</code> variable, changing</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-null-strings-2319">null strings</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-null-strings-911">null strings</a>: <a href="#Truth-Values">Truth Values</a></li>
<li><a href="#index-null-strings-562">null strings</a>: <a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></li>
<li><a href="#index-null-strings-505">null strings</a>: <a href="#Records">Records</a></li>
<li><a href="#index-null-strings_002c-array-elements-and-1308">null strings, array elements and</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-null-strings_002c-as-array-subscripts-1327">null strings, as array subscripts</a>: <a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></li>
<li><a href="#index-null-strings_002c-converting-numbers-to-strings-816">null strings, converting numbers to strings</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-null-strings_002c-matching-1410">null strings, matching</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-null-strings_002c-quoting-and-139">null strings, quoting and</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-number-sign-_0028_0040code_007b_0023_007d_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029-112">number sign (<code>#</code>), <code>#!</code> (executable scripts)</a>: <a href="#Executable-Scripts">Executable Scripts</a></li>
<li><a href="#index-number-sign-_0028_0040code_007b_0023_007d_0029_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029_002c-portability-issues-with-115">number sign (<code>#</code>), <code>#!</code> (executable scripts), portability issues with</a>: <a href="#Executable-Scripts">Executable Scripts</a></li>
<li><a href="#index-number-sign-_0028_0040code_007b_0023_007d_0029_002c-commenting-120">number sign (<code>#</code>), commenting</a>: <a href="#Comments">Comments</a></li>
<li><a href="#index-numbers-2243">numbers</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-numbers_002c-as-array-subscripts-1318">numbers, as array subscripts</a>: <a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></li>
<li><a href="#index-numbers_002c-as-values-of-characters-1743">numbers, as values of characters</a>: <a href="#Ordinal-Functions">Ordinal Functions</a></li>
<li><a href="#index-numbers_002c-Cliff-random-1737">numbers, Cliff random</a>: <a href="#Cliff-Random-Function">Cliff Random Function</a></li>
<li><a href="#index-numbers_002c-converting-1473">numbers, converting</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-numbers_002c-converting-814">numbers, converting</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-numbers_002c-converting_002c-to-strings-1187">numbers, converting, to strings</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-numbers_002c-floating_002dpoint-2314">numbers, floating-point</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-numbers_002c-floating_002dpoint_002c-_0040code_007bAWKNUM_007d-internal-type-2203">numbers, floating-point, <code>AWKNUM</code> internal type</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-numbers_002c-hexadecimal-785">numbers, hexadecimal</a>: <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></li>
<li><a href="#index-numbers_002c-_0040code_007bNODE_007d-internal-type-2209">numbers, <code>NODE</code> internal type</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-numbers_002c-octal-784">numbers, octal</a>: <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></li>
<li><a href="#index-numbers_002c-random-1352">numbers, random</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-numbers_002c-rounding-1728">numbers, rounding</a>: <a href="#Round-Function">Round Function</a></li>
<li><a href="#index-numeric_002c-constants-778">numeric, constants</a>: <a href="#Scalar-Constants">Scalar Constants</a></li>
<li><a href="#index-numeric_002c-output-format-682">numeric, output format</a>: <a href="#OFMT">OFMT</a></li>
<li><a href="#index-numeric_002c-strings-921">numeric, strings</a>: <a href="#Variable-Typing">Variable Typing</a></li>
<li><a href="#index-numeric_002c-values-2212">numeric, values</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bo_007d-debugger-command-_0028alias-for-_0040code_007boption_007d_0029-2025"><code>o</code> debugger command (alias for <code>option</code>)</a>: <a href="#Dgawk-Info">Dgawk Info</a></li>
<li><a href="#index-g_t_0040command_007boawk_007d-utility-23"><samp><span class="command">oawk</span></samp> utility</a>: <a href="#Names">Names</a></li>
<li><a href="#index-obsolete-features-297">obsolete features</a>: <a href="#Obsolete">Obsolete</a></li>
<li><a href="#index-octal-numbers-782">octal numbers</a>: <a href="#Nondecimal_002dnumbers">Nondecimal-numbers</a></li>
<li><a href="#index-octal-values_0040comma_007b_007d-enabling-interpretation-of-239">octal values, enabling interpretation of</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007bOFMT_007d-variable-1214"><code>OFMT</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bOFMT_007d-variable-821"><code>OFMT</code> variable</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-g_t_0040code_007bOFMT_007d-variable-685"><code>OFMT</code> variable</a>: <a href="#OFMT">OFMT</a></li>
<li><a href="#index-g_t_0040code_007bOFMT_007d-variable_002c-POSIX-_0040command_007bawk_007d-and-689"><code>OFMT</code> variable, POSIX <samp><span class="command">awk</span></samp> and</a>: <a href="#OFMT">OFMT</a></li>
<li><a href="#index-g_t_0040code_007bOFS_007d-variable-1219"><code>OFS</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bOFS_007d-variable-677"><code>OFS</code> variable</a>: <a href="#Output-Separators">Output Separators</a></li>
<li><a href="#index-g_t_0040code_007bOFS_007d-variable-542"><code>OFS</code> variable</a>: <a href="#Changing-Fields">Changing Fields</a></li>
<li><a href="#index-OpenBSD-2367">OpenBSD</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-OpenSolaris-2166">OpenSolaris</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-operating-systems_002c-BSD_002dbased-41">operating systems, BSD-based</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-operating-systems_002c-PC_002c-_0040command_007bgawk_007d-on-2114">operating systems, PC, <samp><span class="command">gawk</span></samp> on</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-operating-systems_002c-PC_0040comma_007b_007d-_0040command_007bgawk_007d-on_002c-installing-2111">operating systems, PC, <samp><span class="command">gawk</span></samp> on, installing</a>: <a href="#PC-Installation">PC Installation</a></li>
<li><a href="#index-operating-systems_002c-porting-_0040command_007bgawk_007d-to-2192">operating systems, porting <samp><span class="command">gawk</span></samp> to</a>: <a href="#New-Ports">New Ports</a></li>
<li><a href="#index-operating-systems_002c-See-Also-GNU_002fLinux_002c-PC-operating-systems_002c-Unix-2090">operating systems, See Also GNU/Linux, PC operating systems, Unix</a>: <a href="#Installation">Installation</a></li>
<li><a href="#index-operations_002c-bitwise-1455">operations, bitwise</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-operators_002c-arithmetic-825">operators, arithmetic</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-operators_002c-assignment-845">operators, assignment</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-operators_002c-assignment_002c-evaluation-order-858">operators, assignment, evaluation order</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-operators_002c-Boolean_002c-See-Boolean-expressions-955">operators, Boolean, See Boolean expressions</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-operators_002c-decrement_002fincrement-888">operators, decrement/increment</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-operators_002c-GNU_002dspecific-422">operators, GNU-specific</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-operators_002c-input_002foutput-1027">operators, input/output</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-operators_002c-input_002foutput-715">operators, input/output</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-operators_002c-input_002foutput-646">operators, input/output</a>: <a href="#Getline_002fCoprocess">Getline/Coprocess</a></li>
<li><a href="#index-operators_002c-input_002foutput-635">operators, input/output</a>: <a href="#Getline_002fPipe">Getline/Pipe</a></li>
<li><a href="#index-operators_002c-input_002foutput-625">operators, input/output</a>: <a href="#Getline_002fFile">Getline/File</a></li>
<li><a href="#index-operators_002c-logical_002c-See-Boolean-expressions-958">operators, logical, See Boolean expressions</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-operators_002c-precedence-986">operators, precedence</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-operators_002c-precedence-902">operators, precedence</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-operators_002c-relational_002c-See-operators_0040comma_007b_007d-comparison-918">operators, relational, See operators, comparison</a>: <a href="#Typing-and-Comparison">Typing and Comparison</a></li>
<li><a href="#index-operators_002c-short_002dcircuit-961">operators, short-circuit</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-operators_002c-string-838">operators, string</a>: <a href="#Concatenation">Concatenation</a></li>
<li><a href="#index-operators_002c-string_002dmatching-311">operators, string-matching</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-operators_002c-string_002dmatching_002c-for-buffers-444">operators, string-matching, for buffers</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-operators_002c-word_002dboundary-_0028_0040command_007bgawk_007d_0029-455">operators, word-boundary (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007boption_007d-debugger-command-2024"><code>option</code> debugger command</a>: <a href="#Dgawk-Info">Dgawk Info</a></li>
<li><a href="#index-options_002c-command_002dline-576">options, command-line</a>: <a href="#Command-Line-Field-Separator">Command Line Field Separator</a></li>
<li><a href="#index-options_002c-command_002dline-181">options, command-line</a>: <a href="#Options">Options</a></li>
<li><a href="#index-options_002c-command_002dline-106">options, command-line</a>: <a href="#Long">Long</a></li>
<li><a href="#index-options_002c-command_002dline_002c-end-of-199">options, command-line, end of</a>: <a href="#Options">Options</a></li>
<li><a href="#index-options_002c-command_002dline_002c-invoking-_0040command_007bawk_007d-174">options, command-line, invoking <samp><span class="command">awk</span></samp></a>: <a href="#Command-Line">Command Line</a></li>
<li><a href="#index-options_002c-command_002dline_002c-processing-1781">options, command-line, processing</a>: <a href="#Getopt-Function">Getopt Function</a></li>
<li><a href="#index-options_002c-deprecated-295">options, deprecated</a>: <a href="#Obsolete">Obsolete</a></li>
<li><a href="#index-options_002c-long-184">options, long</a>: <a href="#Options">Options</a></li>
<li><a href="#index-options_002c-long-177">options, long</a>: <a href="#Command-Line">Command Line</a></li>
<li><a href="#index-options_002c-printing-list-of-230">options, printing list of</a>: <a href="#Options">Options</a></li>
<li><a href="#index-OR-bitwise-operation-1453">OR bitwise operation</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-or-Boolean_002dlogic-operator-951">or Boolean-logic operator</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-g_t_0040code_007bor_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1466"><code>or()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-g_t_0040code_007bord_0028_0029_007d-user_002ddefined-function-1744"><code>ord()</code> user-defined function</a>: <a href="#Ordinal-Functions">Ordinal Functions</a></li>
<li><a href="#index-order-of-evaluation_002c-concatenation-841">order of evaluation, concatenation</a>: <a href="#Concatenation">Concatenation</a></li>
<li><a href="#index-g_t_0040code_007bORS_007d-variable-1222"><code>ORS</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bORS_007d-variable-680"><code>ORS</code> variable</a>: <a href="#Output-Separators">Output Separators</a></li>
<li><a href="#index-output-field-separator_002c-See-_0040code_007bOFS_007d-variable-543">output field separator, See <code>OFS</code> variable</a>: <a href="#Changing-Fields">Changing Fields</a></li>
<li><a href="#index-output-record-separator_002c-See-_0040code_007bORS_007d-variable-679">output record separator, See <code>ORS</code> variable</a>: <a href="#Output-Separators">Output Separators</a></li>
<li><a href="#index-output-redirection-708">output redirection</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-output_002c-buffering-1420">output, buffering</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-output_002c-duplicating-into-files-1870">output, duplicating into files</a>: <a href="#Tee-Program">Tee Program</a></li>
<li><a href="#index-output_002c-files_0040comma_007b_007d-closing-760">output, files, closing</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-output_002c-format-specifier_0040comma_007b_007d-_0040code_007bOFMT_007d-686">output, format specifier, <code>OFMT</code></a>: <a href="#OFMT">OFMT</a></li>
<li><a href="#index-output_002c-formatted-691">output, formatted</a>: <a href="#Printf">Printf</a></li>
<li><a href="#index-output_002c-pipes-720">output, pipes</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-output_002c-printing_002c-See-printing-662">output, printing, See printing</a>: <a href="#Printing">Printing</a></li>
<li><a href="#index-output_002c-records-678">output, records</a>: <a href="#Output-Separators">Output Separators</a></li>
<li><a href="#index-output_002c-standard-736">output, standard</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-g_t_0040code_007bp_007d-debugger-command-_0028alias-for-_0040code_007bprint_007d_0029-1993"><code>p</code> debugger command (alias for <code>print</code>)</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-P1003_002e1-POSIX-standard-2359">P1003.1 POSIX standard</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-P1003_002e2-POSIX-standard-2360">P1003.2 POSIX standard</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-parameters_0040comma_007b_007d-number-of-2219">parameters, number of</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-parentheses-_0040code_007b_0028_0029_007d-382">parentheses <code>()</code></a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-parentheses-_0040code_007b_0028_0029_007d_002c-_0040command_007bpgawk_007d-program-1680">parentheses <code>()</code>, <samp><span class="command">pgawk</span></samp> program</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-password-file-1797">password file</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bpatsplit_0028_0029_007d-function-1379"><code>patsplit()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-patterns-1064">patterns</a>: <a href="#Patterns-and-Actions">Patterns and Actions</a></li>
<li><a href="#index-patterns_002c-comparison-expressions-as-1070">patterns, comparison expressions as</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-patterns_002c-counts-1673">patterns, counts</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-patterns_002c-default-145">patterns, default</a>: <a href="#Very-Simple">Very Simple</a></li>
<li><a href="#index-patterns_002c-empty-1114">patterns, empty</a>: <a href="#Empty">Empty</a></li>
<li><a href="#index-patterns_002c-expressions-as-1066">patterns, expressions as</a>: <a href="#Regexp-Patterns">Regexp Patterns</a></li>
<li><a href="#index-patterns_002c-ranges-in-1085">patterns, ranges in</a>: <a href="#Ranges">Ranges</a></li>
<li><a href="#index-patterns_002c-regexp-constants-as-1078">patterns, regexp constants as</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-patterns_002c-types-of-1065">patterns, types of</a>: <a href="#Pattern-Overview">Pattern Overview</a></li>
<li><a href="#index-g_t_0040command_007bpawk_007d-_0028profiling-version-of-Brian-Kernighan_0027s-_0040command_007bawk_007d_0029-2162"><samp><span class="command">pawk</span></samp> (profiling version of Brian Kernighan's <samp><span class="command">awk</span></samp>)</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-PC-operating-systems_002c-_0040command_007bgawk_007d-on-2115">PC operating systems, <samp><span class="command">gawk</span></samp> on</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-PC-operating-systems_0040comma_007b_007d-_0040command_007bgawk_007d-on_002c-installing-2110">PC operating systems, <samp><span class="command">gawk</span></samp> on, installing</a>: <a href="#PC-Installation">PC Installation</a></li>
<li><a href="#index-percent-sign-_0028_0040code_007b_0025_007d_0029_002c-_0040code_007b_0025_007d-operator-1008">percent sign (<code>%</code>), <code>%</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-percent-sign-_0028_0040code_007b_0025_007d_0029_002c-_0040code_007b_0025_003d_007d-operator-1058">percent sign (<code>%</code>), <code>%=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-percent-sign-_0028_0040code_007b_0025_007d_0029_002c-_0040code_007b_0025_003d_007d-operator-867">percent sign (<code>%</code>), <code>%=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-period-_0028_0040code_007b_002e_007d_0029-371">period (<code>.</code>)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-Perl-2294">Perl</a>: <a href="#Future-Extensions">Future Extensions</a></li>
<li><a href="#index-Peters_002c-Arno-2081">Peters, Arno</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Peterson_002c-Hal-2068">Peterson, Hal</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-g_t_0040command_007bpgawk_007d-program-1665"><samp><span class="command">pgawk</span></samp> program</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040command_007bpgawk_007d-program_002c-_0040code_007bawkprof_002eout_007d-file-1669"><samp><span class="command">pgawk</span></samp> program, <code>awkprof.out</code> file</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040command_007bpgawk_007d-program_002c-dynamic-profiling-1682"><samp><span class="command">pgawk</span></samp> program, dynamic profiling</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-pipes_002c-closing-761">pipes, closing</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-pipes_002c-input-634">pipes, input</a>: <a href="#Getline_002fPipe">Getline/Pipe</a></li>
<li><a href="#index-pipes_002c-output-719">pipes, output</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-Pitts_002c-Dave-2147">Pitts, Dave</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-Pitts_002c-Dave-67">Pitts, Dave</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-plus-sign-_0028_0040code_007b_002b_007d_0029-386">plus sign (<code>+</code>)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_007d-operator-998">plus sign (<code>+</code>), <code>+</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_002b_007d-_0028decrement_002fincrement-operators_0029-891">plus sign (<code>+</code>), <code>++</code> (decrement/increment operators)</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_002b_007d-operator-990">plus sign (<code>+</code>), <code>++</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_002b_007d-operator-897">plus sign (<code>+</code>), <code>++</code> operator</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_003d_007d-operator-1048">plus sign (<code>+</code>), <code>+=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-plus-sign-_0028_0040code_007b_002b_007d_0029_002c-_0040code_007b_002b_003d_007d-operator-856">plus sign (<code>+</code>), <code>+=</code> operator</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-pointers-to-functions-1515">pointers to functions</a>: <a href="#Indirect-Calls">Indirect Calls</a></li>
<li><a href="#index-portability-351">portability</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-portability_002c-_0040code_007b_0023_0021_007d-_0028executable-scripts_0029-116">portability, <code>#!</code> (executable scripts)</a>: <a href="#Executable-Scripts">Executable Scripts</a></li>
<li><a href="#index-portability_002c-_0040code_007b_002a_002a_007d-operator-and-833">portability, <code>**</code> operator and</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-portability_002c-_0040code_007b_002a_002a_003d_007d-operator-and-877">portability, <code>**=</code> operator and</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-portability_002c-_0040code_007bARGV_007d-variable-118">portability, <code>ARGV</code> variable</a>: <a href="#Executable-Scripts">Executable Scripts</a></li>
<li><a href="#index-portability_002c-backslash-continuation-and-158">portability, backslash continuation and</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-portability_002c-backslash-in-escape-sequences-352">portability, backslash in escape sequences</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-portability_002c-_0040code_007bclose_0028_0029_007d-function-and-766">portability, <code>close()</code> function and</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-portability_002c-_0040value_007bDF_007ds-as-single-record-519">portability, data files as single record</a>: <a href="#Records">Records</a></li>
<li><a href="#index-portability_002c-deleting-array-elements-1315">portability, deleting array elements</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-portability_002c-example-programs-1700">portability, example programs</a>: <a href="#Library-Functions">Library Functions</a></li>
<li><a href="#index-portability_002c-_0040code_007bfflush_0028_0029_007d-function-and-1418">portability, <code>fflush()</code> function and</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-portability_002c-functions_0040comma_007b_007d-defining-1496">portability, functions, defining</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-portability_002c-_0040command_007bgawk_007d-2191">portability, <samp><span class="command">gawk</span></samp></a>: <a href="#New-Ports">New Ports</a></li>
<li><a href="#index-portability_002c-_0040code_007bgettext_007d-library-and-1525">portability, <code>gettext</code> library and</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-portability_002c-internationalization-and-1597">portability, internationalization and</a>: <a href="#I18N-Portability">I18N Portability</a></li>
<li><a href="#index-portability_002c-_0040code_007blength_0028_0029_007d-function-1367">portability, <code>length()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-portability_002c-new-_0040command_007bawk_007d-vs_002e_0040_003a-old-_0040command_007bawk_007d-822">portability, new <samp><span class="command">awk</span></samp> vs. old <samp><span class="command">awk</span></samp></a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-portability_002c-_0040code_007bnext_007d-statement-in-user_002ddefined-functions-1509">portability, <code>next</code> statement in user-defined functions</a>: <a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></li>
<li><a href="#index-portability_002c-_0040code_007bNF_007d-variable_0040comma_007b_007d-decrementing-547">portability, <code>NF</code> variable, decrementing</a>: <a href="#Changing-Fields">Changing Fields</a></li>
<li><a href="#index-portability_002c-operators-903">portability, operators</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-portability_002c-operators_002c-not-in-POSIX-_0040command_007bawk_007d-1062">portability, operators, not in POSIX <samp><span class="command">awk</span></samp></a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-portability_002c-_0040env_007bPOSIXLY_005fCORRECT_007d-environment-variable-279">portability, <samp><span class="env">POSIXLY_CORRECT</span></samp> environment variable</a>: <a href="#Options">Options</a></li>
<li><a href="#index-portability_002c-_0040code_007bsubstr_0028_0029_007d-function-1394">portability, <code>substr()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-portable-object-files-1581">portable object files</a>: <a href="#Translator-i18n">Translator i18n</a></li>
<li><a href="#index-portable-object-files-1533">portable object files</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-portable-object-files_002c-converting-to-message-object-files-1609">portable object files, converting to message object files</a>: <a href="#I18N-Example">I18N Example</a></li>
<li><a href="#index-portable-object-files_002c-generating-225">portable object files, generating</a>: <a href="#Options">Options</a></li>
<li><a href="#index-portable-object-template-files-1529">portable object template files</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-porting-_0040command_007bgawk_007d-2193">porting <samp><span class="command">gawk</span></samp></a>: <a href="#New-Ports">New Ports</a></li>
<li><a href="#index-positional-specifiers_002c-_0040code_007bprintf_007d-statement-1593">positional specifiers, <code>printf</code> statement</a>: <a href="#Printf-Ordering">Printf Ordering</a></li>
<li><a href="#index-positional-specifiers_002c-_0040code_007bprintf_007d-statement-705">positional specifiers, <code>printf</code> statement</a>: <a href="#Format-Modifiers">Format Modifiers</a></li>
<li><a href="#index-positional-specifiers_002c-_0040code_007bprintf_007d-statement_002c-mixing-with-regular-formats-1595">positional specifiers, <code>printf</code> statement, mixing with regular formats</a>: <a href="#Printf-Ordering">Printf Ordering</a></li>
<li><a href="#index-positive-zero-2324">positive zero</a>: <a href="#Unexpected-Results">Unexpected Results</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d-875">POSIX <samp><span class="command">awk</span></samp></a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d-27">POSIX <samp><span class="command">awk</span></samp></a>: <a href="#This-Manual">This Manual</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007b_002a_002a_007d-operator-and-1061">POSIX <samp><span class="command">awk</span></samp>, <code>**</code> operator and</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007b_002a_002a_003d_007d-operator-and-876">POSIX <samp><span class="command">awk</span></samp>, <code>**=</code> operator and</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007b_003c_007d-operator-and-626">POSIX <samp><span class="command">awk</span></samp>, <code>&lt;</code> operator and</a>: <a href="#Getline_002fFile">Getline/File</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-arithmetic-operators-and-828">POSIX <samp><span class="command">awk</span></samp>, arithmetic operators and</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-backslashes-in-string-constants-353">POSIX <samp><span class="command">awk</span></samp>, backslashes in string constants</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bBEGIN_007d_002f_0040code_007bEND_007d-patterns-1098">POSIX <samp><span class="command">awk</span></samp>, <code>BEGIN</code>/<code>END</code> patterns</a>: <a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-bracket-expressions-and-405">POSIX <samp><span class="command">awk</span></samp>, bracket expressions and</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-bracket-expressions-and_002c-character-classes-410">POSIX <samp><span class="command">awk</span></samp>, bracket expressions and, character classes</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bbreak_007d-statement-and-1151">POSIX <samp><span class="command">awk</span></samp>, <code>break</code> statement and</a>: <a href="#Break-Statement">Break Statement</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-changes-in-_0040command_007bawk_007d-versions-2046">POSIX <samp><span class="command">awk</span></samp>, changes in <samp><span class="command">awk</span></samp> versions</a>: <a href="#POSIX">POSIX</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bcontinue_007d-statement-and-1155">POSIX <samp><span class="command">awk</span></samp>, <code>continue</code> statement and</a>: <a href="#Continue-Statement">Continue Statement</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bCONVFMT_007d-variable-and-1186">POSIX <samp><span class="command">awk</span></samp>, <code>CONVFMT</code> variable and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bdate_007d-utility-and-1450">POSIX <samp><span class="command">awk</span></samp>, <code>date</code> utility and</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-field-separators-and-585">POSIX <samp><span class="command">awk</span></samp>, field separators and</a>: <a href="#Field-Splitting-Summary">Field Splitting Summary</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-field-separators-and-528">POSIX <samp><span class="command">awk</span></samp>, field separators and</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bFS_007d-variable-and-1202">POSIX <samp><span class="command">awk</span></samp>, <code>FS</code> variable and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bfunction_007d-keyword-in-1495">POSIX <samp><span class="command">awk</span></samp>, <code>function</code> keyword in</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-functions-and_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-1407">POSIX <samp><span class="command">awk</span></samp>, functions and, <code>gsub()</code>/<code>sub()</code></a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-functions-and_002c-_0040code_007blength_0028_0029_007d-1368">POSIX <samp><span class="command">awk</span></samp>, functions and, <code>length()</code></a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-GNU-long-options-and-185">POSIX <samp><span class="command">awk</span></samp>, GNU long options and</a>: <a href="#Options">Options</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-interval-expressions-in-390">POSIX <samp><span class="command">awk</span></samp>, interval expressions in</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bnext_007d_002f_0040code_007bnextfile_007d-statements-and-1162">POSIX <samp><span class="command">awk</span></samp>, <code>next</code>/<code>nextfile</code> statements and</a>: <a href="#Next-Statement">Next Statement</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-numeric-strings-and-923">POSIX <samp><span class="command">awk</span></samp>, numeric strings and</a>: <a href="#Variable-Typing">Variable Typing</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bOFMT_007d-variable-and-820">POSIX <samp><span class="command">awk</span></samp>, <code>OFMT</code> variable and</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bOFMT_007d-variable-and-688">POSIX <samp><span class="command">awk</span></samp>, <code>OFMT</code> variable and</a>: <a href="#OFMT">OFMT</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-period-_0028_0040code_007b_002e_007d_0029_0040comma_007b_007d-using-372">POSIX <samp><span class="command">awk</span></samp>, period (<code>.</code>), using</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007bprintf_007d-format-strings-and-707">POSIX <samp><span class="command">awk</span></samp>, <code>printf</code> format strings and</a>: <a href="#Format-Modifiers">Format Modifiers</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-regular-expressions-and-394">POSIX <samp><span class="command">awk</span></samp>, regular expressions and</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-timestamps-and-1436">POSIX <samp><span class="command">awk</span></samp>, timestamps and</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-POSIX-_0040command_007bawk_007d_002c-_0040code_007b_007c_007d-I_002fO-operator-and-640">POSIX <samp><span class="command">awk</span></samp>, <code>|</code> I/O operator and</a>: <a href="#Getline_002fPipe">Getline/Pipe</a></li>
<li><a href="#index-POSIX-mode-250">POSIX mode</a>: <a href="#Options">Options</a></li>
<li><a href="#index-POSIX_002c-_0040command_007bawk_007d-and-3">POSIX, <samp><span class="command">awk</span></samp> and</a>: <a href="#Preface">Preface</a></li>
<li><a href="#index-POSIX_002c-_0040command_007bgawk_007d-extensions-not-included-in-2053">POSIX, <samp><span class="command">gawk</span></samp> extensions not included in</a>: <a href="#POSIX_002fGNU">POSIX/GNU</a></li>
<li><a href="#index-POSIX_002c-programs_0040comma_007b_007d-implementing-in-_0040command_007bawk_007d-1841">POSIX, programs, implementing in <samp><span class="command">awk</span></samp></a>: <a href="#Clones">Clones</a></li>
<li><a href="#index-g_t_0040env_007bPOSIXLY_005fCORRECT_007d-environment-variable-275"><samp><span class="env">POSIXLY_CORRECT</span></samp> environment variable</a>: <a href="#Options">Options</a></li>
<li><a href="#index-precedence-985">precedence</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-precedence-901">precedence</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-precedence_002c-regexp-operators-392">precedence, regexp operators</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007bprint_007d-debugger-command-1992"><code>print</code> debugger command</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-g_t_0040code_007bprint_007d-statement-663"><code>print</code> statement</a>: <a href="#Printing">Printing</a></li>
<li><a href="#index-g_t_0040code_007bprint_007d-statement_002c-_0040code_007bBEGIN_007d_002f_0040code_007bEND_007d-patterns-and-1099"><code>print</code> statement, <code>BEGIN</code>/<code>END</code> patterns and</a>: <a href="#I_002fO-And-BEGIN_002fEND">I/O And BEGIN/END</a></li>
<li><a href="#index-g_t_0040code_007bprint_007d-statement_002c-commas_002c-omitting-670"><code>print</code> statement, commas, omitting</a>: <a href="#Print-Examples">Print Examples</a></li>
<li><a href="#index-g_t_0040code_007bprint_007d-statement_002c-I_002fO-operators-in-1034"><code>print</code> statement, I/O operators in</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007bprint_007d-statement_002c-line-continuations-and-676"><code>print</code> statement, line continuations and</a>: <a href="#Print-Examples">Print Examples</a></li>
<li><a href="#index-g_t_0040code_007bprint_007d-statement_002c-_0040code_007bOFMT_007d-variable-and-1218"><code>print</code> statement, <code>OFMT</code> variable and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bprint_007d-statement_002c-See-Also-redirection_002c-of-output-711"><code>print</code> statement, See Also redirection, of output</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-g_t_0040code_007bprint_007d-statement_002c-_0040code_007bsprintf_0028_0029_007d-function-and-1731"><code>print</code> statement, <code>sprintf()</code> function and</a>: <a href="#Round-Function">Round Function</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-debugger-command-1995"><code>printf</code> debugger command</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement-690"><code>printf</code> statement</a>: <a href="#Printf">Printf</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement-664"><code>printf</code> statement</a>: <a href="#Printing">Printing</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement_002c-columns_0040comma_007b_007d-aligning-673"><code>printf</code> statement, columns, aligning</a>: <a href="#Print-Examples">Print Examples</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement_002c-format_002dcontrol-characters-695"><code>printf</code> statement, format-control characters</a>: <a href="#Control-Letters">Control Letters</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement_002c-I_002fO-operators-in-1035"><code>printf</code> statement, I/O operators in</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement_002c-modifiers-701"><code>printf</code> statement, modifiers</a>: <a href="#Format-Modifiers">Format Modifiers</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement_002c-positional-specifiers-1592"><code>printf</code> statement, positional specifiers</a>: <a href="#Printf-Ordering">Printf Ordering</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement_002c-positional-specifiers-704"><code>printf</code> statement, positional specifiers</a>: <a href="#Format-Modifiers">Format Modifiers</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement_002c-positional-specifiers_002c-mixing-with-regular-formats-1594"><code>printf</code> statement, positional specifiers, mixing with regular formats</a>: <a href="#Printf-Ordering">Printf Ordering</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement_002c-See-Also-redirection_002c-of-output-712"><code>printf</code> statement, See Also redirection, of output</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement_002c-_0040code_007bsprintf_0028_0029_007d-function-and-1732"><code>printf</code> statement, <code>sprintf()</code> function and</a>: <a href="#Round-Function">Round Function</a></li>
<li><a href="#index-g_t_0040code_007bprintf_007d-statement_002c-syntax-of-693"><code>printf</code> statement, syntax of</a>: <a href="#Basic-Printf">Basic Printf</a></li>
<li><a href="#index-printing-661">printing</a>: <a href="#Printing">Printing</a></li>
<li><a href="#index-printing_002c-list-of-options-231">printing, list of options</a>: <a href="#Options">Options</a></li>
<li><a href="#index-printing_002c-mailing-labels-1899">printing, mailing labels</a>: <a href="#Labels-Program">Labels Program</a></li>
<li><a href="#index-printing_002c-unduplicated-lines-of-text-1874">printing, unduplicated lines of text</a>: <a href="#Uniq-Program">Uniq Program</a></li>
<li><a href="#index-printing_002c-user-information-1860">printing, user information</a>: <a href="#Id-Program">Id Program</a></li>
<li><a href="#index-private-variables-1709">private variables</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-processes_002c-two_002dway-communications-with-1637">processes, two-way communications with</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-processing-data-2299">processing data</a>: <a href="#Basic-High-Level">Basic High Level</a></li>
<li><a href="#index-g_t_0040code_007bPROCINFO_007d-array-2271"><code>PROCINFO</code> array</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bPROCINFO_007d-array-1863"><code>PROCINFO</code> array</a>: <a href="#Id-Program">Id Program</a></li>
<li><a href="#index-g_t_0040code_007bPROCINFO_007d-array-1819"><code>PROCINFO</code> array</a>: <a href="#Group-Functions">Group Functions</a></li>
<li><a href="#index-g_t_0040code_007bPROCINFO_007d-array-1791"><code>PROCINFO</code> array</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bPROCINFO_007d-array-1649"><code>PROCINFO</code> array</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-g_t_0040code_007bPROCINFO_007d-array-1441"><code>PROCINFO</code> array</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-g_t_0040code_007bPROCINFO_007d-array-1256"><code>PROCINFO</code> array</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bPROCINFO_007d-array-298"><code>PROCINFO</code> array</a>: <a href="#Obsolete">Obsolete</a></li>
<li><a href="#index-profiling-_0040command_007bawk_007d-programs-1664">profiling <samp><span class="command">awk</span></samp> programs</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-profiling-_0040command_007bawk_007d-programs_002c-dynamically-1681">profiling <samp><span class="command">awk</span></samp> programs, dynamically</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-profiling-_0040command_007bgawk_007d_002c-See-_0040command_007bpgawk_007d-program-1666">profiling <samp><span class="command">gawk</span></samp>, See <samp><span class="command">pgawk</span></samp> program</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-program_002c-definition-of-82">program, definition of</a>: <a href="#Getting-Started">Getting Started</a></li>
<li><a href="#index-programmers_002c-attractiveness-of-1635">programmers, attractiveness of</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-programming-conventions_002c-_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option-1621">programming conventions, <code>--non-decimal-data</code> option</a>: <a href="#Nondecimal-Data">Nondecimal Data</a></li>
<li><a href="#index-programming-conventions_002c-_0040code_007bARGC_007d_002f_0040code_007bARGV_007d-variables-1238">programming conventions, <code>ARGC</code>/<code>ARGV</code> variables</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-programming-conventions_002c-_0040code_007bexit_007d-statement-1175">programming conventions, <code>exit</code> statement</a>: <a href="#Exit-Statement">Exit Statement</a></li>
<li><a href="#index-programming-conventions_002c-function-parameters-1511">programming conventions, function parameters</a>: <a href="#Return-Statement">Return Statement</a></li>
<li><a href="#index-programming-conventions_002c-functions_002c-calling-1337">programming conventions, functions, calling</a>: <a href="#Calling-Built_002din">Calling Built-in</a></li>
<li><a href="#index-programming-conventions_002c-functions_002c-writing-1489">programming conventions, functions, writing</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-programming-conventions_002c-_0040command_007bgawk_007d-internals-2290">programming conventions, <samp><span class="command">gawk</span></samp> internals</a>: <a href="#Internal-File-Ops">Internal File Ops</a></li>
<li><a href="#index-programming-conventions_002c-private-variable-names-1711">programming conventions, private variable names</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-programming-language_002c-recipe-for-12">programming language, recipe for</a>: <a href="#History">History</a></li>
<li><a href="#index-Programming-languages_002c-Ada-2330">Programming languages, Ada</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-programming-languages_0040comma_007b_007d-data_002ddriven-vs_002e_0040_003a-procedural-80">programming languages, data-driven vs. procedural</a>: <a href="#Getting-Started">Getting Started</a></li>
<li><a href="#index-Programming-languages_002c-Java-2355">Programming languages, Java</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-programming_002c-basic-steps-2302">programming, basic steps</a>: <a href="#Basic-High-Level">Basic High Level</a></li>
<li><a href="#index-programming_002c-concepts-2297">programming, concepts</a>: <a href="#Basic-Concepts">Basic Concepts</a></li>
<li><a href="#index-g_t_0040command_007bpwcat_007d-program-1799"><samp><span class="command">pwcat</span></samp> program</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bq_007d-debugger-command-_0028alias-for-_0040code_007bquit_007d_0029-2039"><code>q</code> debugger command (alias for <code>quit</code>)</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-QSE-Awk-2174">QSE Awk</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-question-mark-_0028_0040code_007b_003f_007d_0029-regexp-operator-452">question mark (<code>?</code>) regexp operator</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-question-mark-_0028_0040code_007b_003f_007d_0029-regexp-operator-388">question mark (<code>?</code>) regexp operator</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-question-mark-_0028_0040code_007b_003f_007d_0029_002c-_0040code_007b_003f_003a_007d-operator-1046">question mark (<code>?</code>), <code>?:</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-QuikTrim-Awk-2176">QuikTrim Awk</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-g_t_0040code_007bquit_007d-debugger-command-2038"><code>quit</code> debugger command</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-g_t_0040code_007bQUIT_007d-signal-_0028MS_002dWindows_0029-1693"><code>QUIT</code> signal (MS-Windows)</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-quoting-123">quoting</a>: <a href="#Comments">Comments</a></li>
<li><a href="#index-quoting-107">quoting</a>: <a href="#Long">Long</a></li>
<li><a href="#index-quoting-96">quoting</a>: <a href="#Read-Terminal">Read Terminal</a></li>
<li><a href="#index-quoting_002c-rules-for-128">quoting, rules for</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-quoting_002c-tricks-for-140">quoting, tricks for</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-g_t_0040code_007br_007d-debugger-command-_0028alias-for-_0040code_007brun_007d_0029-1973"><code>r</code> debugger command (alias for <code>run</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-Rakitzis_002c-Byron-1906">Rakitzis, Byron</a>: <a href="#History-Sorting">History Sorting</a></li>
<li><a href="#index-g_t_0040code_007brand_0028_0029_007d-function-1350"><code>rand()</code> function</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-random-numbers_002c-Cliff-1735">random numbers, Cliff</a>: <a href="#Cliff-Random-Function">Cliff Random Function</a></li>
<li><a href="#index-random-numbers_002c-_0040code_007brand_0028_0029_007d_002f_0040code_007bsrand_0028_0029_007d-functions-1351">random numbers, <code>rand()</code>/<code>srand()</code> functions</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-random-numbers_002c-seed-of-1353">random numbers, seed of</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-range-expressions-_0028regexps_0029-398">range expressions (regexps)</a>: <a href="#Bracket-Expressions">Bracket Expressions</a></li>
<li><a href="#index-range-patterns-1084">range patterns</a>: <a href="#Ranges">Ranges</a></li>
<li><a href="#index-Rankin_002c-Pat-2146">Rankin, Pat</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-Rankin_002c-Pat-2067">Rankin, Pat</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Rankin_002c-Pat-857">Rankin, Pat</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-Rankin_002c-Pat-68">Rankin, Pat</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-readable-_0040value_007bDF_007ds_0040comma_007b_007d-checking-1770">readable data files, checking</a>: <a href="#File-Checking">File Checking</a></li>
<li><a href="#index-g_t_0040code_007breadable_002eawk_007d-program-1772"><code>readable.awk</code> program</a>: <a href="#File-Checking">File Checking</a></li>
<li><a href="#index-recipe-for-a-programming-language-11">recipe for a programming language</a>: <a href="#History">History</a></li>
<li><a href="#index-record-separators-1225">record separators</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-record-separators-498">record separators</a>: <a href="#Records">Records</a></li>
<li><a href="#index-record-separators_002c-changing-502">record separators, changing</a>: <a href="#Records">Records</a></li>
<li><a href="#index-record-separators_002c-regular-expressions-as-513">record separators, regular expressions as</a>: <a href="#Records">Records</a></li>
<li><a href="#index-record-separators_002c-with-multiline-records-605">record separators, with multiline records</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-records-2304">records</a>: <a href="#Basic-High-Level">Basic High Level</a></li>
<li><a href="#index-records-490">records</a>: <a href="#Reading-Files">Reading Files</a></li>
<li><a href="#index-records_002c-multiline-601">records, multiline</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-records_002c-printing-665">records, printing</a>: <a href="#Print">Print</a></li>
<li><a href="#index-records_002c-splitting-input-into-494">records, splitting input into</a>: <a href="#Records">Records</a></li>
<li><a href="#index-records_002c-terminating-509">records, terminating</a>: <a href="#Records">Records</a></li>
<li><a href="#index-records_002c-treating-files-as-522">records, treating files as</a>: <a href="#Records">Records</a></li>
<li><a href="#index-recursive-functions-1491">recursive functions</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-redirection-of-input-622">redirection of input</a>: <a href="#Getline_002fFile">Getline/File</a></li>
<li><a href="#index-redirection-of-output-709">redirection of output</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-reference-counting_002c-sorting-arrays-1629">reference counting, sorting arrays</a>: <a href="#Array-Sorting-Functions">Array Sorting Functions</a></li>
<li><a href="#index-regexp-constants-949">regexp constants</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-regexp-constants-791">regexp constants</a>: <a href="#Regexp-Constants">Regexp Constants</a></li>
<li><a href="#index-regexp-constants-320">regexp constants</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-regexp-constants_002c-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d_002c-_0040code_007b_002f_003d_007d-operator-and-882">regexp constants, <code>/=.../</code>, <code>/=</code> operator and</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-regexp-constants_002c-as-patterns-1077">regexp constants, as patterns</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-regexp-constants_002c-in-_0040command_007bgawk_007d-798">regexp constants, in <samp><span class="command">gawk</span></samp></a>: <a href="#Using-Constant-Regexps">Using Constant Regexps</a></li>
<li><a href="#index-regexp-constants_002c-slashes-vs_002e_0040_003a-quotes-476">regexp constants, slashes vs. quotes</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-regexp-constants_002c-vs_002e_0040_003a-string-constants-482">regexp constants, vs. string constants</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-regexp_002c-See-regular-expressions-305">regexp, See regular expressions</a>: <a href="#Regexp">Regexp</a></li>
<li><a href="#index-g_t_0040code_007bregister_005fdeferred_005fvariable_0028_0029_007d-internal-function-2272"><code>register_deferred_variable()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bregister_005fopen_005fhook_0028_0029_007d-internal-function-2284"><code>register_open_hook()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-regular-expressions-306">regular expressions</a>: <a href="#Regexp">Regexp</a></li>
<li><a href="#index-regular-expressions-as-field-separators-556">regular expressions as field separators</a>: <a href="#Field-Separators">Field Separators</a></li>
<li><a href="#index-regular-expressions_002c-anchors-in-364">regular expressions, anchors in</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-regular-expressions_002c-as-field-separators-560">regular expressions, as field separators</a>: <a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></li>
<li><a href="#index-regular-expressions_002c-as-patterns-1067">regular expressions, as patterns</a>: <a href="#Regexp-Patterns">Regexp Patterns</a></li>
<li><a href="#index-regular-expressions_002c-as-patterns-309">regular expressions, as patterns</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-regular-expressions_002c-as-record-separators-512">regular expressions, as record separators</a>: <a href="#Records">Records</a></li>
<li><a href="#index-regular-expressions_002c-case-sensitivity-1209">regular expressions, case sensitivity</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-regular-expressions_002c-case-sensitivity-458">regular expressions, case sensitivity</a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-regular-expressions_002c-computed-470">regular expressions, computed</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-regular-expressions_002c-constants_002c-See-regexp-constants-321">regular expressions, constants, See regexp constants</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-regular-expressions_002c-dynamic-471">regular expressions, dynamic</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-regular-expressions_002c-dynamic_002c-with-embedded-newlines-484">regular expressions, dynamic, with embedded newlines</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-regular-expressions_002c-_0040command_007bgawk_007d_002c-command_002dline-options-456">regular expressions, <samp><span class="command">gawk</span></samp>, command-line options</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-regular-expressions_002c-interval-expressions-and-261">regular expressions, interval expressions and</a>: <a href="#Options">Options</a></li>
<li><a href="#index-regular-expressions_002c-leftmost-longest-match-469">regular expressions, leftmost longest match</a>: <a href="#Leftmost-Longest">Leftmost Longest</a></li>
<li><a href="#index-regular-expressions_002c-operators-361">regular expressions, operators</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-regular-expressions_002c-operators-310">regular expressions, operators</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-regular-expressions_002c-operators_002c-for-buffers-443">regular expressions, operators, for buffers</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-regular-expressions_002c-operators_002c-for-words-423">regular expressions, operators, for words</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-regular-expressions_002c-operators_002c-_0040command_007bgawk_007d-420">regular expressions, operators, <samp><span class="command">gawk</span></samp></a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-regular-expressions_002c-operators_002c-precedence-of-393">regular expressions, operators, precedence of</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-regular-expressions_002c-searching-for-1850">regular expressions, searching for</a>: <a href="#Egrep-Program">Egrep Program</a></li>
<li><a href="#index-relational-operators_002c-See-comparison-operators-917">relational operators, See comparison operators</a>: <a href="#Typing-and-Comparison">Typing and Comparison</a></li>
<li><a href="#index-g_t_0040code_007breturn_007d-debugger-command-1969"><code>return</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-g_t_0040code_007breturn_007d-statement_0040comma_007b_007d-user_002ddefined-functions-1510"><code>return</code> statement, user-defined functions</a>: <a href="#Return-Statement">Return Statement</a></li>
<li><a href="#index-return-values_0040comma_007b_007d-_0040code_007bclose_0028_0029_007d-function-771">return values, <code>close()</code> function</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-g_t_0040code_007brev_0028_0029_007d-user_002ddefined-function-1497"><code>rev()</code> user-defined function</a>: <a href="#Function-Example">Function Example</a></li>
<li><a href="#index-g_t_0040code_007brewind_0028_0029_007d-user_002ddefined-function-1768"><code>rewind()</code> user-defined function</a>: <a href="#Rewind-Function">Rewind Function</a></li>
<li><a href="#index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_007d-operator-1020">right angle bracket (<code>&gt;</code>), <code>&gt;</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_007d-operator-931">right angle bracket (<code>&gt;</code>), <code>&gt;</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_007d-operator-_0028I_002fO_0029-714">right angle bracket (<code>&gt;</code>), <code>&gt;</code> operator (I/O)</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_003d_007d-operator-1018">right angle bracket (<code>&gt;</code>), <code>&gt;=</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_003d_007d-operator-929">right angle bracket (<code>&gt;</code>), <code>&gt;=</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_003e_007d-operator-_0028I_002fO_0029-1026">right angle bracket (<code>&gt;</code>), <code>&gt;&gt;</code> operator (I/O)</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-right-angle-bracket-_0028_0040code_007b_003e_007d_0029_002c-_0040code_007b_003e_003e_007d-operator-_0028I_002fO_0029-717">right angle bracket (<code>&gt;</code>), <code>&gt;&gt;</code> operator (I/O)</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-right-shift_002c-bitwise-1460">right shift, bitwise</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-Ritchie_002c-Dennis-2321">Ritchie, Dennis</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-g_t_0040code_007bRLENGTH_007d-variable-1260"><code>RLENGTH</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bRLENGTH_007d-variable_002c-_0040code_007bmatch_0028_0029_007d-function-and-1375"><code>RLENGTH</code> variable, <code>match()</code> function and</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-Robbins_002c-Arnold-2296">Robbins, Arnold</a>: <a href="#Future-Extensions">Future Extensions</a></li>
<li><a href="#index-Robbins_002c-Arnold-2141">Robbins, Arnold</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-Robbins_002c-Arnold-2089">Robbins, Arnold</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Robbins_002c-Arnold-1891">Robbins, Arnold</a>: <a href="#Alarm-Program">Alarm Program</a></li>
<li><a href="#index-Robbins_002c-Arnold-1801">Robbins, Arnold</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-Robbins_002c-Arnold-639">Robbins, Arnold</a>: <a href="#Getline_002fPipe">Getline/Pipe</a></li>
<li><a href="#index-Robbins_002c-Arnold-584">Robbins, Arnold</a>: <a href="#Command-Line-Field-Separator">Command Line Field Separator</a></li>
<li><a href="#index-Robbins_002c-Bill-637">Robbins, Bill</a>: <a href="#Getline_002fPipe">Getline/Pipe</a></li>
<li><a href="#index-Robbins_002c-Harry-76">Robbins, Harry</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Robbins_002c-Jean-75">Robbins, Jean</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Robbins_002c-Miriam-1802">Robbins, Miriam</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-Robbins_002c-Miriam-638">Robbins, Miriam</a>: <a href="#Getline_002fPipe">Getline/Pipe</a></li>
<li><a href="#index-Robbins_002c-Miriam-74">Robbins, Miriam</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Robinson_002c-Will-2194">Robinson, Will</a>: <a href="#Dynamic-Extensions">Dynamic Extensions</a></li>
<li><a href="#index-robot_002c-the-2195">robot, the</a>: <a href="#Dynamic-Extensions">Dynamic Extensions</a></li>
<li><a href="#index-Rommel_002c-Kai-Uwe-2069">Rommel, Kai Uwe</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-g_t_0040code_007bround_0028_0029_007d-user_002ddefined-function-1734"><code>round()</code> user-defined function</a>: <a href="#Round-Function">Round Function</a></li>
<li><a href="#index-rounding-numbers-1727">rounding numbers</a>: <a href="#Round-Function">Round Function</a></li>
<li><a href="#index-g_t_0040code_007bRS_007d-variable-1223"><code>RS</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bRS_007d-variable-500"><code>RS</code> variable</a>: <a href="#Records">Records</a></li>
<li><a href="#index-g_t_0040code_007bRS_007d-variable_002c-multiline-records-and-606"><code>RS</code> variable, multiline records and</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-g_t_0040code_007brshift_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1467"><code>rshift()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-g_t_0040code_007bRSTART_007d-variable-1261"><code>RSTART</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bRSTART_007d-variable_002c-_0040code_007bmatch_0028_0029_007d-function-and-1374"><code>RSTART</code> variable, <code>match()</code> function and</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bRT_007d-variable-1263"><code>RT</code> variable</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-g_t_0040code_007bRT_007d-variable-629"><code>RT</code> variable</a>: <a href="#Getline_002fVariable_002fFile">Getline/Variable/File</a></li>
<li><a href="#index-g_t_0040code_007bRT_007d-variable-612"><code>RT</code> variable</a>: <a href="#Multiple-Line">Multiple Line</a></li>
<li><a href="#index-g_t_0040code_007bRT_007d-variable-508"><code>RT</code> variable</a>: <a href="#Records">Records</a></li>
<li><a href="#index-Rubin_002c-Paul-2058">Rubin, Paul</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Rubin_002c-Paul-17">Rubin, Paul</a>: <a href="#History">History</a></li>
<li><a href="#index-rule_002c-definition-of-83">rule, definition of</a>: <a href="#Getting-Started">Getting Started</a></li>
<li><a href="#index-g_t_0040code_007brun_007d-debugger-command-1972"><code>run</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-rvalues_002flvalues-851">rvalues/lvalues</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007bs_007d-debugger-command-_0028alias-for-_0040code_007bstep_007d_0029-1977"><code>s</code> debugger command (alias for <code>step</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-sandbox-mode-266">sandbox mode</a>: <a href="#Options">Options</a></li>
<li><a href="#index-scalar-values-2311">scalar values</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-Schorr_002c-Andrew-69">Schorr, Andrew</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Schreiber_002c-Bert-49">Schreiber, Bert</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Schreiber_002c-Rita-50">Schreiber, Rita</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-search-paths-2133">search paths</a>: <a href="#VMS-Running">VMS Running</a></li>
<li><a href="#index-search-paths-2116">search paths</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-search-paths-1919">search paths</a>: <a href="#Igawk-Program">Igawk Program</a></li>
<li><a href="#index-search-paths-290">search paths</a>: <a href="#AWKPATH-Variable">AWKPATH Variable</a></li>
<li><a href="#index-search-paths_002c-for-source-files-2134">search paths, for source files</a>: <a href="#VMS-Running">VMS Running</a></li>
<li><a href="#index-search-paths_002c-for-source-files-2117">search paths, for source files</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-search-paths_002c-for-source-files-1920">search paths, for source files</a>: <a href="#Igawk-Program">Igawk Program</a></li>
<li><a href="#index-search-paths_002c-for-source-files-291">search paths, for source files</a>: <a href="#AWKPATH-Variable">AWKPATH Variable</a></li>
<li><a href="#index-searching-1365">searching</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-searching_002c-files-for-regular-expressions-1851">searching, files for regular expressions</a>: <a href="#Egrep-Program">Egrep Program</a></li>
<li><a href="#index-searching_002c-for-words-1886">searching, for words</a>: <a href="#Dupword-Program">Dupword Program</a></li>
<li><a href="#index-g_t_0040command_007bsed_007d-utility-2327"><samp><span class="command">sed</span></samp> utility</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-g_t_0040command_007bsed_007d-utility-1912"><samp><span class="command">sed</span></samp> utility</a>: <a href="#Simple-Sed">Simple Sed</a></li>
<li><a href="#index-g_t_0040command_007bsed_007d-utility-588"><samp><span class="command">sed</span></samp> utility</a>: <a href="#Field-Splitting-Summary">Field Splitting Summary</a></li>
<li><a href="#index-semicolon-_0028_0040code_007b_003b_007d_0029-167">semicolon (<code>;</code>)</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-semicolon-_0028_0040code_007b_003b_007d_0029_002c-_0040code_007bAWKPATH_007d-variable-and-2122">semicolon (<code>;</code>), <code>AWKPATH</code> variable and</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-semicolon-_0028_0040code_007b_003b_007d_0029_002c-separating-statements-in-actions-1136">semicolon (<code>;</code>), separating statements in actions</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-semicolon-_0028_0040code_007b_003b_007d_0029_002c-separating-statements-in-actions-1124">semicolon (<code>;</code>), separating statements in actions</a>: <a href="#Action-Overview">Action Overview</a></li>
<li><a href="#index-separators_002c-field-1200">separators, field</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-separators_002c-field_002c-_0040code_007bFIELDWIDTHS_007d-variable-and-1193">separators, field, <code>FIELDWIDTHS</code> variable and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-separators_002c-field_002c-_0040code_007bFPAT_007d-variable-and-1198">separators, field, <code>FPAT</code> variable and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-separators_002c-field_002c-POSIX-and-530">separators, field, POSIX and</a>: <a href="#Fields">Fields</a></li>
<li><a href="#index-separators_002c-for-records-1224">separators, for records</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-separators_002c-for-records-497">separators, for records</a>: <a href="#Records">Records</a></li>
<li><a href="#index-separators_002c-for-records_002c-regular-expressions-as-514">separators, for records, regular expressions as</a>: <a href="#Records">Records</a></li>
<li><a href="#index-separators_002c-for-statements-in-actions-1121">separators, for statements in actions</a>: <a href="#Action-Overview">Action Overview</a></li>
<li><a href="#index-separators_002c-subscript-1227">separators, subscript</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bset_007d-debugger-command-1997"><code>set</code> debugger command</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-shells_002c-piping-commands-into-731">shells, piping commands into</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-shells_002c-quoting-1117">shells, quoting</a>: <a href="#Using-Shell-Variables">Using Shell Variables</a></li>
<li><a href="#index-shells_002c-quoting_002c-rules-for-129">shells, quoting, rules for</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-shells_002c-scripts-88">shells, scripts</a>: <a href="#One_002dshot">One-shot</a></li>
<li><a href="#index-shells_002c-variables-1115">shells, variables</a>: <a href="#Using-Shell-Variables">Using Shell Variables</a></li>
<li><a href="#index-shift_002c-bitwise-1461">shift, bitwise</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-short_002dcircuit-operators-960">short-circuit operators</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-g_t_0040code_007bsi_007d-debugger-command-_0028alias-for-_0040code_007bstepi_007d_0029-1981"><code>si</code> debugger command (alias for <code>stepi</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-side-effects-889">side effects</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-side-effects-843">side effects</a>: <a href="#Concatenation">Concatenation</a></li>
<li><a href="#index-side-effects_002c-array-indexing-1294">side effects, array indexing</a>: <a href="#Reference-to-Elements">Reference to Elements</a></li>
<li><a href="#index-side-effects_002c-_0040code_007basort_0028_0029_007d-function-1628">side effects, <code>asort()</code> function</a>: <a href="#Array-Sorting-Functions">Array Sorting Functions</a></li>
<li><a href="#index-side-effects_002c-assignment-expressions-849">side effects, assignment expressions</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-side-effects_002c-Boolean-operators-959">side effects, Boolean operators</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-side-effects_002c-conditional-expressions-976">side effects, conditional expressions</a>: <a href="#Conditional-Exp">Conditional Exp</a></li>
<li><a href="#index-side-effects_002c-decrement_002fincrement-operators-892">side effects, decrement/increment operators</a>: <a href="#Increment-Ops">Increment Ops</a></li>
<li><a href="#index-side-effects_002c-_0040code_007bFILENAME_007d-variable-653">side effects, <code>FILENAME</code> variable</a>: <a href="#Getline-Notes">Getline Notes</a></li>
<li><a href="#index-side-effects_002c-function-calls-984">side effects, function calls</a>: <a href="#Function-Calls">Function Calls</a></li>
<li><a href="#index-side-effects_002c-statements-1125">side effects, statements</a>: <a href="#Action-Overview">Action Overview</a></li>
<li><a href="#index-g_t_0040code_007bSIGHUP_007d-signal-1688"><code>SIGHUP</code> signal</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040code_007bSIGINT_007d-signal-_0028MS_002dWindows_0029-1691"><code>SIGINT</code> signal (MS-Windows)</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-signals_002c-_0040code_007bHUP_007d_002f_0040code_007bSIGHUP_007d-1689">signals, <code>HUP</code>/<code>SIGHUP</code></a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-signals_002c-_0040code_007bINT_007d_002f_0040code_007bSIGINT_007d-_0028MS_002dWindows_0029-1692">signals, <code>INT</code>/<code>SIGINT</code> (MS-Windows)</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-signals_002c-_0040code_007bQUIT_007d_002f_0040code_007bSIGQUIT_007d-_0028MS_002dWindows_0029-1695">signals, <code>QUIT</code>/<code>SIGQUIT</code> (MS-Windows)</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-signals_002c-_0040code_007bUSR1_007d_002f_0040code_007bSIGUSR1_007d-1686">signals, <code>USR1</code>/<code>SIGUSR1</code></a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040code_007bSIGQUIT_007d-signal-_0028MS_002dWindows_0029-1694"><code>SIGQUIT</code> signal (MS-Windows)</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040code_007bSIGUSR1_007d-signal-1685"><code>SIGUSR1</code> signal</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040code_007bsilent_007d-debugger-command-1953"><code>silent</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-g_t_0040code_007bsin_0028_0029_007d-function-1354"><code>sin()</code> function</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-single-precision-floating_002dpoint-2318">single precision floating-point</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-single-quote-_0028_0040code_007b_0027_007d_0029-133">single quote (<code>'</code>)</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-single-quote-_0028_0040code_007b_0027_007d_0029-108">single quote (<code>'</code>)</a>: <a href="#Long">Long</a></li>
<li><a href="#index-single-quote-_0028_0040code_007b_0027_007d_0029-86">single quote (<code>'</code>)</a>: <a href="#One_002dshot">One-shot</a></li>
<li><a href="#index-single-quote-_0028_0040code_007b_0027_007d_0029_002c-vs_002e_0040_003a-apostrophe-124">single quote (<code>'</code>), vs. apostrophe</a>: <a href="#Comments">Comments</a></li>
<li><a href="#index-single-quote-_0028_0040code_007b_0027_007d_0029_002c-with-double-quotes-137">single quote (<code>'</code>), with double quotes</a>: <a href="#Quoting">Quoting</a></li>
<li><a href="#index-single_002dcharacter-fields-571">single-character fields</a>: <a href="#Single-Character-Fields">Single Character Fields</a></li>
<li><a href="#index-Skywalker_002c-Luke-301">Skywalker, Luke</a>: <a href="#Undocumented">Undocumented</a></li>
<li><a href="#index-g_t_0040command_007bsleep_007d-utility-1895"><samp><span class="command">sleep</span></samp> utility</a>: <a href="#Alarm-Program">Alarm Program</a></li>
<li><a href="#index-Solaris_002c-POSIX_002dcompliant-_0040command_007bawk_007d-2167">Solaris, POSIX-compliant <samp><span class="command">awk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-sort-function_002c-arrays_002c-sorting-1627">sort function, arrays, sorting</a>: <a href="#Array-Sorting-Functions">Array Sorting Functions</a></li>
<li><a href="#index-g_t_0040command_007bsort_007d-utility-1903"><samp><span class="command">sort</span></samp> utility</a>: <a href="#Word-Sorting">Word Sorting</a></li>
<li><a href="#index-g_t_0040command_007bsort_007d-utility_002c-coprocesses-and-1647"><samp><span class="command">sort</span></samp> utility, coprocesses and</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-sorting-characters-in-different-languages-1551">sorting characters in different languages</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-source-code_002c-_0040command_007bawka_007d-2160">source code, <samp><span class="command">awka</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-code_002c-Brian-Kernighan_0027s-_0040command_007bawk_007d-2151">source code, Brian Kernighan's <samp><span class="command">awk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-code_002c-Busybox-Awk-2165">source code, Busybox Awk</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-code_002c-_0040command_007bgawk_007d-2093">source code, <samp><span class="command">gawk</span></samp></a>: <a href="#Gawk-Distribution">Gawk Distribution</a></li>
<li><a href="#index-source-code_002c-_0040command_007bjawk_007d-2171">source code, <samp><span class="command">jawk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-code_002c-libmawk-2173">source code, libmawk</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-code_002c-_0040command_007bmawk_007d-2157">source code, <samp><span class="command">mawk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-code_002c-mixing-218">source code, mixing</a>: <a href="#Options">Options</a></li>
<li><a href="#index-source-code_002c-_0040command_007bpawk_007d-2163">source code, <samp><span class="command">pawk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-code_002c-QSE-Awk-2175">source code, QSE Awk</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-code_002c-QuikTrim-Awk-2177">source code, QuikTrim Awk</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-code_002c-Solaris-_0040command_007bawk_007d-2168">source code, Solaris <samp><span class="command">awk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-code_002c-_0040command_007bxgawk_007d-2179">source code, <samp><span class="command">xgawk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-source-files_0040comma_007b_007d-search-path-for-1921">source files, search path for</a>: <a href="#Igawk-Program">Igawk Program</a></li>
<li><a href="#index-sparse-arrays-1284">sparse arrays</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-Spencer_002c-Henry-2326">Spencer, Henry</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-g_t_0040code_007bsplit_007d-utility-1867"><code>split</code> utility</a>: <a href="#Split-Program">Split Program</a></li>
<li><a href="#index-g_t_0040code_007bsplit_0028_0029_007d-function-1381"><code>split()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bsplit_0028_0029_007d-function_002c-array-elements_0040comma_007b_007d-deleting-1317"><code>split()</code> function, array elements, deleting</a>: <a href="#Delete">Delete</a></li>
<li><a href="#index-g_t_0040code_007bsplit_002eawk_007d-program-1868"><code>split.awk</code> program</a>: <a href="#Split-Program">Split Program</a></li>
<li><a href="#index-g_t_0040code_007bsprintf_0028_0029_007d-function-1385"><code>sprintf()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bsprintf_0028_0029_007d-function-684"><code>sprintf()</code> function</a>: <a href="#OFMT">OFMT</a></li>
<li><a href="#index-g_t_0040code_007bsprintf_0028_0029_007d-function_002c-_0040code_007bOFMT_007d-variable-and-1217"><code>sprintf()</code> function, <code>OFMT</code> variable and</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bsprintf_0028_0029_007d-function_002c-_0040code_007bprint_007d_002f_0040code_007bprintf_007d-statements-and-1733"><code>sprintf()</code> function, <code>print</code>/<code>printf</code> statements and</a>: <a href="#Round-Function">Round Function</a></li>
<li><a href="#index-g_t_0040code_007bsqrt_0028_0029_007d-function-1355"><code>sqrt()</code> function</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-square-brackets-_0028_0040code_007b_005b_005d_007d_0029-374">square brackets (<code>[]</code>)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007bsrand_0028_0029_007d-function-1356"><code>srand()</code> function</a>: <a href="#Numeric-Functions">Numeric Functions</a></li>
<li><a href="#index-Stallman_002c-Richard-2345">Stallman, Richard</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-Stallman_002c-Richard-2061">Stallman, Richard</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Stallman_002c-Richard-44">Stallman, Richard</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Stallman_002c-Richard-34">Stallman, Richard</a>: <a href="#Manual-History">Manual History</a></li>
<li><a href="#index-standard-error-738">standard error</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-standard-input-733">standard input</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-standard-input-90">standard input</a>: <a href="#Read-Terminal">Read Terminal</a></li>
<li><a href="#index-standard-output-735">standard output</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-g_t_0040code_007bstat_0028_0029_007d-function_0040comma_007b_007d-implementing-in-_0040command_007bgawk_007d-2287"><code>stat()</code> function, implementing in <samp><span class="command">gawk</span></samp></a>: <a href="#Sample-Library">Sample Library</a></li>
<li><a href="#index-statements_002c-compound_0040comma_007b_007d-control-statements-and-1130">statements, compound, control statements and</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-statements_002c-control_002c-in-actions-1127">statements, control, in actions</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-statements_002c-multiple-165">statements, multiple</a>: <a href="#Statements_002fLines">Statements/Lines</a></li>
<li><a href="#index-g_t_0040code_007bstep_007d-debugger-command-1976"><code>step</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-g_t_0040code_007bstepi_007d-debugger-command-1980"><code>stepi</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-g_t_0040code_007bstlen_007d-internal-variable-2224"><code>stlen</code> internal variable</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bstptr_007d-internal-variable-2222"><code>stptr</code> internal variable</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-stream-editors-1913">stream editors</a>: <a href="#Simple-Sed">Simple Sed</a></li>
<li><a href="#index-stream-editors-589">stream editors</a>: <a href="#Field-Splitting-Summary">Field Splitting Summary</a></li>
<li><a href="#index-g_t_0040code_007bstrftime_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1442"><code>strftime()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-string-constants-779">string constants</a>: <a href="#Scalar-Constants">Scalar Constants</a></li>
<li><a href="#index-string-constants_002c-vs_002e_0040_003a-regexp-constants-483">string constants, vs. regexp constants</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-string-extraction-_0028internationalization_0029-1587">string extraction (internationalization)</a>: <a href="#String-Extraction">String Extraction</a></li>
<li><a href="#index-string-operators-837">string operators</a>: <a href="#Concatenation">Concatenation</a></li>
<li><a href="#index-string_002dmatching-operators-312">string-matching operators</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-strings-2240">strings</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-strings_002c-converting-1472">strings, converting</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-strings_002c-converting-813">strings, converting</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-strings_002c-converting_002c-numbers-to-1188">strings, converting, numbers to</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-strings_002c-empty_002c-See-null-strings-506">strings, empty, See null strings</a>: <a href="#Records">Records</a></li>
<li><a href="#index-strings_002c-extracting-1583">strings, extracting</a>: <a href="#String-Extraction">String Extraction</a></li>
<li><a href="#index-strings_002c-for-localization-1566">strings, for localization</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-strings_002c-length-of-781">strings, length of</a>: <a href="#Scalar-Constants">Scalar Constants</a></li>
<li><a href="#index-strings_002c-merging-arrays-into-1752">strings, merging arrays into</a>: <a href="#Join-Function">Join Function</a></li>
<li><a href="#index-strings_002c-_0040code_007bNODE_007d-internal-type-2208">strings, <code>NODE</code> internal type</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-strings_002c-null-563">strings, null</a>: <a href="#Regexp-Field-Splitting">Regexp Field Splitting</a></li>
<li><a href="#index-strings_002c-numeric-922">strings, numeric</a>: <a href="#Variable-Typing">Variable Typing</a></li>
<li><a href="#index-strings_002c-splitting-1382">strings, splitting</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bstrtonum_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1386"><code>strtonum()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bstrtonum_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029_002c-_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option-and-1623"><code>strtonum()</code> function (<samp><span class="command">gawk</span></samp>), <code>--non-decimal-data</code> option and</a>: <a href="#Nondecimal-Data">Nondecimal Data</a></li>
<li><a href="#index-g_t_0040code_007bsub_0028_0029_007d-function-1388"><code>sub()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bsub_0028_0029_007d-function-802"><code>sub()</code> function</a>: <a href="#Using-Constant-Regexps">Using Constant Regexps</a></li>
<li><a href="#index-g_t_0040code_007bsub_0028_0029_007d-function_002c-arguments-of-1389"><code>sub()</code> function, arguments of</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007bsub_0028_0029_007d-function_002c-escape-processing-1400"><code>sub()</code> function, escape processing</a>: <a href="#Gory-Details">Gory Details</a></li>
<li><a href="#index-subscript-separators-1228">subscript separators</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-subscripts-in-arrays_002c-multidimensional-1330">subscripts in arrays, multidimensional</a>: <a href="#Multi_002ddimensional">Multi-dimensional</a></li>
<li><a href="#index-subscripts-in-arrays_002c-multidimensional_002c-scanning-1333">subscripts in arrays, multidimensional, scanning</a>: <a href="#Multi_002dscanning">Multi-scanning</a></li>
<li><a href="#index-subscripts-in-arrays_002c-numbers-as-1320">subscripts in arrays, numbers as</a>: <a href="#Numeric-Array-Subscripts">Numeric Array Subscripts</a></li>
<li><a href="#index-subscripts-in-arrays_002c-uninitialized-variables-as-1325">subscripts in arrays, uninitialized variables as</a>: <a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></li>
<li><a href="#index-g_t_0040code_007bSUBSEP_007d-variable-1226"><code>SUBSEP</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bSUBSEP_007d-variable_002c-multidimensional-arrays-1332"><code>SUBSEP</code> variable, multidimensional arrays</a>: <a href="#Multi_002ddimensional">Multi-dimensional</a></li>
<li><a href="#index-g_t_0040code_007bsubstr_0028_0029_007d-function-1392"><code>substr()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-Sumner_002c-Andrew-2158">Sumner, Andrew</a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-g_t_0040code_007bswitch_007d-statement-1146"><code>switch</code> statement</a>: <a href="#Switch-Statement">Switch Statement</a></li>
<li><a href="#index-syntactic-ambiguity_003a-_0040code_007b_002f_003d_007d-operator-vs_002e-_0040code_007b_002f_003d_0040dots_007b_007d_002f_007d-regexp-constant-885">syntactic ambiguity: <code>/=</code> operator vs. <code>/=.../</code> regexp constant</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-g_t_0040code_007bsystem_0028_0029_007d-function-1422"><code>system()</code> function</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-g_t_0040code_007bsystime_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1443"><code>systime()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-g_t_0040code_007bt_007d-debugger-command-_0028alias-for-_0040code_007btbreak_007d_0029-1949"><code>t</code> debugger command (alias for <code>tbreak</code>)</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-g_t_0040code_007btbreak_007d-debugger-command-1948"><code>tbreak</code> debugger command</a>: <a href="#Breakpoint-Control">Breakpoint Control</a></li>
<li><a href="#index-Tcl-1718">Tcl</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-TCP_002fIP-1652">TCP/IP</a>: <a href="#TCP_002fIP-Networking">TCP/IP Networking</a></li>
<li><a href="#index-TCP_002fIP_002c-support-for-755">TCP/IP, support for</a>: <a href="#Special-Network">Special Network</a></li>
<li><a href="#index-g_t_0040code_007btee_007d-utility-1871"><code>tee</code> utility</a>: <a href="#Tee-Program">Tee Program</a></li>
<li><a href="#index-g_t_0040code_007btee_002eawk_007d-program-1873"><code>tee.awk</code> program</a>: <a href="#Tee-Program">Tee Program</a></li>
<li><a href="#index-terminating-records-510">terminating records</a>: <a href="#Records">Records</a></li>
<li><a href="#index-g_t_0040code_007btestbits_002eawk_007d-program-1470"><code>testbits.awk</code> program</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-Texinfo-2190">Texinfo</a>: <a href="#Adding-Code">Adding Code</a></li>
<li><a href="#index-Texinfo-2099">Texinfo</a>: <a href="#Distribution-contents">Distribution contents</a></li>
<li><a href="#index-Texinfo-1910">Texinfo</a>: <a href="#Extract-Program">Extract Program</a></li>
<li><a href="#index-Texinfo-1888">Texinfo</a>: <a href="#Dupword-Program">Dupword Program</a></li>
<li><a href="#index-Texinfo-1699">Texinfo</a>: <a href="#Library-Functions">Library Functions</a></li>
<li><a href="#index-Texinfo-28">Texinfo</a>: <a href="#Conventions">Conventions</a></li>
<li><a href="#index-Texinfo_002c-chapter-beginnings-in-files-365">Texinfo, chapter beginnings in files</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-Texinfo_002c-extracting-programs-from-source-files-1908">Texinfo, extracting programs from source files</a>: <a href="#Extract-Program">Extract Program</a></li>
<li><a href="#index-text_002c-printing-667">text, printing</a>: <a href="#Print">Print</a></li>
<li><a href="#index-text_0040comma_007b_007d-printing_002c-unduplicated-lines-of-1875">text, printing, unduplicated lines of</a>: <a href="#Uniq-Program">Uniq Program</a></li>
<li><a href="#index-g_t_0040code_007bTEXTDOMAIN_007d-variable-1564"><code>TEXTDOMAIN</code> variable</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040code_007bTEXTDOMAIN_007d-variable-1230"><code>TEXTDOMAIN</code> variable</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-g_t_0040code_007bTEXTDOMAIN_007d-variable_002c-_0040code_007bBEGIN_007d-pattern-and-1575"><code>TEXTDOMAIN</code> variable, <code>BEGIN</code> pattern and</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040code_007bTEXTDOMAIN_007d-variable_002c-portability-and-1599"><code>TEXTDOMAIN</code> variable, portability and</a>: <a href="#I18N-Portability">I18N Portability</a></li>
<li><a href="#index-g_t_0040code_007btextdomain_0028_0029_007d-function-_0028C-library_0029-1526"><code>textdomain()</code> function (C library)</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-1074">tilde (<code>~</code>), <code>~</code> operator</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-1037">tilde (<code>~</code>), <code>~</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-937">tilde (<code>~</code>), <code>~</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-793">tilde (<code>~</code>), <code>~</code> operator</a>: <a href="#Regexp-Constants">Regexp Constants</a></li>
<li><a href="#index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-473">tilde (<code>~</code>), <code>~</code> operator</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-464">tilde (<code>~</code>), <code>~</code> operator</a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-tilde-_0028_0040code_007b_007e_007d_0029_002c-_0040code_007b_007e_007d-operator-314">tilde (<code>~</code>), <code>~</code> operator</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-time_002c-alarm-clock-example-program-1892">time, alarm clock example program</a>: <a href="#Alarm-Program">Alarm Program</a></li>
<li><a href="#index-time_002c-localization-and-1559">time, localization and</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-time_002c-managing-1758">time, managing</a>: <a href="#Gettimeofday-Function">Gettimeofday Function</a></li>
<li><a href="#index-time_002c-retrieving-1438">time, retrieving</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-timestamps-1432">timestamps</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-timestamps_002c-converting-dates-to-1447">timestamps, converting dates to</a>: <a href="#Time-Functions">Time Functions</a></li>
<li><a href="#index-timestamps_002c-formatted-1757">timestamps, formatted</a>: <a href="#Gettimeofday-Function">Gettimeofday Function</a></li>
<li><a href="#index-g_t_0040code_007btolower_0028_0029_007d-function-1397"><code>tolower()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040code_007btoupper_0028_0029_007d-function-1398"><code>toupper()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-g_t_0040command_007btr_007d-utility-1897"><samp><span class="command">tr</span></samp> utility</a>: <a href="#Translate-Program">Translate Program</a></li>
<li><a href="#index-g_t_0040code_007btrace_007d-debugger-command-2041"><code>trace</code> debugger command</a>: <a href="#Miscellaneous-Dgawk-Commands">Miscellaneous Dgawk Commands</a></li>
<li><a href="#index-g_t_0040code_007btranslate_002eawk_007d-program-1898"><code>translate.awk</code> program</a>: <a href="#Translate-Program">Translate Program</a></li>
<li><a href="#index-troubleshooting_002c-_0040code_007b_002d_002dnon_002ddecimal_002ddata_007d-option-240">troubleshooting, <code>--non-decimal-data</code> option</a>: <a href="#Options">Options</a></li>
<li><a href="#index-troubleshooting_002c-_0040code_007b_003d_003d_007d-operator-941">troubleshooting, <code>==</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-troubleshooting_002c-_0040command_007bawk_007d-uses-_0040code_007bFS_007d-not-_0040code_007bIFS_007d-552">troubleshooting, <samp><span class="command">awk</span></samp> uses <code>FS</code> not <code>IFS</code></a>: <a href="#Field-Separators">Field Separators</a></li>
<li><a href="#index-troubleshooting_002c-backslash-before-nonspecial-character-356">troubleshooting, backslash before nonspecial character</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-troubleshooting_002c-division-829">troubleshooting, division</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-troubleshooting_002c-fatal-errors_002c-field-widths_0040comma_007b_007d-specifying-593">troubleshooting, fatal errors, field widths, specifying</a>: <a href="#Constant-Size">Constant Size</a></li>
<li><a href="#index-troubleshooting_002c-fatal-errors_002c-_0040code_007bprintf_007d-format-strings-706">troubleshooting, fatal errors, <code>printf</code> format strings</a>: <a href="#Format-Modifiers">Format Modifiers</a></li>
<li><a href="#index-troubleshooting_002c-_0040code_007bfflush_0028_0029_007d-function-1421">troubleshooting, <code>fflush()</code> function</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-troubleshooting_002c-function-call-syntax-983">troubleshooting, function call syntax</a>: <a href="#Function-Calls">Function Calls</a></li>
<li><a href="#index-troubleshooting_002c-_0040command_007bgawk_007d-2184">troubleshooting, <samp><span class="command">gawk</span></samp></a>: <a href="#Compatibility-Mode">Compatibility Mode</a></li>
<li><a href="#index-troubleshooting_002c-_0040command_007bgawk_007d_002c-bug-reports-2137">troubleshooting, <samp><span class="command">gawk</span></samp>, bug reports</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-troubleshooting_002c-_0040command_007bgawk_007d_002c-fatal-errors_0040comma_007b_007d-function-arguments-1339">troubleshooting, <samp><span class="command">gawk</span></samp>, fatal errors, function arguments</a>: <a href="#Calling-Built_002din">Calling Built-in</a></li>
<li><a href="#index-troubleshooting_002c-_0040code_007bgetline_007d-function-1773">troubleshooting, <code>getline</code> function</a>: <a href="#File-Checking">File Checking</a></li>
<li><a href="#index-troubleshooting_002c-_0040code_007bgsub_0028_0029_007d_002f_0040code_007bsub_0028_0029_007d-functions-1391">troubleshooting, <code>gsub()</code>/<code>sub()</code> functions</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-troubleshooting_002c-_0040code_007bmatch_0028_0029_007d-function-1378">troubleshooting, <code>match()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-troubleshooting_002c-_0040code_007bpatsplit_0028_0029_007d-function-1380">troubleshooting, <code>patsplit()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-troubleshooting_002c-_0040code_007bprint_007d-statement_0040comma_007b_007d-omitting-commas-671">troubleshooting, <code>print</code> statement, omitting commas</a>: <a href="#Print-Examples">Print Examples</a></li>
<li><a href="#index-troubleshooting_002c-printing-725">troubleshooting, printing</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-troubleshooting_002c-quotes-with-_0040value_007bFN_007ds-753">troubleshooting, quotes with file names</a>: <a href="#Special-FD">Special FD</a></li>
<li><a href="#index-troubleshooting_002c-readable-_0040value_007bDF_007ds-1769">troubleshooting, readable data files</a>: <a href="#File-Checking">File Checking</a></li>
<li><a href="#index-troubleshooting_002c-regexp-constants-vs_002e_0040_003a-string-constants-481">troubleshooting, regexp constants vs. string constants</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-troubleshooting_002c-string-concatenation-840">troubleshooting, string concatenation</a>: <a href="#Concatenation">Concatenation</a></li>
<li><a href="#index-troubleshooting_002c-_0040code_007bsubstr_0028_0029_007d-function-1393">troubleshooting, <code>substr()</code> function</a>: <a href="#String-Functions">String Functions</a></li>
<li><a href="#index-troubleshooting_002c-_0040code_007bsystem_0028_0029_007d-function-1424">troubleshooting, <code>system()</code> function</a>: <a href="#I_002fO-Functions">I/O Functions</a></li>
<li><a href="#index-troubleshooting_002c-typographical-errors_0040comma_007b_007d-global-variables-215">troubleshooting, typographical errors, global variables</a>: <a href="#Options">Options</a></li>
<li><a href="#index-true_002c-logical-910">true, logical</a>: <a href="#Truth-Values">Truth Values</a></li>
<li><a href="#index-Trueman_002c-David-2063">Trueman, David</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Trueman_002c-David-52">Trueman, David</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-Trueman_002c-David-19">Trueman, David</a>: <a href="#History">History</a></li>
<li><a href="#index-trunc_002dmod-operation-832">trunc-mod operation</a>: <a href="#Arithmetic-Ops">Arithmetic Ops</a></li>
<li><a href="#index-truth-values-907">truth values</a>: <a href="#Truth-Values">Truth Values</a></li>
<li><a href="#index-type-conversion-817">type conversion</a>: <a href="#Conversion">Conversion</a></li>
<li><a href="#index-g_t_0040code_007btype_007d-internal-variable-2230"><code>type</code> internal variable</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bu_007d-debugger-command-_0028alias-for-_0040code_007buntil_007d_0029-1985"><code>u</code> debugger command (alias for <code>until</code>)</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-undefined-functions-1506">undefined functions</a>: <a href="#Pass-By-Value_002fReference">Pass By Value/Reference</a></li>
<li><a href="#index-underscore-_0028_0040code_007b_005f_007d_0029_002c-_0040code_007b_005f_007d-C-macro-1546">underscore (<code>_</code>), <code>_</code> C macro</a>: <a href="#Explaining-gettext">Explaining gettext</a></li>
<li><a href="#index-underscore-_0028_0040code_007b_005f_007d_0029_002c-in-names-of-private-variables-1713">underscore (<code>_</code>), in names of private variables</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-underscore-_0028_0040code_007b_005f_007d_0029_002c-translatable-string-1577">underscore (<code>_</code>), translatable string</a>: <a href="#Programmer-i18n">Programmer i18n</a></li>
<li><a href="#index-g_t_0040code_007bundisplay_007d-debugger-command-2003"><code>undisplay</code> debugger command</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-undocumented-features-299">undocumented features</a>: <a href="#Undocumented">Undocumented</a></li>
<li><a href="#index-Unicode-2338">Unicode</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-uninitialized-variables_002c-as-array-subscripts-1324">uninitialized variables, as array subscripts</a>: <a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></li>
<li><a href="#index-g_t_0040command_007buniq_007d-utility-1876"><samp><span class="command">uniq</span></samp> utility</a>: <a href="#Uniq-Program">Uniq Program</a></li>
<li><a href="#index-g_t_0040code_007buniq_002eawk_007d-program-1877"><code>uniq.awk</code> program</a>: <a href="#Uniq-Program">Uniq Program</a></li>
<li><a href="#index-Unix-2363">Unix</a>: <a href="#Glossary">Glossary</a></li>
<li><a href="#index-Unix-_0040command_007bawk_007d_002c-backslashes-in-escape-sequences-358">Unix <samp><span class="command">awk</span></samp>, backslashes in escape sequences</a>: <a href="#Escape-Sequences">Escape Sequences</a></li>
<li><a href="#index-Unix-_0040command_007bawk_007d_002c-_0040code_007bclose_0028_0029_007d-function-and-773">Unix <samp><span class="command">awk</span></samp>, <code>close()</code> function and</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-Unix-_0040command_007bawk_007d_002c-password-files_0040comma_007b_007d-field-separators-and-583">Unix <samp><span class="command">awk</span></samp>, password files, field separators and</a>: <a href="#Command-Line-Field-Separator">Command Line Field Separator</a></li>
<li><a href="#index-Unix_002c-_0040command_007bawk_007d-scripts-and-113">Unix, <samp><span class="command">awk</span></samp> scripts and</a>: <a href="#Executable-Scripts">Executable Scripts</a></li>
<li><a href="#index-g_t_0040code_007bUNIXROOT_007d-variable_002c-on-OS_002f2-systems-2124"><code>UNIXROOT</code> variable, on OS/2 systems</a>: <a href="#PC-Using">PC Using</a></li>
<li><a href="#index-g_t_0040code_007bunref_0028_0029_007d-internal-function-2250"><code>unref()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-unsigned-integers-2315">unsigned integers</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-g_t_0040code_007buntil_007d-debugger-command-1984"><code>until</code> debugger command</a>: <a href="#Dgawk-Execution-Control">Dgawk Execution Control</a></li>
<li><a href="#index-g_t_0040code_007bunwatch_007d-debugger-command-2005"><code>unwatch</code> debugger command</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-g_t_0040code_007bup_007d-debugger-command-2017"><code>up</code> debugger command</a>: <a href="#Dgawk-Stack">Dgawk Stack</a></li>
<li><a href="#index-g_t_0040code_007bupdate_005fERRNO_0028_0029_007d-internal-function-2265"><code>update_ERRNO()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bupdate_005fERRNO_005fsaved_0028_0029_007d-internal-function-2268"><code>update_ERRNO_saved()</code> internal function</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-user-database_0040comma_007b_007d-reading-1789">user database, reading</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-user_002ddefined_002c-functions-1483">user-defined, functions</a>: <a href="#User_002ddefined">User-defined</a></li>
<li><a href="#index-user_002ddefined_002c-functions_002c-counts-1676">user-defined, functions, counts</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-user_002ddefined_002c-variables-805">user-defined, variables</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-user_002dmodifiable-variables-1180">user-modifiable variables</a>: <a href="#User_002dmodified">User-modified</a></li>
<li><a href="#index-users_002c-information-about_002c-printing-1861">users, information about, printing</a>: <a href="#Id-Program">Id Program</a></li>
<li><a href="#index-users_002c-information-about_002c-retrieving-1794">users, information about, retrieving</a>: <a href="#Passwd-Functions">Passwd Functions</a></li>
<li><a href="#index-g_t_0040code_007bUSR1_007d-signal-1684"><code>USR1</code> signal</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-values_002c-numeric-2309">values, numeric</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-values_002c-string-2310">values, string</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-variable-typing-919">variable typing</a>: <a href="#Typing-and-Comparison">Typing and Comparison</a></li>
<li><a href="#index-variables-2308">variables</a>: <a href="#Basic-Data-Typing">Basic Data Typing</a></li>
<li><a href="#index-variables-168">variables</a>: <a href="#Other-Features">Other Features</a></li>
<li><a href="#index-variables_002c-assigning-on-command-line-808">variables, assigning on command line</a>: <a href="#Assignment-Options">Assignment Options</a></li>
<li><a href="#index-variables_002c-built_002din-1177">variables, built-in</a>: <a href="#Built_002din-Variables">Built-in Variables</a></li>
<li><a href="#index-variables_002c-built_002din-806">variables, built-in</a>: <a href="#Using-Variables">Using Variables</a></li>
<li><a href="#index-variables_002c-built_002din_002c-_0040code_007b_002dv_007d-option_0040comma_007b_007d-setting-with-196">variables, built-in, <code>-v</code> option, setting with</a>: <a href="#Options">Options</a></li>
<li><a href="#index-variables_002c-built_002din_002c-conveying-information-1234">variables, built-in, conveying information</a>: <a href="#Auto_002dset">Auto-set</a></li>
<li><a href="#index-variables_002c-flag-970">variables, flag</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-variables_002c-_0040code_007bgetline_007d-command-into_0040comma_007b_007d-using-648">variables, <code>getline</code> command into, using</a>: <a href="#Getline_002fVariable_002fCoprocess">Getline/Variable/Coprocess</a></li>
<li><a href="#index-variables_002c-_0040code_007bgetline_007d-command-into_0040comma_007b_007d-using-641">variables, <code>getline</code> command into, using</a>: <a href="#Getline_002fVariable_002fPipe">Getline/Variable/Pipe</a></li>
<li><a href="#index-variables_002c-_0040code_007bgetline_007d-command-into_0040comma_007b_007d-using-627">variables, <code>getline</code> command into, using</a>: <a href="#Getline_002fVariable_002fFile">Getline/Variable/File</a></li>
<li><a href="#index-variables_002c-_0040code_007bgetline_007d-command-into_0040comma_007b_007d-using-620">variables, <code>getline</code> command into, using</a>: <a href="#Getline_002fVariable">Getline/Variable</a></li>
<li><a href="#index-variables_002c-global_002c-for-library-functions-1708">variables, global, for library functions</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-variables_002c-global_002c-printing-list-of-214">variables, global, printing list of</a>: <a href="#Options">Options</a></li>
<li><a href="#index-variables_002c-initializing-807">variables, initializing</a>: <a href="#Using-Variables">Using Variables</a></li>
<li><a href="#index-variables_002c-local-1501">variables, local</a>: <a href="#Variable-Scope">Variable Scope</a></li>
<li><a href="#index-variables_002c-names-of-1274">variables, names of</a>: <a href="#Arrays">Arrays</a></li>
<li><a href="#index-variables_002c-private-1710">variables, private</a>: <a href="#Library-Names">Library Names</a></li>
<li><a href="#index-variables_002c-setting-194">variables, setting</a>: <a href="#Options">Options</a></li>
<li><a href="#index-variables_002c-shadowing-1490">variables, shadowing</a>: <a href="#Definition-Syntax">Definition Syntax</a></li>
<li><a href="#index-variables_002c-types-of-854">variables, types of</a>: <a href="#Assignment-Ops">Assignment Ops</a></li>
<li><a href="#index-variables_002c-types-of_002c-comparison-expressions-and-920">variables, types of, comparison expressions and</a>: <a href="#Typing-and-Comparison">Typing and Comparison</a></li>
<li><a href="#index-variables_002c-uninitialized_0040comma_007b_007d-as-array-subscripts-1323">variables, uninitialized, as array subscripts</a>: <a href="#Uninitialized-Subscripts">Uninitialized Subscripts</a></li>
<li><a href="#index-variables_002c-user_002ddefined-804">variables, user-defined</a>: <a href="#Variables">Variables</a></li>
<li><a href="#index-vertical-bar-_0028_0040code_007b_007c_007d_0029-380">vertical bar (<code>|</code>)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_007d-operator-_0028I_002fO_0029-1029">vertical bar (<code>|</code>), <code>|</code> operator (I/O)</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_007d-operator-_0028I_002fO_0029-632">vertical bar (<code>|</code>), <code>|</code> operator (I/O)</a>: <a href="#Getline_002fPipe">Getline/Pipe</a></li>
<li><a href="#index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-1641">vertical bar (<code>|</code>), <code>|&amp;</code> operator (I/O)</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-1032">vertical bar (<code>|</code>), <code>|&amp;</code> operator (I/O)</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-645">vertical bar (<code>|</code>), <code>|&amp;</code> operator (I/O)</a>: <a href="#Getline_002fCoprocess">Getline/Coprocess</a></li>
<li><a href="#index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_007c_007d-operator-1044">vertical bar (<code>|</code>), <code>||</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-vertical-bar-_0028_0040code_007b_007c_007d_0029_002c-_0040code_007b_007c_007c_007d-operator-965">vertical bar (<code>|</code>), <code>||</code> operator</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-Vinschen_002c-Corinna-70">Vinschen, Corinna</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-g_t_0040code_007bvname_007d-internal-variable-2232"><code>vname</code> internal variable</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bw_007d-debugger-command-_0028alias-for-_0040code_007bwatch_007d_0029-2001"><code>w</code> debugger command (alias for <code>watch</code>)</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-g_t_0040command_007bw_007d-utility-594"><samp><span class="command">w</span></samp> utility</a>: <a href="#Constant-Size">Constant Size</a></li>
<li><a href="#index-g_t_0040code_007bwalk_005farray_0028_0029_007d-user_002ddefined-function-1839"><code>walk_array()</code> user-defined function</a>: <a href="#Walking-Arrays">Walking Arrays</a></li>
<li><a href="#index-Wall_002c-Larry-2295">Wall, Larry</a>: <a href="#Future-Extensions">Future Extensions</a></li>
<li><a href="#index-Wall_002c-Larry-1279">Wall, Larry</a>: <a href="#Array-Intro">Array Intro</a></li>
<li><a href="#index-Wallin_002c-Anders-71">Wallin, Anders</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-warnings_002c-issuing-235">warnings, issuing</a>: <a href="#Options">Options</a></li>
<li><a href="#index-g_t_0040code_007bwatch_007d-debugger-command-2000"><code>watch</code> debugger command</a>: <a href="#Viewing-And-Changing-Data">Viewing And Changing Data</a></li>
<li><a href="#index-g_t_0040command_007bwc_007d-utility-1883"><samp><span class="command">wc</span></samp> utility</a>: <a href="#Wc-Program">Wc Program</a></li>
<li><a href="#index-g_t_0040code_007bwc_002eawk_007d-program-1884"><code>wc.awk</code> program</a>: <a href="#Wc-Program">Wc Program</a></li>
<li><a href="#index-Weinberger_002c-Peter-2056">Weinberger, Peter</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Weinberger_002c-Peter-14">Weinberger, Peter</a>: <a href="#History">History</a></li>
<li><a href="#index-g_t_0040code_007bwhile_007d-statement-1138"><code>while</code> statement</a>: <a href="#While-Statement">While Statement</a></li>
<li><a href="#index-g_t_0040code_007bwhile_007d-statement-318"><code>while</code> statement</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
<li><a href="#index-whitespace_002c-as-field-separators-559">whitespace, as field separators</a>: <a href="#Default-Field-Splitting">Default Field Splitting</a></li>
<li><a href="#index-whitespace_002c-functions_0040comma_007b_007d-calling-1338">whitespace, functions, calling</a>: <a href="#Calling-Built_002din">Calling Built-in</a></li>
<li><a href="#index-whitespace_002c-newlines-as-253">whitespace, newlines as</a>: <a href="#Options">Options</a></li>
<li><a href="#index-Williams_002c-Kent-2066">Williams, Kent</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Woehlke_002c-Matthew-2079">Woehlke, Matthew</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Woods_002c-John-2062">Woods, John</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-word-boundaries_0040comma_007b_007d-matching-439">word boundaries, matching</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-word_002c-regexp-definition-of-424">word, regexp definition of</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-word_002dboundary-operator-_0028_0040command_007bgawk_007d_0029-454">word-boundary operator (<samp><span class="command">gawk</span></samp>)</a>: <a href="#GNU-Regexp-Operators">GNU Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007bwordfreq_002eawk_007d-program-1904"><code>wordfreq.awk</code> program</a>: <a href="#Word-Sorting">Word Sorting</a></li>
<li><a href="#index-words_002c-counting-1880">words, counting</a>: <a href="#Wc-Program">Wc Program</a></li>
<li><a href="#index-words_002c-duplicate_0040comma_007b_007d-searching-for-1885">words, duplicate, searching for</a>: <a href="#Dupword-Program">Dupword Program</a></li>
<li><a href="#index-words_002c-usage-counts_0040comma_007b_007d-generating-1902">words, usage counts, generating</a>: <a href="#Word-Sorting">Word Sorting</a></li>
<li><a href="#index-g_t_0040code_007bwstlen_007d-internal-variable-2228"><code>wstlen</code> internal variable</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040code_007bwstptr_007d-internal-variable-2226"><code>wstptr</code> internal variable</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-g_t_0040command_007bxgawk_007d-2178"><samp><span class="command">xgawk</span></samp></a>: <a href="#Other-Versions">Other Versions</a></li>
<li><a href="#index-g_t_0040code_007bxgettext_007d-utility-1591"><code>xgettext</code> utility</a>: <a href="#String-Extraction">String Extraction</a></li>
<li><a href="#index-XML-_0028eXtensible-Markup-Language_0029-2282">XML (eXtensible Markup Language)</a>: <a href="#Internals">Internals</a></li>
<li><a href="#index-XOR-bitwise-operation-1454">XOR bitwise operation</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-g_t_0040code_007bxor_0028_0029_007d-function-_0028_0040command_007bgawk_007d_0029-1468"><code>xor()</code> function (<samp><span class="command">gawk</span></samp>)</a>: <a href="#Bitwise-Functions">Bitwise Functions</a></li>
<li><a href="#index-Yawitz_002c-Efraim-2088">Yawitz, Efraim</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Zaretskii_002c-Eli-2144">Zaretskii, Eli</a>: <a href="#Bugs">Bugs</a></li>
<li><a href="#index-Zaretskii_002c-Eli-2073">Zaretskii, Eli</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-Zaretskii_002c-Eli-72">Zaretskii, Eli</a>: <a href="#Acknowledgments">Acknowledgments</a></li>
<li><a href="#index-zero_0040comma_007b_007d-negative-vs_002e_0040_003a-positive-2325">zero, negative vs. positive</a>: <a href="#Unexpected-Results">Unexpected Results</a></li>
<li><a href="#index-g_t_0040code_007bzerofile_002eawk_007d-program-1774"><code>zerofile.awk</code> program</a>: <a href="#Empty-Files">Empty Files</a></li>
<li><a href="#index-Zoulas_002c-Christos-2076">Zoulas, Christos</a>: <a href="#Contributors">Contributors</a></li>
<li><a href="#index-g_t_0040code_007b_0040_007b_0040_007d_007d-_0028braces_0029_002c-actions-and-1119"><code>{}</code> (braces), actions and</a>: <a href="#Action-Overview">Action Overview</a></li>
<li><a href="#index-g_t_0040code_007b_0040_007b_0040_007d_007d-_0028braces_0029_002c-_0040command_007bpgawk_007d-program-1677"><code>{}</code> (braces), <samp><span class="command">pgawk</span></samp> program</a>: <a href="#Profiling">Profiling</a></li>
<li><a href="#index-g_t_0040code_007b_0040_007b_0040_007d_007d-_0028braces_0029_002c-statements_002c-grouping-1132"><code>{}</code> (braces), statements, grouping</a>: <a href="#Statements">Statements</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029-379"><code>|</code> (vertical bar)</a>: <a href="#Regexp-Operators">Regexp Operators</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_007d-operator-_0028I_002fO_0029-1028"><code>|</code> (vertical bar), <code>|</code> operator (I/O)</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_007d-operator-_0028I_002fO_0029-718"><code>|</code> (vertical bar), <code>|</code> operator (I/O)</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_007d-operator-_0028I_002fO_0029-631"><code>|</code> (vertical bar), <code>|</code> operator (I/O)</a>: <a href="#Getline_002fPipe">Getline/Pipe</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-1640"><code>|</code> (vertical bar), <code>|&amp;</code> operator (I/O)</a>: <a href="#Two_002dway-I_002fO">Two-way I/O</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-1031"><code>|</code> (vertical bar), <code>|&amp;</code> operator (I/O)</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-722"><code>|</code> (vertical bar), <code>|&amp;</code> operator (I/O)</a>: <a href="#Redirection">Redirection</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029-644"><code>|</code> (vertical bar), <code>|&amp;</code> operator (I/O)</a>: <a href="#Getline_002fCoprocess">Getline/Coprocess</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_0026_007d-operator-_0028I_002fO_0029_002c-pipes_0040comma_007b_007d-closing-767"><code>|</code> (vertical bar), <code>|&amp;</code> operator (I/O), pipes, closing</a>: <a href="#Close-Files-And-Pipes">Close Files And Pipes</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_007c_007d-operator-1043"><code>|</code> (vertical bar), <code>||</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_007c_007d-_0028vertical-bar_0029_002c-_0040code_007b_007c_007c_007d-operator-964"><code>|</code> (vertical bar), <code>||</code> operator</a>: <a href="#Boolean-Ops">Boolean Ops</a></li>
<li><a href="#index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-1073"><code>~</code> (tilde), <code>~</code> operator</a>: <a href="#Expression-Patterns">Expression Patterns</a></li>
<li><a href="#index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-1036"><code>~</code> (tilde), <code>~</code> operator</a>: <a href="#Precedence">Precedence</a></li>
<li><a href="#index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-936"><code>~</code> (tilde), <code>~</code> operator</a>: <a href="#Comparison-Operators">Comparison Operators</a></li>
<li><a href="#index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-792"><code>~</code> (tilde), <code>~</code> operator</a>: <a href="#Regexp-Constants">Regexp Constants</a></li>
<li><a href="#index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-472"><code>~</code> (tilde), <code>~</code> operator</a>: <a href="#Computed-Regexps">Computed Regexps</a></li>
<li><a href="#index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-463"><code>~</code> (tilde), <code>~</code> operator</a>: <a href="#Case_002dsensitivity">Case-sensitivity</a></li>
<li><a href="#index-g_t_0040code_007b_007e_007d-_0028tilde_0029_002c-_0040code_007b_007e_007d-operator-313"><code>~</code> (tilde), <code>~</code> operator</a>: <a href="#Regexp-Usage">Regexp Usage</a></li>
   </ul><div class="footnote">
<hr>
<a name="texinfo-footnotes-in-document"></a><h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> The 2008 POSIX standard can be found online at
<a href="http://www.opengroup.org/onlinepubs/9699919799/">http://www.opengroup.org/onlinepubs/9699919799/</a>.</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> These commands
are available on POSIX-compliant systems, as well as on traditional
Unix-based systems. If you are using some other operating system, you still need to
be familiar with the ideas of I/O redirection and pipes.</p>

   <p class="footnote"><small>[<a name="fn-3" href="#fnd-3">3</a>]</small> Often, these systems
use <samp><span class="command">gawk</span></samp> for their <samp><span class="command">awk</span></samp> implementation!</p>

   <p class="footnote"><small>[<a name="fn-4" href="#fnd-4">4</a>]</small> All such differences
appear in the index under the
entry &ldquo;differences in <samp><span class="command">awk</span></samp> and <samp><span class="command">gawk</span></samp>.&rdquo;</p>

   <p class="footnote"><small>[<a name="fn-5" href="#fnd-5">5</a>]</small> GNU stands for &ldquo;GNU's not Unix.&rdquo;</p>

   <p class="footnote"><small>[<a name="fn-6" href="#fnd-6">6</a>]</small> The terminology &ldquo;GNU/Linux&rdquo; is explained
in the <a href="#Glossary">Glossary</a>.</p>

   <p class="footnote"><small>[<a name="fn-7" href="#fnd-7">7</a>]</small> If you use Bash as your shell, you should execute
the command &lsquo;<samp><span class="samp">set +H</span></samp>&rsquo; before running this program interactively,
to disable the C shell-style command history, which treats
&lsquo;<samp><span class="samp">!</span></samp>&rsquo; as a special character. We recommend putting this command into
your personal startup file.</p>

   <p class="footnote"><small>[<a name="fn-8" href="#fnd-8">8</a>]</small> Although we generally recommend the use of single
quotes around the program text, double quotes are needed here in order to
put the single quote into the message.</p>

   <p class="footnote"><small>[<a name="fn-9" href="#fnd-9">9</a>]</small> The &lsquo;<samp><span class="samp">#!</span></samp>&rsquo; mechanism works on
GNU/Linux systems, BSD-based systems and commercial Unix systems.</p>

   <p class="footnote"><small>[<a name="fn-10" href="#fnd-10">10</a>]</small> The
line beginning with &lsquo;<samp><span class="samp">#!</span></samp>&rsquo; lists the full file name of an interpreter
to run and an optional initial command-line argument to pass to that
interpreter.  The operating system then runs the interpreter with the given
argument and the full argument list of the executed program.  The first argument
in the list is the full file name of the <samp><span class="command">awk</span></samp> program. 
The rest of the
argument list contains either options to <samp><span class="command">awk</span></samp>, or data files,
or both. Note that on many systems <samp><span class="command">awk</span></samp> may be found in
<samp><span class="file">/usr/bin</span></samp> instead of in <samp><span class="file">/bin</span></samp>. Caveat Emptor.</p>

   <p class="footnote"><small>[<a name="fn-11" href="#fnd-11">11</a>]</small> The &lsquo;<samp><span class="samp">LC_ALL=C</span></samp>&rsquo; is
needed to produce this traditional-style output from <samp><span class="command">ls</span></samp>.</p>

   <p class="footnote"><small>[<a name="fn-12" href="#fnd-12">12</a>]</small> The &lsquo;<samp><span class="samp">?</span></samp>&rsquo; and &lsquo;<samp><span class="samp">:</span></samp>&rsquo; referred to here is the
three-operand conditional expression described in
<a href="#Conditional-Exp">Conditional Exp</a>. 
Splitting lines after &lsquo;<samp><span class="samp">?</span></samp>&rsquo; and &lsquo;<samp><span class="samp">:</span></samp>&rsquo; is a minor <samp><span class="command">gawk</span></samp>
extension; if <samp><span class="option">--posix</span></samp> is specified
(see <a href="#Options">Options</a>), then this extension is disabled.</p>

   <p class="footnote"><small>[<a name="fn-13" href="#fnd-13">13</a>]</small> Not recommended.</p>

   <p class="footnote"><small>[<a name="fn-14" href="#fnd-14">14</a>]</small> Your version of <samp><span class="command">gawk</span></samp>
may use a different directory; it
will depend upon how <samp><span class="command">gawk</span></samp> was built and installed. The actual
directory is the value of &lsquo;<samp><span class="samp">$(datadir)</span></samp>&rsquo; generated when
<samp><span class="command">gawk</span></samp> was configured.  You probably don't need to worry about this,
though.</p>

   <p class="footnote"><small>[<a name="fn-15" href="#fnd-15">15</a>]</small> In other literature,
you may see a bracket expression referred to as either a
<dfn>character set</dfn>, a <dfn>character class</dfn>, or a <dfn>character list</dfn>.</p>

   <p class="footnote"><small>[<a name="fn-16" href="#fnd-16">16</a>]</small> Use two backslashes if you're
using a string constant with a regexp operator or function.</p>

   <p class="footnote"><small>[<a name="fn-17" href="#fnd-17">17</a>]</small> Experienced C and C++ programmers will note
that it is possible, using something like
&lsquo;<samp><span class="samp">IGNORECASE = 1 &amp;&amp; /foObAr/ { ... }</span></samp>&rsquo;
and
&lsquo;<samp><span class="samp">IGNORECASE = 0 || /foobar/ { ... }</span></samp>&rsquo;. 
However, this is somewhat obscure and we don't recommend it.</p>

   <p class="footnote"><small>[<a name="fn-18" href="#fnd-18">18</a>]</small> If you don't understand this,
don't worry about it; it just means that <samp><span class="command">gawk</span></samp> does
the right thing.</p>

   <p class="footnote"><small>[<a name="fn-19" href="#fnd-19">19</a>]</small> At least that we know
about.</p>

   <p class="footnote"><small>[<a name="fn-20" href="#fnd-20">20</a>]</small> In POSIX <samp><span class="command">awk</span></samp>, newlines are not
considered whitespace for separating fields.</p>

   <p class="footnote"><small>[<a name="fn-21" href="#fnd-21">21</a>]</small> The <samp><span class="command">sed</span></samp> utility is a &ldquo;stream editor.&rdquo;
Its behavior is also defined by the POSIX standard.</p>

   <p class="footnote"><small>[<a name="fn-22" href="#fnd-22">22</a>]</small> At least, we don't know of one.</p>

   <p class="footnote"><small>[<a name="fn-23" href="#fnd-23">23</a>]</small> When <code>FS</code> is the null string (<code>""</code>)
or a regexp, this special feature of <code>RS</code> does not apply. 
It does apply to the default field separator of a single space:
&lsquo;<samp><span class="samp">FS = "&nbsp;"<!-- /@w --></span></samp>&rsquo;.</p>

   <p class="footnote"><small>[<a name="fn-24" href="#fnd-24">24</a>]</small> This is not quite true. <code>RT</code> could
be changed if <code>RS</code> is a regular expression.</p>

   <p class="footnote"><small>[<a name="fn-25" href="#fnd-25">25</a>]</small> The &ldquo;tty&rdquo; in <samp><span class="file">/dev/tty</span></samp> stands for
&ldquo;Teletype,&rdquo; a serial terminal.</p>

   <p class="footnote"><small>[<a name="fn-26" href="#fnd-26">26</a>]</small> The technical terminology is rather morbid. 
The finished child is called a &ldquo;zombie,&rdquo; and cleaning up after
it is referred to as &ldquo;reaping.&rdquo;</p>

   <p class="footnote"><small>[<a name="fn-27" href="#fnd-27">27</a>]</small> 
This is a full 16-bit value as returned by the <code>wait()</code>
system call. See the system manual pages for information on
how to decode this value.</p>

   <p class="footnote"><small>[<a name="fn-28" href="#fnd-28">28</a>]</small> The internal representation of all numbers,
including integers, uses double precision
floating-point numbers. 
On most modern systems, these are in IEEE 754 standard format.</p>

   <p class="footnote"><small>[<a name="fn-29" href="#fnd-29">29</a>]</small> Pathological cases can require up to
752 digits (!), but we doubt that you need to worry about this.</p>

   <p class="footnote"><small>[<a name="fn-30" href="#fnd-30">30</a>]</small> It happens that Brian Kernighan's
<samp><span class="command">awk</span></samp>, <samp><span class="command">gawk</span></samp> and <samp><span class="command">mawk</span></samp> all &ldquo;get it right,&rdquo;
but you should not rely on this.</p>

   <p class="footnote"><small>[<a name="fn-31" href="#fnd-31">31</a>]</small> <samp><span class="command">gawk</span></samp> has
followed these rules for many years,
and it is gratifying that the POSIX standard is also now correct.</p>

   <p class="footnote"><small>[<a name="fn-32" href="#fnd-32">32</a>]</small> Technically, string comparison is supposed
to behave the same way as if the strings are compared with the C
<code>strcoll()</code> function.</p>

   <p class="footnote"><small>[<a name="fn-33" href="#fnd-33">33</a>]</small> This
program has a bug; it prints lines starting with &lsquo;<samp><span class="samp">END</span></samp>&rsquo;. How
would you fix it?</p>

   <p class="footnote"><small>[<a name="fn-34" href="#fnd-34">34</a>]</small> The original version of <samp><span class="command">awk</span></samp> kept
reading and ignoring input until the end of the file was seen.</p>

   <p class="footnote"><small>[<a name="fn-35" href="#fnd-35">35</a>]</small> In
POSIX <samp><span class="command">awk</span></samp>, newline does not count as whitespace.</p>

   <p class="footnote"><small>[<a name="fn-36" href="#fnd-36">36</a>]</small> Some early implementations of Unix <samp><span class="command">awk</span></samp> initialized
<code>FILENAME</code> to <code>"-"</code>, even if there were data files to be
processed. This behavior was incorrect and should not be relied
upon in your programs.</p>

   <p class="footnote"><small>[<a name="fn-37" href="#fnd-37">37</a>]</small> When two elements
compare as equal, the C <code>qsort()</code> function does not guarantee
that they will maintain their original relative order after sorting. 
Using the string value to provide a unique ordering when the numeric
values are equal ensures that <samp><span class="command">gawk</span></samp> behaves consistently
across different environments.</p>

   <p class="footnote"><small>[<a name="fn-38" href="#fnd-38">38</a>]</small> Thanks to Michael Brennan for pointing this out.</p>

   <p class="footnote"><small>[<a name="fn-39" href="#fnd-39">39</a>]</small> The C version of <code>rand()</code>
on many Unix systems
is known to produce fairly poor sequences of random numbers. 
However, nothing requires that an <samp><span class="command">awk</span></samp> implementation use the C
<code>rand()</code> to implement the <samp><span class="command">awk</span></samp> version of <code>rand()</code>. 
In fact, <samp><span class="command">gawk</span></samp> uses the BSD <code>random()</code> function, which is
considerably better than <code>rand()</code>, to produce random numbers.</p>

   <p class="footnote"><small>[<a name="fn-40" href="#fnd-40">40</a>]</small> <samp><span class="command">mawk</span></samp>
uses a different seed each time.</p>

   <p class="footnote"><small>[<a name="fn-41" href="#fnd-41">41</a>]</small> Computer-generated random numbers really are not truly
random.  They are technically known as &ldquo;pseudorandom.&rdquo;  This means
that while the numbers in a sequence appear to be random, you can in
fact generate the same sequence of random numbers over and over again.</p>

   <p class="footnote"><small>[<a name="fn-42" href="#fnd-42">42</a>]</small> Unless
you use the <samp><span class="option">--non-decimal-data</span></samp> option, which isn't recommended. 
See <a href="#Nondecimal-Data">Nondecimal Data</a>, for more information.</p>

   <p class="footnote"><small>[<a name="fn-43" href="#fnd-43">43</a>]</small> Note that this means
that the record will first be regenerated using the value of <code>OFS</code> if
any fields have been changed, and that the fields will be updated
after the substitution, even if the operation is a &ldquo;no-op&rdquo; such
as &lsquo;<samp><span class="samp">sub(/^/, "")</span></samp>&rsquo;.</p>

   <p class="footnote"><small>[<a name="fn-44" href="#fnd-44">44</a>]</small> This is different from
C and C++, in which the first character is number zero.</p>

   <p class="footnote"><small>[<a name="fn-45" href="#fnd-45">45</a>]</small> This consequence was certainly unintended.</p>

   <p class="footnote"><small>[<a name="fn-46" href="#fnd-46">46</a>]</small> This was rather naive of him, despite
there being a note in this section indicating that the next major version
would move to the POSIX rules.</p>

   <p class="footnote"><small>[<a name="fn-47" href="#fnd-47">47</a>]</small> A program is interactive
if the standard output is connected to a terminal device. On modern
systems, this means your keyboard and screen.</p>

   <p class="footnote"><small>[<a name="fn-48" href="#fnd-48">48</a>]</small> See <a href="#Glossary">Glossary</a>,
especially the entries &ldquo;Epoch&rdquo; and &ldquo;UTC.&rdquo;</p>

   <p class="footnote"><small>[<a name="fn-49" href="#fnd-49">49</a>]</small> The GNU <samp><span class="command">date</span></samp> utility can
also do many of the things described here.  Its use may be preferable
for simple time-related operations in shell scripts.</p>

   <p class="footnote"><small>[<a name="fn-50" href="#fnd-50">50</a>]</small> Occasionally there are
minutes in a year with a leap second, which is why the
seconds can go up to 60.</p>

   <p class="footnote"><small>[<a name="fn-51" href="#fnd-51">51</a>]</small> Unfortunately,
not every system's <code>strftime()</code> necessarily
supports all of the conversions listed here.</p>

   <p class="footnote"><small>[<a name="fn-52" href="#fnd-52">52</a>]</small> If you don't understand any of this, don't worry about
it; these facilities are meant to make it easier to &ldquo;internationalize&rdquo;
programs. 
Other internationalization features are described in
<a href="#Internationalization">Internationalization</a>.</p>

   <p class="footnote"><small>[<a name="fn-53" href="#fnd-53">53</a>]</small> This is because ISO C leaves the
behavior of the C version of <code>strftime()</code> undefined and <samp><span class="command">gawk</span></samp>
uses the system's version of <code>strftime()</code> if it's there. 
Typically, the conversion specifier either does not appear in the
returned string or appears literally.</p>

   <p class="footnote"><small>[<a name="fn-54" href="#fnd-54">54</a>]</small> This example
shows that 0's come in on the left side. For <samp><span class="command">gawk</span></samp>, this is
always true, but in some languages, it's possible to have the left side
fill with 1's. Caveat emptor.</p>

   <p class="footnote"><small>[<a name="fn-55" href="#fnd-55">55</a>]</small> This program won't actually run,
since <code>foo()</code> is undefined.</p>

   <p class="footnote"><small>[<a name="fn-56" href="#fnd-56">56</a>]</small> For some operating systems, the <samp><span class="command">gawk</span></samp>
port doesn't support GNU <code>gettext</code>. 
Therefore, these features are not available
if you are using one of those operating systems. Sorry.</p>

   <p class="footnote"><small>[<a name="fn-57" href="#fnd-57">57</a>]</small> Americans
use a comma every three decimal places and a period for the decimal
point, while many Europeans do exactly the opposite:
1,234.56 versus 1.234,56.</p>

   <p class="footnote"><small>[<a name="fn-58" href="#fnd-58">58</a>]</small> The
<samp><span class="command">xgettext</span></samp> utility that comes with GNU
<code>gettext</code> can handle <samp><span class="file">.awk</span></samp> files.</p>

   <p class="footnote"><small>[<a name="fn-59" href="#fnd-59">59</a>]</small> This example is borrowed
from the GNU <code>gettext</code> manual.</p>

   <p class="footnote"><small>[<a name="fn-60" href="#fnd-60">60</a>]</small> This is good fodder for an &ldquo;Obfuscated
<samp><span class="command">awk</span></samp>&rdquo; contest.</p>

   <p class="footnote"><small>[<a name="fn-61" href="#fnd-61">61</a>]</small> Perhaps it would be better if it were
called &ldquo;Hippy.&rdquo; Ah, well.</p>

   <p class="footnote"><small>[<a name="fn-62" href="#fnd-62">62</a>]</small> You
may also use one of the predefined sorting names that sorts in
decreasing order.</p>

   <p class="footnote"><small>[<a name="fn-63" href="#fnd-63">63</a>]</small> This
is true because locale-based comparison occurs only when in POSIX
compatibility mode, and since <code>asort()</code> and <code>asorti()</code> are
<samp><span class="command">gawk</span></samp> extensions, they are not available in that case.</p>

   <p class="footnote"><small>[<a name="fn-64" href="#fnd-64">64</a>]</small> This is very
different from the same operator in the C shell.</p>

   <p class="footnote"><small>[<a name="fn-65" href="#fnd-65">65</a>]</small> The effects are
not identical.  Output of the transformed
record will be in all lowercase, while <code>IGNORECASE</code> preserves the original
contents of the input record.</p>

   <p class="footnote"><small>[<a name="fn-66" href="#fnd-66">66</a>]</small> While all the library routines could have
been rewritten to use this convention, this was not done, in order to
show how our own <samp><span class="command">awk</span></samp> programming style has evolved and to
provide some basis for this discussion.</p>

   <p class="footnote"><small>[<a name="fn-67" href="#fnd-67">67</a>]</small> <samp><span class="command">gawk</span></samp>'s <samp><span class="option">--dump-variables</span></samp> command-line
option is useful for verifying this.</p>

   <p class="footnote"><small>[<a name="fn-68" href="#fnd-68">68</a>]</small> This
is changing; many systems use Unicode, a very large character set
that includes ASCII as a subset.  On systems with full Unicode support,
a character can occupy up to 32 bits, making simple tests such as
used here prohibitively expensive.</p>

   <p class="footnote"><small>[<a name="fn-69" href="#fnd-69">69</a>]</small> ASCII
has been extended in many countries to use the values from 128 to 255
for country-specific characters.  If your  system uses these extensions,
you can simplify <code>_ord_init</code> to loop from 0 to 255.</p>

   <p class="footnote"><small>[<a name="fn-70" href="#fnd-70">70</a>]</small> It would
be nice if <samp><span class="command">awk</span></samp> had an assignment operator for concatenation. 
The lack of an explicit operator for concatenation makes string operations
more difficult than they really need to be.</p>

   <p class="footnote"><small>[<a name="fn-71" href="#fnd-71">71</a>]</small> This
function was written before <samp><span class="command">gawk</span></samp> acquired the ability to
split strings into single characters using <code>""</code> as the separator. 
We have left it alone, since using <code>substr()</code> is more portable.</p>

   <p class="footnote"><small>[<a name="fn-72" href="#fnd-72">72</a>]</small> It is often the case that password
information is stored in a network database.</p>

   <p class="footnote"><small>[<a name="fn-73" href="#fnd-73">73</a>]</small> It
also introduces a subtle bug;
if a match happens, we output the translated line, not the original.</p>

   <p class="footnote"><small>[<a name="fn-74" href="#fnd-74">74</a>]</small> This is the traditional usage. The
POSIX usage is different, but not relevant for what the program
aims to demonstrate.</p>

   <p class="footnote"><small>[<a name="fn-75" href="#fnd-75">75</a>]</small> <samp><span class="command">wc</span></samp> can't just use the value of
<code>FNR</code> in <code>endfile()</code>. If you examine
the code in
<a href="#Filetrans-Function">Filetrans Function</a>,
you will see that
<code>FNR</code> has already been reset by the time
<code>endfile()</code> is called.</p>

   <p class="footnote"><small>[<a name="fn-76" href="#fnd-76">76</a>]</small> Since <samp><span class="command">gawk</span></samp>
understands multibyte locales, this code counts characters, not bytes.</p>

   <p class="footnote"><small>[<a name="fn-77" href="#fnd-77">77</a>]</small> On some older
systems,
<samp><span class="command">tr</span></samp> may require that the lists be written as
range expressions enclosed in square brackets (&lsquo;<samp><span class="samp">[a-z]</span></samp>&rsquo;) and quoted,
to prevent the shell from attempting a file name expansion.  This is
not a feature.</p>

   <p class="footnote"><small>[<a name="fn-78" href="#fnd-78">78</a>]</small> This
program was written before <samp><span class="command">gawk</span></samp> acquired the ability to
split each character in a string into separate array elements.</p>

   <p class="footnote"><small>[<a name="fn-79" href="#fnd-79">79</a>]</small> &ldquo;Real world&rdquo; is defined as
&ldquo;a program actually used to get something done.&rdquo;</p>

   <p class="footnote"><small>[<a name="fn-80" href="#fnd-80">80</a>]</small> This program was written before <samp><span class="command">gawk</span></samp> had the
<code>gensub()</code> function. Consider how you might use it to simplify the code.</p>

   <p class="footnote"><small>[<a name="fn-81" href="#fnd-81">81</a>]</small> Fully explaining the <samp><span class="command">sh</span></samp> language is beyond
the scope of this book. We provide some minimal explanations, but see
a good shell programming book if you wish to understand things in more
depth.</p>

   <p class="footnote"><small>[<a name="fn-82" href="#fnd-82">82</a>]</small> On some very old versions of <samp><span class="command">awk</span></samp>, the test
&lsquo;<samp><span class="samp">getline junk &lt; t</span></samp>&rsquo; can loop forever if the file exists but is empty. 
Caveat emptor.</p>

   <p class="footnote"><small>[<a name="fn-83" href="#fnd-83">83</a>]</small> And Life was good.</p>

   <p class="footnote"><small>[<a name="fn-84" href="#fnd-84">84</a>]</small> And
thus was born the Campain for Rational Range Interpretation (or RRI). A number
of GNU tools, such as <samp><span class="command">grep</span></samp> and <samp><span class="command">sed</span></samp>, have either
implemented this change, or will soon.  Thanks to Karl Berry for coining the phrase
&ldquo;Rational Range Interpretation.&rdquo;</p>

   <p class="footnote"><small>[<a name="fn-85" href="#fnd-85">85</a>]</small> See
<a href="http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03_05">the standard</a>
and
<a href="http://pubs.opengroup.org/onlinepubs/9699919799/xrat/V4_xbd_chap09.html#tag_21_09_03_05">its rationale</a>.</p>

   <p class="footnote"><small>[<a name="fn-86" href="#fnd-86">86</a>]</small> The IA64
architecture is also known as &ldquo;Itanium.&rdquo;</p>

   <p class="footnote"><small>[<a name="fn-87" href="#fnd-87">87</a>]</small> This version is edited
slightly for presentation.  See
<samp><span class="file">extension/filefuncs.c</span></samp> in the <samp><span class="command">gawk</span></samp> distribution
for the complete version.</p>

   <p class="footnote"><small>[<a name="fn-88" href="#fnd-88">88</a>]</small> Compiled programs are typically written
in lower-level languages such as C, C++, or Ada,
and then translated, or <dfn>compiled</dfn>, into a form that
the computer can execute directly.</p>

   <p class="footnote"><small>[<a name="fn-89" href="#fnd-89">89</a>]</small> Pathological cases can require up to
752 digits (!), but we doubt that you need to worry about this.</p>

   <p class="footnote"><small>[<a name="fn-90" href="#fnd-90">90</a>]</small> You asked for it, you got it.</p>

   <hr></div>

</body></html>

